/*! For license information please see main.js.LICENSE.txt */
(()=>{var t,e,i={907:function(t,e){!function(t){"use strict";class e{constructor(t){this.controller_=t}get element(){return this.controller_.view.element}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(t){this.controller_.viewProps.set("disabled",t)}get hidden(){return this.controller_.viewProps.get("hidden")}set hidden(t){this.controller_.viewProps.set("hidden",t)}dispose(){this.controller_.viewProps.set("disposed",!0)}}class i{constructor(t){this.target=t}}class n extends i{constructor(t,e,i,n){super(t),this.value=e,this.presetKey=i,this.last=null==n||n}}class r extends i{constructor(t,e,i){super(t),this.value=e,this.presetKey=i}}class s extends i{constructor(t,e){super(t),this.expanded=e}}class a extends i{constructor(t,e){super(t),this.index=e}}function o(t){return null==t}function l(t,e){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}function h(t,e){let i=t;do{const t=Object.getOwnPropertyDescriptor(i,e);if(t&&(void 0!==t.set||!0===t.writable))return!0;i=Object.getPrototypeOf(i)}while(null!==i);return!1}const c={alreadydisposed:()=>"View has been already disposed",invalidparams:t=>`Invalid parameters for '${t.name}'`,nomatchingcontroller:t=>`No matching controller for '${t.key}'`,nomatchingview:t=>`No matching view for '${JSON.stringify(t.params)}'`,notbindable:()=>"Value is not bindable",propertynotfound:t=>`Property '${t.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class u{static alreadyDisposed(){return new u({type:"alreadydisposed"})}static notBindable(){return new u({type:"notbindable"})}static propertyNotFound(t){return new u({type:"propertynotfound",context:{name:t}})}static shouldNeverHappen(){return new u({type:"shouldneverhappen"})}constructor(t){var e;this.message=null!==(e=c[t.type](t.context))&&void 0!==e?e:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=t.type}}class d{constructor(t,e,i){this.obj_=t,this.key_=e,this.presetKey_=null!=i?i:e}static isBindable(t){return null!==t&&("object"==typeof t||"function"==typeof t)}get key(){return this.key_}get presetKey(){return this.presetKey_}read(){return this.obj_[this.key_]}write(t){this.obj_[this.key_]=t}writeProperty(t,e){const i=this.read();if(!d.isBindable(i))throw u.notBindable();if(!(t in i))throw u.propertyNotFound(t);i[t]=e}}class p extends e{get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}get title(){var t;return null!==(t=this.controller_.valueController.props.get("title"))&&void 0!==t?t:""}set title(t){this.controller_.valueController.props.set("title",t)}on(t,e){const n=e.bind(this);return this.controller_.valueController.emitter.on(t,(()=>{n(new i(this))})),this}}class m{constructor(){this.observers_={}}on(t,e){let i=this.observers_[t];return i||(i=this.observers_[t]=[]),i.push({handler:e}),this}off(t,e){const i=this.observers_[t];return i&&(this.observers_[t]=i.filter((t=>t.handler!==e))),this}emit(t,e){const i=this.observers_[t];i&&i.forEach((t=>{t.handler(e)}))}}const f="tp";function g(t){return(e,i)=>[f,"-",t,"v",e?`_${e}`:"",i?`-${i}`:""].join("")}function v(t){return t.rawValue}function x(t,e){var i,n;t.emitter.on("change",(i=v,n=e,t=>n(i(t)))),e(t.rawValue)}function _(t,e,i){x(t.value(e),i)}function q(t,e){return i=>{!function(t,e,i){i?t.classList.add(e):t.classList.remove(e)}(t,e,i)}}function y(t,e){x(t,(t=>{e.textContent=null!=t?t:""}))}const b=g("btn");class w{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(b()),e.viewProps.bindClassModifiers(this.element);const i=t.createElement("button");i.classList.add(b("b")),e.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i;const n=t.createElement("div");n.classList.add(b("t")),y(e.props.value("title"),n),this.buttonElement.appendChild(n)}}class M{constructor(t,e){this.emitter=new m,this.onClick_=this.onClick_.bind(this),this.props=e.props,this.viewProps=e.viewProps,this.view=new w(t,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class S{constructor(t,e){var i;this.constraint_=null==e?void 0:e.constraint,this.equals_=null!==(i=null==e?void 0:e.equals)&&void 0!==i?i:(t,e)=>t===e,this.emitter=new m,this.rawValue_=t}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(t){this.setRawValue(t,{forceEmit:!1,last:!0})}setRawValue(t,e){const i=null!=e?e:{forceEmit:!1,last:!0},n=this.constraint_?this.constraint_.constrain(t):t,r=this.rawValue_;(!this.equals_(r,n)||i.forceEmit)&&(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=n,this.emitter.emit("change",{options:i,previousRawValue:r,rawValue:n,sender:this}))}}class E{constructor(t){this.emitter=new m,this.value_=t}get rawValue(){return this.value_}set rawValue(t){this.setRawValue(t,{forceEmit:!1,last:!0})}setRawValue(t,e){const i=null!=e?e:{forceEmit:!1,last:!0},n=this.value_;(n!==t||i.forceEmit)&&(this.emitter.emit("beforechange",{sender:this}),this.value_=t,this.emitter.emit("change",{options:i,previousRawValue:n,rawValue:this.value_,sender:this}))}}function T(t,e){const i=null==e?void 0:e.constraint,n=null==e?void 0:e.equals;return i||n?new S(t,e):new E(t)}class A{constructor(t){this.emitter=new m,this.valMap_=t;for(const t in this.valMap_)this.valMap_[t].emitter.on("change",(()=>{this.emitter.emit("change",{key:t,sender:this})}))}static createCore(t){return Object.keys(t).reduce(((e,i)=>Object.assign(e,{[i]:T(t[i])})),{})}static fromObject(t){const e=this.createCore(t);return new A(e)}get(t){return this.valMap_[t].rawValue}set(t,e){this.valMap_[t].rawValue=e}value(t){return this.valMap_[t]}}function C(t){return e=>i=>{if(!e&&void 0===i)return{succeeded:!1,value:void 0};if(e&&void 0===i)return{succeeded:!0,value:void 0};const n=t(i);return void 0!==n?{succeeded:!0,value:n}:{succeeded:!1,value:void 0}}}function R(t){return{custom:e=>C(e)(t),boolean:C((t=>"boolean"==typeof t?t:void 0))(t),number:C((t=>"number"==typeof t?t:void 0))(t),string:C((t=>"string"==typeof t?t:void 0))(t),function:C((t=>"function"==typeof t?t:void 0))(t),constant:e=>C((t=>t===e?e:void 0))(t),raw:C((t=>t))(t),object:e=>C((t=>{if(null!==(i=t)&&"object"==typeof i)return function(t,e){return Object.keys(e).reduce(((i,n)=>{if(void 0===i)return;const r=(0,e[n])(t[n]);return r.succeeded?Object.assign(Object.assign({},i),{[n]:r.value}):void 0}),{})}(t,e);var i}))(t),array:e=>C((t=>{if(Array.isArray(t))return i=e,t.reduce(((t,e)=>{if(void 0===t)return;const n=i(e);return n.succeeded&&void 0!==n.value?[...t,n.value]:void 0}),[]);var i}))(t)}}const P={optional:R(!0),required:R(!1)};function z(t,e){const i=P.required.object(e)(t);return i.succeeded?i.value:void 0}function L(t){console.warn([`Missing '${t.key}' of ${t.target} in ${t.place}.`,"Please rebuild plugins with the latest core package."].join(" "))}class U{constructor(t){this.value_=t}static create(t){return[new U(t),(e,i)=>{t.setRawValue(e,i)}]}get emitter(){return this.value_.emitter}get rawValue(){return this.value_.rawValue}}const D=g("");function I(t,e){return q(t,D(void 0,e))}class N extends A{constructor(t){var e;super(t),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=U.create(T(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),null===(e=this.get("parent"))||void 0===e||e.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(t){var e,i,n;const r=null!=t?t:{};return new N(A.createCore({disabled:null!==(e=r.disabled)&&void 0!==e&&e,disposed:!1,hidden:null!==(i=r.hidden)&&void 0!==i&&i,parent:null!==(n=r.parent)&&void 0!==n?n:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(t){x(this.globalDisabled_,I(t,"disabled")),_(this,"hidden",I(t,"hidden"))}bindDisabled(t){x(this.globalDisabled_,(e=>{t.disabled=e}))}bindTabIndex(t){x(this.globalDisabled_,(e=>{t.tabIndex=e?-1:0}))}handleDispose(t){this.value("disposed").emitter.on("change",(e=>{e&&t()}))}getGlobalDisabled_(){const t=this.get("parent");return!!t&&t.globalDisabled.rawValue||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(t){var e;const i=t.previousRawValue;null==i||i.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),null===(e=this.get("parent"))||void 0===e||e.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}}const O=g(""),F={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class B{constructor(t){this.parent_=null,this.blade=t.blade,this.view=t.view,this.viewProps=t.viewProps;const e=this.view.element;this.blade.value("positions").emitter.on("change",(()=>{["veryfirst","first","last","verylast"].forEach((t=>{e.classList.remove(O(void 0,F[t]))})),this.blade.get("positions").forEach((t=>{e.classList.add(O(void 0,F[t]))}))})),this.viewProps.handleDispose((()=>{!function(t){t&&t.parentElement&&t.parentElement.removeChild(t)}(e)}))}get parent(){return this.parent_}set parent(t){this.parent_=t,"parent"in this.viewProps.valMap_?this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null):L({key:"parent",target:N.name,place:"BladeController.parent"})}}const k="http://www.w3.org/2000/svg";function V(t){t.offsetHeight}function H(t){return void 0!==t.ontouchstart}function G(){return globalThis.document}const W={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function j(t,e){const i=t.createElementNS(k,"svg");return i.innerHTML=W[e],i}function X(t,e,i){t.insertBefore(e,t.children[i])}function Y(t){t.parentElement&&t.parentElement.removeChild(t)}function K(t){for(;t.children.length>0;)t.removeChild(t.children[0])}function Z(t){return t.relatedTarget?t.relatedTarget:"explicitOriginalTarget"in t?t.explicitOriginalTarget:null}const J=g("lbl");class ${constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(J()),e.viewProps.bindClassModifiers(this.element);const i=t.createElement("div");i.classList.add(J("l")),_(e.props,"label",(e=>{o(e)?this.element.classList.add(J(void 0,"nol")):(this.element.classList.remove(J(void 0,"nol")),function(t){for(;t.childNodes.length>0;)t.removeChild(t.childNodes[0])}(i),i.appendChild(function(t,e){const i=t.createDocumentFragment();return e.split("\n").map((e=>t.createTextNode(e))).forEach(((e,n)=>{n>0&&i.appendChild(t.createElement("br")),i.appendChild(e)})),i}(t,e)))})),this.element.appendChild(i),this.labelElement=i;const n=t.createElement("div");n.classList.add(J("v")),this.element.appendChild(n),this.valueElement=n}}class Q extends B{constructor(t,e){const i=e.valueController.viewProps;super(Object.assign(Object.assign({},e),{view:new $(t,{props:e.props,viewProps:i}),viewProps:i})),this.props=e.props,this.valueController=e.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}const tt={id:"button",type:"blade",accept(t){const e=P,i=z(t,{title:e.required.string,view:e.required.constant("button"),label:e.optional.string});return i?{params:i}:null},controller:t=>new Q(t.document,{blade:t.blade,props:A.fromObject({label:t.params.label}),valueController:new M(t.document,{props:A.fromObject({title:t.params.title}),viewProps:t.viewProps})}),api:t=>t.controller instanceof Q&&t.controller.valueController instanceof M?new p(t.controller):null};class et extends B{constructor(t){super(t),this.value=t.value}}function it(){return new A({positions:T([],{equals:l})})}class nt extends A{constructor(t){super(t)}static create(t){const e={completed:!0,expanded:t,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},i=A.createCore(e);return new nt(i)}get styleExpanded(){var t;return null!==(t=this.get("temporaryExpanded"))&&void 0!==t?t:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const t=this.get("expandedHeight");return this.get("shouldFixHeight")&&!o(t)?`${t}px`:"auto"}bindExpandedClass(t,e){const i=()=>{this.styleExpanded?t.classList.add(e):t.classList.remove(e)};_(this,"expanded",i),_(this,"temporaryExpanded",i)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function rt(t,e){e.style.height=t.styleHeight}function st(t,e){t.value("expanded").emitter.on("beforechange",(()=>{if(t.set("completed",!1),o(t.get("expandedHeight"))){const i=function(t,e){let i=0;return function(t,e){const i=t.style.transition;t.style.transition="none",e(),t.style.transition=i}(e,(()=>{t.set("expandedHeight",null),t.set("temporaryExpanded",!0),V(e),i=e.clientHeight,t.set("temporaryExpanded",null),V(e)})),i}(t,e);i>0&&t.set("expandedHeight",i)}t.set("shouldFixHeight",!0),V(e)})),t.emitter.on("change",(()=>{rt(t,e)})),rt(t,e),e.addEventListener("transitionend",(e=>{"height"===e.propertyName&&t.cleanUpTransition()}))}class at extends e{constructor(t,e){super(t),this.rackApi_=e}}class ot{constructor(t){this.emitter=new m,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=t}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(t){for(const e of this.allItems())if(t(e))return e;return null}includes(t){return this.cache_.has(t)}add(t,e){if(this.includes(t))throw u.shouldNeverHappen();const i=void 0!==e?e:this.items_.length;this.items_.splice(i,0,t),this.cache_.add(t);const n=this.extract_(t);n&&(n.emitter.on("add",this.onSubListAdd_),n.emitter.on("remove",this.onSubListRemove_),n.allItems().forEach((t=>{this.cache_.add(t)}))),this.emitter.emit("add",{index:i,item:t,root:this,target:this})}remove(t){const e=this.items_.indexOf(t);if(e<0)return;this.items_.splice(e,1),this.cache_.delete(t);const i=this.extract_(t);i&&(i.emitter.off("add",this.onSubListAdd_),i.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:e,item:t,root:this,target:this})}onSubListAdd_(t){this.cache_.add(t.item),this.emitter.emit("add",{index:t.index,item:t.item,root:this,target:t.target})}onSubListRemove_(t){this.cache_.delete(t.item),this.emitter.emit("remove",{index:t.index,item:t.item,root:this,target:t.target})}}class lt extends e{constructor(t){super(t),this.onBindingChange_=this.onBindingChange_.bind(this),this.emitter_=new m,this.controller_.binding.emitter.on("change",this.onBindingChange_)}get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}on(t,e){const i=e.bind(this);return this.emitter_.on(t,(t=>{i(t.event)})),this}refresh(){this.controller_.binding.read()}onBindingChange_(t){const e=t.sender.target.read();this.emitter_.emit("change",{event:new n(this,e,this.controller_.binding.target.presetKey,t.options.last)})}}class ht extends Q{constructor(t,e){super(t,e),this.binding=e.binding}}class ct extends e{constructor(t){super(t),this.onBindingUpdate_=this.onBindingUpdate_.bind(this),this.emitter_=new m,this.controller_.binding.emitter.on("update",this.onBindingUpdate_)}get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}on(t,e){const i=e.bind(this);return this.emitter_.on(t,(t=>{i(t.event)})),this}refresh(){this.controller_.binding.read()}onBindingUpdate_(t){const e=t.sender.target.read();this.emitter_.emit("update",{event:new r(this,e,this.controller_.binding.target.presetKey)})}}class ut extends Q{constructor(t,e){super(t,e),this.binding=e.binding,this.viewProps.bindDisabled(this.binding.ticker),this.viewProps.handleDispose((()=>{this.binding.dispose()}))}}function dt(t){return t instanceof ft?t.apiSet_:t instanceof at?t.rackApi_.apiSet_:null}function pt(t,e){const i=t.find((t=>t.controller_===e));if(!i)throw u.shouldNeverHappen();return i}function mt(t,e,i){if(!d.isBindable(t))throw u.notBindable();return new d(t,e,i)}class ft extends e{constructor(t,e){super(t),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.onRackInputChange_=this.onRackInputChange_.bind(this),this.onRackMonitorUpdate_=this.onRackMonitorUpdate_.bind(this),this.emitter_=new m,this.apiSet_=new ot(dt),this.pool_=e;const i=this.controller_.rack;i.emitter.on("add",this.onRackAdd_),i.emitter.on("remove",this.onRackRemove_),i.emitter.on("inputchange",this.onRackInputChange_),i.emitter.on("monitorupdate",this.onRackMonitorUpdate_),i.children.forEach((t=>{this.setUpApi_(t)}))}get children(){return this.controller_.rack.children.map((t=>pt(this.apiSet_,t)))}addInput(t,e,i){const n=null!=i?i:{},r=this.controller_.view.element.ownerDocument,s=this.pool_.createInput(r,mt(t,e,n.presetKey),n),a=new lt(s);return this.add(a,n.index)}addMonitor(t,e,i){const n=null!=i?i:{},r=this.controller_.view.element.ownerDocument,s=this.pool_.createMonitor(r,mt(t,e),n),a=new ct(s);return this.add(a,n.index)}addFolder(t){return function(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"folder"}))}(this,t)}addButton(t){return function(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"button"}))}(this,t)}addSeparator(t){return function(t,e){const i=null!=e?e:{};return t.addBlade(Object.assign(Object.assign({},i),{view:"separator"}))}(this,t)}addTab(t){return function(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"tab"}))}(this,t)}add(t,e){this.controller_.rack.add(t.controller_,e);const i=this.apiSet_.find((e=>e.controller_===t.controller_));return i&&this.apiSet_.remove(i),this.apiSet_.add(t),t}remove(t){this.controller_.rack.remove(t.controller_)}addBlade(t){const e=this.controller_.view.element.ownerDocument,i=this.pool_.createBlade(e,t),n=this.pool_.createBladeApi(i);return this.add(n,t.index)}on(t,e){const i=e.bind(this);return this.emitter_.on(t,(t=>{i(t.event)})),this}setUpApi_(t){this.apiSet_.find((e=>e.controller_===t))||this.apiSet_.add(this.pool_.createBladeApi(t))}onRackAdd_(t){this.setUpApi_(t.bladeController)}onRackRemove_(t){if(t.isRoot){const e=pt(this.apiSet_,t.bladeController);this.apiSet_.remove(e)}}onRackInputChange_(t){const e=t.bladeController;if(e instanceof ht){const i=pt(this.apiSet_,e),r=e.binding;this.emitter_.emit("change",{event:new n(i,r.target.read(),r.target.presetKey,t.options.last)})}else if(e instanceof et){const i=pt(this.apiSet_,e);this.emitter_.emit("change",{event:new n(i,e.value.rawValue,void 0,t.options.last)})}}onRackMonitorUpdate_(t){if(!(t.bladeController instanceof ut))throw u.shouldNeverHappen();const e=pt(this.apiSet_,t.bladeController),i=t.bladeController.binding;this.emitter_.emit("update",{event:new r(e,i.target.read(),i.target.presetKey)})}}class gt extends at{constructor(t,e){super(t,new ft(t.rackController,e)),this.emitter_=new m,this.controller_.foldable.value("expanded").emitter.on("change",(t=>{this.emitter_.emit("fold",{event:new s(this,t.sender.rawValue)})})),this.rackApi_.on("change",(t=>{this.emitter_.emit("change",{event:t})})),this.rackApi_.on("update",(t=>{this.emitter_.emit("update",{event:t})}))}get expanded(){return this.controller_.foldable.get("expanded")}set expanded(t){this.controller_.foldable.set("expanded",t)}get title(){return this.controller_.props.get("title")}set title(t){this.controller_.props.set("title",t)}get children(){return this.rackApi_.children}addInput(t,e,i){return this.rackApi_.addInput(t,e,i)}addMonitor(t,e,i){return this.rackApi_.addMonitor(t,e,i)}addFolder(t){return this.rackApi_.addFolder(t)}addButton(t){return this.rackApi_.addButton(t)}addSeparator(t){return this.rackApi_.addSeparator(t)}addTab(t){return this.rackApi_.addTab(t)}add(t,e){return this.rackApi_.add(t,e)}remove(t){this.rackApi_.remove(t)}addBlade(t){return this.rackApi_.addBlade(t)}on(t,e){const i=e.bind(this);return this.emitter_.on(t,(t=>{i(t.event)})),this}}class vt extends B{constructor(t){super({blade:t.blade,view:t.view,viewProps:t.rackController.viewProps}),this.rackController=t.rackController}}class xt{constructor(t,e){const i=g(e.viewName);this.element=t.createElement("div"),this.element.classList.add(i()),e.viewProps.bindClassModifiers(this.element)}}function _t(t){return t instanceof bt?t.rack:t instanceof vt?t.rackController.rack:null}function qt(t){const e=_t(t);return e?e.bcSet_:null}class yt{constructor(t){var e,i;this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildInputChange_=this.onChildInputChange_.bind(this),this.onChildMonitorUpdate_=this.onChildMonitorUpdate_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onDescendantLayout_=this.onDescendantLayout_.bind(this),this.onDescendantInputChange_=this.onDescendantInputChange_.bind(this),this.onDescendantMonitorUpdate_=this.onDescendantMonitorUpdate_.bind(this),this.emitter=new m,this.blade_=null!==(e=t.blade)&&void 0!==e?e:null,null===(i=this.blade_)||void 0===i||i.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=t.viewProps,this.bcSet_=new ot(qt),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(t,e){var i;null===(i=t.parent)||void 0===i||i.remove(t),h(t,"parent")?t.parent=this:(t.parent_=this,L({key:"parent",target:"BladeController",place:"BladeRack.add"})),this.bcSet_.add(t,e)}remove(t){h(t,"parent")?t.parent=null:(t.parent_=null,L({key:"parent",target:"BladeController",place:"BladeRack.remove"})),this.bcSet_.remove(t)}find(t){return this.bcSet_.allItems().filter((e=>e instanceof t))}onSetAdd_(t){this.updatePositions_();const e=t.target===t.root;if(this.emitter.emit("add",{bladeController:t.item,index:t.index,isRoot:e,sender:this}),!e)return;const i=t.item;if(i.viewProps.emitter.on("change",this.onChildViewPropsChange_),i.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),i.viewProps.handleDispose(this.onChildDispose_),i instanceof ht)i.binding.emitter.on("change",this.onChildInputChange_);else if(i instanceof ut)i.binding.emitter.on("update",this.onChildMonitorUpdate_);else if(i instanceof et)i.value.emitter.on("change",this.onChildValueChange_);else{const t=_t(i);if(t){const e=t.emitter;e.on("layout",this.onDescendantLayout_),e.on("inputchange",this.onDescendantInputChange_),e.on("monitorupdate",this.onDescendantMonitorUpdate_)}}}onSetRemove_(t){this.updatePositions_();const e=t.target===t.root;if(this.emitter.emit("remove",{bladeController:t.item,isRoot:e,sender:this}),!e)return;const i=t.item;if(i instanceof ht)i.binding.emitter.off("change",this.onChildInputChange_);else if(i instanceof ut)i.binding.emitter.off("update",this.onChildMonitorUpdate_);else if(i instanceof et)i.value.emitter.off("change",this.onChildValueChange_);else{const t=_t(i);if(t){const e=t.emitter;e.off("layout",this.onDescendantLayout_),e.off("inputchange",this.onDescendantInputChange_),e.off("monitorupdate",this.onDescendantMonitorUpdate_)}}}updatePositions_(){const t=this.bcSet_.items.filter((t=>!t.viewProps.get("hidden"))),e=t[0],i=t[t.length-1];this.bcSet_.items.forEach((t=>{const n=[];t===e&&(n.push("first"),this.blade_&&!this.blade_.get("positions").includes("veryfirst")||n.push("veryfirst")),t===i&&(n.push("last"),this.blade_&&!this.blade_.get("positions").includes("verylast")||n.push("verylast")),t.blade.set("positions",n)}))}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(t){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter((t=>t.viewProps.get("disposed"))).forEach((t=>{this.bcSet_.remove(t)}))}onChildInputChange_(t){const e=function(t,e){for(let i=0;i<t.length;i++){const n=t[i];if(n instanceof ht&&n.binding===e)return n}return null}(this.find(ht),t.sender);if(!e)throw u.alreadyDisposed();this.emitter.emit("inputchange",{bladeController:e,options:t.options,sender:this})}onChildMonitorUpdate_(t){const e=function(t,e){for(let i=0;i<t.length;i++){const n=t[i];if(n instanceof ut&&n.binding===e)return n}return null}(this.find(ut),t.sender);if(!e)throw u.alreadyDisposed();this.emitter.emit("monitorupdate",{bladeController:e,sender:this})}onChildValueChange_(t){const e=function(t,e){for(let i=0;i<t.length;i++){const n=t[i];if(n instanceof et&&n.value===e)return n}return null}(this.find(et),t.sender);if(!e)throw u.alreadyDisposed();this.emitter.emit("inputchange",{bladeController:e,options:t.options,sender:this})}onDescendantLayout_(t){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onDescendantInputChange_(t){this.emitter.emit("inputchange",{bladeController:t.bladeController,options:t.options,sender:this})}onDescendantMonitorUpdate_(t){this.emitter.emit("monitorupdate",{bladeController:t.bladeController,sender:this})}onBladePositionsChange_(){this.updatePositions_()}}class bt extends B{constructor(t,e){super(Object.assign(Object.assign({},e),{view:new xt(t,{viewName:"brk",viewProps:e.viewProps})})),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const i=new yt({blade:e.root?void 0:e.blade,viewProps:e.viewProps});i.emitter.on("add",this.onRackAdd_),i.emitter.on("remove",this.onRackRemove_),this.rack=i,this.viewProps.handleDispose((()=>{for(let t=this.rack.children.length-1;t>=0;t--)this.rack.children[t].viewProps.set("disposed",!0)}))}onRackAdd_(t){t.isRoot&&X(this.view.element,t.bladeController.view.element,t.index)}onRackRemove_(t){t.isRoot&&Y(t.bladeController.view.element)}}const wt=g("cnt");class Mt{constructor(t,e){var i;this.className_=g(null!==(i=e.viewName)&&void 0!==i?i:"fld"),this.element=t.createElement("div"),this.element.classList.add(this.className_(),wt()),e.viewProps.bindClassModifiers(this.element),this.foldable_=e.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),_(this.foldable_,"completed",q(this.element,this.className_(void 0,"cpl")));const n=t.createElement("button");n.classList.add(this.className_("b")),_(e.props,"title",(t=>{o(t)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))})),e.viewProps.bindDisabled(n),this.element.appendChild(n),this.buttonElement=n;const r=t.createElement("div");r.classList.add(this.className_("i")),this.element.appendChild(r);const s=t.createElement("div");s.classList.add(this.className_("t")),y(e.props.value("title"),s),this.buttonElement.appendChild(s),this.titleElement=s;const a=t.createElement("div");a.classList.add(this.className_("m")),this.buttonElement.appendChild(a);const l=e.containerElement;l.classList.add(this.className_("c")),this.element.appendChild(l),this.containerElement=l}}class St extends vt{constructor(t,e){var i;const n=nt.create(null===(i=e.expanded)||void 0===i||i),r=new bt(t,{blade:e.blade,root:e.root,viewProps:e.viewProps});super(Object.assign(Object.assign({},e),{rackController:r,view:new Mt(t,{containerElement:r.view.element,foldable:n,props:e.props,viewName:e.root?"rot":void 0,viewProps:e.viewProps})})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=e.props,this.foldable=n,st(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",(()=>{this.foldable.cleanUpTransition()})),this.rackController.rack.emitter.on("remove",(()=>{this.foldable.cleanUpTransition()})),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}const Et={id:"folder",type:"blade",accept(t){const e=P,i=z(t,{title:e.required.string,view:e.required.constant("folder"),expanded:e.optional.boolean});return i?{params:i}:null},controller:t=>new St(t.document,{blade:t.blade,expanded:t.params.expanded,props:A.fromObject({title:t.params.title}),viewProps:t.viewProps}),api:t=>t.controller instanceof St?new gt(t.controller,t.pool):null};class Tt extends et{constructor(t,e){const i=e.valueController.viewProps;super(Object.assign(Object.assign({},e),{value:e.valueController.value,view:new $(t,{props:e.props,viewProps:i}),viewProps:i})),this.props=e.props,this.valueController=e.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}class At extends e{}const Ct=g("spr");class Rt{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Ct()),e.viewProps.bindClassModifiers(this.element);const i=t.createElement("hr");i.classList.add(Ct("r")),this.element.appendChild(i)}}class Pt extends B{constructor(t,e){super(Object.assign(Object.assign({},e),{view:new Rt(t,{viewProps:e.viewProps})}))}}const zt={id:"separator",type:"blade",accept(t){const e=z(t,{view:P.required.constant("separator")});return e?{params:e}:null},controller:t=>new Pt(t.document,{blade:t.blade,viewProps:t.viewProps}),api:t=>t.controller instanceof Pt?new At(t.controller):null},Lt=g("tbi");class Ut{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Lt()),e.viewProps.bindClassModifiers(this.element),_(e.props,"selected",(t=>{t?this.element.classList.add(Lt(void 0,"sel")):this.element.classList.remove(Lt(void 0,"sel"))}));const i=t.createElement("button");i.classList.add(Lt("b")),e.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i;const n=t.createElement("div");n.classList.add(Lt("t")),y(e.props.value("title"),n),this.buttonElement.appendChild(n),this.titleElement=n}}class Dt{constructor(t,e){this.emitter=new m,this.onClick_=this.onClick_.bind(this),this.props=e.props,this.viewProps=e.viewProps,this.view=new Ut(t,{props:e.props,viewProps:e.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class It{constructor(t,e){this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new Dt(t,{props:e.itemProps,viewProps:N.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.cc_=new bt(t,{blade:it(),viewProps:N.create()}),this.props=e.props,_(this.props,"selected",(t=>{this.itemController.props.set("selected",t),this.contentController.viewProps.set("hidden",!t)}))}get itemController(){return this.ic_}get contentController(){return this.cc_}onItemClick_(){this.props.set("selected",!0)}}class Nt{constructor(t,e){this.controller_=t,this.rackApi_=e}get title(){var t;return null!==(t=this.controller_.itemController.props.get("title"))&&void 0!==t?t:""}set title(t){this.controller_.itemController.props.set("title",t)}get selected(){return this.controller_.props.get("selected")}set selected(t){this.controller_.props.set("selected",t)}get children(){return this.rackApi_.children}addButton(t){return this.rackApi_.addButton(t)}addFolder(t){return this.rackApi_.addFolder(t)}addSeparator(t){return this.rackApi_.addSeparator(t)}addTab(t){return this.rackApi_.addTab(t)}add(t,e){this.rackApi_.add(t,e)}remove(t){this.rackApi_.remove(t)}addInput(t,e,i){return this.rackApi_.addInput(t,e,i)}addMonitor(t,e,i){return this.rackApi_.addMonitor(t,e,i)}addBlade(t){return this.rackApi_.addBlade(t)}}class Ot extends at{constructor(t,e){super(t,new ft(t.rackController,e)),this.onPageAdd_=this.onPageAdd_.bind(this),this.onPageRemove_=this.onPageRemove_.bind(this),this.onSelect_=this.onSelect_.bind(this),this.emitter_=new m,this.pageApiMap_=new Map,this.rackApi_.on("change",(t=>{this.emitter_.emit("change",{event:t})})),this.rackApi_.on("update",(t=>{this.emitter_.emit("update",{event:t})})),this.controller_.tab.selectedIndex.emitter.on("change",this.onSelect_),this.controller_.pageSet.emitter.on("add",this.onPageAdd_),this.controller_.pageSet.emitter.on("remove",this.onPageRemove_),this.controller_.pageSet.items.forEach((t=>{this.setUpPageApi_(t)}))}get pages(){return this.controller_.pageSet.items.map((t=>{const e=this.pageApiMap_.get(t);if(!e)throw u.shouldNeverHappen();return e}))}addPage(t){const e=this.controller_.view.element.ownerDocument,i=new It(e,{itemProps:A.fromObject({selected:!1,title:t.title}),props:A.fromObject({selected:!1})});this.controller_.add(i,t.index);const n=this.pageApiMap_.get(i);if(!n)throw u.shouldNeverHappen();return n}removePage(t){this.controller_.remove(t)}on(t,e){const i=e.bind(this);return this.emitter_.on(t,(t=>{i(t.event)})),this}setUpPageApi_(t){const e=this.rackApi_.apiSet_.find((e=>e.controller_===t.contentController));if(!e)throw u.shouldNeverHappen();const i=new Nt(t,e);this.pageApiMap_.set(t,i)}onPageAdd_(t){this.setUpPageApi_(t.item)}onPageRemove_(t){if(!this.pageApiMap_.get(t.item))throw u.shouldNeverHappen();this.pageApiMap_.delete(t.item)}onSelect_(t){this.emitter_.emit("select",{event:new a(this,t.rawValue)})}}class Ft{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=T(!0),this.selectedIndex=T(-1),this.items_=[]}add(t,e){const i=null!=e?e:this.items_.length;this.items_.splice(i,0,t),t.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(t){const e=this.items_.indexOf(t);e<0||(this.items_.splice(e,1),t.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(0===this.items_.length)return this.selectedIndex.rawValue=-1,void(this.empty.rawValue=!0);const t=this.items_.findIndex((t=>t.rawValue));t<0?(this.items_.forEach(((t,e)=>{t.rawValue=0===e})),this.selectedIndex.rawValue=0):(this.items_.forEach(((e,i)=>{e.rawValue=i===t})),this.selectedIndex.rawValue=t),this.empty.rawValue=!1}onItemSelectedChange_(t){if(t.rawValue){const e=this.items_.findIndex((e=>e===t.sender));this.items_.forEach(((t,i)=>{t.rawValue=i===e})),this.selectedIndex.rawValue=e}else this.keepSelection_()}}const Bt=g("tab");class kt{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Bt(),wt()),e.viewProps.bindClassModifiers(this.element),x(e.empty,q(this.element,Bt(void 0,"nop")));const i=t.createElement("div");i.classList.add(Bt("t")),this.element.appendChild(i),this.itemsElement=i;const n=t.createElement("div");n.classList.add(Bt("i")),this.element.appendChild(n);const r=e.contentsElement;r.classList.add(Bt("c")),this.element.appendChild(r),this.contentsElement=r}}class Vt extends vt{constructor(t,e){const i=new bt(t,{blade:e.blade,viewProps:e.viewProps}),n=new Ft;super({blade:e.blade,rackController:i,view:new kt(t,{contentsElement:i.view.element,empty:n.empty,viewProps:e.viewProps})}),this.onPageAdd_=this.onPageAdd_.bind(this),this.onPageRemove_=this.onPageRemove_.bind(this),this.pageSet_=new ot((()=>null)),this.pageSet_.emitter.on("add",this.onPageAdd_),this.pageSet_.emitter.on("remove",this.onPageRemove_),this.tab=n}get pageSet(){return this.pageSet_}add(t,e){this.pageSet_.add(t,e)}remove(t){this.pageSet_.remove(this.pageSet_.items[t])}onPageAdd_(t){const e=t.item;X(this.view.itemsElement,e.itemController.view.element,t.index),e.itemController.viewProps.set("parent",this.viewProps),this.rackController.rack.add(e.contentController,t.index),this.tab.add(e.props.value("selected"))}onPageRemove_(t){const e=t.item;Y(e.itemController.view.element),e.itemController.viewProps.set("parent",null),this.rackController.rack.remove(e.contentController),this.tab.remove(e.props.value("selected"))}}const Ht={id:"tab",type:"blade",accept(t){const e=P,i=z(t,{pages:e.required.array(e.required.object({title:e.required.string})),view:e.required.constant("tab")});return i&&0!==i.pages.length?{params:i}:null},controller(t){const e=new Vt(t.document,{blade:t.blade,viewProps:t.viewProps});return t.params.pages.forEach((i=>{const n=new It(t.document,{itemProps:A.fromObject({selected:!1,title:i.title}),props:A.fromObject({selected:!1})});e.add(n)})),e},api:t=>t.controller instanceof Vt?new Ot(t.controller,t.pool):null};class Gt{constructor(){this.disabled=!1,this.emitter=new m}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}}class Wt{constructor(t,e){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=t,this.emitter=new m,this.interval_=e,this.setTimer_()}get disabled(){return this.disabled_}set disabled(t){this.disabled_=t,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(null===this.timerId_)return;const t=this.doc_.defaultView;t&&t.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const t=this.doc_.defaultView;t&&(this.timerId_=t.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}}class jt{constructor(t){this.onValueChange_=this.onValueChange_.bind(this),this.reader=t.reader,this.writer=t.writer,this.emitter=new m,this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.target=t.target,this.read()}read(){const t=this.target.read();void 0!==t&&(this.value.rawValue=this.reader(t))}write_(t){this.writer(this.target,t)}onValueChange_(t){this.write_(t.rawValue),this.emitter.emit("change",{options:t.options,rawValue:t.rawValue,sender:this})}}function Xt(t,e){for(;t.length<e;)t.push(void 0)}function Yt(t){const e=[];return Xt(e,t),T(e)}function Kt(t){const e=t.indexOf(void 0);return e<0?t:t.slice(0,e)}class Zt{constructor(t){this.onTick_=this.onTick_.bind(this),this.reader_=t.reader,this.target=t.target,this.emitter=new m,this.value=t.value,this.ticker=t.ticker,this.ticker.emitter.on("tick",this.onTick_),this.read()}dispose(){this.ticker.dispose()}read(){const t=this.target.read();if(void 0===t)return;const e=this.value.rawValue,i=this.reader_(t);this.value.rawValue=function(t,e){const i=[...Kt(t),e];return i.length>t.length?i.splice(0,i.length-t.length):Xt(i,t.length),i}(e,i),this.emitter.emit("update",{rawValue:i,sender:this})}onTick_(t){this.read()}}class Jt{constructor(t){this.constraints=t}constrain(t){return this.constraints.reduce(((t,e)=>e.constrain(t)),t)}}function $t(t,e){if(t instanceof e)return t;if(t instanceof Jt){const i=t.constraints.reduce(((t,i)=>t||(i instanceof e?i:null)),null);if(i)return i}return null}class Qt{constructor(t){this.values=A.fromObject({max:t.max,min:t.min})}constrain(t){const e=this.values.get("max"),i=this.values.get("min");return Math.min(Math.max(t,i),e)}}class te{constructor(t){this.values=A.fromObject({options:t})}get options(){return this.values.get("options")}constrain(t){const e=this.values.get("options");return 0===e.length||e.filter((e=>e.value===t)).length>0?t:e[0].value}}class ee{constructor(t){this.values=A.fromObject({max:t.max,min:t.min})}get maxValue(){return this.values.get("max")}get minValue(){return this.values.get("min")}constrain(t){const e=this.values.get("max"),i=this.values.get("min");let n=t;return o(i)||(n=Math.max(n,i)),o(e)||(n=Math.min(n,e)),n}}class ie{constructor(t,e=0){this.step=t,this.origin=e}constrain(t){const e=this.origin%this.step;return e+Math.round((t-e)/this.step)*this.step}}const ne=g("lst");class re{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.props_=e.props,this.element=t.createElement("div"),this.element.classList.add(ne()),e.viewProps.bindClassModifiers(this.element);const i=t.createElement("select");i.classList.add(ne("s")),_(this.props_,"options",(e=>{K(i),e.forEach(((e,n)=>{const r=t.createElement("option");r.dataset.index=String(n),r.textContent=e.text,r.value=String(e.value),i.appendChild(r)}))})),e.viewProps.bindDisabled(i),this.element.appendChild(i),this.selectElement=i;const n=t.createElement("div");n.classList.add(ne("m")),n.appendChild(j(t,"dropdown")),this.element.appendChild(n),e.value.emitter.on("change",this.onValueChange_),this.value_=e.value,this.update_()}update_(){this.selectElement.value=String(this.value_.rawValue)}onValueChange_(){this.update_()}}class se{constructor(t,e){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=e.props,this.value=e.value,this.viewProps=e.viewProps,this.view=new re(t,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(t){const e=t.currentTarget.selectedOptions.item(0);if(!e)return;const i=Number(e.dataset.index);this.value.rawValue=this.props.get("options")[i].value}}const ae=g("pop");class oe{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(ae()),e.viewProps.bindClassModifiers(this.element),x(e.shows,q(this.element,ae(void 0,"v")))}}class le{constructor(t,e){this.shows=T(!1),this.viewProps=e.viewProps,this.view=new oe(t,{shows:this.shows,viewProps:this.viewProps})}}const he=g("txt");class ce{constructor(t,e){this.onChange_=this.onChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(he()),e.viewProps.bindClassModifiers(this.element),this.props_=e.props,this.props_.emitter.on("change",this.onChange_);const i=t.createElement("input");i.classList.add(he("i")),i.type="text",e.viewProps.bindDisabled(i),this.element.appendChild(i),this.inputElement=i,e.value.emitter.on("change",this.onChange_),this.value_=e.value,this.refresh()}refresh(){const t=this.props_.get("formatter");this.inputElement.value=t(this.value_.rawValue)}onChange_(){this.refresh()}}class ue{constructor(t,e){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=e.parser,this.props=e.props,this.value=e.value,this.viewProps=e.viewProps,this.view=new ce(t,{props:e.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(t){const e=t.currentTarget.value,i=this.parser_(e);o(i)||(this.value.rawValue=i),this.view.refresh()}}function de(t){return"false"!==t&&!!t}function pe(t){return function(t){return String(t)}(t)}class me{constructor(t){this.text=t}evaluate(){return Number(this.text)}toString(){return this.text}}const fe={"**":(t,e)=>Math.pow(t,e),"*":(t,e)=>t*e,"/":(t,e)=>t/e,"%":(t,e)=>t%e,"+":(t,e)=>t+e,"-":(t,e)=>t-e,"<<":(t,e)=>t<<e,">>":(t,e)=>t>>e,">>>":(t,e)=>t>>>e,"&":(t,e)=>t&e,"^":(t,e)=>t^e,"|":(t,e)=>t|e};class ge{constructor(t,e,i){this.left=e,this.operator=t,this.right=i}evaluate(){const t=fe[this.operator];if(!t)throw new Error(`unexpected binary operator: '${this.operator}`);return t(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const ve={"+":t=>t,"-":t=>-t,"~":t=>~t};class xe{constructor(t,e){this.operator=t,this.expression=e}evaluate(){const t=ve[this.operator];if(!t)throw new Error(`unexpected unary operator: '${this.operator}`);return t(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function _e(t){return(e,i)=>{for(let n=0;n<t.length;n++){const r=t[n](e,i);if(""!==r)return r}return""}}function qe(t,e){var i;const n=t.substr(e).match(/^\s+/);return null!==(i=n&&n[0])&&void 0!==i?i:""}function ye(t,e){var i;const n=t.substr(e).match(/^[0-9]+/);return null!==(i=n&&n[0])&&void 0!==i?i:""}function be(t,e){const i=t.substr(e,1);if(e+=1,"e"!==i.toLowerCase())return"";const n=function(t,e){const i=ye(t,e);if(""!==i)return i;const n=t.substr(e,1);if("-"!==n&&"+"!==n)return"";const r=ye(t,e+=1);return""===r?"":n+r}(t,e);return""===n?"":i+n}function we(t,e){const i=t.substr(e,1);if("0"===i)return i;const n=function(t,e){const i=t.substr(e,1);return i.match(/^[1-9]$/)?i:""}(t,e);return e+=n.length,""===n?"":n+ye(t,e)}const Me=_e([function(t,e){const i=we(t,e);if(e+=i.length,""===i)return"";const n=t.substr(e,1);if(e+=n.length,"."!==n)return"";const r=ye(t,e);return i+n+r+be(t,e+=r.length)},function(t,e){const i=t.substr(e,1);if(e+=i.length,"."!==i)return"";const n=ye(t,e);return e+=n.length,""===n?"":i+n+be(t,e)},function(t,e){const i=we(t,e);return e+=i.length,""===i?"":i+be(t,e)}]);const Se=_e([function(t,e){const i=t.substr(e,2);if(e+=i.length,"0b"!==i.toLowerCase())return"";const n=function(t,e){var i;const n=t.substr(e).match(/^[01]+/);return null!==(i=n&&n[0])&&void 0!==i?i:""}(t,e);return""===n?"":i+n},function(t,e){const i=t.substr(e,2);if(e+=i.length,"0o"!==i.toLowerCase())return"";const n=function(t,e){var i;const n=t.substr(e).match(/^[0-7]+/);return null!==(i=n&&n[0])&&void 0!==i?i:""}(t,e);return""===n?"":i+n},function(t,e){const i=t.substr(e,2);if(e+=i.length,"0x"!==i.toLowerCase())return"";const n=function(t,e){var i;const n=t.substr(e).match(/^[0-9a-f]+/i);return null!==(i=n&&n[0])&&void 0!==i?i:""}(t,e);return""===n?"":i+n}]),Ee=_e([Se,Me]);function Te(t,e){var i;return null!==(i=function(t,e){const i=Ee(t,e);return e+=i.length,""===i?null:{evaluable:new me(i),cursor:e}}(t,e))&&void 0!==i?i:function(t,e){const i=t.substr(e,1);if(e+=i.length,"("!==i)return null;const n=Re(t,e);if(!n)return null;e=n.cursor,e+=qe(t,e).length;const r=t.substr(e,1);return e+=r.length,")"!==r?null:{evaluable:n.evaluable,cursor:e}}(t,e)}function Ae(t,e,i){i+=qe(e,i).length;const n=t.filter((t=>e.startsWith(t,i)))[0];return n?(i+=n.length,{cursor:i+=qe(e,i).length,operator:n}):null}const Ce=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce(((t,e)=>function(t,e){return(i,n)=>{const r=t(i,n);if(!r)return null;n=r.cursor;let s=r.evaluable;for(;;){const r=Ae(e,i,n);if(!r)break;n=r.cursor;const a=t(i,n);if(!a)return null;n=a.cursor,s=new ge(r.operator,s,a.evaluable)}return s?{cursor:n,evaluable:s}:null}}(t,e)),(function t(e,i){const n=Te(e,i);if(n)return n;const r=e.substr(i,1);if(i+=r.length,"+"!==r&&"-"!==r&&"~"!==r)return null;const s=t(e,i);return s?{cursor:i=s.cursor,evaluable:new xe(r,s.evaluable)}:null}));function Re(t,e){return e+=qe(t,e).length,Ce(t,e)}function Pe(t){var e;const i=function(t){const e=Re(t,0);return e?e.cursor+qe(t,e.cursor).length!==t.length?null:e.evaluable:null}(t);return null!==(e=null==i?void 0:i.evaluate())&&void 0!==e?e:null}function ze(t){if("number"==typeof t)return t;if("string"==typeof t){const e=Pe(t);if(!o(e))return e}return 0}function Le(t){return String(t)}function Ue(t){return e=>e.toFixed(Math.max(Math.min(t,20),0))}const De=Ue(0);function Ie(t){return De(t)+"%"}function Ne(t){return String(t)}function Oe(t){return t}function Fe({primary:t,secondary:e,forward:i,backward:n}){let r=!1;function s(t){r||(r=!0,t(),r=!1)}t.emitter.on("change",(n=>{s((()=>{e.setRawValue(i(t,e),n.options)}))})),e.emitter.on("change",(r=>{s((()=>{t.setRawValue(n(t,e),r.options)})),s((()=>{e.setRawValue(i(t,e),r.options)}))})),s((()=>{e.setRawValue(i(t,e),{forceEmit:!1,last:!0})}))}function Be(t,e){const i=t*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+i:e.downKey?-i:0}function ke(t){return{altKey:t.altKey,downKey:"ArrowDown"===t.key,shiftKey:t.shiftKey,upKey:"ArrowUp"===t.key}}function Ve(t){return{altKey:t.altKey,downKey:"ArrowLeft"===t.key,shiftKey:t.shiftKey,upKey:"ArrowRight"===t.key}}function He(t){return function(t){return"ArrowUp"===t||"ArrowDown"===t}(t)||"ArrowLeft"===t||"ArrowRight"===t}function Ge(t,e){var i,n;const r=e.ownerDocument.defaultView,s=e.getBoundingClientRect();return{x:t.pageX-((null!==(i=r&&r.scrollX)&&void 0!==i?i:0)+s.left),y:t.pageY-((null!==(n=r&&r.scrollY)&&void 0!==n?n:0)+s.top)}}class We{constructor(t){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=t,this.emitter=new m,t.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),t.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),t.addEventListener("touchend",this.onTouchEnd_),t.addEventListener("mousedown",this.onMouseDown_)}computePosition_(t){const e=this.elem_.getBoundingClientRect();return{bounds:{width:e.width,height:e.height},point:t?{x:t.x,y:t.y}:null}}onMouseDown_(t){var e;t.preventDefault(),null===(e=t.currentTarget)||void 0===e||e.focus();const i=this.elem_.ownerDocument;i.addEventListener("mousemove",this.onDocumentMouseMove_),i.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(Ge(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onDocumentMouseMove_(t){this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(Ge(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onDocumentMouseUp_(t){const e=this.elem_.ownerDocument;e.removeEventListener("mousemove",this.onDocumentMouseMove_),e.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(Ge(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onTouchStart_(t){t.preventDefault();const e=t.targetTouches.item(0),i=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(e?{x:e.clientX-i.left,y:e.clientY-i.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=e}onTouchMove_(t){const e=t.targetTouches.item(0),i=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(e?{x:e.clientX-i.left,y:e.clientY-i.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=e}onTouchEnd_(t){var e;const i=null!==(e=t.targetTouches.item(0))&&void 0!==e?e:this.lastTouch_,n=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(i?{x:i.clientX-n.left,y:i.clientY-n.top}:void 0),sender:this,shiftKey:t.shiftKey})}}function je(t,e,i,n,r){return n+(t-e)/(i-e)*(r-n)}function Xe(t){return String(t.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function Ye(t,e,i){return Math.min(Math.max(t,e),i)}function Ke(t,e){return(t%e+e)%e}const Ze=g("txt");class Je{constructor(t,e){this.onChange_=this.onChange_.bind(this),this.props_=e.props,this.props_.emitter.on("change",this.onChange_),this.element=t.createElement("div"),this.element.classList.add(Ze(),Ze(void 0,"num")),e.arrayPosition&&this.element.classList.add(Ze(void 0,e.arrayPosition)),e.viewProps.bindClassModifiers(this.element);const i=t.createElement("input");i.classList.add(Ze("i")),i.type="text",e.viewProps.bindDisabled(i),this.element.appendChild(i),this.inputElement=i,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=e.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(Ze()),this.inputElement.classList.add(Ze("i"));const n=t.createElement("div");n.classList.add(Ze("k")),this.element.appendChild(n),this.knobElement=n;const r=t.createElementNS(k,"svg");r.classList.add(Ze("g")),this.knobElement.appendChild(r);const s=t.createElementNS(k,"path");s.classList.add(Ze("gb")),r.appendChild(s),this.guideBodyElem_=s;const a=t.createElementNS(k,"path");a.classList.add(Ze("gh")),r.appendChild(a),this.guideHeadElem_=a;const o=t.createElement("div");o.classList.add(g("tt")()),this.knobElement.appendChild(o),this.tooltipElem_=o,e.value.emitter.on("change",this.onChange_),this.value=e.value,this.refresh()}onDraggingChange_(t){if(null===t.rawValue)return void this.element.classList.remove(Ze(void 0,"drg"));this.element.classList.add(Ze(void 0,"drg"));const e=t.rawValue/this.props_.get("draggingScale"),i=e+(e>0?-1:e<0?1:0),n=Ye(-i,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${i+n},0 L${i},4 L${i+n},8`,`M ${e},-1 L${e},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${e},4`);const r=this.props_.get("formatter");this.tooltipElem_.textContent=r(this.value.rawValue),this.tooltipElem_.style.left=`${e}px`}refresh(){const t=this.props_.get("formatter");this.inputElement.value=t(this.value.rawValue)}onChange_(){this.refresh()}}class $e{constructor(t,e){var i;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=e.baseStep,this.parser_=e.parser,this.props=e.props,this.sliderProps_=null!==(i=e.sliderProps)&&void 0!==i?i:null,this.value=e.value,this.viewProps=e.viewProps,this.dragging_=T(null),this.view=new Je(t,{arrayPosition:e.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const n=new We(this.view.knobElement);n.emitter.on("down",this.onPointerDown_),n.emitter.on("move",this.onPointerMove_),n.emitter.on("up",this.onPointerUp_)}constrainValue_(t){var e,i;const n=null===(e=this.sliderProps_)||void 0===e?void 0:e.get("minValue"),r=null===(i=this.sliderProps_)||void 0===i?void 0:i.get("maxValue");let s=t;return void 0!==n&&(s=Math.max(s,n)),void 0!==r&&(s=Math.min(s,r)),s}onInputChange_(t){const e=t.currentTarget.value,i=this.parser_(e);o(i)||(this.value.rawValue=this.constrainValue_(i)),this.view.refresh()}onInputKeyDown_(t){const e=Be(this.baseStep_,ke(t));0!==e&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+e),{forceEmit:!1,last:!1})}onInputKeyUp_(t){0!==Be(this.baseStep_,ke(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(t){if(!t.point)return null;const e=t.point.x-t.bounds.width/2;return this.constrainValue_(this.originRawValue_+e*this.props.get("draggingScale"))}onPointerMove_(t){const e=this.computeDraggingValue_(t.data);null!==e&&(this.value.setRawValue(e,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(t){const e=this.computeDraggingValue_(t.data);null!==e&&(this.value.setRawValue(e,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}const Qe=g("sld");class ti{constructor(t,e){this.onChange_=this.onChange_.bind(this),this.props_=e.props,this.props_.emitter.on("change",this.onChange_),this.element=t.createElement("div"),this.element.classList.add(Qe()),e.viewProps.bindClassModifiers(this.element);const i=t.createElement("div");i.classList.add(Qe("t")),e.viewProps.bindTabIndex(i),this.element.appendChild(i),this.trackElement=i;const n=t.createElement("div");n.classList.add(Qe("k")),this.trackElement.appendChild(n),this.knobElement=n,e.value.emitter.on("change",this.onChange_),this.value=e.value,this.update_()}update_(){const t=Ye(je(this.value.rawValue,this.props_.get("minValue"),this.props_.get("maxValue"),0,100),0,100);this.knobElement.style.width=`${t}%`}onChange_(){this.update_()}}class ei{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=e.baseStep,this.value=e.value,this.viewProps=e.viewProps,this.props=e.props,this.view=new ti(t,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new We(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,e){t.point&&this.value.setRawValue(je(Ye(t.point.x,0,t.bounds.width),0,t.bounds.width,this.props.get("minValue"),this.props.get("maxValue")),e)}onPointerDownOrMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){const e=Be(this.baseStep_,Ve(t));0!==e&&this.value.setRawValue(this.value.rawValue+e,{forceEmit:!1,last:!1})}onKeyUp_(t){0!==Be(this.baseStep_,Ve(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const ii=g("sldtxt");class ni{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(ii());const i=t.createElement("div");i.classList.add(ii("s")),this.sliderView_=e.sliderView,i.appendChild(this.sliderView_.element),this.element.appendChild(i);const n=t.createElement("div");n.classList.add(ii("t")),this.textView_=e.textView,n.appendChild(this.textView_.element),this.element.appendChild(n)}}class ri{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.sliderC_=new ei(t,{baseStep:e.baseStep,props:e.sliderProps,value:e.value,viewProps:this.viewProps}),this.textC_=new $e(t,{baseStep:e.baseStep,parser:e.parser,props:e.textProps,sliderProps:e.sliderProps,value:e.value,viewProps:e.viewProps}),this.view=new ni(t,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}}function si(t,e){t.write(e)}function ai(t){const e=P;return Array.isArray(t)?e.required.array(e.required.object({text:e.required.string,value:e.required.raw}))(t).value:"object"==typeof t?e.required.raw(t).value:void 0}function oi(t){if("inline"===t||"popup"===t)return t}function li(t){const e=P;return e.required.object({max:e.optional.number,min:e.optional.number,step:e.optional.number})(t).value}function hi(t){if(Array.isArray(t))return t;const e=[];return Object.keys(t).forEach((i=>{e.push({text:i,value:t[i]})})),e}function ci(t){return o(t)?null:new te(hi(t))}function ui(t,e){const i=t&&$t(t,ie);return i?Xe(i.step):Math.max(Xe(e),2)}function di(t){const e=function(t){const e=t?$t(t,ie):null;return e?e.step:null}(t);return null!=e?e:1}function pi(t,e){var i;const n=t&&$t(t,ie),r=Math.abs(null!==(i=null==n?void 0:n.step)&&void 0!==i?i:e);return 0===r?.1:Math.pow(10,Math.floor(Math.log10(r))-1)}const mi=g("ckb");class fi{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(mi()),e.viewProps.bindClassModifiers(this.element);const i=t.createElement("label");i.classList.add(mi("l")),this.element.appendChild(i);const n=t.createElement("input");n.classList.add(mi("i")),n.type="checkbox",i.appendChild(n),this.inputElement=n,e.viewProps.bindDisabled(this.inputElement);const r=t.createElement("div");r.classList.add(mi("w")),i.appendChild(r);const s=j(t,"check");r.appendChild(s),e.value.emitter.on("change",this.onValueChange_),this.value=e.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}}class gi{constructor(t,e){this.onInputChange_=this.onInputChange_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new fi(t,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(t){const e=t.currentTarget;this.value.rawValue=e.checked}}const vi={id:"input-bool",type:"input",accept:(t,e)=>{if("boolean"!=typeof t)return null;const i=z(e,{options:P.optional.custom(ai)});return i?{initialValue:t,params:i}:null},binding:{reader:t=>de,constraint:t=>function(t){const e=[],i=ci(t.options);return i&&e.push(i),new Jt(e)}(t.params),writer:t=>si},controller:t=>{const e=t.document,i=t.value,n=t.constraint,r=n&&$t(n,te);return r?new se(e,{props:new A({options:r.values.value("options")}),value:i,viewProps:t.viewProps}):new gi(e,{value:i,viewProps:t.viewProps})}},xi=g("col");class _i{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(xi()),e.foldable.bindExpandedClass(this.element,xi(void 0,"expanded")),_(e.foldable,"completed",q(this.element,xi(void 0,"cpl")));const i=t.createElement("div");i.classList.add(xi("h")),this.element.appendChild(i);const n=t.createElement("div");n.classList.add(xi("s")),i.appendChild(n),this.swatchElement=n;const r=t.createElement("div");if(r.classList.add(xi("t")),i.appendChild(r),this.textElement=r,"inline"===e.pickerLayout){const e=t.createElement("div");e.classList.add(xi("p")),this.element.appendChild(e),this.pickerElement=e}else this.pickerElement=null}}function qi(t,e,i){const n=Ke(t,360),r=Ye(e/100,0,1),s=Ye(i/100,0,1),a=s*r,o=a*(1-Math.abs(n/60%2-1)),l=s-a;let h,c,u;return[h,c,u]=n>=0&&n<60?[a,o,0]:n>=60&&n<120?[o,a,0]:n>=120&&n<180?[0,a,o]:n>=180&&n<240?[0,o,a]:n>=240&&n<300?[o,0,a]:[a,0,o],[255*(h+l),255*(c+l),255*(u+l)]}function yi(t){return[t[0],t[1],t[2]]}function bi(t,e){return[t[0],t[1],t[2],e]}const wi={hsl:{hsl:(t,e,i)=>[t,e,i],hsv:function(t,e,i){const n=i+e*(100-Math.abs(2*i-100))/200;return[t,0!==n?e*(100-Math.abs(2*i-100))/n:0,i+e*(100-Math.abs(2*i-100))/200]},rgb:function(t,e,i){const n=(t%360+360)%360,r=Ye(e/100,0,1),s=Ye(i/100,0,1),a=(1-Math.abs(2*s-1))*r,o=a*(1-Math.abs(n/60%2-1)),l=s-a/2;let h,c,u;return[h,c,u]=n>=0&&n<60?[a,o,0]:n>=60&&n<120?[o,a,0]:n>=120&&n<180?[0,a,o]:n>=180&&n<240?[0,o,a]:n>=240&&n<300?[o,0,a]:[a,0,o],[255*(h+l),255*(c+l),255*(u+l)]}},hsv:{hsl:function(t,e,i){const n=100-Math.abs(i*(200-e)/100-100);return[t,0!==n?e*i/n:0,i*(200-e)/200]},hsv:(t,e,i)=>[t,e,i],rgb:qi},rgb:{hsl:function(t,e,i){const n=Ye(t/255,0,1),r=Ye(e/255,0,1),s=Ye(i/255,0,1),a=Math.max(n,r,s),o=Math.min(n,r,s),l=a-o;let h=0,c=0;const u=(o+a)/2;return 0!==l&&(c=l/(1-Math.abs(a+o-1)),h=n===a?(r-s)/l:r===a?2+(s-n)/l:4+(n-r)/l,h=h/6+(h<0?1:0)),[360*h,100*c,100*u]},hsv:function(t,e,i){const n=Ye(t/255,0,1),r=Ye(e/255,0,1),s=Ye(i/255,0,1),a=Math.max(n,r,s),o=a-Math.min(n,r,s);let l;return l=0===o?0:a===n?((r-s)/o%6+6)%6*60:a===r?60*((s-n)/o+2):60*((n-r)/o+4),[l,100*(0===a?0:o/a),100*a]},rgb:(t,e,i)=>[t,e,i]}};function Mi(t,e){return["float"===e?1:"rgb"===t?255:360,"float"===e?1:"rgb"===t?255:100,"float"===e?1:"rgb"===t?255:100]}function Si(t,e,i,n){const r=Mi(e,i),s=Mi(e,n);return t.map(((t,e)=>t/r[e]*s[e]))}function Ei(t,e){return"object"==typeof t&&!o(t)&&e in t&&"number"==typeof t[e]}class Ti{static black(t="int"){return new Ti([0,0,0],"rgb",t)}static fromObject(t,e="int"){const i="a"in t?[t.r,t.g,t.b,t.a]:[t.r,t.g,t.b];return new Ti(i,"rgb",e)}static toRgbaObject(t,e="int"){return t.toRgbaObject(e)}static isRgbColorObject(t){return Ei(t,"r")&&Ei(t,"g")&&Ei(t,"b")}static isRgbaColorObject(t){return this.isRgbColorObject(t)&&Ei(t,"a")}static isColorObject(t){return this.isRgbColorObject(t)}static equals(t,e){if(t.mode!==e.mode)return!1;const i=t.comps_,n=e.comps_;for(let t=0;t<i.length;t++)if(i[t]!==n[t])return!1;return!0}constructor(t,e,i="int"){this.mode=e,this.type=i,this.comps_=function(t,e,i){var n;const r=Mi(e,i);return["rgb"===e?Ye(t[0],0,r[0]):(s=t[0],a=r[0],s===a?a:Ke(s,a)),Ye(t[1],0,r[1]),Ye(t[2],0,r[2]),Ye(null!==(n=t[3])&&void 0!==n?n:1,0,1)];var s,a}(t,e,i)}getComponents(t,e="int"){return bi(function(t,e,i){const n=Si(t,e.mode,e.type,"int");return Si(wi[e.mode][i.mode](...n),i.mode,"int",i.type)}(yi(this.comps_),{mode:this.mode,type:this.type},{mode:null!=t?t:this.mode,type:e}),this.comps_[3])}toRgbaObject(t="int"){const e=this.getComponents("rgb",t);return{r:e[0],g:e[1],b:e[2],a:e[3]}}}const Ai=g("colp");class Ci{constructor(t,e){this.alphaViews_=null,this.element=t.createElement("div"),this.element.classList.add(Ai()),e.viewProps.bindClassModifiers(this.element);const i=t.createElement("div");i.classList.add(Ai("hsv"));const n=t.createElement("div");n.classList.add(Ai("sv")),this.svPaletteView_=e.svPaletteView,n.appendChild(this.svPaletteView_.element),i.appendChild(n);const r=t.createElement("div");r.classList.add(Ai("h")),this.hPaletteView_=e.hPaletteView,r.appendChild(this.hPaletteView_.element),i.appendChild(r),this.element.appendChild(i);const s=t.createElement("div");if(s.classList.add(Ai("rgb")),this.textView_=e.textView,s.appendChild(this.textView_.element),this.element.appendChild(s),e.alphaViews){this.alphaViews_={palette:e.alphaViews.palette,text:e.alphaViews.text};const i=t.createElement("div");i.classList.add(Ai("a"));const n=t.createElement("div");n.classList.add(Ai("ap")),n.appendChild(this.alphaViews_.palette.element),i.appendChild(n);const r=t.createElement("div");r.classList.add(Ai("at")),r.appendChild(this.alphaViews_.text.element),i.appendChild(r),this.element.appendChild(i)}}get allFocusableElements(){const t=[this.svPaletteView_.element,this.hPaletteView_.element,this.textView_.modeSelectElement,...this.textView_.textViews.map((t=>t.inputElement))];return this.alphaViews_&&t.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),t}}function Ri(t){return"int"===t?"int":"float"===t?"float":void 0}function Pi(t){const e=P;return z(t,{alpha:e.optional.boolean,color:e.optional.object({alpha:e.optional.boolean,type:e.optional.custom(Ri)}),expanded:e.optional.boolean,picker:e.optional.custom(oi)})}function zi(t){return t?.1:1}function Li(t){var e;return null===(e=t.color)||void 0===e?void 0:e.type}function Ui(t,e){const i=t.match(/^(.+)%$/);return i?Math.min(.01*parseFloat(i[1])*e,e):Math.min(parseFloat(t),e)}const Di={deg:t=>t,grad:t=>360*t/400,rad:t=>360*t/(2*Math.PI),turn:t=>360*t};function Ii(t){const e=t.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!e)return parseFloat(t);const i=parseFloat(e[1]),n=e[2];return Di[n](i)}function Ni(t){const e=t.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const i=[Ui(e[1],255),Ui(e[2],255),Ui(e[3],255)];return isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function Oi(t){return e=>{const i=Ni(e);return i?new Ti(i,"rgb",t):null}}function Fi(t){const e=t.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const i=[Ui(e[1],255),Ui(e[2],255),Ui(e[3],255),Ui(e[4],1)];return isNaN(i[0])||isNaN(i[1])||isNaN(i[2])||isNaN(i[3])?null:i}function Bi(t){return e=>{const i=Fi(e);return i?new Ti(i,"rgb",t):null}}function ki(t){const e=t.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const i=[Ii(e[1]),Ui(e[2],100),Ui(e[3],100)];return isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function Vi(t){return e=>{const i=ki(e);return i?new Ti(i,"hsl",t):null}}function Hi(t){const e=t.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const i=[Ii(e[1]),Ui(e[2],100),Ui(e[3],100),Ui(e[4],1)];return isNaN(i[0])||isNaN(i[1])||isNaN(i[2])||isNaN(i[3])?null:i}function Gi(t){return e=>{const i=Hi(e);return i?new Ti(i,"hsl",t):null}}function Wi(t){const e=t.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)];const i=t.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return i?[parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16)]:null}function ji(t){const e=t.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),je(parseInt(e[4]+e[4],16),0,255,0,1)];const i=t.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return i?[parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16),je(parseInt(i[4],16),0,255,0,1)]:null}function Xi(t){const e=t.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const i=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])];return isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function Yi(t){return e=>{const i=Xi(e);return i?new Ti(i,"rgb",t):null}}function Ki(t){const e=t.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const i=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4])];return isNaN(i[0])||isNaN(i[1])||isNaN(i[2])||isNaN(i[3])?null:i}function Zi(t){return e=>{const i=Ki(e);return i?new Ti(i,"rgb",t):null}}const Ji=[{parser:Wi,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:ji,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:Ni,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:Fi,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:ki,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:Hi,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:Xi,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:Ki,result:{alpha:!0,mode:"rgb",notation:"object"}}];function $i(t,e="int"){const i=function(t){return Ji.reduce(((e,{parser:i,result:n})=>e||(i(t)?n:null)),null)}(t);return i?"hex"===i.notation&&"float"!==e?Object.assign(Object.assign({},i),{type:"int"}):"func"===i.notation?Object.assign(Object.assign({},i),{type:e}):null:null}const Qi={int:[function(t){const e=Wi(t);return e?new Ti(e,"rgb","int"):null},function(t){const e=ji(t);return e?new Ti(e,"rgb","int"):null},Oi("int"),Bi("int"),Vi("int"),Gi("int"),Yi("int"),Zi("int")],float:[Oi("float"),Bi("float"),Vi("float"),Gi("float"),Yi("float"),Zi("float")]};function tn(t){const e=Qi[t];return t=>e.reduce(((e,i)=>e||i(t)),null)}function en(t){const e=Ye(Math.floor(t),0,255).toString(16);return 1===e.length?`0${e}`:e}function nn(t,e="#"){return`${e}${yi(t.getComponents("rgb")).map(en).join("")}`}function rn(t,e="#"){const i=t.getComponents("rgb");return`${e}${[i[0],i[1],i[2],255*i[3]].map(en).join("")}`}function sn(t,e){const i=Ue("float"===e?2:0);return`rgb(${yi(t.getComponents("rgb",e)).map((t=>i(t))).join(", ")})`}function an(t){return e=>sn(e,t)}function on(t,e){const i=Ue(2),n=Ue("float"===e?2:0);return`rgba(${t.getComponents("rgb",e).map(((t,e)=>(3===e?i:n)(t))).join(", ")})`}function ln(t){return e=>on(e,t)}function hn(t,e){const i=Ue("float"===e?2:0),n=["r","g","b"];return`{${yi(t.getComponents("rgb",e)).map(((t,e)=>`${n[e]}: ${i(t)}`)).join(", ")}}`}function cn(t){return e=>hn(e,t)}function un(t,e){const i=Ue(2),n=Ue("float"===e?2:0),r=["r","g","b","a"];return`{${t.getComponents("rgb",e).map(((t,e)=>`${r[e]}: ${(3===e?i:n)(t)}`)).join(", ")}}`}function dn(t){return e=>un(e,t)}const pn=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:nn},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:rn},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:function(t){const e=[Ue(0),Ie,Ie];return`hsl(${yi(t.getComponents("hsl")).map(((t,i)=>e[i](t))).join(", ")})`}},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:function(t){const e=[Ue(0),Ie,Ie,Ue(2)];return`hsla(${t.getComponents("hsl").map(((t,i)=>e[i](t))).join(", ")})`}},...["int","float"].reduce(((t,e)=>[...t,{format:{alpha:!1,mode:"rgb",notation:"func",type:e},stringifier:an(e)},{format:{alpha:!0,mode:"rgb",notation:"func",type:e},stringifier:ln(e)},{format:{alpha:!1,mode:"rgb",notation:"object",type:e},stringifier:cn(e)},{format:{alpha:!0,mode:"rgb",notation:"object",type:e},stringifier:dn(e)}]),[])];function mn(t){return pn.reduce(((e,i)=>{return e||(n=i.format,r=t,n.alpha===r.alpha&&n.mode===r.mode&&n.notation===r.notation&&n.type===r.type?i.stringifier:null);var n,r}),null)}const fn=g("apl");class gn{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(fn()),e.viewProps.bindClassModifiers(this.element),e.viewProps.bindTabIndex(this.element);const i=t.createElement("div");i.classList.add(fn("b")),this.element.appendChild(i);const n=t.createElement("div");n.classList.add(fn("c")),i.appendChild(n),this.colorElem_=n;const r=t.createElement("div");r.classList.add(fn("m")),this.element.appendChild(r),this.markerElem_=r;const s=t.createElement("div");s.classList.add(fn("p")),this.markerElem_.appendChild(s),this.previewElem_=s,this.update_()}update_(){const t=this.value.rawValue,e=t.getComponents("rgb"),i=new Ti([e[0],e[1],e[2],0],"rgb"),n=new Ti([e[0],e[1],e[2],255],"rgb"),r=["to right",on(i),on(n)];this.colorElem_.style.background=`linear-gradient(${r.join(",")})`,this.previewElem_.style.backgroundColor=on(t);const s=je(e[3],0,1,0,100);this.markerElem_.style.left=`${s}%`}onValueChange_(){this.update_()}}class vn{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new gn(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new We(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,e){if(!t.point)return;const i=t.point.x/t.bounds.width,n=this.value.rawValue,[r,s,a]=n.getComponents("hsv");this.value.setRawValue(new Ti([r,s,a,i],"hsv"),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){const e=Be(zi(!0),Ve(t));if(0===e)return;const i=this.value.rawValue,[n,r,s,a]=i.getComponents("hsv");this.value.setRawValue(new Ti([n,r,s,a+e],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){0!==Be(zi(!0),Ve(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const xn=g("coltxt");class _n{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(xn()),e.viewProps.bindClassModifiers(this.element);const i=t.createElement("div");i.classList.add(xn("m")),this.modeElem_=function(t){const e=t.createElement("select");return e.appendChild([{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"}].reduce(((e,i)=>{const n=t.createElement("option");return n.textContent=i.text,n.value=i.value,e.appendChild(n),e}),t.createDocumentFragment())),e}(t),this.modeElem_.classList.add(xn("ms")),i.appendChild(this.modeSelectElement),e.viewProps.bindDisabled(this.modeElem_);const n=t.createElement("div");n.classList.add(xn("mm")),n.appendChild(j(t,"dropdown")),i.appendChild(n),this.element.appendChild(i);const r=t.createElement("div");r.classList.add(xn("w")),this.element.appendChild(r),this.textsElem_=r,this.textViews_=e.textViews,this.applyTextViews_(),x(e.colorMode,(t=>{this.modeElem_.value=t}))}get modeSelectElement(){return this.modeElem_}get textViews(){return this.textViews_}set textViews(t){this.textViews_=t,this.applyTextViews_()}applyTextViews_(){K(this.textsElem_);const t=this.element.ownerDocument;this.textViews_.forEach((e=>{const i=t.createElement("div");i.classList.add(xn("c")),i.appendChild(e.element),this.textsElem_.appendChild(i)}))}}function qn(t,e,i){const n=Mi(t,e)[i];return new Qt({min:0,max:n})}function yn(t,e,i){return new $e(t,{arrayPosition:0===i?"fst":2===i?"lst":"mid",baseStep:zi(!1),parser:e.parser,props:A.fromObject({draggingScale:"float"===e.colorType?.01:1,formatter:(n=e.colorType,Ue("float"===n?2:0))}),value:T(0,{constraint:qn(e.colorMode,e.colorType,i)}),viewProps:e.viewProps});var n}class bn{constructor(t,e){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=e.colorType,this.parser_=e.parser,this.value=e.value,this.viewProps=e.viewProps,this.colorMode=T(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(t),this.view=new _n(t,{colorMode:this.colorMode,textViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(t){const e={colorMode:this.colorMode.rawValue,colorType:this.colorType_,parser:this.parser_,viewProps:this.viewProps},i=[yn(t,e,0),yn(t,e,1),yn(t,e,2)];return i.forEach(((t,e)=>{Fe({primary:this.value,secondary:t.value,forward:t=>t.rawValue.getComponents(this.colorMode.rawValue,this.colorType_)[e],backward:(t,i)=>{const n=this.colorMode.rawValue,r=t.rawValue.getComponents(n,this.colorType_);return r[e]=i.rawValue,new Ti(bi(yi(r),r[3]),n,this.colorType_)}})})),i}onModeSelectChange_(t){const e=t.currentTarget;this.colorMode.rawValue=e.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.textViews=[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view]}}const wn=g("hpl");class Mn{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(wn()),e.viewProps.bindClassModifiers(this.element),e.viewProps.bindTabIndex(this.element);const i=t.createElement("div");i.classList.add(wn("c")),this.element.appendChild(i);const n=t.createElement("div");n.classList.add(wn("m")),this.element.appendChild(n),this.markerElem_=n,this.update_()}update_(){const t=this.value.rawValue,[e]=t.getComponents("hsv");this.markerElem_.style.backgroundColor=sn(new Ti([e,100,100],"hsv"));const i=je(e,0,360,0,100);this.markerElem_.style.left=`${i}%`}onValueChange_(){this.update_()}}class Sn{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new Mn(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new We(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,e){if(!t.point)return;const i=je(Ye(t.point.x,0,t.bounds.width),0,t.bounds.width,0,360),n=this.value.rawValue,[,r,s,a]=n.getComponents("hsv");this.value.setRawValue(new Ti([i,r,s,a],"hsv"),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){const e=Be(zi(!1),Ve(t));if(0===e)return;const i=this.value.rawValue,[n,r,s,a]=i.getComponents("hsv");this.value.setRawValue(new Ti([n+e,r,s,a],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){0!==Be(zi(!1),Ve(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const En=g("svp");class Tn{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(En()),e.viewProps.bindClassModifiers(this.element),e.viewProps.bindTabIndex(this.element);const i=t.createElement("canvas");i.height=64,i.width=64,i.classList.add(En("c")),this.element.appendChild(i),this.canvasElement=i;const n=t.createElement("div");n.classList.add(En("m")),this.element.appendChild(n),this.markerElem_=n,this.update_()}update_(){const t=function(t){const e=t.ownerDocument.defaultView;return e&&"document"in e?t.getContext("2d",{willReadFrequently:!0}):null}(this.canvasElement);if(!t)return;const e=this.value.rawValue.getComponents("hsv"),i=this.canvasElement.width,n=this.canvasElement.height,r=t.getImageData(0,0,i,n),s=r.data;for(let t=0;t<n;t++)for(let r=0;r<i;r++){const a=je(r,0,i,0,100),o=je(t,0,n,100,0),l=qi(e[0],a,o),h=4*(t*i+r);s[h]=l[0],s[h+1]=l[1],s[h+2]=l[2],s[h+3]=255}t.putImageData(r,0,0);const a=je(e[1],0,100,0,100);this.markerElem_.style.left=`${a}%`;const o=je(e[2],0,100,100,0);this.markerElem_.style.top=`${o}%`}onValueChange_(){this.update_()}}class An{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new Tn(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new We(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,e){if(!t.point)return;const i=je(t.point.x,0,t.bounds.width,0,100),n=je(t.point.y,0,t.bounds.height,100,0),[r,,,s]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new Ti([r,i,n,s],"hsv"),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){He(t.key)&&t.preventDefault();const[e,i,n,r]=this.value.rawValue.getComponents("hsv"),s=zi(!1),a=Be(s,Ve(t)),o=Be(s,ke(t));0===a&&0===o||this.value.setRawValue(new Ti([e,i+a,n+o,r],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){const e=zi(!1),i=Be(e,Ve(t)),n=Be(e,ke(t));0===i&&0===n||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class Cn{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.hPaletteC_=new Sn(t,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new An(t,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=e.supportsAlpha?{palette:new vn(t,{value:this.value,viewProps:this.viewProps}),text:new $e(t,{parser:Pe,baseStep:.1,props:A.fromObject({draggingScale:.01,formatter:Ue(2)}),value:T(0,{constraint:new Qt({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&Fe({primary:this.value,secondary:this.alphaIcs_.text.value,forward:t=>t.rawValue.getComponents()[3],backward:(t,e)=>{const i=t.rawValue.getComponents();return i[3]=e.rawValue,new Ti(i,t.rawValue.mode)}}),this.textC_=new bn(t,{colorType:e.colorType,parser:Pe,value:this.value,viewProps:this.viewProps}),this.view=new Ci(t,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:e.supportsAlpha,svPaletteView:this.svPaletteC_.view,textView:this.textC_.view,viewProps:this.viewProps})}get textController(){return this.textC_}}const Rn=g("colsw");class Pn{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),e.value.emitter.on("change",this.onValueChange_),this.value=e.value,this.element=t.createElement("div"),this.element.classList.add(Rn()),e.viewProps.bindClassModifiers(this.element);const i=t.createElement("div");i.classList.add(Rn("sw")),this.element.appendChild(i),this.swatchElem_=i;const n=t.createElement("button");n.classList.add(Rn("b")),e.viewProps.bindDisabled(n),this.element.appendChild(n),this.buttonElement=n,this.update_()}update_(){const t=this.value.rawValue;this.swatchElem_.style.backgroundColor=rn(t)}onValueChange_(){this.update_()}}class zn{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.view=new Pn(t,{value:this.value,viewProps:this.viewProps})}}class Ln{constructor(t,e){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.foldable_=nt.create(e.expanded),this.swatchC_=new zn(t,{value:this.value,viewProps:this.viewProps});const i=this.swatchC_.view.buttonElement;i.addEventListener("blur",this.onButtonBlur_),i.addEventListener("click",this.onButtonClick_),this.textC_=new ue(t,{parser:e.parser,props:A.fromObject({formatter:e.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new _i(t,{foldable:this.foldable_,pickerLayout:e.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_="popup"===e.pickerLayout?new le(t,{viewProps:this.viewProps}):null;const n=new Cn(t,{colorType:e.colorType,supportsAlpha:e.supportsAlpha,value:this.value,viewProps:this.viewProps});n.view.allFocusableElements.forEach((t=>{t.addEventListener("blur",this.onPopupChildBlur_),t.addEventListener("keydown",this.onPopupChildKeydown_)})),this.pickerC_=n,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(n.view.element),Fe({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:t=>t.rawValue,backward:(t,e)=>e.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),st(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(t){if(!this.popC_)return;const e=this.view.element,i=t.relatedTarget;i&&e.contains(i)||(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(t){if(!this.popC_)return;const e=this.popC_.view.element,i=Z(t);i&&e.contains(i)||i&&i===this.swatchC_.view.buttonElement&&!H(e.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(t){this.popC_?"Escape"===t.key&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&"Escape"===t.key&&this.swatchC_.view.buttonElement.focus()}}function Un(t){return yi(t.getComponents("rgb")).reduce(((t,e)=>t<<8|255&Math.floor(e)),0)}function Dn(t){return t.getComponents("rgb").reduce(((t,e,i)=>t<<8|255&Math.floor(3===i?255*e:e)),0)>>>0}function In(t){return"number"!=typeof t?Ti.black():new Ti([(e=t)>>16&255,e>>8&255,255&e],"rgb");var e}function Nn(t){return"number"!=typeof t?Ti.black():new Ti([(e=t)>>24&255,e>>16&255,e>>8&255,je(255&e,0,255,0,1)],"rgb");var e}function On(t){var e;return!(!(null==t?void 0:t.alpha)&&!(null===(e=null==t?void 0:t.color)||void 0===e?void 0:e.alpha))}function Fn(t){return t?t=>rn(t,"0x"):t=>nn(t,"0x")}const Bn={id:"input-color-number",type:"input",accept:(t,e)=>{if("number"!=typeof t)return null;if(!function(t){return"color"in t||"view"in t&&"color"===t.view}(e))return null;const i=Pi(e);return i?{initialValue:t,params:i}:null},binding:{reader:t=>On(t.params)?Nn:In,equals:Ti.equals,writer:t=>function(t){const e=t?Dn:Un;return(t,i)=>{si(t,e(i))}}(On(t.params))},controller:t=>{const e=On(t.params),i="expanded"in t.params?t.params.expanded:void 0,n="picker"in t.params?t.params.picker:void 0;return new Ln(t.document,{colorType:"int",expanded:null!=i&&i,formatter:Fn(e),parser:tn("int"),pickerLayout:null!=n?n:"popup",supportsAlpha:e,value:t.value,viewProps:t.viewProps})}};function kn(t){return e=>function(t,e){return Ti.isColorObject(t)?Ti.fromObject(t,e):Ti.black(e)}(e,t)}function Vn(t,e){return i=>t?un(i,e):hn(i,e)}const Hn={id:"input-color-object",type:"input",accept:(t,e)=>{if(!Ti.isColorObject(t))return null;const i=Pi(e);return i?{initialValue:t,params:i}:null},binding:{reader:t=>kn(Li(t.params)),equals:Ti.equals,writer:t=>{return n=t.initialValue,e=Ti.isRgbaColorObject(n),i=Li(t.params),(t,n)=>{e?function(t,e,i){const n=e.toRgbaObject(i);t.writeProperty("r",n.r),t.writeProperty("g",n.g),t.writeProperty("b",n.b),t.writeProperty("a",n.a)}(t,n,i):function(t,e,i){const n=e.toRgbaObject(i);t.writeProperty("r",n.r),t.writeProperty("g",n.g),t.writeProperty("b",n.b)}(t,n,i)};var e,i,n}},controller:t=>{var e;const i=Ti.isRgbaColorObject(t.initialValue),n="expanded"in t.params?t.params.expanded:void 0,r="picker"in t.params?t.params.picker:void 0,s=null!==(e=Li(t.params))&&void 0!==e?e:"int";return new Ln(t.document,{colorType:s,expanded:null!=n&&n,formatter:Vn(i,s),parser:tn(s),pickerLayout:null!=r?r:"popup",supportsAlpha:i,value:t.value,viewProps:t.viewProps})}},Gn={id:"input-color-string",type:"input",accept:(t,e)=>{if("string"!=typeof t)return null;if("view"in e&&"text"===e.view)return null;const i=$i(t,Li(e));if(!i)return null;if(!mn(i))return null;const n=Pi(e);return n?{initialValue:t,params:n}:null},binding:{reader:t=>{var e;return function(t){const e=Qi[t];return i=>{if("string"!=typeof i)return Ti.black(t);const n=e.reduce(((t,e)=>t||e(i)),null);return null!=n?n:Ti.black(t)}}(null!==(e=Li(t.params))&&void 0!==e?e:"int")},equals:Ti.equals,writer:t=>{const e=$i(t.initialValue,Li(t.params));if(!e)throw u.shouldNeverHappen();const i=function(t){const e=mn(t);return e?(t,i)=>{si(t,e(i))}:null}(e);if(!i)throw u.notBindable();return i}},controller:t=>{const e=$i(t.initialValue,Li(t.params));if(!e)throw u.shouldNeverHappen();const i=mn(e);if(!i)throw u.shouldNeverHappen();const n="expanded"in t.params?t.params.expanded:void 0,r="picker"in t.params?t.params.picker:void 0;return new Ln(t.document,{colorType:e.type,expanded:null!=n&&n,formatter:i,parser:tn(e.type),pickerLayout:null!=r?r:"popup",supportsAlpha:e.alpha,value:t.value,viewProps:t.viewProps})}};class Wn{constructor(t){this.components=t.components,this.asm_=t.assembly}constrain(t){const e=this.asm_.toComponents(t).map(((t,e)=>{var i,n;return null!==(n=null===(i=this.components[e])||void 0===i?void 0:i.constrain(t))&&void 0!==n?n:t}));return this.asm_.fromComponents(e)}}const jn=g("pndtxt");class Xn{constructor(t,e){this.textViews=e.textViews,this.element=t.createElement("div"),this.element.classList.add(jn()),this.textViews.forEach((e=>{const i=t.createElement("div");i.classList.add(jn("a")),i.appendChild(e.element),this.element.appendChild(i)}))}}class Yn{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.acs_=e.axes.map(((i,n)=>function(t,e,i){return new $e(t,{arrayPosition:0===i?"fst":i===e.axes.length-1?"lst":"mid",baseStep:e.axes[i].baseStep,parser:e.parser,props:e.axes[i].textProps,value:T(0,{constraint:e.axes[i].constraint}),viewProps:e.viewProps})}(t,e,n))),this.acs_.forEach(((t,i)=>{Fe({primary:this.value,secondary:t.value,forward:t=>e.assembly.toComponents(t.rawValue)[i],backward:(t,n)=>{const r=e.assembly.toComponents(t.rawValue);return r[i]=n.rawValue,e.assembly.fromComponents(r)}})})),this.view=new Xn(t,{textViews:this.acs_.map((t=>t.view))})}}function Kn(t,e){return"step"in t&&!o(t.step)?new ie(t.step,e):null}function Zn(t){return o(t.max)||o(t.min)?o(t.max)&&o(t.min)?null:new ee({max:t.max,min:t.min}):new Qt({max:t.max,min:t.min})}const Jn={id:"input-number",type:"input",accept:(t,e)=>{if("number"!=typeof t)return null;const i=P,n=z(e,{format:i.optional.function,max:i.optional.number,min:i.optional.number,options:i.optional.custom(ai),step:i.optional.number});return n?{initialValue:t,params:n}:null},binding:{reader:t=>ze,constraint:t=>function(t,e){const i=[],n=Kn(t,e);n&&i.push(n);const r=Zn(t);r&&i.push(r);const s=ci(t.options);return s&&i.push(s),new Jt(i)}(t.params,t.initialValue),writer:t=>si},controller:t=>{var e;const i=t.value,n=t.constraint,r=n&&$t(n,te);if(r)return new se(t.document,{props:new A({options:r.values.value("options")}),value:i,viewProps:t.viewProps});const s=null!==(e="format"in t.params?t.params.format:void 0)&&void 0!==e?e:Ue(ui(n,i.rawValue)),a=n&&$t(n,Qt);return a?new ri(t.document,{baseStep:di(n),parser:Pe,sliderProps:new A({maxValue:a.values.value("max"),minValue:a.values.value("min")}),textProps:A.fromObject({draggingScale:pi(n,i.rawValue),formatter:s}),value:i,viewProps:t.viewProps}):new $e(t.document,{baseStep:di(n),parser:Pe,props:A.fromObject({draggingScale:pi(n,i.rawValue),formatter:s}),value:i,viewProps:t.viewProps})}};class $n{constructor(t=0,e=0){this.x=t,this.y=e}getComponents(){return[this.x,this.y]}static isObject(t){if(o(t))return!1;const e=t.x,i=t.y;return"number"==typeof e&&"number"==typeof i}static equals(t,e){return t.x===e.x&&t.y===e.y}toObject(){return{x:this.x,y:this.y}}}const Qn={toComponents:t=>t.getComponents(),fromComponents:t=>new $n(...t)},tr=g("p2d");class er{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(tr()),e.viewProps.bindClassModifiers(this.element),x(e.expanded,q(this.element,tr(void 0,"expanded")));const i=t.createElement("div");i.classList.add(tr("h")),this.element.appendChild(i);const n=t.createElement("button");n.classList.add(tr("b")),n.appendChild(j(t,"p2dpad")),e.viewProps.bindDisabled(n),i.appendChild(n),this.buttonElement=n;const r=t.createElement("div");if(r.classList.add(tr("t")),i.appendChild(r),this.textElement=r,"inline"===e.pickerLayout){const e=t.createElement("div");e.classList.add(tr("p")),this.element.appendChild(e),this.pickerElement=e}else this.pickerElement=null}}const ir=g("p2dp");class nr{constructor(t,e){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.invertsY_=e.invertsY,this.maxValue_=e.maxValue,this.element=t.createElement("div"),this.element.classList.add(ir()),"popup"===e.layout&&this.element.classList.add(ir(void 0,"p")),e.viewProps.bindClassModifiers(this.element);const i=t.createElement("div");i.classList.add(ir("p")),e.viewProps.bindTabIndex(i),this.element.appendChild(i),this.padElement=i;const n=t.createElementNS(k,"svg");n.classList.add(ir("g")),this.padElement.appendChild(n),this.svgElem_=n;const r=t.createElementNS(k,"line");r.classList.add(ir("ax")),r.setAttributeNS(null,"x1","0"),r.setAttributeNS(null,"y1","50%"),r.setAttributeNS(null,"x2","100%"),r.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(r);const s=t.createElementNS(k,"line");s.classList.add(ir("ax")),s.setAttributeNS(null,"x1","50%"),s.setAttributeNS(null,"y1","0"),s.setAttributeNS(null,"x2","50%"),s.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(s);const a=t.createElementNS(k,"line");a.classList.add(ir("l")),a.setAttributeNS(null,"x1","50%"),a.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(a),this.lineElem_=a;const o=t.createElement("div");o.classList.add(ir("m")),this.padElement.appendChild(o),this.markerElem_=o,e.value.emitter.on("change",this.onValueChange_),this.value=e.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[t,e]=this.value.rawValue.getComponents(),i=this.maxValue_,n=je(t,-i,+i,0,100),r=je(e,-i,+i,0,100),s=this.invertsY_?100-r:r;this.lineElem_.setAttributeNS(null,"x2",`${n}%`),this.lineElem_.setAttributeNS(null,"y2",`${s}%`),this.markerElem_.style.left=`${n}%`,this.markerElem_.style.top=`${s}%`}onValueChange_(){this.update_()}onFoldableChange_(){this.update_()}}function rr(t,e,i){return[Be(e[0],Ve(t)),Be(e[1],ke(t))*(i?1:-1)]}class sr{constructor(t,e){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.baseSteps_=e.baseSteps,this.maxValue_=e.maxValue,this.invertsY_=e.invertsY,this.view=new nr(t,{invertsY:this.invertsY_,layout:e.layout,maxValue:this.maxValue_,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new We(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(t,e){if(!t.point)return;const i=this.maxValue_,n=je(t.point.x,0,t.bounds.width,-i,+i),r=je(this.invertsY_?t.bounds.height-t.point.y:t.point.y,0,t.bounds.height,-i,+i);this.value.setRawValue(new $n(n,r),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onPadKeyDown_(t){He(t.key)&&t.preventDefault();const[e,i]=rr(t,this.baseSteps_,this.invertsY_);0===e&&0===i||this.value.setRawValue(new $n(this.value.rawValue.x+e,this.value.rawValue.y+i),{forceEmit:!1,last:!1})}onPadKeyUp_(t){const[e,i]=rr(t,this.baseSteps_,this.invertsY_);0===e&&0===i||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class ar{constructor(t,e){var i,n;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.foldable_=nt.create(e.expanded),this.popC_="popup"===e.pickerLayout?new le(t,{viewProps:this.viewProps}):null;const r=new sr(t,{baseSteps:[e.axes[0].baseStep,e.axes[1].baseStep],invertsY:e.invertsY,layout:e.pickerLayout,maxValue:e.maxValue,value:this.value,viewProps:this.viewProps});r.view.allFocusableElements.forEach((t=>{t.addEventListener("blur",this.onPopupChildBlur_),t.addEventListener("keydown",this.onPopupChildKeydown_)})),this.pickerC_=r,this.textC_=new Yn(t,{assembly:Qn,axes:e.axes,parser:e.parser,value:this.value,viewProps:this.viewProps}),this.view=new er(t,{expanded:this.foldable_.value("expanded"),pickerLayout:e.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),null===(i=this.view.buttonElement)||void 0===i||i.addEventListener("blur",this.onPadButtonBlur_),null===(n=this.view.buttonElement)||void 0===n||n.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),Fe({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:t=>t.rawValue,backward:(t,e)=>e.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),st(this.foldable_,this.view.pickerElement))}onPadButtonBlur_(t){if(!this.popC_)return;const e=this.view.element,i=t.relatedTarget;i&&e.contains(i)||(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(t){if(!this.popC_)return;const e=this.popC_.view.element,i=Z(t);i&&e.contains(i)||i&&i===this.view.buttonElement&&!H(e.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(t){this.popC_?"Escape"===t.key&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&"Escape"===t.key&&this.view.buttonElement.focus()}}class or{constructor(t=0,e=0,i=0){this.x=t,this.y=e,this.z=i}getComponents(){return[this.x,this.y,this.z]}static isObject(t){if(o(t))return!1;const e=t.x,i=t.y,n=t.z;return"number"==typeof e&&"number"==typeof i&&"number"==typeof n}static equals(t,e){return t.x===e.x&&t.y===e.y&&t.z===e.z}toObject(){return{x:this.x,y:this.y,z:this.z}}}const lr={toComponents:t=>t.getComponents(),fromComponents:t=>new or(...t)};function hr(t){return or.isObject(t)?new or(t.x,t.y,t.z):new or}function cr(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z)}function ur(t,e){return{baseStep:di(e),constraint:e,textProps:A.fromObject({draggingScale:pi(e,t),formatter:Ue(ui(e,t))})}}const dr={id:"input-point3d",type:"input",accept:(t,e)=>{if(!or.isObject(t))return null;const i=P,n=z(e,{x:i.optional.custom(li),y:i.optional.custom(li),z:i.optional.custom(li)});return n?{initialValue:t,params:n}:null},binding:{reader:t=>hr,constraint:t=>{return e=t.params,i=t.initialValue,new Wn({assembly:lr,components:[Or("x"in e?e.x:void 0,i.x),Or("y"in e?e.y:void 0,i.y),Or("z"in e?e.z:void 0,i.z)]});var e,i},equals:or.equals,writer:t=>cr},controller:t=>{const e=t.value,i=t.constraint;if(!(i instanceof Wn))throw u.shouldNeverHappen();return new Yn(t.document,{assembly:lr,axes:[ur(e.rawValue.x,i.components[0]),ur(e.rawValue.y,i.components[1]),ur(e.rawValue.z,i.components[2])],parser:Pe,value:e,viewProps:t.viewProps})}};class pr{constructor(t=0,e=0,i=0,n=0){this.x=t,this.y=e,this.z=i,this.w=n}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(t){if(o(t))return!1;const e=t.x,i=t.y,n=t.z,r=t.w;return"number"==typeof e&&"number"==typeof i&&"number"==typeof n&&"number"==typeof r}static equals(t,e){return t.x===e.x&&t.y===e.y&&t.z===e.z&&t.w===e.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}const mr={toComponents:t=>t.getComponents(),fromComponents:t=>new pr(...t)};function fr(t){return pr.isObject(t)?new pr(t.x,t.y,t.z,t.w):new pr}function gr(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z),t.writeProperty("w",e.w)}const vr={id:"input-point4d",type:"input",accept:(t,e)=>{if(!pr.isObject(t))return null;const i=P,n=z(e,{x:i.optional.custom(li),y:i.optional.custom(li),z:i.optional.custom(li),w:i.optional.custom(li)});return n?{initialValue:t,params:n}:null},binding:{reader:t=>fr,constraint:t=>{return e=t.params,i=t.initialValue,new Wn({assembly:mr,components:[Or("x"in e?e.x:void 0,i.x),Or("y"in e?e.y:void 0,i.y),Or("z"in e?e.z:void 0,i.z),Or("w"in e?e.w:void 0,i.w)]});var e,i},equals:pr.equals,writer:t=>gr},controller:t=>{const e=t.value,i=t.constraint;if(!(i instanceof Wn))throw u.shouldNeverHappen();return new Yn(t.document,{assembly:mr,axes:e.rawValue.getComponents().map(((t,e)=>{return n=t,{baseStep:di(r=i.components[e]),constraint:r,textProps:A.fromObject({draggingScale:pi(r,n),formatter:Ue(ui(r,n))})};var n,r})),parser:Pe,value:e,viewProps:t.viewProps})}};const xr={id:"input-string",type:"input",accept:(t,e)=>{if("string"!=typeof t)return null;const i=z(e,{options:P.optional.custom(ai)});return i?{initialValue:t,params:i}:null},binding:{reader:t=>Ne,constraint:t=>function(t){const e=[],i=ci(t.options);return i&&e.push(i),new Jt(e)}(t.params),writer:t=>si},controller:t=>{const e=t.document,i=t.value,n=t.constraint,r=n&&$t(n,te);return r?new se(e,{props:new A({options:r.values.value("options")}),value:i,viewProps:t.viewProps}):new ue(e,{parser:t=>t,props:A.fromObject({formatter:Oe}),value:i,viewProps:t.viewProps})}},_r={monitor:{defaultInterval:200,defaultLineCount:3}},qr=g("mll");class yr{constructor(t,e){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=e.formatter,this.element=t.createElement("div"),this.element.classList.add(qr()),e.viewProps.bindClassModifiers(this.element);const i=t.createElement("textarea");i.classList.add(qr("i")),i.style.height=`calc(var(--bld-us) * ${e.lineCount})`,i.readOnly=!0,e.viewProps.bindDisabled(i),this.element.appendChild(i),this.textareaElem_=i,e.value.emitter.on("change",this.onValueUpdate_),this.value=e.value,this.update_()}update_(){const t=this.textareaElem_,e=t.scrollTop===t.scrollHeight-t.clientHeight,i=[];this.value.rawValue.forEach((t=>{void 0!==t&&i.push(this.formatter_(t))})),t.textContent=i.join("\n"),e&&(t.scrollTop=t.scrollHeight)}onValueUpdate_(){this.update_()}}class br{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.view=new yr(t,{formatter:e.formatter,lineCount:e.lineCount,value:this.value,viewProps:this.viewProps})}}const wr=g("sgl");class Mr{constructor(t,e){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=e.formatter,this.element=t.createElement("div"),this.element.classList.add(wr()),e.viewProps.bindClassModifiers(this.element);const i=t.createElement("input");i.classList.add(wr("i")),i.readOnly=!0,i.type="text",e.viewProps.bindDisabled(i),this.element.appendChild(i),this.inputElement=i,e.value.emitter.on("change",this.onValueUpdate_),this.value=e.value,this.update_()}update_(){const t=this.value.rawValue,e=t[t.length-1];this.inputElement.value=void 0!==e?this.formatter_(e):""}onValueUpdate_(){this.update_()}}class Sr{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.view=new Mr(t,{formatter:e.formatter,value:this.value,viewProps:this.viewProps})}}const Er={id:"monitor-bool",type:"monitor",accept:(t,e)=>{if("boolean"!=typeof t)return null;const i=z(e,{lineCount:P.optional.number});return i?{initialValue:t,params:i}:null},binding:{reader:t=>de},controller:t=>{var e;return 1===t.value.rawValue.length?new Sr(t.document,{formatter:pe,value:t.value,viewProps:t.viewProps}):new br(t.document,{formatter:pe,lineCount:null!==(e=t.params.lineCount)&&void 0!==e?e:_r.monitor.defaultLineCount,value:t.value,viewProps:t.viewProps})}},Tr=g("grl");class Ar{constructor(t,e){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=t.createElement("div"),this.element.classList.add(Tr()),e.viewProps.bindClassModifiers(this.element),this.formatter_=e.formatter,this.props_=e.props,this.cursor_=e.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const i=t.createElementNS(k,"svg");i.classList.add(Tr("g")),i.style.height=`calc(var(--bld-us) * ${e.lineCount})`,this.element.appendChild(i),this.svgElem_=i;const n=t.createElementNS(k,"polyline");this.svgElem_.appendChild(n),this.lineElem_=n;const r=t.createElement("div");r.classList.add(Tr("t"),g("tt")()),this.element.appendChild(r),this.tooltipElem_=r,e.value.emitter.on("change",this.onValueUpdate_),this.value=e.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const t=this.svgElem_.getBoundingClientRect(),e=this.value.rawValue.length-1,i=this.props_.get("minValue"),n=this.props_.get("maxValue"),r=[];this.value.rawValue.forEach(((s,a)=>{if(void 0===s)return;const o=je(a,0,e,0,t.width),l=je(s,i,n,t.height,0);r.push([o,l].join(","))})),this.lineElem_.setAttributeNS(null,"points",r.join(" "));const s=this.tooltipElem_,a=this.value.rawValue[this.cursor_.rawValue];if(void 0===a)return void s.classList.remove(Tr("t","a"));const o=je(this.cursor_.rawValue,0,e,0,t.width),l=je(a,i,n,t.height,0);s.style.left=`${o}px`,s.style.top=`${l}px`,s.textContent=`${this.formatter_(a)}`,s.classList.contains(Tr("t","a"))||(s.classList.add(Tr("t","a"),Tr("t","in")),V(s),s.classList.remove(Tr("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class Cr{constructor(t,e){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props_=e.props,this.value=e.value,this.viewProps=e.viewProps,this.cursor_=T(-1),this.view=new Ar(t,{cursor:this.cursor_,formatter:e.formatter,lineCount:e.lineCount,props:this.props_,value:this.value,viewProps:this.viewProps}),H(t)){const t=new We(this.view.element);t.emitter.on("down",this.onGraphPointerDown_),t.emitter.on("move",this.onGraphPointerMove_),t.emitter.on("up",this.onGraphPointerUp_)}else this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_)}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(t){const e=this.view.element.getBoundingClientRect();this.cursor_.rawValue=Math.floor(je(t.offsetX,0,e.width,0,this.value.rawValue.length))}onGraphPointerDown_(t){this.onGraphPointerMove_(t)}onGraphPointerMove_(t){t.data.point?this.cursor_.rawValue=Math.floor(je(t.data.point.x,0,t.data.bounds.width,0,this.value.rawValue.length)):this.cursor_.rawValue=-1}onGraphPointerUp_(){this.cursor_.rawValue=-1}}function Rr(t){return"format"in t&&!o(t.format)?t.format:Ue(2)}function Pr(t){return"view"in t&&"graph"===t.view}const zr={id:"monitor-number",type:"monitor",accept:(t,e)=>{if("number"!=typeof t)return null;const i=P,n=z(e,{format:i.optional.function,lineCount:i.optional.number,max:i.optional.number,min:i.optional.number,view:i.optional.string});return n?{initialValue:t,params:n}:null},binding:{defaultBufferSize:t=>Pr(t)?64:1,reader:t=>ze},controller:t=>Pr(t.params)?function(t){var e,i,n;return new Cr(t.document,{formatter:Rr(t.params),lineCount:null!==(e=t.params.lineCount)&&void 0!==e?e:_r.monitor.defaultLineCount,props:A.fromObject({maxValue:null!==(i="max"in t.params?t.params.max:null)&&void 0!==i?i:100,minValue:null!==(n="min"in t.params?t.params.min:null)&&void 0!==n?n:0}),value:t.value,viewProps:t.viewProps})}(t):function(t){var e;return 1===t.value.rawValue.length?new Sr(t.document,{formatter:Rr(t.params),value:t.value,viewProps:t.viewProps}):new br(t.document,{formatter:Rr(t.params),lineCount:null!==(e=t.params.lineCount)&&void 0!==e?e:_r.monitor.defaultLineCount,value:t.value,viewProps:t.viewProps})}(t)},Lr={id:"monitor-string",type:"monitor",accept:(t,e)=>{if("string"!=typeof t)return null;const i=P,n=z(e,{lineCount:i.optional.number,multiline:i.optional.boolean});return n?{initialValue:t,params:n}:null},binding:{reader:t=>Ne},controller:t=>{var e;const i=t.value;return i.rawValue.length>1||"multiline"in t.params&&t.params.multiline?new br(t.document,{formatter:Oe,lineCount:null!==(e=t.params.lineCount)&&void 0!==e?e:_r.monitor.defaultLineCount,value:i,viewProps:t.viewProps}):new Sr(t.document,{formatter:Oe,value:i,viewProps:t.viewProps})}};function Ur(t,e){return 0===e?new Gt:new Wt(t,null!=e?e:_r.monitor.defaultInterval)}class Dr{constructor(){this.pluginsMap_={blades:[],inputs:[],monitors:[]}}getAll(){return[...this.pluginsMap_.blades,...this.pluginsMap_.inputs,...this.pluginsMap_.monitors]}register(t){"blade"===t.type?this.pluginsMap_.blades.unshift(t):"input"===t.type?this.pluginsMap_.inputs.unshift(t):"monitor"===t.type&&this.pluginsMap_.monitors.unshift(t)}createInput(t,e,i){if(o(e.read()))throw new u({context:{key:e.key},type:"nomatchingcontroller"});const n=this.pluginsMap_.inputs.reduce(((n,r)=>null!=n?n:function(t,e){var i;const n=t.accept(e.target.read(),e.params);if(o(n))return null;const r=P,s={target:e.target,initialValue:n.initialValue,params:n.params},a=t.binding.reader(s),l=t.binding.constraint?t.binding.constraint(s):void 0,h=T(a(n.initialValue),{constraint:l,equals:t.binding.equals}),c=new jt({reader:a,target:e.target,value:h,writer:t.binding.writer(s)}),u=r.optional.boolean(e.params.disabled).value,d=r.optional.boolean(e.params.hidden).value,p=t.controller({constraint:l,document:e.document,initialValue:n.initialValue,params:n.params,value:c.value,viewProps:N.create({disabled:u,hidden:d})});return new ht(e.document,{binding:c,blade:it(),props:A.fromObject({label:"label"in e.params?null!==(i=r.optional.string(e.params.label).value)&&void 0!==i?i:null:e.target.key}),valueController:p})}(r,{document:t,target:e,params:i})),null);if(n)return n;throw new u({context:{key:e.key},type:"nomatchingcontroller"})}createMonitor(t,e,i){const n=this.pluginsMap_.monitors.reduce(((n,r)=>null!=n?n:function(t,e){var i,n,r;const s=P,a=t.accept(e.target.read(),e.params);if(o(a))return null;const l={target:e.target,initialValue:a.initialValue,params:a.params},h=t.binding.reader(l),c=null!==(n=null!==(i=s.optional.number(e.params.bufferSize).value)&&void 0!==i?i:t.binding.defaultBufferSize&&t.binding.defaultBufferSize(a.params))&&void 0!==n?n:1,u=s.optional.number(e.params.interval).value,d=new Zt({reader:h,target:e.target,ticker:Ur(e.document,u),value:Yt(c)}),p=s.optional.boolean(e.params.disabled).value,m=s.optional.boolean(e.params.hidden).value,f=t.controller({document:e.document,params:a.params,value:d.value,viewProps:N.create({disabled:p,hidden:m})});return new ut(e.document,{binding:d,blade:it(),props:A.fromObject({label:"label"in e.params?null!==(r=s.optional.string(e.params.label).value)&&void 0!==r?r:null:e.target.key}),valueController:f})}(r,{document:t,params:i,target:e})),null);if(n)return n;throw new u({context:{key:e.key},type:"nomatchingcontroller"})}createBlade(t,e){const i=this.pluginsMap_.blades.reduce(((i,n)=>null!=i?i:function(t,e){const i=t.accept(e.params);if(!i)return null;const n=P.optional.boolean(e.params.disabled).value,r=P.optional.boolean(e.params.hidden).value;return t.controller({blade:it(),document:e.document,params:Object.assign(Object.assign({},i.params),{disabled:n,hidden:r}),viewProps:N.create({disabled:n,hidden:r})})}(n,{document:t,params:e})),null);if(!i)throw new u({type:"nomatchingview",context:{params:e}});return i}createBladeApi(t){if(t instanceof ht)return new lt(t);if(t instanceof ut)return new ct(t);if(t instanceof bt)return new ft(t,this);const e=this.pluginsMap_.blades.reduce(((e,i)=>null!=e?e:i.api({controller:t,pool:this})),null);if(!e)throw u.shouldNeverHappen();return e}}function Ir(t){return $n.isObject(t)?new $n(t.x,t.y):new $n}function Nr(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y)}function Or(t,e){if(!t)return;const i=[],n=Kn(t,e);n&&i.push(n);const r=Zn(t);return r&&i.push(r),new Jt(i)}function Fr(t,e){const[i,n]=t?function(t){const e=$t(t,Qt);if(e)return[e.values.get("min"),e.values.get("max")];const i=$t(t,ee);return i?[i.minValue,i.maxValue]:[void 0,void 0]}(t):[];if(!o(i)||!o(n))return Math.max(Math.abs(null!=i?i:0),Math.abs(null!=n?n:0));const r=di(t);return Math.max(10*Math.abs(r),10*Math.abs(e))}function Br(t,e){const i=e instanceof Wn?e.components[0]:void 0,n=e instanceof Wn?e.components[1]:void 0,r=Fr(i,t.x),s=Fr(n,t.y);return Math.max(r,s)}function kr(t,e){return{baseStep:di(e),constraint:e,textProps:A.fromObject({draggingScale:pi(e,t),formatter:Ue(ui(e,t))})}}function Vr(t){if(!("y"in t))return!1;const e=t.y;return!!e&&"inverted"in e&&!!e.inverted}const Hr={id:"input-point2d",type:"input",accept:(t,e)=>{if(!$n.isObject(t))return null;const i=P,n=z(e,{expanded:i.optional.boolean,picker:i.optional.custom(oi),x:i.optional.custom(li),y:i.optional.object({inverted:i.optional.boolean,max:i.optional.number,min:i.optional.number,step:i.optional.number})});return n?{initialValue:t,params:n}:null},binding:{reader:t=>Ir,constraint:t=>{return e=t.params,i=t.initialValue,new Wn({assembly:Qn,components:[Or("x"in e?e.x:void 0,i.x),Or("y"in e?e.y:void 0,i.y)]});var e,i},equals:$n.equals,writer:t=>Nr},controller:t=>{const e=t.document,i=t.value,n=t.constraint;if(!(n instanceof Wn))throw u.shouldNeverHappen();const r="expanded"in t.params?t.params.expanded:void 0,s="picker"in t.params?t.params.picker:void 0;return new ar(e,{axes:[kr(i.rawValue.x,n.components[0]),kr(i.rawValue.y,n.components[1])],expanded:null!=r&&r,invertsY:Vr(t.params),maxValue:Br(i.rawValue,n),parser:Pe,pickerLayout:null!=s?s:"popup",value:i,viewProps:t.viewProps})}};class Gr extends e{constructor(t){super(t),this.emitter_=new m,this.controller_.valueController.value.emitter.on("change",(t=>{this.emitter_.emit("change",{event:new n(this,t.rawValue)})}))}get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}get options(){return this.controller_.valueController.props.get("options")}set options(t){this.controller_.valueController.props.set("options",t)}get value(){return this.controller_.valueController.value.rawValue}set value(t){this.controller_.valueController.value.rawValue=t}on(t,e){const i=e.bind(this);return this.emitter_.on(t,(t=>{i(t.event)})),this}}class Wr extends e{constructor(t){super(t),this.emitter_=new m,this.controller_.valueController.value.emitter.on("change",(t=>{this.emitter_.emit("change",{event:new n(this,t.rawValue)})}))}get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}get maxValue(){return this.controller_.valueController.sliderController.props.get("maxValue")}set maxValue(t){this.controller_.valueController.sliderController.props.set("maxValue",t)}get minValue(){return this.controller_.valueController.sliderController.props.get("minValue")}set minValue(t){this.controller_.valueController.sliderController.props.set("minValue",t)}get value(){return this.controller_.valueController.value.rawValue}set value(t){this.controller_.valueController.value.rawValue=t}on(t,e){const i=e.bind(this);return this.emitter_.on(t,(t=>{i(t.event)})),this}}class jr extends e{constructor(t){super(t),this.emitter_=new m,this.controller_.valueController.value.emitter.on("change",(t=>{this.emitter_.emit("change",{event:new n(this,t.rawValue)})}))}get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}get formatter(){return this.controller_.valueController.props.get("formatter")}set formatter(t){this.controller_.valueController.props.set("formatter",t)}get value(){return this.controller_.valueController.value.rawValue}set value(t){this.controller_.valueController.value.rawValue=t}on(t,e){const i=e.bind(this);return this.emitter_.on(t,(t=>{i(t.event)})),this}}const Xr={id:"list",type:"blade",accept(t){const e=P,i=z(t,{options:e.required.custom(ai),value:e.required.raw,view:e.required.constant("list"),label:e.optional.string});return i?{params:i}:null},controller(t){const e=new te(hi(t.params.options)),i=T(t.params.value,{constraint:e}),n=new se(t.document,{props:new A({options:e.values.value("options")}),value:i,viewProps:t.viewProps});return new Tt(t.document,{blade:t.blade,props:A.fromObject({label:t.params.label}),valueController:n})},api:t=>t.controller instanceof Tt&&t.controller.valueController instanceof se?new Gr(t.controller):null};class Yr extends gt{constructor(t,e){super(t,e)}get element(){return this.controller_.view.element}importPreset(t){(function(t,e){t.forEach((t=>{const i=e[t.target.presetKey];void 0!==i&&t.writer(t.target,t.reader(i))}))})(this.controller_.rackController.rack.find(ht).map((t=>t.binding)),t),this.refresh()}exportPreset(){return this.controller_.rackController.rack.find(ht).map((t=>t.binding.target)).reduce(((t,e)=>Object.assign(t,{[e.presetKey]:e.read()})),{})}refresh(){this.controller_.rackController.rack.find(ht).forEach((t=>{t.binding.read()})),this.controller_.rackController.rack.find(ut).forEach((t=>{t.binding.read()}))}}class Kr extends St{constructor(t,e){super(t,{expanded:e.expanded,blade:e.blade,props:e.props,root:!0,viewProps:e.viewProps})}}const Zr={id:"slider",type:"blade",accept(t){const e=P,i=z(t,{max:e.required.number,min:e.required.number,view:e.required.constant("slider"),format:e.optional.function,label:e.optional.string,value:e.optional.number});return i?{params:i}:null},controller(t){var e,i;const n=null!==(e=t.params.value)&&void 0!==e?e:0,r=new Qt({max:t.params.max,min:t.params.min}),s=new ri(t.document,{baseStep:1,parser:Pe,sliderProps:new A({maxValue:r.values.value("max"),minValue:r.values.value("min")}),textProps:A.fromObject({draggingScale:pi(void 0,n),formatter:null!==(i=t.params.format)&&void 0!==i?i:Le}),value:T(n,{constraint:r}),viewProps:t.viewProps});return new Tt(t.document,{blade:t.blade,props:A.fromObject({label:t.params.label}),valueController:s})},api:t=>t.controller instanceof Tt&&t.controller.valueController instanceof ri?new Wr(t.controller):null},Jr={id:"text",type:"blade",accept(t){const e=P,i=z(t,{parse:e.required.function,value:e.required.raw,view:e.required.constant("text"),format:e.optional.function,label:e.optional.string});return i?{params:i}:null},controller(t){var e;const i=new ue(t.document,{parser:t.params.parse,props:A.fromObject({formatter:null!==(e=t.params.format)&&void 0!==e?e:t=>String(t)}),value:T(t.params.value),viewProps:t.viewProps});return new Tt(t.document,{blade:t.blade,props:A.fromObject({label:t.params.label}),valueController:i})},api:t=>t.controller instanceof Tt&&t.controller.valueController instanceof ue?new jr(t.controller):null};function $r(t,e,i){if(t.querySelector(`style[data-tp-style=${e}]`))return;const n=t.createElement("style");n.dataset.tpStyle=e,n.textContent=i,t.head.appendChild(n)}const Qr=new class{constructor(t){const[e,i]=t.split("-"),n=e.split(".");this.major=parseInt(n[0],10),this.minor=parseInt(n[1],10),this.patch=parseInt(n[2],10),this.prerelease=null!=i?i:null}toString(){const t=[this.major,this.minor,this.patch].join(".");return null!==this.prerelease?[t,this.prerelease].join("-"):t}}("3.1.9");t.BladeApi=e,t.ButtonApi=p,t.FolderApi=gt,t.InputBindingApi=lt,t.ListApi=Gr,t.MonitorBindingApi=ct,t.Pane=class extends Yr{constructor(t){var e,i;const n=null!=t?t:{},r=null!==(e=n.document)&&void 0!==e?e:G(),s=function(){const t=new Dr;return[Hr,dr,vr,xr,Jn,Gn,Hn,Bn,vi,Er,Lr,zr,tt,Et,zt,Ht].forEach((e=>{t.register(e)})),t}();super(new Kr(r,{expanded:n.expanded,blade:it(),props:A.fromObject({title:n.title}),viewProps:N.create()}),s),this.pool_=s,this.containerElem_=null!==(i=n.container)&&void 0!==i?i:function(t){const e=t.createElement("div");return e.classList.add(g("dfw")()),t.body&&t.body.appendChild(e),e}(r),this.containerElem_.appendChild(this.element),this.doc_=r,this.usesDefaultWrapper_=!n.container,this.setUpDefaultPlugins_()}get document(){if(!this.doc_)throw u.alreadyDisposed();return this.doc_}dispose(){const t=this.containerElem_;if(!t)throw u.alreadyDisposed();if(this.usesDefaultWrapper_){const e=t.parentElement;e&&e.removeChild(t)}this.containerElem_=null,this.doc_=null,super.dispose()}registerPlugin(t){("plugin"in t?[t.plugin]:"plugins"in t?t.plugins:[]).forEach((t=>{this.pool_.register(t),this.embedPluginStyle_(t)}))}embedPluginStyle_(t){t.css&&$r(this.document,`plugin-${t.id}`,t.css)}setUpDefaultPlugins_(){$r(this.document,"default",'.tp-tbiv_b,.tp-coltxtv_ms,.tp-ckbv_i,.tp-rotv_b,.tp-fldv_b,.tp-mllv_i,.tp-sglv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-mllv_i,.tp-sglv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--mo-fg);height:var(--bld-us);scrollbar-color:currentColor rgba(0,0,0,0);scrollbar-width:thin;width:100%}.tp-mllv_i::-webkit-scrollbar,.tp-sglv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-mllv_i::-webkit-scrollbar-corner,.tp-sglv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:rgba(0,0,0,0)}.tp-mllv_i::-webkit-scrollbar-thumb,.tp-sglv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:rgba(0,0,0,0) solid 2px;border-radius:4px}.tp-rotv{--font-family: var(--tp-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-br: var(--tp-base-border-radius, 6px);--cnt-h-p: var(--tp-container-horizontal-padding, 4px);--cnt-v-p: var(--tp-container-vertical-padding, 4px);--elm-br: var(--tp-element-border-radius, 2px);--bld-s: var(--tp-blade-spacing, 4px);--bld-us: var(--tp-blade-unit-size, 20px);--bs-bg: var(--tp-base-background-color, hsl(230, 7%, 17%));--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--btn-bg: var(--tp-button-background-color, hsl(230, 7%, 70%));--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, hsl(230, 7%, 17%));--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, hsl(230, 7%, 75%));--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, hsl(230, 7%, 75%));--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tabv_c .tp-brkv>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1*var(--cnt-v-p))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tabv_c .tp-brkv>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--bld-s)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tabv_c .tp-brkv>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tabv_c .tp-brkv>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--elm-br);border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tabv_c .tp-brkv .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-cntv+.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-cntv+.tp-fldv>.tp-fldv_b{border-top-left-radius:0}.tp-tabv_c .tp-brkv>.tp-cntv+.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-cntv+.tp-tabv>.tp-tabv_t{border-top-left-radius:0}.tp-tabv_c .tp-brkv>.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-tabv>.tp-tabv_t{border-top-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--elm-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);overflow:hidden;padding-left:var(--cnt-h-p);padding-right:calc(4px + var(--bld-us) + var(--cnt-h-p));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:"";display:block;height:6px;right:calc(var(--cnt-h-p) + (var(--bld-us) + 4px - 6px)/2 - 2px);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--elm-br);cursor:pointer;display:block;height:var(--bld-us);position:relative;width:var(--bld-us)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--bld-us)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-expanded.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--bld-s);opacity:1}.tp-colv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--bld-s)}.tp-colpv_rgb{display:flex;margin-top:var(--bld-s);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-v-p);padding-top:calc(var(--cnt-v-p) + 2px);position:relative}.tp-colpv_a::before{background-color:var(--grv-fg);content:"";height:2px;left:calc(-1*var(--cnt-h-p));position:absolute;right:calc(-1*var(--cnt-h-p));top:0}.tp-colpv.tp-v-disabled .tp-colpv_a::before{opacity:.5}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--elm-br);outline:none;overflow:hidden;position:relative}.tp-svpv.tp-v-disabled{opacity:.5}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--bld-us)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative}.tp-hplv.tp-v-disabled{opacity:.5}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative;width:100%}.tp-aplv.tp-v-disabled{opacity:.5}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--elm-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--elm-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;cursor:pointer;display:block;height:var(--bld-us);left:0;margin:0;outline:none;padding:0;position:absolute;top:0;width:var(--bld-us)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--elm-br);bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--elm-br);color:var(--lbl-fg);cursor:pointer;height:var(--bld-us);line-height:var(--bld-us);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv.tp-v-disabled .tp-coltxtv_mm{opacity:.5}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv{position:relative}.tp-fldv.tp-fldv-not .tp-fldv_b{display:none}.tp-fldv_t{padding-left:4px}.tp-fldv_b:disabled .tp-fldv_m{display:none}.tp-fldv_c{padding-left:4px}.tp-fldv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--bld-us) + 4px);width:var(--bs-br)}.tp-fldv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-fldv_b:hover+.tp-fldv_i{color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_i{color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_i{color:var(--cnt-bg-a)}.tp-fldv.tp-v-disabled>.tp-fldv_i{opacity:.5}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--bld-us)*3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-h-p);padding-right:var(--cnt-h-p)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:160px}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding:0 4px}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--bld-us)*3);line-height:var(--bld-us);padding:0 4px;resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--bld-us);margin-right:4px;position:relative;width:var(--bld-us)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--bld-s);opacity:1}.tp-p2dv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-p2dpv{padding-left:calc(var(--bld-us) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv.tp-v-disabled .tp-p2dpv_p{opacity:.5}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:6px;box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:168px;padding:var(--cnt-v-p) var(--cnt-h-p);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sprv.tp-v-disabled .tp-sprv_r{opacity:.5}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--bld-us);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--elm-br);bottom:0;content:"";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv{position:relative}.tp-tabv_t{align-items:flex-end;color:var(--cnt-bg);display:flex;overflow:hidden;position:relative}.tp-tabv_t:hover{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus){color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active){color:var(--cnt-bg-a)}.tp-tabv_t::before{background-color:currentColor;bottom:0;content:"";height:2px;left:0;pointer-events:none;position:absolute;right:0}.tp-tabv.tp-v-disabled .tp-tabv_t::before{opacity:.5}.tp-tabv.tp-tabv-nop .tp-tabv_t{height:calc(var(--bld-us) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_t::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:0;position:absolute;right:0}.tp-tabv_c{padding-bottom:var(--cnt-v-p);padding-left:4px;padding-top:var(--cnt-v-p)}.tp-tabv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--bld-us) + 4px);width:var(--bs-br)}.tp-tabv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-tabv_t:hover+.tp-tabv_i{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus)+.tp-tabv_i{color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active)+.tp-tabv_i{color:var(--cnt-bg-a)}.tp-tabv.tp-v-disabled>.tp-tabv_i{opacity:.5}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv.tp-v-disabled::before{opacity:.5}.tp-tbiv_b{display:block;padding-left:calc(var(--cnt-h-p) + 4px);padding-right:calc(var(--cnt-h-p) + 4px);position:relative;width:100%}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_b::before{background-color:var(--cnt-bg);bottom:2px;content:"";left:0;pointer-events:none;position:absolute;right:0;top:0}.tp-tbiv_b:hover::before{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus::before{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active::before{background-color:var(--cnt-bg-a)}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);opacity:.5;overflow:hidden;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-txtv{position:relative}.tp-txtv_i{padding:0 4px}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:-3px;position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";height:calc(var(--bld-us) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--elm-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);border-style:solid;border-width:2px;box-sizing:border-box;content:"";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--font-family);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(4px + var(--bld-us) + var(--cnt-h-p));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0}.tp-rotv.tp-rotv-not .tp-rotv_b{display:none}.tp-rotv_b:disabled .tp-rotv_m{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_t{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}'),this.pool_.getAll().forEach((t=>{this.embedPluginStyle_(t)})),this.registerPlugin({plugins:[Zr,Xr,Ht,Jr]})}},t.SeparatorApi=At,t.SliderApi=Wr,t.TabApi=Ot,t.TabPageApi=Nt,t.TextApi=jr,t.TpChangeEvent=n,t.VERSION=Qr,Object.defineProperty(t,"__esModule",{value:!0})}(e)}},n={};function r(t){var e=n[t];if(void 0!==e)return e.exports;var s=n[t]={exports:{}};return i[t].call(s.exports,s,s.exports,r),s.exports}e=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,r.t=function(i,n){if(1&n&&(i=this(i)),8&n)return i;if("object"==typeof i&&i){if(4&n&&i.__esModule)return i;if(16&n&&"function"==typeof i.then)return i}var s=Object.create(null);r.r(s);var a={};t=t||[null,e({}),e([]),e(e)];for(var o=2&n&&i;"object"==typeof o&&!~t.indexOf(o);o=e(o))Object.getOwnPropertyNames(o).forEach((t=>a[t]=()=>i[t]));return a.default=()=>i,r.d(s,a),s},r.d=(t,e)=>{for(var i in e)r.o(e,i)&&!r.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{"use strict";const t=JSON.parse('{"glyphs":{"0":{"ha":745,"x_min":49,"x_max":695,"o":"m 695 726 l 695 360 q 682 178 695 235 q 625 72 668 121 q 522 1 583 22 q 387 -21 462 -21 q 224 2 289 -21 q 120 73 159 24 q 65 174 81 121 q 49 343 49 227 l 49 726 q 75 953 49 878 q 179 1074 101 1028 q 367 1119 256 1119 q 528 1087 457 1119 q 635 1010 600 1056 q 683 908 670 965 q 695 726 695 851 m 421 819 q 413 928 421 906 q 373 950 404 950 q 333 927 342 950 q 323 819 323 903 l 323 283 q 332 168 323 187 q 372 148 341 148 q 412 171 402 148 q 421 275 421 194 l 421 819 z "},"1":{"ha":529,"x_min":8,"x_max":471,"o":"m 471 1098 l 471 0 l 197 0 l 197 589 q 191 742 197 716 q 158 781 185 768 q 35 794 130 794 l 8 794 l 8 922 q 310 1098 207 965 l 471 1098 z "},"2":{"ha":697,"x_min":37,"x_max":664,"o":"m 640 187 l 640 0 l 37 0 l 37 157 q 355 699 304 595 q 406 861 406 803 q 390 928 406 906 q 344 950 375 950 q 297 926 313 950 q 282 829 282 901 l 282 724 l 37 724 l 37 764 q 46 910 37 857 q 93 1015 56 963 q 190 1093 130 1066 q 333 1119 250 1119 q 580 1038 496 1119 q 664 833 664 957 q 617 633 664 739 q 339 187 570 528 l 640 187 z "},"3":{"ha":736,"x_min":41,"x_max":687,"o":"m 564 622 q 656 553 626 601 q 687 329 687 505 q 657 126 687 198 q 554 16 627 54 q 366 -22 481 -22 q 162 22 236 -22 q 64 129 87 66 q 41 349 41 193 l 41 436 l 315 436 l 315 258 q 323 167 315 186 q 361 148 332 148 q 403 172 393 148 q 413 300 413 197 l 413 376 q 399 468 413 439 q 357 506 385 497 q 249 517 329 515 l 249 676 q 370 684 347 676 q 403 716 393 691 q 413 795 413 741 l 413 856 q 401 932 413 913 q 364 950 389 950 q 325 931 336 950 q 315 848 315 911 l 315 758 l 41 758 l 41 852 q 113 1064 41 1009 q 341 1120 184 1120 q 607 1043 537 1120 q 677 830 677 966 q 652 697 677 738 q 564 622 627 656 z "},"4":{"ha":694,"x_min":8,"x_max":686,"o":"m 608 1098 l 608 380 l 686 380 l 686 193 l 608 193 l 608 0 l 334 0 l 334 193 l 8 193 l 8 380 l 245 1098 l 608 1098 m 334 380 l 334 848 l 213 380 l 334 380 z "},"5":{"ha":745,"x_min":45,"x_max":701,"o":"m 647 1098 l 647 922 l 307 922 l 307 736 q 471 811 371 811 q 643 748 585 811 q 701 504 701 684 l 701 347 q 689 176 701 231 q 642 75 678 121 q 539 4 605 28 q 380 -21 474 -21 q 193 16 274 -21 q 79 126 113 53 q 45 353 45 199 l 45 412 l 319 412 l 319 344 q 326 193 319 237 q 378 148 334 148 q 411 161 398 148 q 424 189 423 174 q 427 318 425 203 l 427 536 q 414 620 427 597 q 371 642 401 642 q 339 631 352 642 q 322 606 326 619 q 319 545 319 593 l 47 545 l 59 1098 l 647 1098 z "},"6":{"ha":752,"x_min":49,"x_max":707,"o":"m 707 806 l 433 806 q 431 903 433 883 q 415 937 429 923 q 375 950 400 950 q 340 937 354 950 q 325 904 327 924 q 323 822 323 884 l 323 647 q 385 713 344 691 q 485 735 425 735 q 618 694 560 735 q 691 597 675 654 q 707 443 707 540 l 707 355 q 698 184 707 240 q 651 80 689 127 q 546 5 612 32 q 390 -21 479 -21 q 209 9 279 -21 q 100 97 138 40 q 55 218 62 155 q 49 463 49 281 l 49 614 q 55 877 49 810 q 102 1002 60 943 q 215 1090 143 1061 q 380 1120 286 1120 q 569 1082 495 1120 q 675 977 643 1045 q 707 806 707 909 m 433 464 q 420 544 433 522 q 378 566 407 566 q 336 545 349 566 q 323 464 323 524 l 323 265 q 335 170 323 193 q 377 148 348 148 q 414 165 395 148 q 433 258 433 182 l 433 464 z "},"7":{"ha":544,"x_min":8,"x_max":532,"o":"m 532 1098 l 532 859 l 357 0 l 84 0 l 279 901 l 8 901 l 8 1098 l 532 1098 z "},"8":{"ha":743,"x_min":45,"x_max":697,"o":"m 572 623 q 665 550 632 598 q 697 319 697 501 q 671 123 697 186 q 571 19 646 60 q 371 -21 496 -21 q 178 18 249 -21 q 76 120 106 56 q 45 332 45 184 q 60 505 45 432 q 156 623 75 578 q 80 700 105 647 q 54 836 54 753 q 133 1048 54 977 q 368 1119 212 1119 q 618 1044 549 1119 q 688 829 688 968 q 665 701 688 740 q 572 623 642 661 m 418 859 q 408 932 418 914 q 370 950 398 950 q 334 931 343 950 q 324 859 324 911 l 324 775 q 335 707 324 726 q 372 688 346 688 q 408 706 399 688 q 418 783 418 725 l 418 859 m 423 402 q 410 486 423 465 q 370 507 397 507 q 331 487 342 507 q 319 402 319 467 l 319 260 q 332 168 319 189 q 374 148 345 148 q 413 169 403 148 q 423 262 423 189 l 423 402 z "},"9":{"ha":752,"x_min":49,"x_max":707,"o":"m 49 292 l 323 292 q 325 195 323 215 q 341 161 327 175 q 381 148 356 148 q 416 161 402 148 q 431 194 429 174 q 433 276 433 214 l 433 451 q 372 385 412 407 q 271 363 331 363 q 138 404 195 363 q 64 501 80 444 q 49 655 49 558 l 49 743 q 58 914 49 858 q 105 1018 67 970 q 210 1093 143 1066 q 366 1119 277 1119 q 547 1088 476 1119 q 656 1001 617 1058 q 701 880 694 943 q 707 636 707 817 l 707 484 q 701 221 707 288 q 654 96 696 155 q 541 8 612 37 q 376 -22 470 -22 q 187 16 260 -22 q 81 121 113 53 q 49 292 49 189 m 323 634 q 341 549 323 565 q 378 532 359 532 q 419 553 406 532 q 433 634 433 574 l 433 833 q 420 928 433 905 q 378 950 408 950 q 342 933 361 950 q 323 840 323 916 l 323 634 z "}," ":{"ha":245,"x_min":0,"x_max":0,"o":""},"!":{"ha":375,"x_min":49,"x_max":350,"o":"m 350 1098 l 305 271 l 94 271 l 49 1098 l 350 1098 m 328 220 l 328 0 l 71 0 l 71 220 l 328 220 z "},"\\"":{"ha":513,"x_min":24,"x_max":489,"o":"m 60 745 l 24 930 l 24 1098 l 232 1098 l 232 930 l 201 745 l 60 745 m 317 745 l 281 930 l 281 1098 l 489 1098 l 489 930 l 457 745 l 317 745 z "},"#":{"ha":870,"x_min":24,"x_max":846,"o":"m 24 720 l 233 720 l 290 979 l 418 979 l 361 720 l 602 720 l 658 979 l 786 979 l 730 720 l 846 720 l 846 591 l 706 591 l 663 386 l 846 386 l 846 258 l 639 258 l 583 0 l 454 0 l 511 258 l 267 258 l 214 0 l 85 0 l 140 258 l 24 258 l 24 386 l 166 386 l 209 591 l 24 591 l 24 720 m 337 591 l 294 387 l 536 387 l 578 591 l 337 591 z "},"$":{"ha":760,"x_min":37,"x_max":723,"o":"m 691 778 l 417 778 l 417 823 q 408 918 417 896 q 367 941 398 941 q 329 921 342 941 q 317 863 317 902 q 342 773 317 799 q 490 673 368 747 q 633 576 595 610 q 697 481 671 543 q 723 328 723 420 q 652 98 723 182 q 441 -5 582 15 l 441 -108 l 315 -108 l 315 -1 q 123 83 205 9 q 41 340 41 157 l 41 393 l 315 393 l 315 326 q 323 189 315 216 q 364 162 332 162 q 406 181 392 162 q 419 236 419 199 q 406 368 419 328 q 318 454 393 408 q 148 570 193 533 q 70 674 102 607 q 37 826 37 741 q 106 1019 37 949 q 315 1105 176 1088 l 315 1192 l 441 1192 l 441 1105 q 631 1020 568 1088 q 694 829 694 951 q 691 778 694 812 z "},"%":{"ha":962,"x_min":24,"x_max":938,"o":"m 748 1119 l 319 -21 l 214 -21 l 645 1119 l 748 1119 m 429 911 l 429 722 q 415 611 429 648 q 355 547 401 574 q 234 519 309 519 q 102 546 147 519 q 40 608 56 572 q 24 713 24 645 l 24 911 q 41 1031 24 992 q 105 1095 58 1070 q 222 1119 153 1119 q 348 1092 300 1119 q 412 1027 396 1065 q 429 911 429 989 m 255 959 q 251 1013 255 1002 q 227 1023 246 1023 q 203 1012 208 1023 q 197 959 197 1001 l 197 682 q 202 625 197 635 q 227 616 207 616 q 250 627 245 616 q 255 677 255 637 l 255 959 m 938 380 l 938 191 q 924 81 938 118 q 864 16 910 43 q 743 -12 819 -12 q 611 15 657 -12 q 550 78 566 41 q 534 182 534 115 l 534 380 q 550 500 534 461 q 614 564 567 539 q 732 589 662 589 q 858 562 810 589 q 922 496 906 534 q 938 380 938 458 m 764 428 q 760 482 764 471 q 736 492 755 492 q 712 481 718 492 q 707 428 707 471 l 707 151 q 712 95 707 104 q 736 85 717 85 q 760 96 755 85 q 764 147 764 106 l 764 428 z "},"&":{"ha":800,"x_min":24,"x_max":800,"o":"m 781 417 l 781 232 l 704 183 l 800 0 l 547 0 l 514 61 q 273 -23 387 -23 q 89 56 153 -23 q 24 248 24 136 q 62 388 24 337 q 176 471 100 439 q 68 682 68 549 q 145 866 68 796 q 358 936 222 936 q 550 867 480 936 q 621 693 621 799 q 535 496 621 582 l 632 321 l 781 417 m 359 610 q 405 725 405 670 q 391 768 405 749 q 353 788 378 788 q 319 773 331 788 q 308 728 308 758 q 359 610 308 664 m 420 185 l 332 333 q 281 233 281 287 q 297 175 281 195 q 344 156 313 156 q 420 185 377 156 z "},"\'":{"ha":257,"x_min":24,"x_max":232,"o":"m 60 745 l 24 930 l 24 1098 l 232 1098 l 232 930 l 201 745 l 60 745 z "},"(":{"ha":435,"x_min":57,"x_max":410,"o":"m 410 1098 l 410 955 q 337 950 354 955 q 313 928 321 945 q 305 830 305 911 l 305 268 q 311 174 305 193 q 334 149 317 155 q 410 143 351 143 l 410 0 l 324 0 q 149 22 205 0 q 75 87 93 44 q 57 269 57 130 l 57 829 q 75 1011 57 968 q 150 1076 92 1055 q 324 1098 208 1098 l 410 1098 z "},")":{"ha":435,"x_min":24,"x_max":378,"o":"m 24 1098 l 111 1098 q 285 1076 227 1098 q 360 1011 342 1055 q 378 829 378 968 l 378 269 q 360 87 378 130 q 286 22 342 44 q 111 0 230 0 l 24 0 l 24 143 q 101 149 85 143 q 124 174 117 155 q 130 268 130 193 l 130 830 q 122 928 130 911 q 97 950 114 945 q 24 955 81 955 l 24 1098 z "},"*":{"ha":390,"x_min":20,"x_max":370,"o":"m 239 1098 l 239 989 l 339 1023 l 370 943 l 269 901 l 332 812 l 264 762 l 196 852 l 129 762 l 58 812 l 121 905 l 20 943 l 50 1023 l 153 989 l 153 1098 l 239 1098 z "},"+":{"ha":741,"x_min":43,"x_max":697,"o":"m 43 631 l 287 631 l 287 875 l 452 875 l 452 631 l 697 631 l 697 465 l 452 465 l 452 222 l 287 222 l 287 465 l 43 465 l 43 631 z "},",":{"ha":233,"x_min":24,"x_max":208,"o":"m 208 215 l 208 117 q 190 -10 208 39 q 126 -94 172 -60 q 24 -140 81 -129 l 24 -62 q 71 0 65 -39 l 24 0 l 24 215 l 208 215 z "},"-":{"ha":409,"x_min":24,"x_max":385,"o":"m 385 545 l 385 355 l 24 355 l 24 545 l 385 545 z "},".":{"ha":256,"x_min":24,"x_max":231,"o":"m 231 224 l 231 0 l 24 0 l 24 224 l 231 224 z "},"/":{"ha":549,"x_min":8,"x_max":541,"o":"m 541 1119 l 216 -21 l 8 -21 l 336 1119 l 541 1119 z "},":":{"ha":281,"x_min":49,"x_max":256,"o":"m 256 715 l 256 492 l 49 492 l 49 715 l 256 715 m 256 224 l 256 0 l 49 0 l 49 224 l 256 224 z "},";":{"ha":281,"x_min":49,"x_max":256,"o":"m 256 715 l 256 492 l 49 492 l 49 715 l 256 715 m 244 215 l 244 117 q 226 -10 244 39 q 162 -94 208 -60 q 60 -140 117 -129 l 60 -62 q 106 0 101 -39 l 60 0 l 60 215 l 244 215 z "},"<":{"ha":741,"x_min":44,"x_max":696,"o":"m 696 220 l 44 492 l 44 629 l 696 902 l 696 723 l 294 561 l 696 399 l 696 220 z "},"=":{"ha":741,"x_min":44,"x_max":696,"o":"m 44 761 l 696 761 l 696 595 l 44 595 l 44 761 m 44 502 l 696 502 l 696 336 l 44 336 l 44 502 z "},">":{"ha":741,"x_min":44,"x_max":696,"o":"m 44 902 l 696 631 l 696 492 l 44 220 l 44 399 l 447 561 l 44 722 l 44 902 z "},"?":{"ha":729,"x_min":57,"x_max":704,"o":"m 331 744 l 57 744 q 81 955 58 888 q 181 1071 104 1021 q 378 1121 258 1121 q 528 1094 464 1121 q 631 1018 593 1067 q 686 913 669 970 q 704 737 704 857 l 704 603 q 687 456 704 511 q 613 358 670 400 q 479 316 556 316 q 331 394 380 316 l 331 276 l 75 276 l 75 578 l 325 578 q 370 515 326 515 q 413 543 404 515 q 422 677 422 570 l 422 860 q 413 941 422 920 q 380 962 405 962 q 340 934 349 962 q 331 810 331 907 l 331 744 m 331 220 l 331 0 l 75 0 l 75 220 l 331 220 z "},"@":{"ha":1076,"x_min":24,"x_max":1053,"o":"m 809 887 l 723 350 q 720 326 720 332 q 745 300 720 300 q 834 339 786 300 q 917 454 882 378 q 953 633 953 531 q 849 913 953 806 q 576 1020 745 1020 q 252 885 380 1020 q 125 524 125 749 q 249 178 125 306 q 566 50 374 50 q 747 82 661 50 q 909 177 832 114 l 1051 177 q 832 7 963 64 q 567 -51 702 -51 q 180 105 336 -51 q 24 517 24 262 q 170 946 24 771 q 573 1121 315 1121 q 825 1062 727 1121 q 988 896 922 1002 q 1053 633 1053 790 q 937 306 1053 425 q 705 186 821 186 q 598 264 617 186 q 518 202 552 220 q 438 185 485 185 q 276 264 337 185 q 215 474 215 342 q 300 775 215 644 q 507 907 385 907 q 595 883 556 907 q 664 810 635 859 l 675 887 l 809 887 m 356 435 q 383 328 356 372 q 456 283 410 283 q 533 318 500 283 q 595 460 567 353 q 624 665 624 568 q 598 764 624 726 q 528 802 572 802 q 401 685 446 802 q 356 435 356 569 z "},"A":{"ha":705,"x_min":-8,"x_max":713,"o":"m 550 1098 l 713 0 l 421 0 l 407 197 l 304 197 l 288 0 l -8 0 l 137 1098 l 550 1098 m 399 392 q 355 852 377 578 q 301 392 312 538 l 399 392 z "},"B":{"ha":767,"x_min":57,"x_max":722,"o":"m 57 1098 l 342 1098 q 546 1077 477 1098 q 659 992 616 1056 q 701 785 701 928 q 671 651 701 689 q 552 593 641 613 q 686 518 651 570 q 722 359 722 467 l 722 258 q 696 93 722 146 q 615 20 671 39 q 387 0 559 0 l 57 0 l 57 1098 m 342 910 l 342 666 q 371 667 361 667 q 425 687 413 667 q 436 806 436 708 q 427 878 436 857 q 402 904 417 899 q 342 910 387 909 m 342 495 l 342 188 q 419 207 403 190 q 436 290 436 224 l 436 393 q 421 478 436 463 q 342 495 406 493 z "},"C":{"ha":769,"x_min":49,"x_max":724,"o":"m 724 619 l 438 619 l 438 810 q 429 915 438 894 q 389 935 420 935 q 344 910 353 935 q 334 802 334 885 l 334 292 q 344 187 334 212 q 387 163 353 163 q 428 187 418 163 q 438 302 438 212 l 438 439 l 724 439 l 724 397 q 700 155 724 227 q 593 31 675 84 q 390 -23 511 -23 q 183 22 264 -23 q 75 148 102 68 q 49 390 49 229 l 49 711 q 57 889 49 829 q 105 1003 65 948 q 217 1089 146 1058 q 382 1121 289 1121 q 590 1072 508 1121 q 698 950 672 1023 q 724 724 724 878 l 724 619 z "},"D":{"ha":768,"x_min":57,"x_max":718,"o":"m 57 1098 l 271 1098 q 550 1079 477 1098 q 661 1017 623 1060 q 709 920 699 973 q 718 711 718 867 l 718 326 q 704 129 718 178 q 656 51 690 79 q 570 11 621 22 q 417 0 519 0 l 57 0 l 57 1098 m 342 910 l 342 188 q 418 213 404 188 q 433 347 433 237 l 433 774 q 428 869 433 848 q 406 900 423 890 q 342 910 389 910 z "},"E":{"ha":577,"x_min":57,"x_max":552,"o":"m 57 1098 l 533 1098 l 533 878 l 342 878 l 342 670 l 521 670 l 521 461 l 342 461 l 342 220 l 552 220 l 552 0 l 57 0 l 57 1098 z "},"F":{"ha":553,"x_min":57,"x_max":541,"o":"m 57 1098 l 541 1098 l 541 878 l 342 878 l 342 670 l 519 670 l 519 461 l 342 461 l 342 0 l 57 0 l 57 1098 z "},"G":{"ha":766,"x_min":49,"x_max":712,"o":"m 712 694 l 427 694 l 427 793 q 418 911 427 888 q 380 935 410 935 q 344 915 353 935 q 334 810 334 895 l 334 283 q 344 186 334 210 q 382 163 353 163 q 424 189 413 163 q 435 292 435 216 l 435 422 l 378 422 l 378 589 l 712 589 l 712 0 l 532 0 l 506 79 q 432 2 477 28 q 328 -23 388 -23 q 193 12 256 -23 q 98 98 130 47 q 57 207 65 150 q 49 376 49 263 l 49 703 q 66 931 49 860 q 163 1062 83 1002 q 371 1121 243 1121 q 579 1069 496 1121 q 687 947 662 1018 q 712 741 712 876 l 712 694 z "},"H":{"ha":771,"x_min":57,"x_max":713,"o":"m 713 1098 l 713 0 l 428 0 l 428 461 l 342 461 l 342 0 l 57 0 l 57 1098 l 342 1098 l 342 705 l 428 705 l 428 1098 l 713 1098 z "},"I":{"ha":400,"x_min":57,"x_max":342,"o":"m 342 1098 l 342 0 l 57 0 l 57 1098 l 342 1098 z "},"J":{"ha":460,"x_min":12,"x_max":406,"o":"m 406 1098 l 406 364 q 403 152 406 199 q 372 67 399 105 q 297 15 345 29 q 155 0 250 0 l 12 0 l 12 192 q 50 190 38 190 q 98 205 80 190 q 118 241 115 220 q 121 326 121 263 l 121 1098 l 406 1098 z "},"K":{"ha":745,"x_min":57,"x_max":753,"o":"m 737 1098 l 574 602 l 753 0 l 458 0 l 342 471 l 342 0 l 57 0 l 57 1098 l 342 1098 l 342 671 l 469 1098 l 737 1098 z "},"L":{"ha":528,"x_min":57,"x_max":516,"o":"m 342 1098 l 342 220 l 516 220 l 516 0 l 57 0 l 57 1098 l 342 1098 z "},"M":{"ha":996,"x_min":57,"x_max":938,"o":"m 938 1098 l 938 0 l 688 0 l 688 741 l 589 0 l 412 0 l 307 724 l 307 0 l 57 0 l 57 1098 l 427 1098 q 461 865 443 999 l 500 585 l 566 1098 l 938 1098 z "},"N":{"ha":752,"x_min":57,"x_max":694,"o":"m 694 1098 l 694 0 l 444 0 l 296 499 l 296 0 l 57 0 l 57 1098 l 296 1098 l 456 604 l 456 1098 l 694 1098 z "},"O":{"ha":759,"x_min":49,"x_max":709,"o":"m 709 455 q 702 221 709 290 q 653 95 694 152 q 542 7 612 38 q 379 -23 472 -23 q 221 6 291 -23 q 108 92 151 35 q 57 218 65 150 q 49 455 49 286 l 49 643 q 57 877 49 808 q 105 1003 64 946 q 216 1090 146 1060 q 379 1121 286 1121 q 537 1092 467 1121 q 650 1006 608 1063 q 701 880 693 948 q 709 643 709 812 l 709 455 m 424 816 q 415 914 424 892 q 380 935 407 935 q 346 918 358 935 q 334 816 334 901 l 334 303 q 342 185 334 208 q 378 163 350 163 q 416 189 408 163 q 424 311 424 214 l 424 816 z "},"P":{"ha":697,"x_min":57,"x_max":672,"o":"m 57 1098 l 345 1098 q 524 1080 461 1098 q 618 1027 587 1061 q 661 943 650 992 q 672 791 672 894 l 672 695 q 650 542 672 590 q 571 468 629 494 q 419 442 513 442 l 342 442 l 342 0 l 57 0 l 57 1098 m 342 910 l 342 631 q 363 630 355 630 q 418 649 403 630 q 433 730 433 669 l 433 820 q 416 893 433 876 q 342 910 398 910 z "},"Q":{"ha":759,"x_min":49,"x_max":710,"o":"m 710 0 l 710 -133 l 494 -133 q 385 -121 416 -133 q 341 -85 353 -109 q 330 0 330 -62 q 163 51 233 3 q 71 173 94 99 q 49 395 49 248 l 49 735 q 62 906 49 847 q 117 1016 75 964 q 223 1095 158 1068 q 368 1121 288 1121 q 538 1088 463 1121 q 650 1006 613 1056 q 698 902 687 956 q 709 741 709 848 l 709 385 q 695 186 709 238 q 641 103 681 134 q 533 56 600 72 q 548 9 535 19 q 611 0 562 0 l 710 0 m 424 816 q 415 914 424 892 q 380 935 407 935 q 346 918 358 935 q 334 816 334 901 l 334 303 q 342 185 334 208 q 378 163 350 163 q 416 189 408 163 q 424 311 424 214 l 424 816 z "},"R":{"ha":748,"x_min":57,"x_max":694,"o":"m 57 1098 l 259 1098 q 533 1082 461 1098 q 649 1003 604 1067 q 694 798 694 939 q 663 626 694 670 q 537 573 631 582 q 651 517 622 552 q 687 452 680 481 q 694 290 694 422 l 694 0 l 429 0 l 429 365 q 415 474 429 453 q 342 495 401 495 l 342 0 l 57 0 l 57 1098 m 342 910 l 342 666 q 410 679 391 666 q 429 765 429 692 l 429 825 q 411 894 429 878 q 342 910 392 910 z "},"S":{"ha":718,"x_min":33,"x_max":686,"o":"m 662 766 l 397 766 l 397 847 q 387 920 397 904 q 353 935 376 935 q 314 914 327 935 q 300 850 300 893 q 315 768 300 795 q 396 701 330 740 q 636 515 587 587 q 686 281 686 442 q 658 108 686 163 q 552 15 631 52 q 369 -23 473 -23 q 173 20 254 -23 q 67 131 92 64 q 42 321 42 198 l 42 393 l 307 393 l 307 260 q 318 180 307 198 q 358 163 330 163 q 400 185 387 163 q 414 252 414 208 q 388 378 414 349 q 254 478 361 408 q 113 581 148 549 q 56 669 79 612 q 33 812 33 725 q 65 997 33 939 q 170 1088 98 1055 q 343 1121 241 1121 q 533 1085 454 1121 q 636 995 611 1049 q 662 809 662 940 l 662 766 z "},"T":{"ha":640,"x_min":8,"x_max":632,"o":"m 632 1098 l 632 878 l 463 878 l 463 0 l 177 0 l 177 878 l 8 878 l 8 1098 l 632 1098 z "},"U":{"ha":760,"x_min":53,"x_max":706,"o":"m 706 1098 l 706 364 q 698 189 706 239 q 650 85 690 138 q 544 4 610 32 q 390 -23 479 -23 q 216 9 292 -23 q 104 94 141 42 q 60 204 66 146 q 53 448 53 262 l 53 1098 l 338 1098 l 338 275 q 346 183 338 203 q 378 163 354 163 q 413 185 405 163 q 420 289 420 207 l 420 1098 l 706 1098 z "},"V":{"ha":727,"x_min":-8,"x_max":735,"o":"m 735 1098 l 590 0 l 157 0 l -8 1098 l 293 1098 q 368 331 345 644 q 414 894 390 648 l 434 1098 l 735 1098 z "},"W":{"ha":1131,"x_min":0,"x_max":1131,"o":"m 1131 1098 l 1004 0 l 648 0 q 562 575 599 253 q 482 0 545 437 l 127 0 l 0 1098 l 277 1098 l 307 715 l 336 345 q 415 1098 352 632 l 712 1098 q 743 736 718 1050 l 774 319 q 854 1098 798 717 l 1131 1098 z "},"X":{"ha":670,"x_min":0,"x_max":686,"o":"m 635 1098 l 536 612 l 686 0 l 422 0 q 335 399 374 164 q 305 179 324 296 l 278 0 l 0 0 l 103 612 l 0 1098 l 276 1098 q 306 947 283 1053 q 335 799 323 866 l 396 1098 l 635 1098 z "},"Y":{"ha":657,"x_min":-8,"x_max":665,"o":"m 665 1098 l 457 397 l 457 0 l 193 0 l 193 397 l -8 1098 l 254 1098 q 323 666 316 777 q 403 1098 347 842 l 665 1098 z "},"Z":{"ha":551,"x_min":8,"x_max":534,"o":"m 534 1098 l 534 878 l 321 220 l 534 220 l 534 0 l 8 0 l 8 159 l 228 878 l 34 878 l 34 1098 l 534 1098 z "},"[":{"ha":392,"x_min":57,"x_max":367,"o":"m 367 1098 l 367 929 l 305 929 l 305 169 l 367 169 l 367 0 l 57 0 l 57 1098 l 367 1098 z "},"\\\\":{"ha":549,"x_min":8,"x_max":541,"o":"m 8 1119 l 214 1119 l 541 -21 l 334 -21 l 8 1119 z "},"]":{"ha":392,"x_min":24,"x_max":334,"o":"m 24 0 l 24 169 l 86 169 l 86 929 l 24 929 l 24 1098 l 334 1098 l 334 0 l 24 0 z "},"^":{"ha":671,"x_min":8,"x_max":663,"o":"m 8 556 l 263 1098 l 414 1098 l 663 556 l 470 556 l 336 888 l 202 556 l 8 556 z "},"_":{"ha":767,"x_min":-8,"x_max":775,"o":"m -8 -104 l 775 -104 l 775 -174 l -8 -174 l -8 -104 z "},"`":{"ha":463,"x_min":0,"x_max":361,"o":"m 0 1202 l 241 1202 l 361 1018 l 223 1018 l 0 1202 z "},"a":{"ha":700,"x_min":37,"x_max":654,"o":"m 294 551 l 37 551 l 37 612 q 61 773 37 716 q 157 873 85 829 q 346 916 230 916 q 555 867 485 916 q 640 746 626 818 q 654 452 654 675 l 654 0 l 388 0 l 388 80 q 323 8 363 32 q 229 -16 283 -16 q 97 24 157 -16 q 37 201 37 64 l 37 275 q 68 412 37 376 q 227 498 100 449 q 371 569 361 551 q 380 644 380 587 q 370 735 380 714 q 335 757 359 757 q 300 739 307 757 q 294 646 294 721 l 294 551 m 380 428 q 304 347 315 380 q 294 254 294 315 q 303 163 294 184 q 339 143 312 143 q 373 159 365 143 q 380 243 380 175 l 380 428 z "},"b":{"ha":722,"x_min":49,"x_max":680,"o":"m 323 1098 l 323 838 q 398 897 357 878 q 489 916 440 916 q 587 899 545 916 q 650 849 628 881 q 676 787 671 817 q 680 656 680 756 l 680 251 q 667 103 680 152 q 605 19 654 55 q 489 -16 556 -16 q 399 5 441 -16 q 323 68 357 26 l 305 0 l 49 0 l 49 1098 l 323 1098 m 406 644 q 397 735 406 714 q 363 757 389 757 q 330 738 338 757 q 323 644 323 720 l 323 256 q 331 163 323 184 q 365 143 340 143 q 398 164 391 143 q 406 265 406 185 l 406 644 z "},"c":{"ha":687,"x_min":41,"x_max":654,"o":"m 654 560 l 396 560 l 396 664 q 387 738 396 718 q 355 757 378 757 q 323 740 331 757 q 315 664 315 723 l 315 239 q 327 167 315 191 q 363 143 339 143 q 400 168 391 143 q 410 263 410 193 l 410 370 l 654 370 q 647 209 654 262 q 601 98 640 155 q 501 13 563 41 q 349 -16 439 -16 q 165 23 233 -16 q 69 135 97 63 q 41 338 41 206 l 41 593 q 64 766 41 708 q 162 870 87 825 q 345 916 237 916 q 528 871 452 916 q 629 756 604 825 q 654 560 654 687 z "},"d":{"ha":722,"x_min":41,"x_max":672,"o":"m 672 1098 l 672 0 l 398 0 l 398 65 q 315 4 359 24 q 224 -16 272 -16 q 114 17 161 -16 q 54 95 67 51 q 41 239 41 139 l 41 660 q 54 807 41 764 q 115 883 67 850 q 228 916 162 916 q 321 898 279 916 q 398 843 363 880 l 398 1098 l 672 1098 m 398 673 q 390 740 398 723 q 356 757 381 757 q 323 742 332 757 q 315 673 315 726 l 315 233 q 323 160 315 178 q 354 143 331 143 q 389 162 380 143 q 398 257 398 182 l 398 673 z "},"e":{"ha":710,"x_min":41,"x_max":669,"o":"m 669 434 l 315 434 l 315 239 q 323 161 315 178 q 357 143 332 143 q 399 166 389 143 q 410 257 410 190 l 410 376 l 669 376 l 669 309 q 659 181 669 226 q 610 85 648 136 q 512 9 571 35 q 363 -16 452 -16 q 210 9 276 -16 q 106 78 143 34 q 55 174 69 121 q 41 327 41 227 l 41 589 q 73 775 41 707 q 177 880 104 844 q 344 916 250 916 q 534 872 459 916 q 639 756 609 829 q 669 553 669 684 l 669 434 m 395 581 l 395 646 q 387 736 395 716 q 357 757 380 757 q 321 740 328 757 q 315 646 315 722 l 315 581 l 395 581 z "},"f":{"ha":401,"x_min":3,"x_max":398,"o":"m 398 1098 l 398 959 q 298 951 313 959 q 283 907 283 943 l 283 878 l 398 878 l 398 736 l 333 736 l 333 0 l 59 0 l 59 736 l 3 736 l 3 878 l 59 878 q 65 997 59 967 q 95 1050 71 1027 q 163 1086 119 1074 q 298 1098 206 1098 l 398 1098 z "},"g":{"ha":720,"x_min":41,"x_max":671,"o":"m 671 900 l 671 207 q 665 25 671 66 q 619 -61 659 -16 q 510 -131 580 -107 q 333 -155 439 -155 q 123 -111 202 -155 q 41 64 43 -66 l 307 64 q 350 4 307 4 q 391 22 381 4 q 401 99 401 41 l 401 167 q 327 119 366 135 q 245 102 288 102 q 124 132 172 102 q 58 211 76 162 q 41 349 41 259 l 41 675 q 87 860 41 804 q 227 916 133 916 q 321 895 279 916 q 397 832 363 874 l 416 900 l 671 900 m 397 661 q 390 740 397 723 q 358 757 382 757 q 325 738 334 757 q 315 661 315 718 l 315 359 q 322 280 315 298 q 353 262 330 262 q 389 284 380 262 q 397 382 397 306 l 397 661 z "},"h":{"ha":728,"x_min":49,"x_max":682,"o":"m 323 1098 l 323 851 q 399 900 358 884 q 487 916 440 916 q 609 880 559 916 q 671 795 660 843 q 682 621 682 747 l 682 0 l 408 0 l 408 633 q 400 734 408 712 q 366 757 393 757 q 332 734 340 757 q 323 642 323 711 l 323 0 l 49 0 l 49 1098 l 323 1098 z "},"i":{"ha":380,"x_min":49,"x_max":331,"o":"m 331 1098 l 331 955 l 49 955 l 49 1098 l 331 1098 m 331 900 l 331 0 l 49 0 l 49 900 l 331 900 z "},"j":{"ha":389,"x_min":-4,"x_max":339,"o":"m 339 1098 l 339 955 l 57 955 l 57 1098 l 339 1098 m 339 900 l 339 188 q 334 18 339 62 q 303 -60 329 -26 q 233 -110 277 -94 q 102 -126 189 -126 l -4 -126 l -4 18 q 51 28 45 18 q 57 164 57 39 l 57 900 l 339 900 z "},"k":{"ha":664,"x_min":49,"x_max":672,"o":"m 639 900 l 528 541 l 672 0 l 408 0 l 323 392 l 323 0 l 49 0 l 49 1098 l 323 1098 l 323 637 l 408 900 l 639 900 z "},"l":{"ha":380,"x_min":49,"x_max":331,"o":"m 331 1098 l 331 0 l 49 0 l 49 1098 l 331 1098 z "},"m":{"ha":1071,"x_min":49,"x_max":1025,"o":"m 319 900 l 315 814 q 391 891 347 865 q 491 916 435 916 q 664 814 601 916 q 742 891 699 865 q 838 916 785 916 q 954 882 908 916 q 1013 799 1000 848 q 1025 640 1025 750 l 1025 0 l 760 0 l 760 587 q 752 729 760 702 q 715 757 744 757 q 678 730 686 757 q 669 587 669 703 l 669 0 l 404 0 l 404 572 q 397 730 404 704 q 361 757 391 757 q 330 743 343 757 q 316 709 317 729 q 315 624 315 689 l 315 0 l 49 0 l 49 900 l 319 900 z "},"n":{"ha":726,"x_min":49,"x_max":681,"o":"m 328 900 l 323 817 q 396 891 353 867 q 495 916 439 916 q 610 883 566 916 q 668 799 655 850 q 681 631 681 749 l 681 0 l 407 0 l 407 623 q 401 736 407 716 q 367 757 395 757 q 330 733 338 757 q 323 608 323 710 l 323 0 l 49 0 l 49 900 l 328 900 z "},"o":{"ha":710,"x_min":41,"x_max":669,"o":"m 669 584 l 669 363 q 656 185 669 242 q 604 80 644 129 q 502 7 564 31 q 357 -16 439 -16 q 203 4 267 -16 q 105 64 140 24 q 56 162 71 104 q 41 334 41 219 l 41 564 q 68 760 41 690 q 165 873 95 831 q 346 916 236 916 q 504 889 438 916 q 606 817 570 861 q 655 726 642 773 q 669 584 669 680 m 395 652 q 387 739 395 721 q 355 757 380 757 q 323 739 331 757 q 315 652 315 721 l 315 245 q 323 162 315 182 q 355 143 331 143 q 387 161 379 143 q 395 237 395 178 l 395 652 z "},"p":{"ha":721,"x_min":49,"x_max":680,"o":"m 328 900 l 323 821 q 404 892 359 869 q 500 916 448 916 q 610 882 564 916 q 668 803 656 848 q 680 651 680 758 l 680 272 q 665 97 680 149 q 605 15 650 45 q 496 -16 560 -16 q 402 7 446 -16 q 323 78 359 31 l 323 -128 l 49 -128 l 49 900 l 328 900 m 406 638 q 399 739 406 722 q 366 757 393 757 q 331 736 338 757 q 323 638 323 716 l 323 265 q 331 163 323 184 q 366 143 339 143 q 399 162 393 143 q 406 252 406 180 l 406 638 z "},"q":{"ha":720,"x_min":41,"x_max":670,"o":"m 670 900 l 670 -128 l 396 -128 l 396 73 q 322 -1 356 14 q 239 -16 289 -16 q 120 18 168 -16 q 57 105 73 52 q 41 271 41 159 l 41 667 q 53 804 41 759 q 112 883 65 849 q 222 916 158 916 q 317 893 273 916 q 396 823 360 870 l 401 900 l 670 900 m 396 655 q 387 736 396 715 q 354 757 378 757 q 323 739 331 757 q 315 655 315 720 l 315 254 q 323 162 315 182 q 356 143 331 143 q 388 163 380 143 q 396 250 396 183 l 396 655 z "},"r":{"ha":497,"x_min":49,"x_max":485,"o":"m 323 900 l 312 782 q 485 916 372 909 l 485 600 q 374 579 410 600 q 331 523 339 559 q 323 355 323 486 l 323 0 l 49 0 l 49 900 l 323 900 z "},"s":{"ha":654,"x_min":28,"x_max":629,"o":"m 608 612 l 366 612 l 366 661 q 358 740 366 724 q 323 757 351 757 q 288 742 300 757 q 277 696 277 726 q 282 635 277 654 q 317 593 288 616 q 435 526 346 570 q 592 416 555 467 q 629 266 629 364 q 601 100 629 156 q 506 14 572 44 q 345 -16 439 -16 q 166 16 240 -16 q 64 104 92 49 q 36 273 36 160 l 36 316 l 279 316 l 279 259 q 288 165 279 186 q 324 143 297 143 q 365 158 353 143 q 376 219 376 172 q 361 300 376 283 q 202 396 346 316 q 55 519 81 464 q 28 650 28 574 q 57 809 28 758 q 154 888 85 861 q 312 916 222 916 q 464 893 401 916 q 561 833 527 871 q 601 764 594 796 q 608 665 608 732 l 608 612 z "},"t":{"ha":423,"x_min":4,"x_max":423,"o":"m 338 1020 l 338 878 l 412 878 l 412 736 l 338 736 l 338 254 q 347 155 338 165 q 423 145 356 145 l 423 0 l 313 0 q 179 8 219 0 q 109 44 139 16 q 71 108 78 72 q 63 279 63 144 l 63 736 l 4 736 l 4 878 l 63 878 l 63 1020 l 338 1020 z "},"u":{"ha":726,"x_min":45,"x_max":676,"o":"m 676 900 l 676 0 l 397 0 l 402 75 q 332 6 374 29 q 236 -16 290 -16 q 134 5 174 -16 q 74 63 93 27 q 50 138 54 99 q 45 293 45 177 l 45 900 l 319 900 l 319 288 q 325 163 319 182 q 360 143 332 143 q 396 163 391 143 q 402 294 402 184 l 402 900 l 676 900 z "},"v":{"ha":607,"x_min":-8,"x_max":615,"o":"m 615 900 l 487 0 l 130 0 l -8 900 l 237 900 l 313 243 q 343 596 322 315 q 370 900 355 753 l 615 900 z "},"w":{"ha":930,"x_min":-4,"x_max":934,"o":"m 934 900 l 825 0 l 527 0 q 471 434 503 165 q 440 195 460 316 l 410 0 l 112 0 l -4 900 l 232 900 q 292 385 235 865 q 353 900 296 434 l 580 900 l 635 385 q 698 900 648 610 l 934 900 z "},"x":{"ha":602,"x_min":0,"x_max":614,"o":"m 591 900 l 482 470 l 614 0 l 348 0 q 288 306 309 178 q 229 0 261 146 l 0 0 l 118 470 l 0 900 l 229 900 q 288 587 284 625 q 348 900 328 817 l 591 900 z "},"y":{"ha":623,"x_min":-8,"x_max":623,"o":"m 623 900 l 544 249 q 513 38 526 94 q 471 -55 500 -18 q 390 -109 442 -92 q 224 -126 338 -126 l 58 -126 l 58 18 q 140 24 122 18 q 159 53 159 31 q 142 147 159 64 l -8 900 l 241 900 l 330 293 l 374 900 l 623 900 z "},"z":{"ha":488,"x_min":8,"x_max":475,"o":"m 475 900 l 475 701 l 273 180 l 475 180 l 475 0 l 8 0 l 8 189 l 215 720 l 29 720 l 29 900 l 475 900 z "},"{":{"ha":513,"x_min":24,"x_max":488,"o":"m 24 365 l 24 528 q 136 571 98 528 q 173 765 173 614 q 181 935 173 880 q 222 1027 190 990 q 307 1081 255 1065 q 452 1098 358 1098 l 488 1098 l 488 936 q 371 916 390 936 q 350 836 351 895 q 339 625 346 673 q 310 531 333 576 q 222 446 286 487 q 310 359 283 410 q 342 212 338 308 l 353 15 q 382 -28 359 -14 q 488 -43 405 -43 l 488 -205 l 452 -205 q 285 -181 344 -205 q 199 -100 226 -156 q 173 82 173 -43 q 163 259 173 220 q 127 330 154 298 q 24 365 100 362 z "},"|":{"ha":376,"x_min":115,"x_max":262,"o":"m 115 1098 l 262 1098 l 262 -180 l 115 -180 l 115 1098 z "},"}":{"ha":513,"x_min":24,"x_max":488,"o":"m 488 365 q 377 321 414 364 q 340 128 340 277 q 332 -42 340 13 q 291 -135 323 -98 q 207 -189 258 -172 q 61 -205 155 -205 l 25 -205 l 25 -43 q 141 -23 119 -43 q 163 57 162 -3 q 176 280 168 231 q 210 372 184 329 q 290 446 235 414 q 209 521 232 484 q 178 601 186 557 q 165 761 170 644 q 156 895 161 878 q 130 924 151 911 q 24 936 109 936 l 24 1098 l 60 1098 q 228 1073 169 1098 q 313 992 287 1048 q 340 810 340 936 q 350 629 340 667 q 388 561 361 592 q 488 528 414 530 l 488 365 z "},"~":{"ha":729,"x_min":39,"x_max":690,"o":"m 690 534 q 498 445 583 445 q 324 500 439 445 q 228 532 258 532 q 39 422 154 532 l 39 610 q 235 697 138 697 q 392 650 292 697 q 507 611 473 611 q 573 629 538 611 q 690 720 608 647 l 690 534 z "},"Ä":{"ha":705,"x_min":-8,"x_max":713,"o":"m 550 1098 l 713 0 l 421 0 l 407 197 l 304 197 l 288 0 l -8 0 l 137 1098 l 550 1098 m 399 392 q 355 852 377 578 q 301 392 312 538 l 399 392 m 284 1309 l 284 1133 l 107 1133 l 107 1309 l 284 1309 m 581 1309 l 581 1133 l 404 1133 l 404 1309 l 581 1309 z "},"Å":{"ha":705,"x_min":-8,"x_max":713,"o":"m 550 1098 l 713 0 l 421 0 l 407 197 l 304 197 l 288 0 l -8 0 l 137 1098 l 550 1098 m 399 392 q 355 852 377 578 q 301 392 312 538 l 399 392 m 344 1401 q 444 1360 401 1401 q 486 1258 486 1319 q 444 1157 486 1199 q 344 1116 402 1116 q 242 1157 284 1116 q 201 1258 201 1199 q 243 1359 201 1317 q 344 1401 285 1401 m 342 1312 q 303 1295 320 1312 q 287 1255 287 1279 q 303 1216 287 1232 q 342 1200 320 1200 q 382 1216 366 1200 q 399 1255 399 1232 q 382 1295 399 1279 q 342 1312 366 1312 z "},"Ç":{"ha":769,"x_min":49,"x_max":724,"o":"m 411 -22 l 411 -35 q 478 -59 448 -35 q 509 -125 509 -83 q 467 -214 509 -176 q 366 -252 425 -252 q 231 -144 260 -252 l 332 -144 q 366 -173 341 -173 q 396 -163 386 -173 q 406 -132 406 -153 q 392 -99 406 -110 q 349 -87 378 -87 l 332 -87 l 332 -20 q 151 44 216 -9 q 67 172 86 96 q 49 390 49 248 l 49 711 q 57 889 49 829 q 105 1003 65 948 q 217 1089 146 1058 q 382 1121 289 1121 q 590 1072 508 1121 q 698 950 672 1023 q 724 724 724 878 l 724 619 l 438 619 l 438 810 q 429 915 438 894 q 389 935 420 935 q 344 910 353 935 q 334 802 334 885 l 334 292 q 344 187 334 212 q 387 163 353 163 q 428 187 418 163 q 438 302 438 212 l 438 439 l 724 439 l 724 397 q 705 170 724 239 q 611 43 686 101 q 411 -22 536 -15 z "},"É":{"ha":577,"x_min":57,"x_max":552,"o":"m 57 1098 l 533 1098 l 533 878 l 342 878 l 342 670 l 521 670 l 521 461 l 342 461 l 342 220 l 552 220 l 552 0 l 57 0 l 57 1098 m 519 1316 l 296 1133 l 159 1133 l 278 1316 l 519 1316 z "},"Ñ":{"ha":752,"x_min":57,"x_max":694,"o":"m 694 1098 l 694 0 l 444 0 l 296 499 l 296 0 l 57 0 l 57 1098 l 296 1098 l 456 604 l 456 1098 l 694 1098 m 662 1261 q 585 1166 631 1193 q 505 1139 540 1139 q 401 1161 457 1139 l 351 1181 q 279 1200 303 1200 q 197 1133 229 1200 l 90 1204 q 258 1335 164 1335 q 364 1314 307 1335 l 406 1298 q 478 1278 459 1278 q 553 1339 534 1278 l 662 1261 z "},"Ö":{"ha":759,"x_min":49,"x_max":709,"o":"m 709 455 q 702 221 709 290 q 653 95 694 152 q 542 7 612 38 q 379 -23 472 -23 q 221 6 291 -23 q 108 92 151 35 q 57 218 65 150 q 49 455 49 286 l 49 643 q 57 877 49 808 q 105 1003 64 946 q 216 1090 146 1060 q 379 1121 286 1121 q 537 1092 467 1121 q 650 1006 608 1063 q 701 880 693 948 q 709 643 709 812 l 709 455 m 424 816 q 415 914 424 892 q 380 935 407 935 q 346 918 358 935 q 334 816 334 901 l 334 303 q 342 185 334 208 q 378 163 350 163 q 416 189 408 163 q 424 311 424 214 l 424 816 m 319 1309 l 319 1133 l 142 1133 l 142 1309 l 319 1309 m 616 1309 l 616 1133 l 439 1133 l 439 1309 l 616 1309 z "},"Ü":{"ha":760,"x_min":53,"x_max":706,"o":"m 706 1098 l 706 364 q 698 189 706 239 q 650 85 690 138 q 544 4 610 32 q 390 -23 479 -23 q 216 9 292 -23 q 104 94 141 42 q 60 204 66 146 q 53 448 53 262 l 53 1098 l 338 1098 l 338 275 q 346 183 338 203 q 378 163 354 163 q 413 185 405 163 q 420 289 420 207 l 420 1098 l 706 1098 m 320 1309 l 320 1133 l 143 1133 l 143 1309 l 320 1309 m 616 1309 l 616 1133 l 439 1133 l 439 1309 l 616 1309 z "},"á":{"ha":700,"x_min":37,"x_max":654,"o":"m 294 551 l 37 551 l 37 612 q 61 773 37 716 q 157 873 85 829 q 346 916 230 916 q 555 867 485 916 q 640 746 626 818 q 654 452 654 675 l 654 0 l 388 0 l 388 80 q 323 8 363 32 q 229 -16 283 -16 q 97 24 157 -16 q 37 201 37 64 l 37 275 q 68 412 37 376 q 227 498 100 449 q 371 569 361 551 q 380 644 380 587 q 370 735 380 714 q 335 757 359 757 q 300 739 307 757 q 294 646 294 721 l 294 551 m 380 428 q 304 347 315 380 q 294 254 294 315 q 303 163 294 184 q 339 143 312 143 q 373 159 365 143 q 380 243 380 175 l 380 428 m 581 1144 l 358 960 l 220 960 l 340 1144 l 581 1144 z "},"à":{"ha":700,"x_min":37,"x_max":654,"o":"m 294 551 l 37 551 l 37 612 q 61 773 37 716 q 157 873 85 829 q 346 916 230 916 q 555 867 485 916 q 640 746 626 818 q 654 452 654 675 l 654 0 l 388 0 l 388 80 q 323 8 363 32 q 229 -16 283 -16 q 97 24 157 -16 q 37 201 37 64 l 37 275 q 68 412 37 376 q 227 498 100 449 q 371 569 361 551 q 380 644 380 587 q 370 735 380 714 q 335 757 359 757 q 300 739 307 757 q 294 646 294 721 l 294 551 m 380 428 q 304 347 315 380 q 294 254 294 315 q 303 163 294 184 q 339 143 312 143 q 373 159 365 143 q 380 243 380 175 l 380 428 m 118 1144 l 359 1144 l 479 960 l 341 960 l 118 1144 z "},"â":{"ha":700,"x_min":37,"x_max":654,"o":"m 294 551 l 37 551 l 37 612 q 61 773 37 716 q 157 873 85 829 q 346 916 230 916 q 555 867 485 916 q 640 746 626 818 q 654 452 654 675 l 654 0 l 388 0 l 388 80 q 323 8 363 32 q 229 -16 283 -16 q 97 24 157 -16 q 37 201 37 64 l 37 275 q 68 412 37 376 q 227 498 100 449 q 371 569 361 551 q 380 644 380 587 q 370 735 380 714 q 335 757 359 757 q 300 739 307 757 q 294 646 294 721 l 294 551 m 380 428 q 304 347 315 380 q 294 254 294 315 q 303 163 294 184 q 339 143 312 143 q 373 159 365 143 q 380 243 380 175 l 380 428 m 355 1049 l 275 960 l 85 960 l 260 1152 l 451 1152 l 614 960 l 431 960 l 355 1049 z "},"ä":{"ha":700,"x_min":37,"x_max":654,"o":"m 294 551 l 37 551 l 37 612 q 61 773 37 716 q 157 873 85 829 q 346 916 230 916 q 555 867 485 916 q 640 746 626 818 q 654 452 654 675 l 654 0 l 388 0 l 388 80 q 323 8 363 32 q 229 -16 283 -16 q 97 24 157 -16 q 37 201 37 64 l 37 275 q 68 412 37 376 q 227 498 100 449 q 371 569 361 551 q 380 644 380 587 q 370 735 380 714 q 335 757 359 757 q 300 739 307 757 q 294 646 294 721 l 294 551 m 380 428 q 304 347 315 380 q 294 254 294 315 q 303 163 294 184 q 339 143 312 143 q 373 159 365 143 q 380 243 380 175 l 380 428 m 290 1137 l 290 960 l 113 960 l 113 1137 l 290 1137 m 587 1137 l 587 960 l 410 960 l 410 1137 l 587 1137 z "},"ã":{"ha":700,"x_min":37,"x_max":654,"o":"m 294 551 l 37 551 l 37 612 q 61 773 37 716 q 157 873 85 829 q 346 916 230 916 q 555 867 485 916 q 640 746 626 818 q 654 452 654 675 l 654 0 l 388 0 l 388 80 q 323 8 363 32 q 229 -16 283 -16 q 97 24 157 -16 q 37 201 37 64 l 37 275 q 68 412 37 376 q 227 498 100 449 q 371 569 361 551 q 380 644 380 587 q 370 735 380 714 q 335 757 359 757 q 300 739 307 757 q 294 646 294 721 l 294 551 m 380 428 q 304 347 315 380 q 294 254 294 315 q 303 163 294 184 q 339 143 312 143 q 373 159 365 143 q 380 243 380 175 l 380 428 m 636 1089 q 559 994 605 1021 q 479 966 514 966 q 376 989 431 966 l 326 1008 q 254 1028 277 1028 q 171 960 203 1028 l 64 1031 q 232 1163 138 1163 q 338 1141 281 1163 l 380 1126 q 452 1106 433 1106 q 527 1167 509 1106 l 636 1089 z "},"å":{"ha":700,"x_min":37,"x_max":654,"o":"m 294 551 l 37 551 l 37 612 q 61 773 37 716 q 157 873 85 829 q 346 916 230 916 q 555 867 485 916 q 640 746 626 818 q 654 452 654 675 l 654 0 l 388 0 l 388 80 q 323 8 363 32 q 229 -16 283 -16 q 97 24 157 -16 q 37 201 37 64 l 37 275 q 68 412 37 376 q 227 498 100 449 q 371 569 361 551 q 380 644 380 587 q 370 735 380 714 q 335 757 359 757 q 300 739 307 757 q 294 646 294 721 l 294 551 m 380 428 q 304 347 315 380 q 294 254 294 315 q 303 163 294 184 q 339 143 312 143 q 373 159 365 143 q 380 243 380 175 l 380 428 m 350 1246 q 450 1205 407 1246 q 492 1103 492 1164 q 450 1002 492 1044 q 350 960 408 960 q 249 1002 290 960 q 207 1103 207 1044 q 249 1204 207 1162 q 350 1246 291 1246 m 349 1156 q 310 1140 326 1156 q 293 1100 293 1124 q 310 1061 293 1077 q 349 1044 326 1044 q 388 1061 372 1044 q 405 1100 405 1077 q 388 1140 405 1124 q 349 1156 372 1156 z "},"ç":{"ha":687,"x_min":41,"x_max":654,"o":"m 370 -16 l 370 -35 q 437 -59 406 -35 q 468 -125 468 -83 q 426 -214 468 -176 q 326 -252 384 -252 q 191 -144 220 -252 l 291 -144 q 325 -173 300 -173 q 355 -163 345 -173 q 365 -132 365 -153 q 351 -99 365 -110 q 309 -87 337 -87 l 291 -87 l 291 -13 q 138 41 189 -1 q 64 146 87 83 q 41 338 41 210 l 41 593 q 64 766 41 708 q 162 870 87 825 q 345 916 237 916 q 528 871 452 916 q 629 756 604 825 q 654 560 654 687 l 396 560 l 396 664 q 387 738 396 718 q 355 757 378 757 q 323 740 331 757 q 315 664 315 723 l 315 239 q 327 167 315 191 q 363 143 339 143 q 400 168 391 143 q 410 263 410 193 l 410 370 l 654 370 q 648 217 654 270 q 608 108 642 163 q 517 21 573 52 q 370 -16 461 -10 z "},"é":{"ha":710,"x_min":41,"x_max":669,"o":"m 669 434 l 315 434 l 315 239 q 323 161 315 178 q 357 143 332 143 q 399 166 389 143 q 410 257 410 190 l 410 376 l 669 376 l 669 309 q 659 181 669 226 q 610 85 648 136 q 512 9 571 35 q 363 -16 452 -16 q 210 9 276 -16 q 106 78 143 34 q 55 174 69 121 q 41 327 41 227 l 41 589 q 73 775 41 707 q 177 880 104 844 q 344 916 250 916 q 534 872 459 916 q 639 756 609 829 q 669 553 669 684 l 669 434 m 395 581 l 395 646 q 387 736 395 716 q 357 757 380 757 q 321 740 328 757 q 315 646 315 722 l 315 581 l 395 581 m 587 1144 l 363 960 l 226 960 l 345 1144 l 587 1144 z "},"è":{"ha":710,"x_min":41,"x_max":669,"o":"m 669 434 l 315 434 l 315 239 q 323 161 315 178 q 357 143 332 143 q 399 166 389 143 q 410 257 410 190 l 410 376 l 669 376 l 669 309 q 659 181 669 226 q 610 85 648 136 q 512 9 571 35 q 363 -16 452 -16 q 210 9 276 -16 q 106 78 143 34 q 55 174 69 121 q 41 327 41 227 l 41 589 q 73 775 41 707 q 177 880 104 844 q 344 916 250 916 q 534 872 459 916 q 639 756 609 829 q 669 553 669 684 l 669 434 m 395 581 l 395 646 q 387 736 395 716 q 357 757 380 757 q 321 740 328 757 q 315 646 315 722 l 315 581 l 395 581 m 123 1144 l 365 1144 l 484 960 l 347 960 l 123 1144 z "},"ê":{"ha":710,"x_min":41,"x_max":669,"o":"m 669 434 l 315 434 l 315 239 q 323 161 315 178 q 357 143 332 143 q 399 166 389 143 q 410 257 410 190 l 410 376 l 669 376 l 669 309 q 659 181 669 226 q 610 85 648 136 q 512 9 571 35 q 363 -16 452 -16 q 210 9 276 -16 q 106 78 143 34 q 55 174 69 121 q 41 327 41 227 l 41 589 q 73 775 41 707 q 177 880 104 844 q 344 916 250 916 q 534 872 459 916 q 639 756 609 829 q 669 553 669 684 l 669 434 m 395 581 l 395 646 q 387 736 395 716 q 357 757 380 757 q 321 740 328 757 q 315 646 315 722 l 315 581 l 395 581 m 360 1049 l 280 960 l 90 960 l 264 1152 l 456 1152 l 619 960 l 435 960 l 360 1049 z "},"ë":{"ha":710,"x_min":41,"x_max":669,"o":"m 669 434 l 315 434 l 315 239 q 323 161 315 178 q 357 143 332 143 q 399 166 389 143 q 410 257 410 190 l 410 376 l 669 376 l 669 309 q 659 181 669 226 q 610 85 648 136 q 512 9 571 35 q 363 -16 452 -16 q 210 9 276 -16 q 106 78 143 34 q 55 174 69 121 q 41 327 41 227 l 41 589 q 73 775 41 707 q 177 880 104 844 q 344 916 250 916 q 534 872 459 916 q 639 756 609 829 q 669 553 669 684 l 669 434 m 395 581 l 395 646 q 387 736 395 716 q 357 757 380 757 q 321 740 328 757 q 315 646 315 722 l 315 581 l 395 581 m 295 1137 l 295 960 l 118 960 l 118 1137 l 295 1137 m 591 1137 l 591 960 l 414 960 l 414 1137 l 591 1137 z "},"í":{"ha":380,"x_min":49,"x_max":424,"o":"m 331 900 l 331 0 l 49 0 l 49 900 l 331 900 m 424 1144 l 201 960 l 63 960 l 182 1144 l 424 1144 z "},"ì":{"ha":380,"x_min":-39,"x_max":331,"o":"m 331 900 l 331 0 l 49 0 l 49 900 l 331 900 m -39 1144 l 202 1144 l 321 960 l 184 960 l -39 1144 z "},"î":{"ha":380,"x_min":-72,"x_max":457,"o":"m 331 900 l 331 0 l 49 0 l 49 900 l 331 900 m 198 1049 l 118 960 l -72 960 l 102 1152 l 294 1152 l 457 960 l 273 960 l 198 1049 z "},"ï":{"ha":380,"x_min":-44,"x_max":429,"o":"m 331 900 l 331 0 l 49 0 l 49 900 l 331 900 m 133 1137 l 133 960 l -44 960 l -44 1137 l 133 1137 m 429 1137 l 429 960 l 252 960 l 252 1137 l 429 1137 z "},"ñ":{"ha":726,"x_min":49,"x_max":681,"o":"m 328 900 l 323 817 q 396 891 353 867 q 495 916 439 916 q 610 883 566 916 q 668 799 655 850 q 681 631 681 749 l 681 0 l 407 0 l 407 623 q 401 736 407 716 q 367 757 395 757 q 330 733 338 757 q 323 608 323 710 l 323 0 l 49 0 l 49 900 l 328 900 m 649 1089 q 572 994 618 1021 q 492 966 527 966 q 389 989 444 966 l 338 1008 q 267 1028 290 1028 q 184 960 216 1028 l 77 1031 q 245 1163 151 1163 q 351 1141 294 1163 l 393 1126 q 465 1106 446 1106 q 540 1167 522 1106 l 649 1089 z "},"ó":{"ha":710,"x_min":41,"x_max":669,"o":"m 669 584 l 669 363 q 656 185 669 242 q 604 80 644 129 q 502 7 564 31 q 357 -16 439 -16 q 203 4 267 -16 q 105 64 140 24 q 56 162 71 104 q 41 334 41 219 l 41 564 q 68 760 41 690 q 165 873 95 831 q 346 916 236 916 q 504 889 438 916 q 606 817 570 861 q 655 726 642 773 q 669 584 669 680 m 395 652 q 387 739 395 721 q 355 757 380 757 q 323 739 331 757 q 315 652 315 721 l 315 245 q 323 162 315 182 q 355 143 331 143 q 387 161 379 143 q 395 237 395 178 l 395 652 m 587 1144 l 363 960 l 226 960 l 345 1144 l 587 1144 z "},"ò":{"ha":710,"x_min":41,"x_max":669,"o":"m 669 584 l 669 363 q 656 185 669 242 q 604 80 644 129 q 502 7 564 31 q 357 -16 439 -16 q 203 4 267 -16 q 105 64 140 24 q 56 162 71 104 q 41 334 41 219 l 41 564 q 68 760 41 690 q 165 873 95 831 q 346 916 236 916 q 504 889 438 916 q 606 817 570 861 q 655 726 642 773 q 669 584 669 680 m 395 652 q 387 739 395 721 q 355 757 380 757 q 323 739 331 757 q 315 652 315 721 l 315 245 q 323 162 315 182 q 355 143 331 143 q 387 161 379 143 q 395 237 395 178 l 395 652 m 123 1144 l 365 1144 l 484 960 l 347 960 l 123 1144 z "},"ô":{"ha":710,"x_min":41,"x_max":669,"o":"m 669 584 l 669 363 q 656 185 669 242 q 604 80 644 129 q 502 7 564 31 q 357 -16 439 -16 q 203 4 267 -16 q 105 64 140 24 q 56 162 71 104 q 41 334 41 219 l 41 564 q 68 760 41 690 q 165 873 95 831 q 346 916 236 916 q 504 889 438 916 q 606 817 570 861 q 655 726 642 773 q 669 584 669 680 m 395 652 q 387 739 395 721 q 355 757 380 757 q 323 739 331 757 q 315 652 315 721 l 315 245 q 323 162 315 182 q 355 143 331 143 q 387 161 379 143 q 395 237 395 178 l 395 652 m 360 1049 l 280 960 l 90 960 l 264 1152 l 456 1152 l 619 960 l 435 960 l 360 1049 z "},"ö":{"ha":710,"x_min":41,"x_max":669,"o":"m 669 584 l 669 363 q 656 185 669 242 q 604 80 644 129 q 502 7 564 31 q 357 -16 439 -16 q 203 4 267 -16 q 105 64 140 24 q 56 162 71 104 q 41 334 41 219 l 41 564 q 68 760 41 690 q 165 873 95 831 q 346 916 236 916 q 504 889 438 916 q 606 817 570 861 q 655 726 642 773 q 669 584 669 680 m 395 652 q 387 739 395 721 q 355 757 380 757 q 323 739 331 757 q 315 652 315 721 l 315 245 q 323 162 315 182 q 355 143 331 143 q 387 161 379 143 q 395 237 395 178 l 395 652 m 295 1137 l 295 960 l 118 960 l 118 1137 l 295 1137 m 591 1137 l 591 960 l 414 960 l 414 1137 l 591 1137 z "},"õ":{"ha":710,"x_min":41,"x_max":669,"o":"m 669 584 l 669 363 q 656 185 669 242 q 604 80 644 129 q 502 7 564 31 q 357 -16 439 -16 q 203 4 267 -16 q 105 64 140 24 q 56 162 71 104 q 41 334 41 219 l 41 564 q 68 760 41 690 q 165 873 95 831 q 346 916 236 916 q 504 889 438 916 q 606 817 570 861 q 655 726 642 773 q 669 584 669 680 m 395 652 q 387 739 395 721 q 355 757 380 757 q 323 739 331 757 q 315 652 315 721 l 315 245 q 323 162 315 182 q 355 143 331 143 q 387 161 379 143 q 395 237 395 178 l 395 652 m 641 1089 q 564 994 610 1021 q 484 966 519 966 q 380 989 436 966 l 330 1008 q 258 1028 282 1028 q 176 960 208 1028 l 68 1031 q 237 1163 143 1163 q 343 1141 286 1163 l 385 1126 q 457 1106 438 1106 q 532 1167 513 1106 l 641 1089 z "},"ú":{"ha":726,"x_min":45,"x_max":676,"o":"m 676 900 l 676 0 l 397 0 l 402 75 q 332 6 374 29 q 236 -16 290 -16 q 134 5 174 -16 q 74 63 93 27 q 50 138 54 99 q 45 293 45 177 l 45 900 l 319 900 l 319 288 q 325 163 319 182 q 360 143 332 143 q 396 163 391 143 q 402 294 402 184 l 402 900 l 676 900 m 594 1144 l 371 960 l 233 960 l 353 1144 l 594 1144 z "},"ù":{"ha":726,"x_min":45,"x_max":676,"o":"m 676 900 l 676 0 l 397 0 l 402 75 q 332 6 374 29 q 236 -16 290 -16 q 134 5 174 -16 q 74 63 93 27 q 50 138 54 99 q 45 293 45 177 l 45 900 l 319 900 l 319 288 q 325 163 319 182 q 360 143 332 143 q 396 163 391 143 q 402 294 402 184 l 402 900 l 676 900 m 131 1144 l 372 1144 l 492 960 l 354 960 l 131 1144 z "},"û":{"ha":726,"x_min":45,"x_max":676,"o":"m 676 900 l 676 0 l 397 0 l 402 75 q 332 6 374 29 q 236 -16 290 -16 q 134 5 174 -16 q 74 63 93 27 q 50 138 54 99 q 45 293 45 177 l 45 900 l 319 900 l 319 288 q 325 163 319 182 q 360 143 332 143 q 396 163 391 143 q 402 294 402 184 l 402 900 l 676 900 m 368 1049 l 288 960 l 98 960 l 273 1152 l 464 1152 l 627 960 l 444 960 l 368 1049 z "},"ü":{"ha":726,"x_min":45,"x_max":676,"o":"m 676 900 l 676 0 l 397 0 l 402 75 q 332 6 374 29 q 236 -16 290 -16 q 134 5 174 -16 q 74 63 93 27 q 50 138 54 99 q 45 293 45 177 l 45 900 l 319 900 l 319 288 q 325 163 319 182 q 360 143 332 143 q 396 163 391 143 q 402 294 402 184 l 402 900 l 676 900 m 303 1137 l 303 960 l 126 960 l 126 1137 l 303 1137 m 600 1137 l 600 960 l 422 960 l 422 1137 l 600 1137 z "},"†":{"ha":754,"x_min":24,"x_max":730,"o":"m 227 1098 l 528 1098 l 528 781 l 730 781 l 730 522 l 528 522 l 528 -128 l 227 -128 l 227 522 l 24 522 l 24 780 l 227 780 l 227 1098 z "},"°":{"ha":482,"x_min":24,"x_max":457,"o":"m 24 891 q 89 1050 24 987 q 241 1113 153 1113 q 394 1049 331 1113 q 457 897 457 986 q 394 744 457 807 q 241 680 330 680 q 85 746 146 680 q 24 891 24 812 m 137 899 q 168 823 137 853 q 241 793 199 793 q 314 823 283 793 q 345 897 345 854 q 314 970 345 939 q 241 1000 283 1000 q 166 968 196 1000 q 137 899 137 937 z "},"¢":{"ha":718,"x_min":41,"x_max":682,"o":"m 681 625 l 407 625 l 407 717 q 398 816 407 795 q 361 837 390 837 q 324 819 333 837 q 315 726 315 802 l 315 305 q 323 211 315 231 q 359 190 332 190 q 406 218 393 190 q 418 335 418 245 l 418 434 l 681 434 q 682 389 682 404 q 621 141 682 227 q 427 26 560 55 l 427 -86 l 300 -86 l 300 26 q 142 93 211 38 q 57 207 74 147 q 41 399 41 266 l 41 602 q 58 805 41 739 q 139 926 75 871 q 300 1000 203 981 l 300 1093 l 427 1093 l 427 1000 q 548 955 493 988 q 633 875 602 921 q 673 782 665 829 q 681 625 681 736 z "},"£":{"ha":743,"x_min":49,"x_max":711,"o":"m 677 745 l 432 745 l 432 844 q 430 929 432 911 q 413 961 427 947 q 378 975 399 975 q 334 951 351 975 q 316 899 316 928 q 346 759 316 862 q 378 625 378 646 l 551 625 l 551 437 l 395 437 q 263 160 393 253 q 294 164 275 161 q 330 168 314 168 q 393 161 353 168 q 420 158 408 158 q 465 175 448 158 q 481 264 481 192 q 480 308 481 275 l 711 308 l 710 220 q 696 79 710 122 q 632 7 682 36 q 507 -21 583 -21 q 368 2 460 -21 q 215 25 279 25 q 49 -21 113 25 l 49 139 q 97 189 78 159 q 131 288 115 219 q 146 408 146 357 q 146 437 146 418 l 49 437 l 49 625 l 116 625 q 59 832 59 733 q 146 1046 59 974 q 369 1119 234 1119 q 599 1043 513 1119 q 684 834 684 966 q 677 745 684 798 z "},"§":{"ha":672,"x_min":24,"x_max":648,"o":"m 595 863 l 378 863 l 378 880 q 365 931 378 914 q 322 948 351 948 q 292 938 302 948 q 281 908 281 928 q 302 863 281 887 q 412 774 323 838 q 609 606 571 659 q 648 494 648 554 q 500 301 648 370 q 588 186 559 241 q 617 82 617 132 q 542 -82 617 -9 q 334 -155 467 -155 q 150 -94 221 -155 q 77 99 79 -33 l 294 99 q 347 12 294 12 q 379 23 369 12 q 390 56 390 34 q 369 104 390 81 q 296 165 348 127 q 83 337 141 276 q 24 471 24 399 q 171 667 24 583 q 85 772 114 718 q 56 884 56 827 q 126 1047 56 972 q 334 1121 195 1121 q 519 1064 444 1121 q 595 863 595 1008 m 259 589 q 235 538 235 565 q 252 501 235 519 q 340 433 269 483 q 413 378 388 397 q 437 429 437 400 q 413 473 437 450 q 318 547 390 496 q 259 589 288 568 z "},"•":{"ha":483,"x_min":41,"x_max":441,"o":"m 441 554 q 382 407 441 465 q 241 349 322 349 q 99 407 158 349 q 41 549 41 466 q 100 690 41 631 q 241 749 159 749 q 385 688 329 749 q 441 554 441 627 z "},"¶":{"ha":800,"x_min":24,"x_max":791,"o":"m 456 -150 l 292 -150 l 292 541 q 24 814 24 570 q 55 954 24 893 q 137 1048 85 1015 q 237 1090 189 1082 q 387 1098 285 1098 l 791 1098 l 791 921 l 715 921 l 715 -150 l 554 -150 l 554 921 l 456 921 l 456 -150 z "},"ß":{"ha":764,"x_min":49,"x_max":719,"o":"m 612 694 q 690 623 661 671 q 719 429 719 574 l 719 328 q 705 176 719 227 q 648 80 690 124 q 549 18 605 35 q 412 0 494 0 l 360 0 l 360 166 l 391 166 q 437 178 429 166 q 445 274 445 191 l 445 543 q 435 606 444 589 q 391 627 425 622 l 391 793 q 420 802 406 793 q 433 857 433 810 q 419 936 433 909 q 378 962 406 962 q 334 939 346 962 q 323 847 323 916 l 323 0 l 49 0 l 49 733 q 67 959 49 892 q 158 1074 85 1026 q 363 1121 232 1121 q 615 1055 525 1121 q 705 872 705 989 q 612 694 705 766 z "},"®":{"ha":1088,"x_min":24,"x_max":1063,"o":"m 530 1039 q 913 884 763 1039 q 1063 519 1063 730 q 911 153 1063 305 q 544 0 758 0 q 176 152 328 0 q 24 519 24 304 q 105 797 24 671 q 306 981 185 924 q 530 1039 427 1039 m 556 938 q 246 812 365 938 q 127 519 127 686 q 250 224 127 347 q 545 102 373 102 q 840 224 717 102 q 962 519 962 347 q 901 738 962 638 q 742 888 839 838 q 556 938 645 938 m 315 242 l 315 793 l 576 793 q 718 748 673 793 q 762 637 762 703 q 725 535 762 574 q 613 483 688 496 q 667 448 647 470 q 730 353 687 426 l 795 242 l 657 242 l 611 331 q 538 439 570 410 q 456 468 507 468 l 427 468 l 427 242 l 315 242 m 427 555 l 517 555 q 615 573 586 555 q 644 632 644 591 q 615 687 644 669 q 529 705 587 705 l 427 705 l 427 555 z "},"©":{"ha":1088,"x_min":24,"x_max":1063,"o":"m 530 1039 q 915 883 766 1039 q 1063 519 1063 727 q 911 153 1063 305 q 544 0 758 0 q 176 152 328 0 q 24 519 24 304 q 101 791 24 667 q 299 977 178 916 q 530 1039 420 1039 m 555 937 q 247 812 368 937 q 127 519 127 688 q 249 225 127 348 q 544 102 372 102 q 839 225 716 102 q 961 519 961 348 q 834 818 961 699 q 555 937 708 937 m 670 443 l 779 406 q 549 229 724 229 q 360 308 431 229 q 289 517 289 386 q 361 729 289 652 q 547 807 433 807 q 779 642 720 807 l 669 616 q 549 711 634 711 q 445 660 481 711 q 408 524 408 608 q 443 378 408 430 q 542 326 478 326 q 670 443 633 326 z "},"™":{"ha":1087,"x_min":8,"x_max":1055,"o":"m 180 543 l 180 1002 l 8 1002 l 8 1098 l 459 1098 l 459 1002 l 292 1002 l 292 543 l 180 543 m 500 543 l 500 1098 l 676 1098 l 777 715 l 878 1098 l 1055 1098 l 1055 543 l 947 543 l 947 985 l 827 543 l 726 543 l 606 985 l 606 543 l 500 543 z "},"´":{"ha":463,"x_min":102,"x_max":463,"o":"m 463 1202 l 240 1018 l 102 1018 l 222 1202 l 463 1202 z "},"¨":{"ha":463,"x_min":-5,"x_max":469,"o":"m 172 1194 l 172 1018 l -5 1018 l -5 1194 l 172 1194 m 469 1194 l 469 1018 l 292 1018 l 292 1194 l 469 1194 z "},"≠":{"ha":741,"x_min":44,"x_max":696,"o":"m 44 761 l 376 761 l 488 1045 l 640 1045 l 530 761 l 696 761 l 696 595 l 465 595 l 429 502 l 696 502 l 696 336 l 364 336 l 252 52 l 98 52 l 211 336 l 44 336 l 44 502 l 275 502 l 313 595 l 44 595 l 44 761 z "},"Æ":{"ha":991,"x_min":-8,"x_max":966,"o":"m 952 1098 l 952 878 l 760 878 l 760 670 l 941 670 l 941 461 l 760 461 l 760 220 l 966 220 l 966 0 l 475 0 l 475 197 l 311 197 l 264 0 l -8 0 l 281 1098 l 952 1098 m 475 892 l 353 392 l 475 392 l 475 892 z "},"Ø":{"ha":759,"x_min":-37,"x_max":795,"o":"m 696 909 q 709 643 709 857 l 709 455 q 702 221 709 290 q 653 95 694 152 q 542 7 612 38 q 379 -23 472 -23 q 210 9 280 -23 q 98 106 140 42 l 25 12 l -37 59 l 62 189 q 49 455 49 238 l 49 643 q 57 877 49 808 q 105 1003 64 946 q 216 1090 146 1060 q 379 1121 286 1121 q 548 1089 477 1121 q 661 991 618 1057 l 733 1086 l 795 1040 l 696 909 m 424 669 l 424 816 q 415 914 424 892 q 380 935 407 935 q 343 912 353 935 q 334 816 334 890 l 334 551 l 424 669 m 334 423 l 334 303 q 342 185 334 208 q 378 163 350 163 q 416 189 408 163 q 424 311 424 214 l 424 542 l 334 423 z "},"∞":{"ha":990,"x_min":36,"x_max":954,"o":"m 443 549 q 550 700 490 663 q 694 736 610 736 q 816 707 760 736 q 913 612 872 677 q 954 454 954 547 q 920 307 954 370 q 830 207 887 244 q 717 169 774 169 q 612 202 663 169 q 488 363 560 236 q 395 244 450 284 q 269 205 340 205 q 104 274 172 205 q 36 455 36 343 q 96 633 36 562 q 244 704 156 704 q 344 675 296 704 q 443 549 391 647 m 508 411 q 605 272 555 311 q 720 233 654 233 q 861 296 807 233 q 915 454 915 359 q 856 618 915 552 q 724 684 798 684 q 622 644 666 684 q 508 411 578 605 m 423 496 q 348 605 393 569 q 242 642 302 642 q 123 592 174 642 q 73 456 73 543 q 122 310 73 363 q 229 258 172 258 q 319 292 272 258 q 416 473 367 327 l 423 496 z "},"±":{"ha":741,"x_min":43,"x_max":697,"o":"m 452 368 l 287 368 l 287 609 l 43 609 l 43 774 l 287 774 l 287 1019 l 452 1019 l 452 774 l 697 774 l 697 609 l 452 609 l 452 368 m 43 287 l 697 287 l 697 121 l 43 121 l 43 287 z "},"≤":{"ha":741,"x_min":43,"x_max":697,"o":"m 696 330 l 44 602 l 44 739 l 696 1012 l 696 833 l 294 671 l 696 509 l 696 330 m 43 275 l 697 275 l 697 110 l 43 110 l 43 275 z "},"≥":{"ha":741,"x_min":43,"x_max":697,"o":"m 44 1012 l 696 741 l 696 602 l 44 330 l 44 509 l 447 671 l 44 832 l 44 1012 m 43 275 l 697 275 l 697 110 l 43 110 l 43 275 z "},"¥":{"ha":657,"x_min":-8,"x_max":665,"o":"m 537 666 l 655 666 l 655 549 l 503 549 l 457 397 l 655 397 l 655 281 l 457 281 l 457 0 l 193 0 l 193 281 l 1 281 l 1 397 l 193 397 l 149 549 l 1 549 l 1 666 l 115 666 l -8 1098 l 254 1098 q 323 666 316 777 q 403 1098 347 842 l 665 1098 l 537 666 z "},"µ":{"ha":654,"x_min":49,"x_max":605,"o":"m 49 900 l 269 900 l 269 251 q 321 155 269 155 q 387 313 387 155 l 387 900 l 605 900 l 605 0 l 397 0 l 397 83 q 269 -14 356 -13 l 269 -276 l 49 -276 l 49 900 z "},"∂":{"ha":680,"x_min":42,"x_max":647,"o":"m 240 780 l 212 780 q 306 924 247 876 q 448 972 365 972 q 560 941 515 972 q 626 858 604 909 q 647 701 647 806 q 583 304 647 468 q 441 62 518 140 q 256 -16 363 -16 q 97 47 151 -16 q 42 199 42 109 q 170 494 42 355 q 440 633 298 633 q 600 532 554 633 q 606 618 606 584 q 577 739 606 692 q 509 811 549 785 q 393 837 469 837 q 306 823 344 837 q 240 780 267 808 m 589 469 q 444 599 547 599 q 333 538 386 599 q 248 358 281 477 q 216 144 216 240 q 235 55 216 80 q 297 30 255 30 q 473 165 388 30 q 589 469 557 300 z "},"∑":{"ha":984,"x_min":26,"x_max":960,"o":"m 916 -56 l 26 -56 l 26 -32 l 479 532 l 26 1085 l 26 1111 l 892 1111 l 911 882 l 884 882 q 715 1056 865 1056 l 213 1056 l 594 590 l 168 63 l 722 63 q 845 90 783 63 q 932 230 907 116 l 960 224 l 916 -56 z "},"∏":{"ha":1143,"x_min":31,"x_max":1112,"o":"m 840 1057 l 301 1057 l 301 75 q 328 -7 301 16 q 411 -31 354 -31 l 435 -31 l 435 -56 l 31 -56 l 31 -31 l 54 -31 q 141 -5 117 -31 q 165 75 165 20 l 165 979 q 139 1061 165 1037 q 54 1084 113 1084 l 31 1084 l 31 1109 l 1112 1109 l 1112 1084 l 1088 1084 q 1004 1060 1029 1084 q 978 979 978 1036 l 978 75 q 1004 -7 978 16 q 1088 -31 1031 -31 l 1112 -31 l 1112 -56 l 707 -56 l 707 -31 l 730 -31 q 817 -5 793 -31 q 840 75 840 20 l 840 1057 z "},"":{"ha":762,"x_min":35,"x_max":705,"o":"m 705 634 l 705 494 l 559 494 q 534 207 534 296 q 549 126 534 153 q 593 99 564 99 q 673 214 661 99 l 699 214 q 555 -19 690 -19 q 458 37 491 -19 q 426 205 426 94 q 450 494 426 302 l 315 494 q 258 62 294 143 q 169 -19 223 -19 q 117 2 137 -19 q 97 50 97 22 q 135 153 97 86 q 185 288 170 217 q 203 494 201 359 l 180 494 q 60 415 92 494 l 35 415 q 98 552 60 498 q 169 621 136 607 q 276 634 201 634 l 705 634 z "},"∫":{"ha":380,"x_min":0,"x_max":380,"o":"m 136 607 l 144 909 q 195 1203 150 1142 q 295 1263 239 1263 q 355 1240 331 1263 q 380 1191 380 1217 q 362 1141 380 1161 q 317 1120 345 1120 q 266 1145 294 1120 q 239 1158 250 1158 q 212 1116 212 1158 q 218 1017 212 1087 q 243 566 243 738 q 235 247 243 519 q 182 -88 227 -26 q 80 -149 138 -149 q 23 -127 47 -149 q 0 -67 0 -105 q 18 -18 0 -37 q 61 0 35 0 q 109 -22 88 0 q 141 -43 127 -43 q 161 -33 155 -43 q 168 -2 168 -22 q 161 79 168 26 q 136 607 136 294 z "},"ª":{"ha":451,"x_min":24,"x_max":426,"o":"m 191 924 l 24 924 q 39 1026 24 991 q 101 1088 54 1061 q 224 1116 148 1116 q 359 1088 313 1116 q 415 1016 404 1059 q 426 833 426 972 l 426 566 l 253 566 l 253 612 q 210 568 236 583 q 150 553 184 553 q 56 586 87 553 q 24 687 24 620 l 24 731 q 47 819 24 796 q 171 878 70 842 q 245 915 242 903 q 248 945 248 927 q 242 1000 248 989 q 218 1012 235 1012 q 195 1003 199 1012 q 191 949 191 994 l 191 924 m 248 820 q 201 778 210 792 q 192 720 192 764 q 197 673 192 684 q 221 663 203 663 q 243 671 239 663 q 248 718 248 680 l 248 820 z "},"º":{"ha":458,"x_min":24,"x_max":433,"o":"m 433 912 l 433 785 q 418 655 433 700 q 355 582 403 610 q 228 553 308 553 q 101 577 143 553 q 41 644 58 601 q 24 767 24 686 l 24 901 q 79 1071 24 1025 q 222 1116 134 1116 q 348 1089 300 1116 q 414 1022 396 1062 q 433 912 433 981 m 254 953 q 250 1003 254 994 q 229 1012 246 1012 q 207 1002 212 1012 q 203 953 203 993 l 203 713 q 208 666 203 676 q 227 656 212 656 q 250 666 245 656 q 254 708 254 675 l 254 953 z "},"Ω":{"ha":1067,"x_min":22,"x_max":1044,"o":"m 418 243 l 441 0 l 22 0 l 22 256 l 46 256 q 69 187 49 209 q 154 165 89 165 l 376 165 l 372 212 q 129 346 201 248 q 56 559 56 444 q 181 828 56 716 q 533 941 307 941 q 885 828 760 941 q 1010 559 1010 716 q 938 346 1010 444 q 694 212 865 248 l 690 165 l 912 165 q 974 172 956 165 q 1005 198 992 179 q 1020 256 1018 217 l 1044 256 l 1044 0 l 625 0 l 648 243 q 772 543 772 286 q 699 812 772 737 q 533 888 627 888 q 403 845 459 888 q 321 735 347 802 q 294 551 294 667 q 418 243 294 286 z "},"æ":{"ha":1046,"x_min":37,"x_max":1005,"o":"m 1005 434 l 648 434 l 648 252 q 656 163 648 183 q 694 143 665 143 q 735 163 724 143 q 746 248 746 184 l 746 376 l 1005 376 l 1005 285 q 978 135 1005 196 q 881 29 951 74 q 708 -16 810 -16 q 547 9 613 -16 q 441 87 480 35 q 353 9 404 35 q 239 -16 302 -16 q 116 14 164 -16 q 52 92 67 45 q 37 245 37 138 q 51 375 37 340 q 108 437 64 410 q 258 502 151 465 q 334 534 314 521 q 361 566 353 547 q 368 649 368 585 q 360 733 368 709 q 330 757 352 757 q 301 737 308 757 q 295 637 295 718 l 295 551 l 38 551 l 38 618 q 48 736 38 693 q 97 822 59 779 q 192 890 134 865 q 340 916 250 916 q 437 904 391 916 q 527 867 484 892 q 600 904 558 892 q 692 916 641 916 q 870 871 795 916 q 975 757 944 827 q 1005 550 1005 687 l 1005 434 m 731 581 l 731 662 q 720 741 731 725 q 690 757 708 757 q 657 739 667 757 q 648 662 648 720 l 648 581 l 731 581 m 374 422 q 303 354 321 385 q 286 239 286 323 q 296 165 286 186 q 334 143 307 143 q 363 157 354 143 q 373 197 373 170 l 374 277 l 374 422 z "},"ø":{"ha":710,"x_min":41,"x_max":669,"o":"m 618 801 q 657 723 645 765 q 669 584 669 680 l 669 363 q 656 185 669 242 q 604 80 644 129 q 502 7 564 31 q 357 -16 439 -16 q 223 -2 280 -16 q 130 41 166 13 l 109 9 l 56 44 l 86 91 q 52 176 63 129 q 41 334 41 224 l 41 564 q 68 760 41 690 q 165 873 95 831 q 346 916 236 916 q 474 899 417 916 q 573 848 531 882 l 601 890 l 654 856 l 618 801 m 395 566 l 395 652 q 387 739 395 721 q 355 757 380 757 q 323 739 331 757 q 315 652 315 721 l 315 444 l 395 566 m 315 326 l 315 245 q 323 162 315 182 q 355 143 331 143 q 387 161 379 143 q 395 237 395 178 l 395 449 l 315 326 z "},"¿":{"ha":729,"x_min":24,"x_max":671,"o":"m 397 746 l 397 966 l 653 966 l 653 746 l 397 746 m 397 222 l 671 222 q 647 11 670 77 q 547 -106 624 -56 q 351 -155 470 -155 q 200 -128 264 -155 q 98 -53 136 -101 q 42 52 60 -4 q 24 228 24 109 l 24 362 q 41 510 24 454 q 115 607 58 565 q 249 649 172 649 q 397 572 353 649 l 397 689 l 653 689 l 653 387 l 404 387 q 359 450 403 450 q 316 423 325 450 q 307 288 307 395 l 307 105 q 315 25 307 45 q 349 4 323 4 q 389 31 380 4 q 397 155 397 58 l 397 222 z "},"¡":{"ha":375,"x_min":24,"x_max":326,"o":"m 47 746 l 47 966 l 303 966 l 303 746 l 47 746 m 24 -132 l 69 694 l 281 694 l 326 -132 l 24 -132 z "},"¬":{"ha":741,"x_min":43,"x_max":697,"o":"m 43 764 l 697 764 l 697 334 l 532 334 l 532 597 l 43 597 l 43 764 z "},"√":{"ha":762,"x_min":57,"x_max":762,"o":"m 712 1267 l 762 1267 l 551 -53 l 214 640 l 80 578 l 57 621 l 261 724 l 536 165 l 712 1267 z "},"ƒ":{"ha":616,"x_min":-33,"x_max":616,"o":"m 616 1119 l 587 975 q 540 972 549 975 q 526 942 531 969 q 520 913 525 937 l 474 681 l 574 681 l 542 516 l 442 516 l 352 60 q 278 -113 326 -70 q 90 -155 229 -155 l -33 -155 l -3 -11 q 44 -5 38 -11 q 60 45 51 1 l 154 516 l 60 516 l 90 681 l 188 681 l 229 892 q 280 1051 252 1017 q 343 1102 307 1086 q 471 1119 379 1119 l 616 1119 z "},"≈":{"ha":729,"x_min":39,"x_max":690,"o":"m 690 666 q 502 577 585 577 q 433 587 466 577 q 324 633 400 596 q 227 665 259 665 q 150 643 189 665 q 39 553 111 621 l 39 742 q 235 830 136 830 q 392 782 293 830 q 507 743 472 743 q 690 853 573 743 l 690 666 m 690 404 l 681 397 q 502 315 581 315 q 433 325 466 315 q 324 371 400 334 q 227 403 259 403 q 154 383 195 403 q 39 292 113 363 l 39 480 q 235 568 136 568 q 392 520 293 568 q 507 481 472 481 q 690 591 573 481 l 690 404 z "},"∆":{"ha":854,"x_min":20,"x_max":833,"o":"m 833 0 l 20 0 l 446 941 l 833 0 m 673 56 l 403 711 l 104 56 l 673 56 z "},"«":{"ha":515,"x_min":24,"x_max":491,"o":"m 81 840 l 242 840 l 185 471 l 242 84 l 81 84 l 24 471 l 81 840 m 330 840 l 491 840 l 433 471 l 491 84 l 330 84 l 273 471 l 330 840 z "},"»":{"ha":515,"x_min":24,"x_max":491,"o":"m 433 840 l 491 471 l 433 84 l 273 84 l 330 471 l 273 840 l 433 840 m 185 840 l 242 471 l 185 84 l 24 84 l 81 471 l 24 840 l 185 840 z "},"…":{"ha":768,"x_min":24,"x_max":744,"o":"m 231 224 l 231 0 l 24 0 l 24 224 l 231 224 m 744 224 l 744 0 l 537 0 l 537 224 l 744 224 m 488 224 l 488 0 l 281 0 l 281 224 l 488 224 z "}," ":{"ha":245,"x_min":0,"x_max":0,"o":""},"À":{"ha":705,"x_min":-8,"x_max":713,"o":"m 550 1098 l 713 0 l 421 0 l 407 197 l 304 197 l 288 0 l -8 0 l 137 1098 l 550 1098 m 399 392 q 355 852 377 578 q 301 392 312 538 l 399 392 m 103 1316 l 345 1316 l 464 1133 l 326 1133 l 103 1316 z "},"Ã":{"ha":705,"x_min":-8,"x_max":713,"o":"m 550 1098 l 713 0 l 421 0 l 407 197 l 304 197 l 288 0 l -8 0 l 137 1098 l 550 1098 m 399 392 q 355 852 377 578 q 301 392 312 538 l 399 392 m 630 1261 q 553 1166 599 1193 q 473 1139 508 1139 q 370 1161 425 1139 l 319 1181 q 248 1200 271 1200 q 165 1133 197 1200 l 58 1204 q 226 1335 132 1335 q 332 1314 275 1335 l 374 1298 q 446 1278 427 1278 q 521 1339 503 1278 l 630 1261 z "},"Õ":{"ha":759,"x_min":49,"x_max":709,"o":"m 709 455 q 702 221 709 290 q 653 95 694 152 q 542 7 612 38 q 379 -23 472 -23 q 221 6 291 -23 q 108 92 151 35 q 57 218 65 150 q 49 455 49 286 l 49 643 q 57 877 49 808 q 105 1003 64 946 q 216 1090 146 1060 q 379 1121 286 1121 q 537 1092 467 1121 q 650 1006 608 1063 q 701 880 693 948 q 709 643 709 812 l 709 455 m 424 816 q 415 914 424 892 q 380 935 407 935 q 346 918 358 935 q 334 816 334 901 l 334 303 q 342 185 334 208 q 378 163 350 163 q 416 189 408 163 q 424 311 424 214 l 424 816 m 665 1261 q 589 1166 634 1193 q 509 1139 543 1139 q 405 1161 460 1139 l 355 1181 q 283 1200 307 1200 q 200 1133 233 1200 l 93 1204 q 261 1335 168 1335 q 368 1314 310 1335 l 410 1298 q 481 1278 463 1278 q 556 1339 538 1278 l 665 1261 z "},"Œ":{"ha":956,"x_min":49,"x_max":931,"o":"m 908 1098 l 908 878 l 715 878 l 715 670 l 899 670 l 899 461 l 715 461 l 715 220 l 931 220 l 931 0 l 502 0 q 374 -12 409 -12 q 214 19 287 -12 q 106 97 142 50 q 60 195 71 144 q 49 358 49 246 l 49 717 q 58 896 49 839 q 107 1002 68 953 q 214 1080 146 1051 q 378 1109 281 1109 q 504 1098 435 1109 l 908 1098 m 430 753 q 429 803 430 787 q 428 844 428 833 q 380 924 428 924 q 344 906 353 924 q 335 843 335 888 l 334 793 l 334 353 q 341 200 334 226 q 380 174 349 174 q 420 203 411 174 q 430 340 430 233 l 430 753 z "},"œ":{"ha":1063,"x_min":41,"x_max":1021,"o":"m 1021 434 l 669 434 l 669 233 q 677 160 669 177 q 710 143 686 143 q 751 172 739 143 q 762 264 762 200 l 762 376 l 1021 376 l 1021 287 q 993 134 1021 195 q 890 28 964 73 q 715 -16 817 -16 q 616 -6 662 -16 q 530 26 570 5 q 450 -6 493 5 q 356 -16 406 -16 q 197 13 264 -16 q 95 86 131 42 q 50 178 60 131 q 41 336 41 224 l 41 532 q 59 742 41 677 q 154 862 78 807 q 345 916 229 916 q 443 903 397 916 q 530 862 490 889 q 610 903 566 889 q 707 916 654 916 q 886 870 803 916 q 996 751 970 825 q 1021 564 1021 678 l 1021 434 m 395 627 q 387 736 395 715 q 353 757 380 757 q 322 737 330 757 q 315 654 315 718 l 315 262 q 321 160 315 178 q 353 143 327 143 q 387 162 378 143 q 395 253 395 182 l 395 627 m 747 580 l 747 676 q 735 745 747 734 q 707 757 722 757 q 677 742 685 757 q 669 676 669 726 l 669 580 l 747 580 z "},"–":{"ha":694,"x_min":-8,"x_max":703,"o":"m -8 534 l 703 534 l 703 366 l -8 366 l -8 534 z "},"—":{"ha":1389,"x_min":-8,"x_max":1397,"o":"m -8 534 l 1397 534 l 1397 366 l -8 366 l -8 534 z "},"“":{"ha":479,"x_min":24,"x_max":454,"o":"m 270 743 l 270 841 q 289 968 270 918 q 352 1052 307 1017 q 454 1098 397 1086 l 454 1019 q 408 958 414 996 l 454 958 l 454 743 l 270 743 m 24 743 l 24 841 q 43 968 24 918 q 107 1052 62 1017 q 208 1098 152 1086 l 208 1019 q 163 958 168 996 l 208 958 l 208 743 l 24 743 z "},"”":{"ha":479,"x_min":24,"x_max":454,"o":"m 454 1098 l 454 1000 q 435 873 454 923 q 372 789 417 823 q 270 743 327 755 l 270 822 q 315 883 310 844 l 270 883 l 270 1098 l 454 1098 m 208 1098 l 208 1000 q 190 873 208 923 q 126 789 172 823 q 24 743 81 755 l 24 822 q 71 883 65 844 l 24 883 l 24 1098 l 208 1098 z "},"‘":{"ha":233,"x_min":24,"x_max":208,"o":"m 24 743 l 24 841 q 43 968 24 918 q 107 1052 62 1017 q 208 1098 152 1086 l 208 1019 q 163 958 168 996 l 208 958 l 208 743 l 24 743 z "},"’":{"ha":233,"x_min":24,"x_max":208,"o":"m 208 1098 l 208 1000 q 190 873 208 923 q 126 789 172 823 q 24 743 81 755 l 24 822 q 71 883 65 844 l 24 883 l 24 1098 l 208 1098 z "},"÷":{"ha":741,"x_min":43,"x_max":697,"o":"m 274 776 q 302 843 274 816 q 368 870 330 870 q 435 842 407 870 q 463 777 463 814 q 435 710 463 738 q 368 682 407 682 q 301 711 328 682 q 274 776 274 739 m 43 629 l 697 629 l 697 469 l 43 469 l 43 629 m 274 323 q 302 393 274 366 q 369 420 331 420 q 436 392 408 420 q 464 325 464 365 q 436 258 464 286 q 369 231 408 231 q 301 259 329 231 q 274 323 274 288 z "},"◊":{"ha":686,"x_min":31,"x_max":655,"o":"m 372 964 l 655 481 l 372 0 l 296 0 l 31 481 l 296 964 l 372 964 m 335 899 l 104 481 l 335 64 l 578 481 l 335 899 z "},"ÿ":{"ha":623,"x_min":-8,"x_max":623,"o":"m 623 900 l 544 249 q 513 38 526 94 q 471 -55 500 -18 q 390 -109 442 -92 q 224 -126 338 -126 l 58 -126 l 58 18 q 140 24 122 18 q 159 53 159 31 q 142 147 159 64 l -8 900 l 241 900 l 330 293 l 374 900 l 623 900 m 261 1137 l 261 960 l 84 960 l 84 1137 l 261 1137 m 557 1137 l 557 960 l 380 960 l 380 1137 l 557 1137 z "},"Ÿ":{"ha":657,"x_min":-8,"x_max":665,"o":"m 665 1098 l 457 397 l 457 0 l 193 0 l 193 397 l -8 1098 l 254 1098 q 323 666 316 777 q 403 1098 347 842 l 665 1098 m 269 1309 l 269 1133 l 92 1133 l 92 1309 l 269 1309 m 566 1309 l 566 1133 l 389 1133 l 389 1309 l 566 1309 z "},"∕":{"ha":174,"x_min":-180,"x_max":353,"o":"m 353 1119 l -75 -21 l -180 -21 l 251 1119 l 353 1119 z "},"€":{"ha":737,"x_min":-17,"x_max":692,"o":"m 310 703 l 387 703 l 387 586 l 310 586 l 310 532 l 387 532 l 387 415 l 310 415 l 310 292 q 314 213 310 234 q 334 177 318 192 q 375 163 351 163 q 413 175 395 163 q 434 209 430 186 q 439 301 439 232 l 439 406 l 692 406 l 692 363 q 663 137 692 210 q 558 20 635 64 q 372 -24 481 -24 q 215 7 285 -24 q 108 90 145 38 q 60 202 71 141 q 49 386 49 263 l 49 415 l -17 415 l -17 532 l 49 532 l 49 586 l -17 586 l -17 703 l 49 703 l 49 722 q 58 890 49 828 q 109 1006 67 953 q 221 1090 150 1060 q 380 1121 292 1121 q 540 1089 469 1121 q 652 986 612 1057 q 692 757 692 916 l 692 721 l 439 721 l 439 810 q 434 898 437 880 q 419 925 431 916 q 382 935 408 935 q 334 921 352 935 q 313 884 317 907 q 310 802 310 861 l 310 703 z "},"‹":{"ha":275,"x_min":24,"x_max":250,"o":"m 83 852 l 250 852 l 191 472 l 250 71 l 83 71 l 24 472 l 83 852 z "},"›":{"ha":275,"x_min":24,"x_max":250,"o":"m 191 852 l 250 472 l 191 71 l 24 71 l 83 472 l 24 852 l 191 852 z "},"ﬁ":{"ha":779,"x_min":3,"x_max":729,"o":"m 729 1098 l 729 955 l 447 955 l 447 1098 l 729 1098 m 398 1098 l 398 959 q 298 951 313 959 q 283 907 283 943 l 283 878 l 398 878 l 398 736 l 333 736 l 333 0 l 59 0 l 59 736 l 3 736 l 3 878 l 59 878 q 65 997 59 967 q 95 1050 71 1027 q 163 1086 119 1074 q 298 1098 206 1098 l 398 1098 m 729 900 l 729 0 l 447 0 l 447 900 l 729 900 z "},"ﬂ":{"ha":777,"x_min":3,"x_max":727,"o":"m 398 1098 l 398 959 q 298 951 313 959 q 283 907 283 943 l 283 878 l 398 878 l 398 736 l 333 736 l 333 0 l 59 0 l 59 736 l 3 736 l 3 878 l 59 878 q 65 997 59 967 q 95 1050 71 1027 q 163 1086 119 1074 q 298 1098 206 1098 l 398 1098 m 727 1098 l 727 0 l 445 0 l 445 1098 l 727 1098 z "},"‡":{"ha":755,"x_min":24,"x_max":730,"o":"m 227 1098 l 528 1098 l 528 844 l 730 844 l 730 586 l 528 586 l 528 384 l 730 384 l 730 125 l 528 125 l 528 -128 l 227 -128 l 227 125 l 24 125 l 24 384 l 227 384 l 227 586 l 24 586 l 24 844 l 227 844 l 227 1098 z "},"∙":{"ha":305,"x_min":49,"x_max":256,"o":"m 256 659 l 256 435 l 49 435 l 49 659 l 256 659 z "},"‚":{"ha":233,"x_min":24,"x_max":208,"o":"m 208 215 l 208 117 q 190 -10 208 39 q 126 -94 172 -60 q 24 -140 81 -129 l 24 -62 q 71 0 65 -39 l 24 0 l 24 215 l 208 215 z "},"„":{"ha":479,"x_min":24,"x_max":454,"o":"m 454 215 l 454 117 q 435 -10 454 39 q 372 -94 417 -60 q 270 -140 327 -129 l 270 -62 q 315 0 310 -39 l 270 0 l 270 215 l 454 215 m 208 215 l 208 117 q 190 -10 208 39 q 126 -94 172 -60 q 24 -140 81 -129 l 24 -62 q 71 0 65 -39 l 24 0 l 24 215 l 208 215 z "},"‰":{"ha":1423,"x_min":24,"x_max":1399,"o":"m 748 1119 l 319 -21 l 214 -21 l 645 1119 l 748 1119 m 429 911 l 429 722 q 415 611 429 648 q 355 547 401 574 q 234 519 309 519 q 102 546 147 519 q 40 608 56 572 q 24 713 24 645 l 24 911 q 41 1031 24 992 q 105 1095 58 1070 q 222 1119 153 1119 q 348 1092 300 1119 q 412 1027 396 1065 q 429 911 429 989 m 255 959 q 251 1013 255 1002 q 227 1023 246 1023 q 203 1012 208 1023 q 197 959 197 1001 l 197 682 q 202 625 197 635 q 227 616 207 616 q 250 627 245 616 q 255 677 255 637 l 255 959 m 938 380 l 938 191 q 924 81 938 118 q 864 16 910 43 q 743 -12 819 -12 q 611 15 657 -12 q 550 78 566 41 q 534 182 534 115 l 534 380 q 550 500 534 461 q 614 564 567 539 q 732 589 662 589 q 858 562 810 589 q 922 496 906 534 q 938 380 938 458 m 764 428 q 760 482 764 471 q 736 492 755 492 q 712 481 718 492 q 707 428 707 471 l 707 151 q 712 95 707 104 q 736 85 717 85 q 760 96 755 85 q 764 147 764 106 l 764 428 m 1399 380 l 1399 191 q 1385 81 1399 118 q 1325 16 1371 43 q 1204 -12 1280 -12 q 1073 15 1118 -12 q 1011 78 1027 41 q 995 182 995 115 l 995 380 q 1011 500 995 461 q 1076 564 1028 539 q 1193 589 1123 589 q 1319 562 1271 589 q 1383 496 1367 534 q 1399 380 1399 458 m 1225 428 q 1221 482 1225 471 q 1197 492 1217 492 q 1174 481 1179 492 q 1168 428 1168 471 l 1168 151 q 1173 95 1168 104 q 1198 85 1178 85 q 1220 96 1215 85 q 1225 147 1225 106 l 1225 428 z "},"Â":{"ha":705,"x_min":-8,"x_max":713,"o":"m 550 1098 l 713 0 l 421 0 l 407 197 l 304 197 l 288 0 l -8 0 l 137 1098 l 550 1098 m 399 392 q 355 852 377 578 q 301 392 312 538 l 399 392 m 346 1221 l 266 1133 l 76 1133 l 250 1324 l 441 1324 l 605 1133 l 421 1133 l 346 1221 z "},"Ê":{"ha":577,"x_min":24,"x_max":553,"o":"m 57 1098 l 533 1098 l 533 878 l 342 878 l 342 670 l 521 670 l 521 461 l 342 461 l 342 220 l 552 220 l 552 0 l 57 0 l 57 1098 m 294 1221 l 214 1133 l 24 1133 l 198 1324 l 389 1324 l 553 1133 l 369 1133 l 294 1221 z "},"Á":{"ha":705,"x_min":-8,"x_max":713,"o":"m 550 1098 l 713 0 l 421 0 l 407 197 l 304 197 l 288 0 l -8 0 l 137 1098 l 550 1098 m 399 392 q 355 852 377 578 q 301 392 312 538 l 399 392 m 585 1316 l 361 1133 l 224 1133 l 343 1316 l 585 1316 z "},"Ë":{"ha":577,"x_min":52,"x_max":552,"o":"m 57 1098 l 533 1098 l 533 878 l 342 878 l 342 670 l 521 670 l 521 461 l 342 461 l 342 220 l 552 220 l 552 0 l 57 0 l 57 1098 m 229 1309 l 229 1133 l 52 1133 l 52 1309 l 229 1309 m 525 1309 l 525 1133 l 348 1133 l 348 1309 l 525 1309 z "},"È":{"ha":577,"x_min":57,"x_max":552,"o":"m 57 1098 l 533 1098 l 533 878 l 342 878 l 342 670 l 521 670 l 521 461 l 342 461 l 342 220 l 552 220 l 552 0 l 57 0 l 57 1098 m 57 1316 l 298 1316 l 418 1133 l 280 1133 l 57 1316 z "},"Í":{"ha":400,"x_min":57,"x_max":431,"o":"m 342 1098 l 342 0 l 57 0 l 57 1098 l 342 1098 m 431 1316 l 208 1133 l 71 1133 l 190 1316 l 431 1316 z "},"Î":{"ha":400,"x_min":-64,"x_max":465,"o":"m 342 1098 l 342 0 l 57 0 l 57 1098 l 342 1098 m 205 1221 l 125 1133 l -64 1133 l 110 1324 l 301 1324 l 465 1133 l 281 1133 l 205 1221 z "},"Ï":{"ha":400,"x_min":-37,"x_max":437,"o":"m 342 1098 l 342 0 l 57 0 l 57 1098 l 342 1098 m 140 1309 l 140 1133 l -37 1133 l -37 1309 l 140 1309 m 437 1309 l 437 1133 l 260 1133 l 260 1309 l 437 1309 z "},"Ì":{"ha":400,"x_min":-32,"x_max":342,"o":"m 342 1098 l 342 0 l 57 0 l 57 1098 l 342 1098 m -32 1316 l 210 1316 l 329 1133 l 191 1133 l -32 1316 z "},"Ó":{"ha":759,"x_min":49,"x_max":709,"o":"m 709 455 q 702 221 709 290 q 653 95 694 152 q 542 7 612 38 q 379 -23 472 -23 q 221 6 291 -23 q 108 92 151 35 q 57 218 65 150 q 49 455 49 286 l 49 643 q 57 877 49 808 q 105 1003 64 946 q 216 1090 146 1060 q 379 1121 286 1121 q 537 1092 467 1121 q 650 1006 608 1063 q 701 880 693 948 q 709 643 709 812 l 709 455 m 424 816 q 415 914 424 892 q 380 935 407 935 q 346 918 358 935 q 334 816 334 901 l 334 303 q 342 185 334 208 q 378 163 350 163 q 416 189 408 163 q 424 311 424 214 l 424 816 m 610 1316 l 387 1133 l 250 1133 l 369 1316 l 610 1316 z "},"Ô":{"ha":759,"x_min":49,"x_max":709,"o":"m 709 455 q 702 221 709 290 q 653 95 694 152 q 542 7 612 38 q 379 -23 472 -23 q 221 6 291 -23 q 108 92 151 35 q 57 218 65 150 q 49 455 49 286 l 49 643 q 57 877 49 808 q 105 1003 64 946 q 216 1090 146 1060 q 379 1121 286 1121 q 537 1092 467 1121 q 650 1006 608 1063 q 701 880 693 948 q 709 643 709 812 l 709 455 m 424 816 q 415 914 424 892 q 380 935 407 935 q 346 918 358 935 q 334 816 334 901 l 334 303 q 342 185 334 208 q 378 163 350 163 q 416 189 408 163 q 424 311 424 214 l 424 816 m 385 1221 l 304 1133 l 115 1133 l 289 1324 l 480 1324 l 644 1133 l 460 1133 l 385 1221 z "},"":{"ha":1097,"x_min":0,"x_max":0,"o":""},"Ò":{"ha":759,"x_min":49,"x_max":709,"o":"m 709 455 q 702 221 709 290 q 653 95 694 152 q 542 7 612 38 q 379 -23 472 -23 q 221 6 291 -23 q 108 92 151 35 q 57 218 65 150 q 49 455 49 286 l 49 643 q 57 877 49 808 q 105 1003 64 946 q 216 1090 146 1060 q 379 1121 286 1121 q 537 1092 467 1121 q 650 1006 608 1063 q 701 880 693 948 q 709 643 709 812 l 709 455 m 424 816 q 415 914 424 892 q 380 935 407 935 q 346 918 358 935 q 334 816 334 901 l 334 303 q 342 185 334 208 q 378 163 350 163 q 416 189 408 163 q 424 311 424 214 l 424 816 m 148 1316 l 389 1316 l 509 1133 l 371 1133 l 148 1316 z "},"Ú":{"ha":760,"x_min":53,"x_max":706,"o":"m 706 1098 l 706 364 q 698 189 706 239 q 650 85 690 138 q 544 4 610 32 q 390 -23 479 -23 q 216 9 292 -23 q 104 94 141 42 q 60 204 66 146 q 53 448 53 262 l 53 1098 l 338 1098 l 338 275 q 346 183 338 203 q 378 163 354 163 q 413 185 405 163 q 420 289 420 207 l 420 1098 l 706 1098 m 611 1316 l 388 1133 l 250 1133 l 370 1316 l 611 1316 z "},"Û":{"ha":760,"x_min":53,"x_max":706,"o":"m 706 1098 l 706 364 q 698 189 706 239 q 650 85 690 138 q 544 4 610 32 q 390 -23 479 -23 q 216 9 292 -23 q 104 94 141 42 q 60 204 66 146 q 53 448 53 262 l 53 1098 l 338 1098 l 338 275 q 346 183 338 203 q 378 163 354 163 q 413 185 405 163 q 420 289 420 207 l 420 1098 l 706 1098 m 385 1221 l 305 1133 l 115 1133 l 290 1324 l 481 1324 l 644 1133 l 460 1133 l 385 1221 z "},"Ù":{"ha":760,"x_min":53,"x_max":706,"o":"m 706 1098 l 706 364 q 698 189 706 239 q 650 85 690 138 q 544 4 610 32 q 390 -23 479 -23 q 216 9 292 -23 q 104 94 141 42 q 60 204 66 146 q 53 448 53 262 l 53 1098 l 338 1098 l 338 275 q 346 183 338 203 q 378 163 354 163 q 413 185 405 163 q 420 289 420 207 l 420 1098 l 706 1098 m 148 1316 l 389 1316 l 509 1133 l 371 1133 l 148 1316 z "},"ı":{"ha":380,"x_min":49,"x_max":331,"o":"m 331 900 l 331 0 l 49 0 l 49 900 l 331 900 z "},"ˆ":{"ha":463,"x_min":-33,"x_max":496,"o":"m 237 1107 l 157 1018 l -33 1018 l 142 1209 l 333 1209 l 496 1018 l 313 1018 l 237 1107 z "},"˜":{"ha":463,"x_min":-55,"x_max":517,"o":"m 517 1147 q 441 1051 486 1078 q 361 1024 395 1024 q 257 1046 313 1024 l 207 1066 q 135 1086 159 1086 q 52 1018 85 1086 l -55 1089 q 113 1221 20 1221 q 220 1199 162 1221 l 262 1183 q 334 1164 315 1164 q 408 1225 390 1164 l 517 1147 z "},"ˉ":{"ha":463,"x_min":-39,"x_max":501,"o":"m 501 1135 l 501 1018 l -39 1018 l -39 1135 l 501 1135 z "},"˘":{"ha":463,"x_min":39,"x_max":424,"o":"m 309 1223 l 424 1223 q 370 1074 420 1131 q 231 1018 320 1018 q 93 1075 142 1018 q 39 1223 43 1131 l 155 1223 q 231 1130 163 1130 q 309 1223 300 1130 z "},"˙":{"ha":463,"x_min":143,"x_max":320,"o":"m 320 1194 l 320 1018 l 143 1018 l 143 1194 l 320 1194 z "},"˚":{"ha":463,"x_min":89,"x_max":374,"o":"m 232 1303 q 332 1262 289 1303 q 374 1160 374 1221 q 332 1060 374 1101 q 232 1018 290 1018 q 131 1060 172 1018 q 89 1160 89 1101 q 131 1261 89 1219 q 232 1303 173 1303 m 231 1214 q 192 1198 208 1214 q 175 1158 175 1181 q 192 1118 175 1135 q 231 1102 208 1102 q 270 1118 254 1102 q 287 1158 287 1135 q 270 1198 287 1181 q 231 1214 254 1214 z "},"¸":{"ha":463,"x_min":77,"x_max":354,"o":"m 256 8 l 256 -76 q 323 -100 292 -76 q 354 -165 354 -123 q 312 -255 354 -217 q 212 -293 270 -293 q 77 -186 106 -293 l 177 -186 q 211 -214 186 -214 q 241 -203 231 -214 q 251 -173 251 -193 q 237 -139 251 -151 q 195 -128 223 -128 q 177 -129 189 -128 l 177 8 l 256 8 z "},"˝":{"ha":463,"x_min":16,"x_max":545,"o":"m 281 1228 l 117 1018 l 16 1018 l 96 1228 l 281 1228 m 545 1228 l 382 1018 l 281 1018 l 361 1228 l 545 1228 z "},"˛":{"ha":463,"x_min":106,"x_max":359,"o":"m 178 14 l 277 14 q 205 -91 205 -55 q 217 -124 205 -113 q 254 -135 229 -135 q 331 -117 288 -135 l 359 -185 q 241 -214 302 -214 q 144 -186 182 -214 q 106 -109 106 -159 q 178 14 106 -49 z "},"ˇ":{"ha":463,"x_min":-33,"x_max":496,"o":"m 237 1120 l 313 1209 l 496 1209 l 333 1018 l 142 1018 l -33 1209 l 157 1209 l 237 1120 z "},"Ł":{"ha":532,"x_min":9,"x_max":524,"o":"m 351 686 l 516 723 l 516 606 l 351 569 l 351 220 l 524 220 l 524 0 l 65 0 l 65 505 l 9 492 l 9 608 l 65 621 l 65 1098 l 351 1098 l 351 686 z "},"ł":{"ha":397,"x_min":9,"x_max":387,"o":"m 339 709 l 387 723 l 387 606 l 339 592 l 339 0 l 57 0 l 57 507 l 9 492 l 9 608 l 57 623 l 57 1098 l 339 1098 l 339 709 z "},"Š":{"ha":718,"x_min":33,"x_max":686,"o":"m 662 766 l 397 766 l 397 847 q 387 920 397 904 q 353 935 376 935 q 314 914 327 935 q 300 850 300 893 q 315 768 300 795 q 396 701 330 740 q 636 515 587 587 q 686 281 686 442 q 658 108 686 163 q 552 15 631 52 q 369 -23 473 -23 q 173 20 254 -23 q 67 131 92 64 q 42 321 42 198 l 42 393 l 307 393 l 307 260 q 318 180 307 198 q 358 163 330 163 q 400 185 387 163 q 414 252 414 208 q 388 378 414 349 q 254 478 361 408 q 113 581 148 549 q 56 669 79 612 q 33 812 33 725 q 65 997 33 939 q 170 1088 98 1055 q 343 1121 241 1121 q 533 1085 454 1121 q 636 995 611 1049 q 662 809 662 940 l 662 766 m 364 1235 l 439 1324 l 623 1324 l 460 1133 l 269 1133 l 94 1324 l 284 1324 l 364 1235 z "},"š":{"ha":654,"x_min":28,"x_max":629,"o":"m 608 612 l 366 612 l 366 661 q 358 740 366 724 q 323 757 351 757 q 288 742 300 757 q 277 696 277 726 q 282 635 277 654 q 317 593 288 616 q 435 526 346 570 q 592 416 555 467 q 629 266 629 364 q 601 100 629 156 q 506 14 572 44 q 345 -16 439 -16 q 166 16 240 -16 q 64 104 92 49 q 36 273 36 160 l 36 316 l 279 316 l 279 259 q 288 165 279 186 q 324 143 297 143 q 365 158 353 143 q 376 219 376 172 q 361 300 376 283 q 202 396 346 316 q 55 519 81 464 q 28 650 28 574 q 57 809 28 758 q 154 888 85 861 q 312 916 222 916 q 464 893 401 916 q 561 833 527 871 q 601 764 594 796 q 608 665 608 732 l 608 612 m 332 1063 l 408 1152 l 591 1152 l 428 960 l 237 960 l 62 1152 l 252 1152 l 332 1063 z "},"Ž":{"ha":551,"x_min":8,"x_max":540,"o":"m 534 1098 l 534 878 l 321 220 l 534 220 l 534 0 l 8 0 l 8 159 l 228 878 l 34 878 l 34 1098 l 534 1098 m 281 1235 l 356 1324 l 540 1324 l 376 1133 l 185 1133 l 11 1324 l 201 1324 l 281 1235 z "},"ž":{"ha":488,"x_min":-33,"x_max":496,"o":"m 475 900 l 475 701 l 273 180 l 475 180 l 475 0 l 8 0 l 8 189 l 215 720 l 29 720 l 29 900 l 475 900 m 237 1063 l 312 1152 l 496 1152 l 332 960 l 141 960 l -33 1152 l 157 1152 l 237 1063 z "},"¦":{"ha":376,"x_min":115,"x_max":262,"o":"m 115 1098 l 262 1098 l 262 545 l 115 545 l 115 1098 m 115 373 l 262 373 l 262 -180 l 115 -180 l 115 373 z "},"Ð":{"ha":776,"x_min":9,"x_max":726,"o":"m 65 549 l 9 549 l 9 666 l 65 666 l 65 1098 l 279 1098 q 558 1079 486 1098 q 669 1017 631 1060 q 717 920 707 973 q 726 711 726 867 l 726 326 q 712 129 726 178 q 664 51 699 79 q 578 11 629 22 q 425 0 528 0 l 65 0 l 65 549 m 351 549 l 351 188 q 427 213 412 188 q 441 347 441 237 l 441 774 q 436 869 441 848 q 415 900 431 890 q 351 910 398 910 l 351 666 l 395 666 l 395 549 l 351 549 z "},"ð":{"ha":710,"x_min":41,"x_max":669,"o":"m 251 1098 l 417 1098 q 452 1071 435 1085 l 561 1098 l 581 1038 l 504 1016 q 591 887 550 962 q 651 735 633 812 q 669 526 669 658 l 669 321 q 640 136 669 208 q 536 24 610 65 q 350 -16 463 -16 q 164 22 237 -16 q 66 126 92 60 q 41 335 41 191 l 41 533 q 64 716 41 652 q 147 828 87 781 q 281 876 206 876 q 395 838 348 876 q 345 975 382 910 l 215 939 l 195 1001 l 308 1032 q 251 1098 274 1078 m 395 615 q 388 699 395 682 q 355 716 380 716 q 323 696 332 716 q 315 624 315 675 l 315 238 q 325 162 315 182 q 356 143 334 143 q 386 162 377 143 q 395 245 395 180 l 395 615 z "},"Ý":{"ha":657,"x_min":-8,"x_max":665,"o":"m 665 1098 l 457 397 l 457 0 l 193 0 l 193 397 l -8 1098 l 254 1098 q 323 666 316 777 q 403 1098 347 842 l 665 1098 m 560 1316 l 337 1133 l 199 1133 l 319 1316 l 560 1316 z "},"ý":{"ha":623,"x_min":-8,"x_max":623,"o":"m 623 900 l 544 249 q 513 38 526 94 q 471 -55 500 -18 q 390 -109 442 -92 q 224 -126 338 -126 l 58 -126 l 58 18 q 140 24 122 18 q 159 53 159 31 q 142 147 159 64 l -8 900 l 241 900 l 330 293 l 374 900 l 623 900 m 552 1144 l 329 960 l 191 960 l 311 1144 l 552 1144 z "},"Þ":{"ha":697,"x_min":57,"x_max":672,"o":"m 342 893 q 521 876 462 893 q 616 822 581 859 q 662 739 652 785 q 672 586 672 692 l 672 491 q 653 344 672 393 q 577 266 634 294 q 419 237 521 237 l 342 237 l 342 0 l 57 0 l 57 1098 l 342 1098 l 342 893 m 342 705 l 342 426 l 363 426 q 418 445 403 426 q 433 526 433 465 l 433 615 q 416 688 433 670 q 342 705 398 705 z "},"þ":{"ha":721,"x_min":49,"x_max":680,"o":"m 323 1098 l 323 821 q 500 916 395 916 q 610 882 564 916 q 668 803 656 848 q 680 651 680 758 l 680 272 q 665 97 680 149 q 605 15 650 45 q 496 -16 560 -16 q 323 78 395 -16 l 323 -128 l 49 -128 l 49 1098 l 323 1098 m 406 638 q 399 739 406 722 q 366 757 393 757 q 331 736 338 757 q 323 638 323 716 l 323 265 q 331 163 323 184 q 366 143 339 143 q 399 162 393 143 q 406 252 406 180 l 406 638 z "},"−":{"ha":741,"x_min":43,"x_max":697,"o":"m 43 631 l 697 631 l 697 466 l 43 466 l 43 631 z "},"×":{"ha":741,"x_min":50,"x_max":690,"o":"m 50 761 l 167 878 l 370 675 l 573 878 l 690 761 l 488 557 l 689 357 l 572 239 l 371 441 l 169 240 l 52 357 l 254 557 l 50 761 z "},"¹":{"ha":340,"x_min":8,"x_max":298,"o":"m 298 1109 l 298 531 l 125 531 l 125 841 q 122 919 125 907 q 102 937 119 930 q 27 943 85 943 l 8 943 l 8 1018 q 197 1109 132 1040 l 298 1109 z "},"²":{"ha":441,"x_min":24,"x_max":416,"o":"m 401 636 l 401 531 l 24 531 l 24 618 q 223 902 194 851 q 253 982 253 953 q 217 1023 253 1023 q 189 1011 197 1023 q 180 964 180 1000 l 180 906 l 24 906 l 24 931 q 37 1028 24 991 q 94 1092 50 1065 q 210 1119 137 1119 q 364 1076 311 1119 q 416 966 416 1034 q 388 862 416 916 q 267 696 359 809 l 220 636 l 401 636 z "},"³":{"ha":453,"x_min":24,"x_max":429,"o":"m 361 857 q 410 821 391 847 q 429 706 429 794 q 373 555 429 591 q 228 519 317 519 q 99 543 146 519 q 39 602 53 567 q 24 717 24 636 l 24 755 l 197 755 l 197 669 q 202 624 197 633 q 224 616 207 616 q 250 627 244 616 q 256 691 256 639 l 256 728 q 237 785 256 773 q 153 797 219 796 l 153 888 q 241 897 227 888 q 256 945 256 905 l 256 978 q 248 1015 256 1008 q 227 1023 241 1023 q 203 1015 210 1023 q 197 974 197 1006 l 197 934 l 24 934 l 24 976 q 69 1090 24 1061 q 212 1119 113 1119 q 377 1079 332 1119 q 422 964 422 1039 q 411 903 422 932 q 361 857 400 874 z "},"½":{"ha":896,"x_min":8,"x_max":871,"o":"m 679 1119 l 250 -21 l 145 -21 l 576 1119 l 679 1119 m 298 1109 l 298 531 l 125 531 l 125 841 q 122 919 125 907 q 102 937 119 930 q 27 943 85 943 l 8 943 l 8 1018 q 197 1109 132 1040 l 298 1109 m 856 105 l 856 0 l 479 0 l 479 87 q 678 371 648 320 q 707 452 707 422 q 671 492 707 492 q 643 481 652 492 q 634 433 634 470 l 634 376 l 479 376 l 479 400 q 492 497 479 460 q 548 562 505 534 q 664 589 591 589 q 818 546 766 589 q 871 435 871 503 q 841 331 871 386 q 722 165 812 277 l 675 105 l 856 105 z "},"¼":{"ha":866,"x_min":8,"x_max":850,"o":"m 679 1119 l 250 -21 l 145 -21 l 576 1119 l 679 1119 m 298 1109 l 298 531 l 125 531 l 125 841 q 122 919 125 907 q 102 937 119 930 q 27 943 85 943 l 8 943 l 8 1018 q 197 1109 132 1040 l 298 1109 m 802 579 l 802 206 l 850 206 l 850 100 l 802 100 l 802 0 l 628 0 l 628 100 l 427 100 l 427 203 l 574 579 l 802 579 m 628 206 l 628 433 l 543 206 l 628 206 z "},"¾":{"ha":960,"x_min":24,"x_max":943,"o":"m 361 857 q 410 821 391 847 q 429 706 429 794 q 373 555 429 591 q 228 519 317 519 q 99 543 146 519 q 39 602 53 567 q 24 717 24 636 l 24 755 l 197 755 l 197 669 q 202 624 197 633 q 224 616 207 616 q 250 627 244 616 q 256 691 256 639 l 256 728 q 237 785 256 773 q 153 797 219 796 l 153 888 q 241 897 227 888 q 256 945 256 905 l 256 978 q 248 1015 256 1008 q 227 1023 241 1023 q 203 1015 210 1023 q 197 974 197 1006 l 197 934 l 24 934 l 24 976 q 69 1090 24 1061 q 212 1119 113 1119 q 377 1079 332 1119 q 422 964 422 1039 q 411 903 422 932 q 361 857 400 874 m 772 1119 l 344 -21 l 239 -21 l 669 1119 l 772 1119 m 895 579 l 895 206 l 943 206 l 943 100 l 895 100 l 895 0 l 722 0 l 722 100 l 520 100 l 520 203 l 668 579 l 895 579 m 722 206 l 722 433 l 636 206 l 722 206 z "},"Ğ":{"ha":766,"x_min":49,"x_max":712,"o":"m 712 694 l 427 694 l 427 793 q 418 911 427 888 q 380 935 410 935 q 344 915 353 935 q 334 810 334 895 l 334 283 q 344 186 334 210 q 382 163 353 163 q 424 189 413 163 q 435 292 435 216 l 435 422 l 378 422 l 378 589 l 712 589 l 712 0 l 532 0 l 506 79 q 432 2 477 28 q 328 -23 388 -23 q 193 12 256 -23 q 98 98 130 47 q 57 207 65 150 q 49 376 49 263 l 49 703 q 66 931 49 860 q 163 1062 83 1002 q 371 1121 243 1121 q 579 1069 496 1121 q 687 947 662 1018 q 712 741 712 876 l 712 694 m 460 1337 l 575 1337 q 521 1189 571 1245 q 382 1133 471 1133 q 244 1189 293 1133 q 191 1337 195 1246 l 306 1337 q 382 1244 314 1244 q 460 1337 452 1244 z "},"ğ":{"ha":720,"x_min":41,"x_max":671,"o":"m 671 900 l 671 207 q 665 25 671 66 q 619 -61 659 -16 q 510 -131 580 -107 q 333 -155 439 -155 q 123 -111 202 -155 q 41 64 43 -66 l 307 64 q 350 4 307 4 q 391 22 381 4 q 401 99 401 41 l 401 167 q 327 119 366 135 q 245 102 288 102 q 124 132 172 102 q 58 211 76 162 q 41 349 41 259 l 41 675 q 87 860 41 804 q 227 916 133 916 q 321 895 279 916 q 397 832 363 874 l 416 900 l 671 900 m 397 661 q 390 740 397 723 q 358 757 382 757 q 325 738 334 757 q 315 661 315 718 l 315 359 q 322 280 315 298 q 353 262 330 262 q 389 284 380 262 q 397 382 397 306 l 397 661 m 437 1165 l 552 1165 q 498 1017 548 1073 q 359 960 448 960 q 221 1017 270 960 q 168 1165 172 1074 l 283 1165 q 359 1072 291 1072 q 437 1165 429 1072 z "},"İ":{"ha":400,"x_min":57,"x_max":342,"o":"m 342 1098 l 342 0 l 57 0 l 57 1098 l 342 1098 m 288 1309 l 288 1133 l 111 1133 l 111 1309 l 288 1309 z "},"Ş":{"ha":718,"x_min":33,"x_max":686,"o":"m 383 -22 l 383 -35 q 450 -59 419 -35 q 481 -125 481 -83 q 439 -214 481 -176 q 339 -252 397 -252 q 204 -144 233 -252 l 304 -144 q 338 -173 313 -173 q 378 -132 378 -173 q 322 -87 378 -87 l 304 -87 l 304 -18 q 134 45 195 -3 q 58 159 73 94 q 42 321 42 223 l 42 393 l 307 393 l 307 260 q 318 180 307 198 q 358 163 330 163 q 414 252 414 163 q 388 378 414 349 q 254 478 361 408 q 113 581 148 549 q 56 669 79 612 q 33 812 33 725 q 65 997 33 939 q 170 1088 98 1055 q 343 1121 241 1121 q 533 1085 454 1121 q 636 995 611 1049 q 662 809 662 940 l 662 766 l 397 766 l 397 847 q 387 920 397 904 q 353 935 376 935 q 300 850 300 935 q 315 768 300 795 q 396 701 330 740 q 636 515 587 587 q 686 281 686 442 q 663 116 686 170 q 563 21 640 62 q 383 -22 487 -21 z "},"ş":{"ha":654,"x_min":28,"x_max":629,"o":"m 351 -16 l 351 -35 q 418 -59 387 -35 q 449 -125 449 -83 q 407 -214 449 -176 q 307 -252 366 -252 q 172 -144 201 -252 l 272 -144 q 307 -173 281 -173 q 347 -132 347 -173 q 290 -87 347 -87 l 272 -87 l 272 -12 q 141 29 194 -1 q 62 109 87 59 q 36 273 36 158 l 36 316 l 279 316 l 279 259 q 288 165 279 186 q 324 143 297 143 q 365 158 353 143 q 376 219 376 172 q 361 300 376 283 q 202 396 346 316 q 55 519 81 464 q 28 650 28 574 q 57 809 28 758 q 154 888 85 861 q 312 916 222 916 q 464 893 401 916 q 561 833 527 871 q 601 764 594 796 q 608 665 608 732 l 608 612 l 366 612 l 366 661 q 358 740 366 724 q 323 757 351 757 q 277 696 277 757 q 282 635 277 654 q 317 593 288 616 q 435 526 346 570 q 592 416 555 467 q 629 266 629 364 q 604 107 629 161 q 516 19 579 52 q 351 -16 454 -14 z "},"Ć":{"ha":769,"x_min":49,"x_max":724,"o":"m 724 619 l 438 619 l 438 810 q 429 915 438 894 q 389 935 420 935 q 344 910 353 935 q 334 802 334 885 l 334 292 q 344 187 334 212 q 387 163 353 163 q 428 187 418 163 q 438 302 438 212 l 438 439 l 724 439 l 724 397 q 700 155 724 227 q 593 31 675 84 q 390 -23 511 -23 q 183 22 264 -23 q 75 148 102 68 q 49 390 49 229 l 49 711 q 57 889 49 829 q 105 1003 65 948 q 217 1089 146 1058 q 382 1121 289 1121 q 590 1072 508 1121 q 698 950 672 1023 q 724 724 724 878 l 724 619 m 618 1316 l 395 1133 l 257 1133 l 376 1316 l 618 1316 z "},"ć":{"ha":687,"x_min":41,"x_max":654,"o":"m 654 560 l 396 560 l 396 664 q 387 738 396 718 q 355 757 378 757 q 323 740 331 757 q 315 664 315 723 l 315 239 q 327 167 315 191 q 363 143 339 143 q 400 168 391 143 q 410 263 410 193 l 410 370 l 654 370 q 647 209 654 262 q 601 98 640 155 q 501 13 563 41 q 349 -16 439 -16 q 165 23 233 -16 q 69 135 97 63 q 41 338 41 206 l 41 593 q 64 766 41 708 q 162 870 87 825 q 345 916 237 916 q 528 871 452 916 q 629 756 604 825 q 654 560 654 687 m 577 1144 l 354 960 l 216 960 l 336 1144 l 577 1144 z "},"Č":{"ha":769,"x_min":49,"x_max":724,"o":"m 724 619 l 438 619 l 438 810 q 429 915 438 894 q 389 935 420 935 q 344 910 353 935 q 334 802 334 885 l 334 292 q 344 187 334 212 q 387 163 353 163 q 428 187 418 163 q 438 302 438 212 l 438 439 l 724 439 l 724 397 q 700 155 724 227 q 593 31 675 84 q 390 -23 511 -23 q 183 22 264 -23 q 75 148 102 68 q 49 390 49 229 l 49 711 q 57 889 49 829 q 105 1003 65 948 q 217 1089 146 1058 q 382 1121 289 1121 q 590 1072 508 1121 q 698 950 672 1023 q 724 724 724 878 l 724 619 m 392 1235 l 467 1324 l 651 1324 l 488 1133 l 296 1133 l 122 1324 l 312 1324 l 392 1235 z "},"č":{"ha":687,"x_min":41,"x_max":654,"o":"m 654 560 l 396 560 l 396 664 q 387 738 396 718 q 355 757 378 757 q 323 740 331 757 q 315 664 315 723 l 315 239 q 327 167 315 191 q 363 143 339 143 q 400 168 391 143 q 410 263 410 193 l 410 370 l 654 370 q 647 209 654 262 q 601 98 640 155 q 501 13 563 41 q 349 -16 439 -16 q 165 23 233 -16 q 69 135 97 63 q 41 338 41 206 l 41 593 q 64 766 41 708 q 162 870 87 825 q 345 916 237 916 q 528 871 452 916 q 629 756 604 825 q 654 560 654 687 m 351 1063 l 427 1152 l 610 1152 l 447 960 l 256 960 l 81 1152 l 271 1152 l 351 1063 z "},"đ":{"ha":722,"x_min":41,"x_max":720,"o":"m 672 1065 l 720 1065 l 720 949 l 672 949 l 672 0 l 398 0 l 398 65 q 224 -16 319 -16 q 114 17 161 -16 q 54 95 67 51 q 41 239 41 139 l 41 660 q 54 807 41 764 q 115 883 67 850 q 228 916 162 916 q 398 843 329 916 l 398 949 l 228 949 l 228 1065 l 398 1065 l 398 1098 l 672 1098 l 672 1065 m 398 673 q 390 740 398 723 q 356 757 381 757 q 323 742 332 757 q 315 673 315 726 l 315 233 q 323 160 315 178 q 354 143 331 143 q 389 162 380 143 q 398 257 398 182 l 398 673 z "},"¯":{"ha":767,"x_min":-8,"x_max":775,"o":"m -8 1215 l 775 1215 l 775 1146 l -8 1146 l -8 1215 z "},"·":{"ha":463,"x_min":389,"x_max":587,"o":"m 488 572 q 557 544 528 572 q 587 473 587 515 q 558 403 587 432 q 488 374 529 374 q 418 403 447 374 q 389 473 389 432 q 418 544 389 515 q 488 572 447 572 z "},"":{"ha":448,"x_min":8,"x_max":431,"o":"m 383 1109 l 383 736 l 431 736 l 431 631 l 383 631 l 383 531 l 210 531 l 210 631 l 8 631 l 8 734 l 156 1109 l 383 1109 m 210 736 l 210 964 l 124 736 l 210 736 z "},"Ā":{"ha":705,"x_min":-8,"x_max":713,"o":"m 550 1098 l 713 0 l 421 0 l 407 197 l 304 197 l 288 0 l -8 0 l 137 1098 l 550 1098 m 399 392 q 355 852 377 578 q 301 392 312 538 l 399 392 m 614 1250 l 614 1133 l 74 1133 l 74 1250 l 614 1250 z "},"ā":{"ha":700,"x_min":37,"x_max":654,"o":"m 294 551 l 37 551 l 37 612 q 61 773 37 716 q 157 873 85 829 q 346 916 230 916 q 555 867 485 916 q 640 746 626 818 q 654 452 654 675 l 654 0 l 388 0 l 388 80 q 323 8 363 32 q 229 -16 283 -16 q 97 24 157 -16 q 37 201 37 64 l 37 275 q 68 412 37 376 q 227 498 100 449 q 371 569 361 551 q 380 644 380 587 q 370 735 380 714 q 335 757 359 757 q 300 739 307 757 q 294 646 294 721 l 294 551 m 380 428 q 304 347 315 380 q 294 254 294 315 q 303 163 294 184 q 339 143 312 143 q 373 159 365 143 q 380 243 380 175 l 380 428 m 629 1078 l 629 960 l 89 960 l 89 1078 l 629 1078 z "},"Ă":{"ha":705,"x_min":-8,"x_max":713,"o":"m 550 1098 l 713 0 l 421 0 l 407 197 l 304 197 l 288 0 l -8 0 l 137 1098 l 550 1098 m 399 392 q 355 852 377 578 q 301 392 312 538 l 399 392 m 420 1337 l 536 1337 q 482 1189 532 1245 q 343 1133 432 1133 q 204 1189 254 1133 q 151 1337 155 1246 l 267 1337 q 343 1244 275 1244 q 420 1337 412 1244 z "},"ă":{"ha":700,"x_min":37,"x_max":654,"o":"m 294 551 l 37 551 l 37 612 q 61 773 37 716 q 157 873 85 829 q 346 916 230 916 q 555 867 485 916 q 640 746 626 818 q 654 452 654 675 l 654 0 l 388 0 l 388 80 q 323 8 363 32 q 229 -16 283 -16 q 97 24 157 -16 q 37 201 37 64 l 37 275 q 68 412 37 376 q 227 498 100 449 q 371 569 361 551 q 380 644 380 587 q 370 735 380 714 q 335 757 359 757 q 300 739 307 757 q 294 646 294 721 l 294 551 m 380 428 q 304 347 315 380 q 294 254 294 315 q 303 163 294 184 q 339 143 312 143 q 373 159 365 143 q 380 243 380 175 l 380 428 m 419 1165 l 534 1165 q 480 1017 530 1073 q 342 960 431 960 q 203 1017 252 960 q 150 1165 154 1074 l 265 1165 q 342 1072 273 1072 q 419 1165 411 1072 z "},"Ą":{"ha":705,"x_min":-8,"x_max":714,"o":"m 596 0 q 538 -92 538 -58 q 586 -135 538 -135 q 664 -117 620 -135 l 692 -184 q 574 -215 627 -215 q 475 -186 512 -215 q 439 -110 439 -157 q 496 0 439 -54 l 421 0 l 407 197 l 304 197 l 288 0 l -8 0 l 138 1099 l 550 1099 l 714 0 l 596 0 m 301 393 l 399 393 q 355 852 371 639 q 301 393 319 587 z "},"ą":{"ha":700,"x_min":37,"x_max":664,"o":"m 568 0 q 510 -92 510 -58 q 558 -135 510 -135 q 636 -117 592 -135 l 664 -184 q 546 -215 599 -215 q 448 -186 484 -215 q 411 -110 411 -157 q 468 0 411 -54 l 389 0 l 389 81 q 330 18 365 37 q 229 -1 295 -1 q 82 41 127 -1 q 37 201 37 83 l 37 275 q 64 408 37 372 q 191 484 92 444 q 352 552 321 535 q 382 643 382 569 q 373 729 382 702 q 339 757 363 757 q 306 745 317 757 q 294 686 294 733 l 294 551 l 37 551 l 37 611 q 53 750 37 698 q 113 840 68 802 q 204 885 159 878 q 347 893 250 893 q 493 882 435 893 q 585 843 551 871 q 635 763 619 814 q 653 653 650 711 q 656 452 656 595 l 656 0 l 568 0 m 382 199 l 382 428 q 310 356 326 385 q 294 237 294 327 q 306 160 294 178 q 340 143 318 143 q 382 199 382 143 z "},"Ĉ":{"ha":769,"x_min":49,"x_max":724,"o":"m 724 619 l 438 619 l 438 810 q 429 915 438 894 q 389 935 420 935 q 344 910 353 935 q 334 802 334 885 l 334 292 q 344 187 334 212 q 387 163 353 163 q 428 187 418 163 q 438 302 438 212 l 438 439 l 724 439 l 724 397 q 700 155 724 227 q 593 31 675 84 q 390 -23 511 -23 q 183 22 264 -23 q 75 148 102 68 q 49 390 49 229 l 49 711 q 57 889 49 829 q 105 1003 65 948 q 217 1089 146 1058 q 382 1121 289 1121 q 590 1072 508 1121 q 698 950 672 1023 q 724 724 724 878 l 724 619 m 382 1221 l 302 1133 l 113 1133 l 287 1324 l 478 1324 l 642 1133 l 458 1133 l 382 1221 z "},"ĉ":{"ha":687,"x_min":41,"x_max":654,"o":"m 654 560 l 396 560 l 396 664 q 387 738 396 718 q 355 757 378 757 q 323 740 331 757 q 315 664 315 723 l 315 239 q 327 167 315 191 q 363 143 339 143 q 400 168 391 143 q 410 263 410 193 l 410 370 l 654 370 q 647 209 654 262 q 601 98 640 155 q 501 13 563 41 q 349 -16 439 -16 q 165 23 233 -16 q 69 135 97 63 q 41 338 41 206 l 41 593 q 64 766 41 708 q 162 870 87 825 q 345 916 237 916 q 528 871 452 916 q 629 756 604 825 q 654 560 654 687 m 342 1049 l 262 960 l 72 960 l 246 1152 l 437 1152 l 601 960 l 417 960 l 342 1049 z "},"Ċ":{"ha":769,"x_min":49,"x_max":724,"o":"m 724 619 l 438 619 l 438 810 q 429 915 438 894 q 389 935 420 935 q 344 910 353 935 q 334 802 334 885 l 334 292 q 344 187 334 212 q 387 163 353 163 q 428 187 418 163 q 438 302 438 212 l 438 439 l 724 439 l 724 397 q 700 155 724 227 q 593 31 675 84 q 390 -23 511 -23 q 183 22 264 -23 q 75 148 102 68 q 49 390 49 229 l 49 711 q 57 889 49 829 q 105 1003 65 948 q 217 1089 146 1058 q 382 1121 289 1121 q 590 1072 508 1121 q 698 950 672 1023 q 724 724 724 878 l 724 619 m 462 1309 l 462 1133 l 285 1133 l 285 1309 l 462 1309 z "},"ċ":{"ha":687,"x_min":41,"x_max":654,"o":"m 654 560 l 396 560 l 396 664 q 387 738 396 718 q 355 757 378 757 q 323 740 331 757 q 315 664 315 723 l 315 239 q 327 167 315 191 q 363 143 339 143 q 400 168 391 143 q 410 263 410 193 l 410 370 l 654 370 q 647 209 654 262 q 601 98 640 155 q 501 13 563 41 q 349 -16 439 -16 q 165 23 233 -16 q 69 135 97 63 q 41 338 41 206 l 41 593 q 64 766 41 708 q 162 870 87 825 q 345 916 237 916 q 528 871 452 916 q 629 756 604 825 q 654 560 654 687 m 429 1137 l 429 960 l 252 960 l 252 1137 l 429 1137 z "},"Ď":{"ha":768,"x_min":57,"x_max":718,"o":"m 57 1098 l 271 1098 q 550 1079 477 1098 q 661 1017 623 1060 q 709 920 699 973 q 718 711 718 867 l 718 326 q 704 129 718 178 q 656 51 690 79 q 570 11 621 22 q 417 0 519 0 l 57 0 l 57 1098 m 342 910 l 342 188 q 418 213 404 188 q 433 347 433 237 l 433 774 q 428 869 433 848 q 406 900 423 890 q 342 910 389 910 m 375 1235 l 450 1324 l 634 1324 l 471 1133 l 279 1133 l 105 1324 l 295 1324 l 375 1235 z "},"ď":{"ha":917,"x_min":41,"x_max":917,"o":"m 672 1098 l 672 0 l 398 0 l 398 65 q 315 4 359 24 q 224 -16 272 -16 q 114 17 161 -16 q 54 95 67 51 q 41 239 41 139 l 41 660 q 54 807 41 764 q 115 883 67 850 q 228 916 162 916 q 321 898 279 916 q 398 843 363 880 l 398 1098 l 672 1098 m 398 673 q 390 740 398 723 q 356 757 381 757 q 323 742 332 757 q 315 673 315 726 l 315 233 q 323 160 315 178 q 354 143 331 143 q 389 162 380 143 q 398 257 398 182 l 398 673 m 732 1098 l 917 1098 l 917 1041 q 732 784 917 823 l 732 863 q 778 924 772 887 l 732 924 l 732 1098 z "},"Ē":{"ha":577,"x_min":29,"x_max":569,"o":"m 57 1098 l 533 1098 l 533 878 l 342 878 l 342 670 l 521 670 l 521 461 l 342 461 l 342 220 l 552 220 l 552 0 l 57 0 l 57 1098 m 569 1250 l 569 1133 l 29 1133 l 29 1250 l 569 1250 z "},"ē":{"ha":710,"x_min":41,"x_max":669,"o":"m 669 434 l 315 434 l 315 239 q 323 161 315 178 q 357 143 332 143 q 399 166 389 143 q 410 257 410 190 l 410 376 l 669 376 l 669 309 q 659 181 669 226 q 610 85 648 136 q 512 9 571 35 q 363 -16 452 -16 q 210 9 276 -16 q 106 78 143 34 q 55 174 69 121 q 41 327 41 227 l 41 589 q 73 775 41 707 q 177 880 104 844 q 344 916 250 916 q 534 872 459 916 q 639 756 609 829 q 669 553 669 684 l 669 434 m 395 581 l 395 646 q 387 736 395 716 q 357 757 380 757 q 321 740 328 757 q 315 646 315 722 l 315 581 l 395 581 m 626 1078 l 626 960 l 86 960 l 86 1078 l 626 1078 z "},"Ĕ":{"ha":577,"x_min":57,"x_max":552,"o":"m 57 1098 l 533 1098 l 533 878 l 342 878 l 342 670 l 521 670 l 521 461 l 342 461 l 342 220 l 552 220 l 552 0 l 57 0 l 57 1098 m 380 1337 l 496 1337 q 442 1189 492 1245 q 303 1133 392 1133 q 164 1189 214 1133 q 111 1337 115 1246 l 227 1337 q 303 1244 235 1244 q 380 1337 372 1244 z "},"ĕ":{"ha":710,"x_min":41,"x_max":669,"o":"m 669 434 l 315 434 l 315 239 q 323 161 315 178 q 357 143 332 143 q 399 166 389 143 q 410 257 410 190 l 410 376 l 669 376 l 669 309 q 659 181 669 226 q 610 85 648 136 q 512 9 571 35 q 363 -16 452 -16 q 210 9 276 -16 q 106 78 143 34 q 55 174 69 121 q 41 327 41 227 l 41 589 q 73 775 41 707 q 177 880 104 844 q 344 916 250 916 q 534 872 459 916 q 639 756 609 829 q 669 553 669 684 l 669 434 m 395 581 l 395 646 q 387 736 395 716 q 357 757 380 757 q 321 740 328 757 q 315 646 315 722 l 315 581 l 395 581 m 422 1165 l 537 1165 q 483 1017 533 1073 q 345 960 433 960 q 206 1017 255 960 q 153 1165 157 1074 l 268 1165 q 345 1072 276 1072 q 422 1165 414 1072 z "},"Ė":{"ha":577,"x_min":57,"x_max":552,"o":"m 57 1098 l 533 1098 l 533 878 l 342 878 l 342 670 l 521 670 l 521 461 l 342 461 l 342 220 l 552 220 l 552 0 l 57 0 l 57 1098 m 395 1309 l 395 1133 l 218 1133 l 218 1309 l 395 1309 z "},"ė":{"ha":710,"x_min":41,"x_max":669,"o":"m 669 434 l 315 434 l 315 239 q 323 161 315 178 q 357 143 332 143 q 399 166 389 143 q 410 257 410 190 l 410 376 l 669 376 l 669 309 q 659 181 669 226 q 610 85 648 136 q 512 9 571 35 q 363 -16 452 -16 q 210 9 276 -16 q 106 78 143 34 q 55 174 69 121 q 41 327 41 227 l 41 589 q 73 775 41 707 q 177 880 104 844 q 344 916 250 916 q 534 872 459 916 q 639 756 609 829 q 669 553 669 684 l 669 434 m 395 581 l 395 646 q 387 736 395 716 q 357 757 380 757 q 321 740 328 757 q 315 646 315 722 l 315 581 l 395 581 m 429 1137 l 429 960 l 252 960 l 252 1137 l 429 1137 z "},"Ę":{"ha":576,"x_min":57,"x_max":583,"o":"m 387 0 l 57 0 l 57 1099 l 533 1099 l 533 879 l 343 879 l 343 669 l 521 669 l 521 461 l 343 461 l 343 220 l 551 220 l 551 0 l 488 0 q 429 -92 429 -58 q 478 -135 429 -135 q 555 -117 511 -135 l 583 -184 q 465 -215 518 -215 q 367 -186 404 -215 q 330 -110 330 -157 q 387 0 330 -54 z "},"ę":{"ha":710,"x_min":40,"x_max":668,"o":"m 416 0 q 358 -92 358 -56 q 407 -135 358 -135 q 485 -117 441 -135 l 513 -184 q 395 -215 448 -215 q 296 -186 333 -215 q 260 -110 260 -157 q 317 0 260 -54 q 179 31 237 5 q 89 102 121 56 q 48 198 56 149 q 40 326 40 248 l 40 589 q 52 718 40 662 q 99 816 63 773 q 197 880 136 859 q 343 900 259 900 q 546 860 471 900 q 644 745 621 819 q 668 553 668 671 l 668 433 l 314 433 l 314 239 q 325 159 314 174 q 357 143 336 143 q 397 164 385 143 q 410 237 410 184 l 410 376 l 668 376 l 668 310 q 660 190 668 235 q 617 96 651 144 q 534 26 583 48 q 416 0 486 4 m 314 690 l 314 581 l 395 581 l 395 646 q 388 732 395 709 q 355 755 382 755 q 324 743 334 755 q 314 690 314 730 z "},"Ě":{"ha":577,"x_min":33,"x_max":562,"o":"m 57 1098 l 533 1098 l 533 878 l 342 878 l 342 670 l 521 670 l 521 461 l 342 461 l 342 220 l 552 220 l 552 0 l 57 0 l 57 1098 m 303 1235 l 378 1324 l 562 1324 l 399 1133 l 208 1133 l 33 1324 l 223 1324 l 303 1235 z "},"ě":{"ha":710,"x_min":41,"x_max":669,"o":"m 669 434 l 315 434 l 315 239 q 323 161 315 178 q 357 143 332 143 q 399 166 389 143 q 410 257 410 190 l 410 376 l 669 376 l 669 309 q 659 181 669 226 q 610 85 648 136 q 512 9 571 35 q 363 -16 452 -16 q 210 9 276 -16 q 106 78 143 34 q 55 174 69 121 q 41 327 41 227 l 41 589 q 73 775 41 707 q 177 880 104 844 q 344 916 250 916 q 534 872 459 916 q 639 756 609 829 q 669 553 669 684 l 669 434 m 395 581 l 395 646 q 387 736 395 716 q 357 757 380 757 q 321 740 328 757 q 315 646 315 722 l 315 581 l 395 581 m 345 1063 l 420 1152 l 604 1152 l 441 960 l 250 960 l 75 1152 l 265 1152 l 345 1063 z "},"Ĝ":{"ha":766,"x_min":49,"x_max":712,"o":"m 712 692 l 427 692 l 427 792 q 418 910 427 886 q 380 934 410 934 q 344 913 353 934 q 334 809 334 893 l 334 282 q 344 185 334 208 q 382 161 353 161 q 424 188 413 161 q 435 291 435 214 l 435 421 l 378 421 l 378 588 l 712 588 l 712 -1 l 532 -1 l 506 77 q 432 1 477 26 q 328 -24 388 -24 q 193 11 256 -24 q 98 97 130 45 q 57 205 65 149 q 49 375 49 262 l 49 701 q 66 930 49 859 q 163 1060 83 1001 q 371 1120 243 1120 q 579 1068 496 1120 q 687 946 662 1017 q 712 740 712 875 l 712 692 m 385 1221 l 305 1133 l 115 1133 l 290 1324 l 481 1324 l 644 1133 l 460 1133 l 385 1221 z "},"ĝ":{"ha":720,"x_min":41,"x_max":671,"o":"m 671 900 l 671 207 q 665 25 671 66 q 619 -61 659 -16 q 510 -131 580 -107 q 333 -155 439 -155 q 123 -111 202 -155 q 41 64 43 -66 l 307 64 q 350 4 307 4 q 391 22 381 4 q 401 99 401 41 l 401 167 q 327 119 366 135 q 245 102 288 102 q 124 132 172 102 q 58 211 76 162 q 41 349 41 259 l 41 675 q 87 860 41 804 q 227 916 133 916 q 321 895 279 916 q 397 832 363 874 l 416 900 l 671 900 m 397 661 q 390 740 397 723 q 358 757 382 757 q 325 738 334 757 q 315 661 315 718 l 315 359 q 322 280 315 298 q 353 262 330 262 q 389 284 380 262 q 397 382 397 306 l 397 661 m 376 1049 l 296 960 l 106 960 l 280 1152 l 471 1152 l 635 960 l 451 960 l 376 1049 z "},"Ġ":{"ha":766,"x_min":49,"x_max":712,"o":"m 712 692 l 427 692 l 427 792 q 418 910 427 886 q 380 934 410 934 q 344 913 353 934 q 334 809 334 893 l 334 282 q 344 185 334 208 q 382 161 353 161 q 424 188 413 161 q 435 291 435 214 l 435 421 l 378 421 l 378 588 l 712 588 l 712 -1 l 532 -1 l 506 77 q 432 1 477 26 q 328 -24 388 -24 q 193 11 256 -24 q 98 97 130 45 q 57 205 65 149 q 49 375 49 262 l 49 701 q 66 930 49 859 q 163 1060 83 1001 q 371 1120 243 1120 q 579 1068 496 1120 q 687 946 662 1017 q 712 740 712 875 l 712 692 m 471 1309 l 471 1133 l 294 1133 l 294 1309 l 471 1309 z "},"ġ":{"ha":720,"x_min":41,"x_max":671,"o":"m 671 900 l 671 207 q 665 25 671 66 q 619 -61 659 -16 q 510 -131 580 -107 q 333 -155 439 -155 q 123 -111 202 -155 q 41 64 43 -66 l 307 64 q 350 4 307 4 q 391 22 381 4 q 401 99 401 41 l 401 167 q 327 119 366 135 q 245 102 288 102 q 124 132 172 102 q 58 211 76 162 q 41 349 41 259 l 41 675 q 87 860 41 804 q 227 916 133 916 q 321 895 279 916 q 397 832 363 874 l 416 900 l 671 900 m 397 661 q 390 740 397 723 q 358 757 382 757 q 325 738 334 757 q 315 661 315 718 l 315 359 q 322 280 315 298 q 353 262 330 262 q 389 284 380 262 q 397 382 397 306 l 397 661 m 463 1137 l 463 960 l 286 960 l 286 1137 l 463 1137 z "},"Ģ":{"ha":766,"x_min":49,"x_max":712,"o":"m 712 694 l 427 694 l 427 793 q 418 911 427 888 q 380 935 410 935 q 344 915 353 935 q 334 810 334 895 l 334 283 q 344 186 334 210 q 382 163 353 163 q 424 189 413 163 q 435 292 435 216 l 435 422 l 378 422 l 378 589 l 712 589 l 712 0 l 532 0 l 506 79 q 432 2 477 28 q 328 -23 388 -23 q 193 12 256 -23 q 98 98 130 47 q 57 207 65 150 q 49 376 49 263 l 49 703 q 66 931 49 860 q 163 1062 83 1002 q 371 1121 243 1121 q 579 1069 496 1121 q 687 947 662 1018 q 712 741 712 876 l 712 694 m 290 -54 l 475 -54 l 475 -111 q 290 -368 475 -330 l 290 -289 q 336 -228 330 -265 l 290 -228 l 290 -54 z "},"ģ":{"ha":720,"x_min":41,"x_max":671,"o":"m 671 900 l 671 207 q 665 25 671 66 q 619 -61 659 -16 q 510 -131 580 -107 q 333 -155 439 -155 q 123 -111 202 -155 q 41 64 43 -66 l 307 64 q 350 4 307 4 q 391 22 381 4 q 401 99 401 41 l 401 167 q 327 119 366 135 q 245 102 288 102 q 124 132 172 102 q 58 211 76 162 q 41 349 41 259 l 41 675 q 87 860 41 804 q 227 916 133 916 q 321 895 279 916 q 397 832 363 874 l 416 900 l 671 900 m 397 661 q 390 740 397 723 q 358 757 382 757 q 325 738 334 757 q 315 661 315 718 l 315 359 q 322 280 315 298 q 353 262 330 262 q 389 284 380 262 q 397 382 397 306 l 397 661 m 273 960 l 273 1059 q 291 1185 273 1136 q 355 1270 310 1235 q 456 1316 400 1304 l 456 1237 q 411 1175 416 1214 l 456 1175 l 456 960 l 273 960 z "},"Ĥ":{"ha":771,"x_min":57,"x_max":713,"o":"m 713 1098 l 713 0 l 428 0 l 428 461 l 342 461 l 342 0 l 57 0 l 57 1098 l 342 1098 l 342 705 l 428 705 l 428 1098 l 713 1098 m 387 1221 l 307 1133 l 117 1133 l 291 1324 l 482 1324 l 646 1133 l 462 1133 l 387 1221 z "},"ĥ":{"ha":728,"x_min":49,"x_max":682,"o":"m 323 1098 l 323 851 q 399 900 358 884 q 487 916 440 916 q 609 880 559 916 q 671 795 660 843 q 682 621 682 747 l 682 0 l 408 0 l 408 633 q 400 734 408 712 q 366 757 393 757 q 332 734 340 757 q 323 642 323 711 l 323 0 l 49 0 l 49 1098 l 323 1098 m 373 1221 l 293 1133 l 103 1133 l 277 1324 l 469 1324 l 632 1133 l 448 1133 l 373 1221 z "},"Ħ":{"ha":771,"x_min":9,"x_max":760,"o":"m 57 951 l 57 1099 l 343 1099 l 343 951 l 428 951 l 428 1099 l 714 1099 l 714 951 l 760 951 l 760 835 l 714 835 l 714 0 l 428 0 l 428 461 l 343 461 l 343 0 l 57 0 l 57 835 l 9 835 l 9 951 l 57 951 m 343 835 l 343 705 l 428 705 l 428 835 l 343 835 z "},"ħ":{"ha":728,"x_min":0,"x_max":682,"o":"m 49 1057 l 49 1099 l 322 1099 l 322 1057 l 386 1057 l 386 940 l 322 940 l 322 851 q 486 900 374 900 q 612 872 564 900 q 671 791 661 844 q 682 621 682 739 l 682 0 l 408 0 l 408 633 q 401 730 408 705 q 366 755 395 755 q 332 733 341 755 q 322 643 322 711 l 322 0 l 49 0 l 49 940 l 0 940 l 0 1057 l 49 1057 z "},"Ĩ":{"ha":400,"x_min":-85,"x_max":488,"o":"m 342 1098 l 342 0 l 57 0 l 57 1098 l 342 1098 m 488 1261 q 411 1166 456 1193 q 331 1139 366 1139 q 227 1161 283 1139 l 177 1181 q 105 1200 129 1200 q 22 1133 55 1200 l -85 1204 q 83 1335 -10 1335 q 190 1314 132 1335 l 232 1298 q 304 1278 285 1278 q 378 1339 360 1278 l 488 1261 z "},"ĩ":{"ha":380,"x_min":-96,"x_max":477,"o":"m 331 900 l 331 0 l 49 0 l 49 900 l 331 900 m 477 1089 q 400 994 446 1021 q 320 966 355 966 q 216 989 272 966 l 166 1008 q 94 1028 118 1028 q 12 960 44 1028 l -96 1031 q 73 1163 -21 1163 q 179 1141 121 1163 l 221 1126 q 293 1106 274 1106 q 368 1167 349 1106 l 477 1089 z "},"Ī":{"ha":400,"x_min":-69,"x_max":471,"o":"m 342 1098 l 342 0 l 57 0 l 57 1098 l 342 1098 m 471 1250 l 471 1133 l -69 1133 l -69 1250 l 471 1250 z "},"ī":{"ha":380,"x_min":-79,"x_max":460,"o":"m 331 900 l 331 0 l 49 0 l 49 900 l 331 900 m 460 1078 l 460 960 l -79 960 l -79 1078 l 460 1078 z "},"Ĭ":{"ha":400,"x_min":4,"x_max":389,"o":"m 342 1098 l 342 0 l 57 0 l 57 1098 l 342 1098 m 273 1337 l 389 1337 q 335 1189 385 1245 q 196 1133 285 1133 q 57 1189 106 1133 q 4 1337 8 1246 l 119 1337 q 196 1244 127 1244 q 273 1337 265 1244 z "},"ĭ":{"ha":380,"x_min":-1,"x_max":383,"o":"m 331 900 l 331 0 l 49 0 l 49 900 l 331 900 m 268 1165 l 383 1165 q 329 1017 379 1073 q 191 960 279 960 q 52 1017 101 960 q -1 1165 3 1074 l 114 1165 q 191 1072 122 1072 q 268 1165 260 1072 z "},"Į":{"ha":400,"x_min":57,"x_max":358,"o":"m 163 0 l 57 0 l 57 1099 l 343 1099 l 343 0 l 262 0 q 204 -92 204 -58 q 253 -135 204 -135 q 330 -117 287 -135 l 358 -184 q 240 -215 293 -215 q 142 -186 178 -215 q 106 -110 106 -157 q 163 0 106 -54 z "},"į":{"ha":380,"x_min":49,"x_max":345,"o":"m 149 0 l 49 0 l 49 900 l 330 900 l 330 0 l 249 0 q 191 -92 191 -58 q 239 -135 191 -135 q 317 -117 273 -135 l 345 -184 q 227 -215 279 -215 q 128 -186 165 -215 q 92 -110 92 -157 q 149 0 92 -54 z "},"Ĳ":{"ha":869,"x_min":57,"x_max":812,"o":"m 57 0 l 57 1099 l 343 1099 l 343 0 l 57 0 m 526 279 l 526 1099 l 812 1099 l 812 244 q 763 47 812 94 q 561 0 713 0 l 418 0 l 418 192 l 456 191 q 509 210 492 191 q 526 279 526 230 z "},"ĳ":{"ha":768,"x_min":49,"x_max":720,"o":"m 49 957 l 49 1099 l 330 1099 l 330 957 l 49 957 m 437 957 l 437 1099 l 720 1099 l 720 957 l 437 957 m 49 0 l 49 900 l 330 900 l 330 0 l 49 0 m 437 106 l 437 900 l 720 900 l 720 103 q 666 -79 720 -31 q 482 -126 613 -126 l 376 -126 l 376 18 q 424 22 414 18 q 435 41 433 25 q 437 106 437 56 z "},"Ĵ":{"ha":460,"x_min":-11,"x_max":518,"o":"m 406 1098 l 406 364 q 403 152 406 199 q 372 67 399 105 q 297 15 345 29 q 155 0 250 0 l 12 0 l 12 192 q 50 190 38 190 q 98 205 80 190 q 118 241 115 220 q 121 326 121 263 l 121 1098 l 406 1098 m 259 1221 l 179 1133 l -11 1133 l 163 1324 l 355 1324 l 518 1133 l 334 1133 l 259 1221 z "},"ĵ":{"ha":389,"x_min":-75,"x_max":454,"o":"m 269 1018 l 195 1107 l 115 1018 l -75 1018 l 100 1210 l 290 1210 l 454 1018 l 269 1018 m 57 106 l 57 900 l 339 900 l 339 103 q 286 -79 339 -31 q 102 -126 233 -126 l -4 -126 l -4 18 q 43 22 34 18 q 55 41 52 25 q 57 106 57 56 z "},"Ķ":{"ha":745,"x_min":57,"x_max":753,"o":"m 737 1098 l 574 602 l 753 0 l 458 0 l 342 471 l 342 0 l 57 0 l 57 1098 l 342 1098 l 342 671 l 469 1098 l 737 1098 m 311 -54 l 496 -54 l 496 -111 q 311 -368 496 -330 l 311 -289 q 357 -228 351 -265 l 311 -228 l 311 -54 z "},"ķ":{"ha":664,"x_min":49,"x_max":672,"o":"m 639 900 l 528 541 l 672 0 l 408 0 l 323 392 l 323 0 l 49 0 l 49 1098 l 323 1098 l 323 637 l 408 900 l 639 900 m 269 -54 l 454 -54 l 454 -111 q 269 -368 454 -330 l 269 -289 q 315 -228 309 -265 l 269 -228 l 269 -54 z "},"ĸ":{"ha":718,"x_min":49,"x_max":721,"o":"m 322 554 l 469 900 l 707 900 l 538 507 l 721 0 l 454 0 l 322 397 l 322 0 l 49 0 l 49 900 l 322 900 l 322 554 z "},"Ĺ":{"ha":528,"x_min":57,"x_max":516,"o":"m 342 1098 l 342 220 l 516 220 l 516 0 l 57 0 l 57 1098 l 342 1098 m 469 1316 l 246 1133 l 109 1133 l 228 1316 l 469 1316 z "},"ĺ":{"ha":380,"x_min":49,"x_max":425,"o":"m 331 1098 l 331 0 l 49 0 l 49 1098 l 331 1098 m 425 1316 l 201 1133 l 64 1133 l 183 1316 l 425 1316 z "},"Ļ":{"ha":528,"x_min":57,"x_max":516,"o":"m 342 1098 l 342 220 l 516 220 l 516 0 l 57 0 l 57 1098 l 342 1098 m 215 -54 l 399 -54 l 399 -111 q 215 -368 399 -330 l 215 -289 q 260 -228 254 -265 l 215 -228 l 215 -54 z "},"ļ":{"ha":380,"x_min":49,"x_max":331,"o":"m 331 1098 l 331 0 l 49 0 l 49 1098 l 331 1098 m 98 -54 l 282 -54 l 282 -111 q 98 -368 282 -330 l 98 -289 q 143 -228 137 -265 l 98 -228 l 98 -54 z "},"Ľ":{"ha":600,"x_min":57,"x_max":589,"o":"m 342 1098 l 342 220 l 516 220 l 516 0 l 57 0 l 57 1098 l 342 1098 m 404 1099 l 589 1099 l 589 1042 q 404 785 589 823 l 404 864 q 450 925 444 888 l 404 925 l 404 1099 z "},"ľ":{"ha":596,"x_min":49,"x_max":582,"o":"m 331 1098 l 331 0 l 49 0 l 49 1098 l 331 1098 m 397 1099 l 582 1099 l 582 1042 q 397 785 582 823 l 397 864 q 443 925 437 888 l 397 925 l 397 1099 z "},"Ŀ":{"ha":591,"x_min":57,"x_max":566,"o":"m 342 1098 l 342 220 l 516 220 l 516 0 l 57 0 l 57 1098 l 342 1098 m 566 833 l 566 656 l 389 656 l 389 833 l 566 833 z "},"ŀ":{"ha":591,"x_min":49,"x_max":566,"o":"m 331 1098 l 331 0 l 49 0 l 49 1098 l 331 1098 m 566 833 l 566 656 l 389 656 l 389 833 l 566 833 z "},"Ń":{"ha":752,"x_min":57,"x_max":694,"o":"m 694 1098 l 694 0 l 444 0 l 296 499 l 296 0 l 57 0 l 57 1098 l 296 1098 l 456 604 l 456 1098 l 694 1098 m 594 1316 l 371 1133 l 233 1133 l 353 1316 l 594 1316 z "},"ń":{"ha":726,"x_min":49,"x_max":681,"o":"m 328 900 l 323 817 q 396 891 353 867 q 495 916 439 916 q 610 883 566 916 q 668 799 655 850 q 681 631 681 749 l 681 0 l 407 0 l 407 623 q 401 736 407 716 q 367 757 395 757 q 330 733 338 757 q 323 608 323 710 l 323 0 l 49 0 l 49 900 l 328 900 m 561 1144 l 338 960 l 200 960 l 319 1144 l 561 1144 z "},"Ņ":{"ha":752,"x_min":57,"x_max":694,"o":"m 694 1098 l 694 0 l 444 0 l 296 499 l 296 0 l 57 0 l 57 1098 l 296 1098 l 456 604 l 456 1098 l 694 1098 m 283 -54 l 468 -54 l 468 -111 q 283 -368 468 -330 l 283 -289 q 329 -228 323 -265 l 283 -228 l 283 -54 z "},"ņ":{"ha":726,"x_min":49,"x_max":681,"o":"m 328 900 l 323 817 q 396 891 353 867 q 495 916 439 916 q 610 883 566 916 q 668 799 655 850 q 681 631 681 749 l 681 0 l 407 0 l 407 623 q 401 736 407 716 q 367 757 395 757 q 330 733 338 757 q 323 608 323 710 l 323 0 l 49 0 l 49 900 l 328 900 m 271 -54 l 455 -54 l 455 -111 q 271 -368 455 -330 l 271 -289 q 316 -228 310 -265 l 271 -228 l 271 -54 z "},"Ň":{"ha":752,"x_min":57,"x_max":694,"o":"m 694 1098 l 694 0 l 444 0 l 296 499 l 296 0 l 57 0 l 57 1098 l 296 1098 l 456 604 l 456 1098 l 694 1098 m 366 1235 l 441 1324 l 625 1324 l 461 1133 l 270 1133 l 96 1324 l 286 1324 l 366 1235 z "},"ň":{"ha":726,"x_min":49,"x_max":681,"o":"m 328 900 l 323 817 q 396 891 353 867 q 495 916 439 916 q 610 883 566 916 q 668 799 655 850 q 681 631 681 749 l 681 0 l 407 0 l 407 623 q 401 736 407 716 q 367 757 395 757 q 330 733 338 757 q 323 608 323 710 l 323 0 l 49 0 l 49 900 l 328 900 m 359 1063 l 434 1152 l 618 1152 l 454 960 l 263 960 l 89 1152 l 279 1152 l 359 1063 z "},"ŉ":{"ha":909,"x_min":7,"x_max":861,"o":"m 508 896 l 503 813 q 576 887 533 863 q 675 912 619 912 q 791 879 746 912 q 848 795 836 846 q 861 627 861 745 l 861 -4 l 587 -4 l 587 619 q 581 732 587 712 q 547 753 575 753 q 511 729 518 753 q 503 604 503 706 l 503 -4 l 229 -4 l 229 896 l 508 896 m 7 1099 l 191 1099 l 191 1042 q 7 785 191 823 l 7 864 q 52 925 46 888 l 7 925 l 7 1099 z "},"Ŋ":{"ha":768,"x_min":57,"x_max":715,"o":"m 464 0 l 396 0 l 396 144 q 422 162 416 145 q 429 232 429 178 l 429 815 q 422 910 429 884 q 385 936 415 936 q 355 920 367 936 q 343 889 343 904 l 343 0 l 57 0 l 57 1099 l 343 1099 l 343 1042 q 397 1078 357 1061 q 473 1096 437 1096 q 622 1051 576 1096 q 691 944 667 1006 q 715 643 715 882 l 715 456 q 708 233 715 304 q 667 106 701 161 q 580 26 633 52 q 464 0 527 0 z "},"ŋ":{"ha":726,"x_min":49,"x_max":681,"o":"m 453 -171 l 347 -171 l 347 -26 q 398 -21 389 -26 q 407 61 407 -16 l 407 624 q 401 734 407 712 q 367 757 396 757 q 329 729 335 757 q 322 608 322 701 l 322 0 l 49 0 l 49 900 l 328 900 l 322 817 q 494 908 380 908 q 584 896 548 908 q 644 848 619 884 q 675 768 669 813 q 681 631 681 722 l 681 62 q 453 -171 681 -171 z "},"Ō":{"ha":759,"x_min":49,"x_max":709,"o":"m 709 453 q 702 219 709 288 q 653 93 694 150 q 542 5 612 36 q 379 -25 472 -25 q 221 4 291 -25 q 108 90 151 33 q 57 216 65 148 q 49 453 49 283 l 49 641 q 57 875 49 806 q 105 1001 64 944 q 216 1088 146 1058 q 379 1119 286 1119 q 537 1090 467 1119 q 650 1004 608 1061 q 701 878 693 946 q 709 641 709 810 l 709 453 m 424 814 q 415 912 424 890 q 380 933 407 933 q 346 916 358 933 q 334 814 334 899 l 334 301 q 342 183 334 205 q 378 161 350 161 q 416 186 408 161 q 424 309 424 212 l 424 814 m 646 1250 l 646 1133 l 106 1133 l 106 1250 l 646 1250 z "},"ō":{"ha":710,"x_min":41,"x_max":669,"o":"m 669 584 l 669 363 q 656 185 669 242 q 604 80 644 129 q 502 7 564 31 q 357 -16 439 -16 q 203 4 267 -16 q 105 64 140 24 q 56 162 71 104 q 41 334 41 219 l 41 564 q 68 760 41 690 q 165 873 95 831 q 346 916 236 916 q 504 889 438 916 q 606 817 570 861 q 655 726 642 773 q 669 584 669 680 m 395 652 q 387 739 395 721 q 355 757 380 757 q 323 739 331 757 q 315 652 315 721 l 315 245 q 323 162 315 182 q 355 143 331 143 q 387 161 379 143 q 395 237 395 178 l 395 652 m 623 1078 l 623 960 l 83 960 l 83 1078 l 623 1078 z "},"Ŏ":{"ha":759,"x_min":49,"x_max":709,"o":"m 709 453 q 702 219 709 288 q 653 93 694 150 q 542 5 612 36 q 379 -25 472 -25 q 221 4 291 -25 q 108 90 151 33 q 57 216 65 148 q 49 453 49 283 l 49 641 q 57 875 49 806 q 105 1001 64 944 q 216 1088 146 1058 q 379 1119 286 1119 q 537 1090 467 1119 q 650 1004 608 1061 q 701 878 693 946 q 709 641 709 810 l 709 453 m 424 814 q 415 912 424 890 q 380 933 407 933 q 346 916 358 933 q 334 814 334 899 l 334 301 q 342 183 334 205 q 378 161 350 161 q 416 186 408 161 q 424 309 424 212 l 424 814 m 452 1337 l 568 1337 q 514 1189 564 1245 q 375 1133 464 1133 q 236 1189 286 1133 q 183 1337 187 1246 l 298 1337 q 375 1244 307 1244 q 452 1337 444 1244 z "},"ŏ":{"ha":710,"x_min":41,"x_max":669,"o":"m 669 584 l 669 363 q 656 185 669 242 q 604 80 644 129 q 502 7 564 31 q 357 -16 439 -16 q 203 4 267 -16 q 105 64 140 24 q 56 162 71 104 q 41 334 41 219 l 41 564 q 68 760 41 690 q 165 873 95 831 q 346 916 236 916 q 504 889 438 916 q 606 817 570 861 q 655 726 642 773 q 669 584 669 680 m 395 652 q 387 739 395 721 q 355 757 380 757 q 323 739 331 757 q 315 652 315 721 l 315 245 q 323 162 315 182 q 355 143 331 143 q 387 161 379 143 q 395 237 395 178 l 395 652 m 425 1165 l 540 1165 q 486 1017 536 1073 q 347 960 436 960 q 209 1017 258 960 q 155 1165 159 1074 l 271 1165 q 347 1072 279 1072 q 425 1165 416 1072 z "},"Ő":{"ha":759,"x_min":49,"x_max":709,"o":"m 709 453 q 702 219 709 288 q 653 93 694 150 q 542 5 612 36 q 379 -25 472 -25 q 221 4 291 -25 q 108 90 151 33 q 57 216 65 148 q 49 453 49 283 l 49 641 q 57 875 49 806 q 105 1001 64 944 q 216 1088 146 1058 q 379 1119 286 1119 q 537 1090 467 1119 q 650 1004 608 1061 q 701 878 693 946 q 709 641 709 810 l 709 453 m 424 814 q 415 912 424 890 q 380 933 407 933 q 346 916 358 933 q 334 814 334 899 l 334 301 q 342 183 334 205 q 378 161 350 161 q 416 186 408 161 q 424 309 424 212 l 424 814 m 420 1343 l 256 1133 l 155 1133 l 235 1343 l 420 1343 m 684 1343 l 521 1133 l 420 1133 l 500 1343 l 684 1343 z "},"ő":{"ha":710,"x_min":41,"x_max":669,"o":"m 669 584 l 669 363 q 656 185 669 242 q 604 80 644 129 q 502 7 564 31 q 357 -16 439 -16 q 203 4 267 -16 q 105 64 140 24 q 56 162 71 104 q 41 334 41 219 l 41 564 q 68 760 41 690 q 165 873 95 831 q 346 916 236 916 q 504 889 438 916 q 606 817 570 861 q 655 726 642 773 q 669 584 669 680 m 395 652 q 387 739 395 721 q 355 757 380 757 q 323 739 331 757 q 315 652 315 721 l 315 245 q 323 162 315 182 q 355 143 331 143 q 387 161 379 143 q 395 237 395 178 l 395 652 m 392 1171 l 229 960 l 127 960 l 208 1171 l 392 1171 m 656 1171 l 493 960 l 392 960 l 472 1171 l 656 1171 z "},"Ŕ":{"ha":748,"x_min":57,"x_max":694,"o":"m 57 1098 l 259 1098 q 533 1082 461 1098 q 649 1003 604 1067 q 694 798 694 939 q 663 626 694 670 q 537 573 631 582 q 651 517 622 552 q 687 452 680 481 q 694 290 694 422 l 694 0 l 429 0 l 429 365 q 415 474 429 453 q 342 495 401 495 l 342 0 l 57 0 l 57 1098 m 342 910 l 342 666 q 410 679 391 666 q 429 765 429 692 l 429 825 q 411 894 429 878 q 342 910 392 910 m 574 1406 l 351 1222 l 214 1222 l 333 1406 l 574 1406 z "},"ŕ":{"ha":497,"x_min":49,"x_max":485,"o":"m 323 900 l 312 782 q 485 916 372 909 l 485 600 q 374 579 410 600 q 331 523 339 559 q 323 355 323 486 l 323 0 l 49 0 l 49 900 l 323 900 m 464 1202 l 241 1018 l 103 1018 l 222 1202 l 464 1202 z "},"Ŗ":{"ha":748,"x_min":57,"x_max":694,"o":"m 57 1098 l 259 1098 q 533 1082 461 1098 q 649 1003 604 1067 q 694 798 694 939 q 663 626 694 670 q 537 573 631 582 q 651 517 622 552 q 687 452 680 481 q 694 290 694 422 l 694 0 l 429 0 l 429 365 q 415 474 429 453 q 342 495 401 495 l 342 0 l 57 0 l 57 1098 m 342 910 l 342 666 q 410 679 391 666 q 429 765 429 692 l 429 825 q 411 894 429 878 q 342 910 392 910 m 281 -54 l 466 -54 l 466 -111 q 281 -368 466 -330 l 281 -289 q 327 -228 321 -265 l 281 -228 l 281 -54 z "},"ŗ":{"ha":497,"x_min":49,"x_max":485,"o":"m 323 900 l 312 782 q 485 916 372 909 l 485 600 q 374 579 410 600 q 331 523 339 559 q 323 355 323 486 l 323 0 l 49 0 l 49 900 l 323 900 m 94 -54 l 279 -54 l 279 -111 q 94 -368 279 -330 l 94 -289 q 140 -228 134 -265 l 94 -228 l 94 -54 z "},"Ř":{"ha":748,"x_min":57,"x_max":694,"o":"m 57 1098 l 259 1098 q 533 1082 461 1098 q 649 1003 604 1067 q 694 798 694 939 q 663 626 694 670 q 537 573 631 582 q 651 517 622 552 q 687 452 680 481 q 694 290 694 422 l 694 0 l 429 0 l 429 365 q 415 474 429 453 q 342 495 401 495 l 342 0 l 57 0 l 57 1098 m 342 910 l 342 666 q 410 679 391 666 q 429 765 429 692 l 429 825 q 411 894 429 878 q 342 910 392 910 m 356 1235 l 431 1324 l 615 1324 l 452 1133 l 260 1133 l 86 1324 l 276 1324 l 356 1235 z "},"ř":{"ha":497,"x_min":-20,"x_max":509,"o":"m 323 900 l 312 782 q 485 916 372 909 l 485 600 q 374 579 410 600 q 331 523 339 559 q 323 355 323 486 l 323 0 l 49 0 l 49 900 l 323 900 m 250 1063 l 326 1152 l 509 1152 l 346 960 l 155 960 l -20 1152 l 170 1152 l 250 1063 z "},"Ś":{"ha":718,"x_min":33,"x_max":686,"o":"m 662 764 l 397 764 l 397 845 q 387 918 397 902 q 353 933 376 933 q 314 912 327 933 q 300 848 300 891 q 315 766 300 793 q 396 699 330 738 q 636 513 587 585 q 686 279 686 440 q 658 106 686 161 q 552 13 631 50 q 369 -25 473 -25 q 173 18 254 -25 q 67 129 92 62 q 42 319 42 196 l 42 391 l 307 391 l 307 258 q 318 178 307 196 q 358 161 330 161 q 400 183 387 161 q 414 250 414 205 q 388 376 414 347 q 254 476 361 406 q 113 578 148 547 q 56 667 79 610 q 33 810 33 723 q 65 995 33 937 q 170 1086 98 1053 q 343 1119 241 1119 q 533 1083 454 1119 q 636 992 611 1047 q 662 807 662 938 l 662 764 m 577 1316 l 354 1133 l 216 1133 l 336 1316 l 577 1316 z "},"ś":{"ha":654,"x_min":28,"x_max":629,"o":"m 608 612 l 366 612 l 366 661 q 358 740 366 724 q 323 757 351 757 q 288 742 300 757 q 277 696 277 726 q 282 635 277 654 q 317 593 288 616 q 435 526 346 570 q 592 416 555 467 q 629 266 629 364 q 601 100 629 156 q 506 14 572 44 q 345 -16 439 -16 q 166 16 240 -16 q 64 104 92 49 q 36 273 36 160 l 36 316 l 279 316 l 279 259 q 288 165 279 186 q 324 143 297 143 q 365 158 353 143 q 376 219 376 172 q 361 300 376 283 q 202 396 346 316 q 55 519 81 464 q 28 650 28 574 q 57 809 28 758 q 154 888 85 861 q 312 916 222 916 q 464 893 401 916 q 561 833 527 871 q 601 764 594 796 q 608 665 608 732 l 608 612 m 550 1144 l 327 960 l 189 960 l 309 1144 l 550 1144 z "},"Ŝ":{"ha":718,"x_min":33,"x_max":686,"o":"m 662 764 l 397 764 l 397 845 q 387 918 397 902 q 353 933 376 933 q 314 912 327 933 q 300 848 300 891 q 315 766 300 793 q 396 699 330 738 q 636 513 587 585 q 686 279 686 440 q 658 106 686 161 q 552 13 631 50 q 369 -25 473 -25 q 173 18 254 -25 q 67 129 92 62 q 42 319 42 196 l 42 391 l 307 391 l 307 258 q 318 178 307 196 q 358 161 330 161 q 400 183 387 161 q 414 250 414 205 q 388 376 414 347 q 254 476 361 406 q 113 578 148 547 q 56 667 79 610 q 33 810 33 723 q 65 995 33 937 q 170 1086 98 1053 q 343 1119 241 1119 q 533 1083 454 1119 q 636 992 611 1047 q 662 807 662 938 l 662 764 m 344 1221 l 264 1133 l 74 1133 l 248 1324 l 439 1324 l 603 1133 l 419 1133 l 344 1221 z "},"ŝ":{"ha":654,"x_min":28,"x_max":629,"o":"m 608 612 l 366 612 l 366 661 q 358 740 366 724 q 323 757 351 757 q 288 742 300 757 q 277 696 277 726 q 282 635 277 654 q 317 593 288 616 q 435 526 346 570 q 592 416 555 467 q 629 266 629 364 q 601 100 629 156 q 506 14 572 44 q 345 -16 439 -16 q 166 16 240 -16 q 64 104 92 49 q 36 273 36 160 l 36 316 l 279 316 l 279 259 q 288 165 279 186 q 324 143 297 143 q 365 158 353 143 q 376 219 376 172 q 361 300 376 283 q 202 396 346 316 q 55 519 81 464 q 28 650 28 574 q 57 809 28 758 q 154 888 85 861 q 312 916 222 916 q 464 893 401 916 q 561 833 527 871 q 601 764 594 796 q 608 665 608 732 l 608 612 m 315 1049 l 235 960 l 45 960 l 219 1152 l 410 1152 l 574 960 l 390 960 l 315 1049 z "},"Ţ":{"ha":640,"x_min":8,"x_max":632,"o":"m 632 1098 l 632 878 l 463 878 l 463 0 l 177 0 l 177 878 l 8 878 l 8 1098 l 632 1098 m 228 -54 l 412 -54 l 412 -111 q 228 -368 412 -330 l 228 -289 q 273 -228 267 -265 l 228 -228 l 228 -54 z "},"ţ":{"ha":423,"x_min":4,"x_max":423,"o":"m 338 1020 l 338 878 l 412 878 l 412 736 l 338 736 l 338 254 q 347 155 338 165 q 423 145 356 145 l 423 0 l 313 0 q 179 8 219 0 q 109 44 139 16 q 71 108 78 72 q 63 279 63 144 l 63 736 l 4 736 l 4 878 l 63 878 l 63 1020 l 338 1020 m 140 -54 l 324 -54 l 324 -111 q 140 -368 324 -330 l 140 -289 q 185 -228 179 -265 l 140 -228 l 140 -54 z "},"Ť":{"ha":640,"x_min":8,"x_max":632,"o":"m 632 1098 l 632 878 l 463 878 l 463 0 l 177 0 l 177 878 l 8 878 l 8 1098 l 632 1098 m 320 1235 l 395 1324 l 579 1324 l 416 1133 l 224 1133 l 50 1324 l 240 1324 l 320 1235 z "},"ť":{"ha":640,"x_min":4,"x_max":640,"o":"m 338 1020 l 338 878 l 412 878 l 412 736 l 338 736 l 338 254 q 347 155 338 165 q 423 145 356 145 l 423 0 l 313 0 q 179 8 219 0 q 109 44 139 16 q 71 108 78 72 q 63 279 63 144 l 63 736 l 4 736 l 4 878 l 63 878 l 63 1020 l 338 1020 m 456 1098 l 640 1098 l 640 1041 q 456 784 640 823 l 456 863 q 501 924 495 887 l 456 924 l 456 1098 z "},"Ŧ":{"ha":640,"x_min":8,"x_max":632,"o":"m 178 618 l 178 879 l 8 879 l 8 1099 l 632 1099 l 632 879 l 464 879 l 464 618 l 572 618 l 572 501 l 464 501 l 464 0 l 178 0 l 178 501 l 71 501 l 71 618 l 178 618 z "},"ŧ":{"ha":422,"x_min":4,"x_max":424,"o":"m 64 618 l 64 736 l 4 736 l 4 878 l 64 878 l 64 1021 l 338 1021 l 338 878 l 411 878 l 411 736 l 338 736 l 338 618 l 410 618 l 410 501 l 338 501 l 338 254 q 341 172 338 191 q 358 149 345 153 q 424 144 372 144 l 424 0 l 313 0 q 184 7 227 0 q 109 43 141 14 q 70 118 76 73 q 64 279 64 163 l 64 501 l 4 501 l 4 618 l 64 618 z "},"Ũ":{"ha":760,"x_min":53,"x_max":706,"o":"m 706 1109 l 706 375 q 698 200 706 250 q 650 96 690 149 q 544 15 610 43 q 390 -12 479 -12 q 216 20 292 -12 q 104 105 141 53 q 60 215 66 157 q 53 459 53 273 l 53 1109 l 338 1109 l 338 286 q 346 194 338 214 q 378 174 354 174 q 413 196 405 174 q 420 300 420 218 l 420 1109 l 706 1109 m 661 1261 q 585 1166 630 1193 q 505 1139 539 1139 q 401 1161 456 1139 l 351 1181 q 279 1200 302 1200 q 196 1133 229 1200 l 89 1204 q 257 1335 163 1335 q 363 1314 306 1335 l 406 1298 q 477 1278 458 1278 q 552 1339 534 1278 l 661 1261 z "},"ũ":{"ha":726,"x_min":45,"x_max":676,"o":"m 676 907 l 676 7 l 397 7 l 402 82 q 332 14 374 37 q 236 -9 290 -9 q 134 13 174 -9 q 74 71 93 35 q 50 145 54 106 q 45 300 45 184 l 45 907 l 319 907 l 319 295 q 325 170 319 190 q 360 151 332 151 q 396 171 391 151 q 402 302 402 191 l 402 907 l 676 907 m 637 1089 q 561 994 606 1021 q 481 966 515 966 q 377 989 433 966 l 327 1008 q 255 1028 279 1028 q 172 960 205 1028 l 65 1031 q 233 1163 140 1163 q 340 1141 282 1163 l 382 1126 q 454 1106 435 1106 q 528 1167 510 1106 l 637 1089 z "},"Ū":{"ha":760,"x_min":53,"x_max":706,"o":"m 706 1109 l 706 375 q 698 200 706 250 q 650 96 690 149 q 544 15 610 43 q 390 -12 479 -12 q 216 20 292 -12 q 104 105 141 53 q 60 215 66 157 q 53 459 53 273 l 53 1109 l 338 1109 l 338 286 q 346 194 338 214 q 378 174 354 174 q 413 196 405 174 q 420 300 420 218 l 420 1109 l 706 1109 m 648 1250 l 648 1133 l 109 1133 l 109 1250 l 648 1250 z "},"ū":{"ha":726,"x_min":45,"x_max":676,"o":"m 676 900 l 676 0 l 397 0 l 402 75 q 332 6 374 29 q 236 -16 290 -16 q 134 5 174 -16 q 74 63 93 27 q 50 138 54 99 q 45 293 45 177 l 45 900 l 319 900 l 319 288 q 325 163 319 182 q 360 143 332 143 q 396 163 391 143 q 402 294 402 184 l 402 900 l 676 900 m 627 1078 l 627 960 l 87 960 l 87 1078 l 627 1078 z "},"Ŭ":{"ha":760,"x_min":53,"x_max":706,"o":"m 706 1109 l 706 375 q 698 200 706 250 q 650 96 690 149 q 544 15 610 43 q 390 -12 479 -12 q 216 20 292 -12 q 104 105 141 53 q 60 215 66 157 q 53 459 53 273 l 53 1109 l 338 1109 l 338 286 q 346 194 338 214 q 378 174 354 174 q 413 196 405 174 q 420 300 420 218 l 420 1109 l 706 1109 m 454 1337 l 569 1337 q 515 1189 565 1245 q 376 1133 465 1133 q 238 1189 287 1133 q 184 1337 189 1246 l 300 1337 q 376 1244 308 1244 q 454 1337 446 1244 z "},"ŭ":{"ha":726,"x_min":45,"x_max":676,"o":"m 676 900 l 676 0 l 397 0 l 402 75 q 332 6 374 29 q 236 -16 290 -16 q 134 5 174 -16 q 74 63 93 27 q 50 138 54 99 q 45 293 45 177 l 45 900 l 319 900 l 319 288 q 325 163 319 182 q 360 143 332 143 q 396 163 391 143 q 402 294 402 184 l 402 900 l 676 900 m 437 1165 l 553 1165 q 499 1017 549 1073 q 360 960 449 960 q 221 1017 271 960 q 168 1165 172 1074 l 283 1165 q 360 1072 292 1072 q 437 1165 429 1072 z "},"Ů":{"ha":760,"x_min":53,"x_max":706,"o":"m 706 1109 l 706 375 q 698 200 706 250 q 650 96 690 149 q 544 15 610 43 q 390 -12 479 -12 q 216 20 292 -12 q 104 105 141 53 q 60 215 66 157 q 53 459 53 273 l 53 1109 l 338 1109 l 338 286 q 346 194 338 214 q 378 174 354 174 q 413 196 405 174 q 420 300 420 218 l 420 1109 l 706 1109 m 376 1418 q 476 1377 433 1418 q 519 1275 519 1336 q 477 1174 519 1216 q 376 1133 435 1133 q 275 1174 317 1133 q 233 1275 233 1216 q 275 1376 233 1334 q 376 1418 317 1418 m 375 1329 q 336 1312 353 1329 q 319 1272 319 1296 q 336 1233 319 1249 q 375 1217 353 1217 q 415 1233 398 1217 q 431 1272 431 1249 q 415 1312 431 1296 q 375 1329 398 1329 z "},"ů":{"ha":726,"x_min":45,"x_max":676,"o":"m 676 900 l 676 0 l 397 0 l 402 75 q 332 6 374 29 q 236 -16 290 -16 q 134 5 174 -16 q 74 63 93 27 q 50 138 54 99 q 45 293 45 177 l 45 900 l 319 900 l 319 288 q 325 163 319 182 q 360 143 332 143 q 396 163 391 143 q 402 294 402 184 l 402 900 l 676 900 m 359 1246 q 459 1205 416 1246 q 502 1103 502 1164 q 460 1002 502 1044 q 359 960 418 960 q 258 1002 300 960 q 216 1103 216 1044 q 258 1204 216 1162 q 359 1246 300 1246 m 358 1156 q 319 1140 336 1156 q 302 1100 302 1124 q 319 1061 302 1077 q 358 1044 336 1044 q 398 1061 381 1044 q 414 1100 414 1077 q 398 1140 414 1124 q 358 1156 381 1156 z "},"Ű":{"ha":760,"x_min":53,"x_max":706,"o":"m 706 1109 l 706 375 q 698 200 706 250 q 650 96 690 149 q 544 15 610 43 q 390 -12 479 -12 q 216 20 292 -12 q 104 105 141 53 q 60 215 66 157 q 53 459 53 273 l 53 1109 l 338 1109 l 338 286 q 346 194 338 214 q 378 174 354 174 q 413 196 405 174 q 420 300 420 218 l 420 1109 l 706 1109 m 405 1343 l 241 1133 l 140 1133 l 220 1343 l 405 1343 m 669 1343 l 506 1133 l 405 1133 l 485 1343 l 669 1343 z "},"ű":{"ha":726,"x_min":45,"x_max":676,"o":"m 676 900 l 676 0 l 397 0 l 402 75 q 332 6 374 29 q 236 -16 290 -16 q 134 5 174 -16 q 74 63 93 27 q 50 138 54 99 q 45 293 45 177 l 45 900 l 319 900 l 319 288 q 325 163 319 182 q 360 143 332 143 q 396 163 391 143 q 402 294 402 184 l 402 900 l 676 900 m 387 1171 l 223 960 l 122 960 l 202 1171 l 387 1171 m 650 1171 l 488 960 l 387 960 l 467 1171 l 650 1171 z "},"Ų":{"ha":760,"x_min":53,"x_max":707,"o":"m 335 -1 q 185 33 247 5 q 95 107 123 60 q 60 209 66 155 q 53 364 53 264 l 53 1099 l 339 1099 l 339 250 q 349 177 339 191 q 379 163 359 163 q 410 180 399 163 q 421 265 421 197 l 421 1099 l 707 1099 l 707 314 q 693 172 707 227 q 642 76 680 117 q 554 18 604 35 q 432 -1 504 2 q 376 -92 376 -58 q 425 -135 376 -135 q 503 -117 459 -135 l 530 -184 q 412 -215 465 -215 q 314 -186 351 -215 q 278 -110 278 -157 q 335 -1 278 -55 z "},"ų":{"ha":725,"x_min":45,"x_max":739,"o":"m 543 0 l 397 0 l 401 75 q 334 15 371 32 q 218 -1 296 -1 q 134 9 165 -1 q 78 58 103 20 q 49 138 54 96 q 45 293 45 181 l 45 900 l 318 900 l 318 204 q 359 143 318 143 q 393 158 382 143 q 403 220 403 172 l 403 900 l 676 900 l 676 0 l 643 0 q 585 -92 585 -58 q 633 -135 585 -135 q 711 -117 667 -135 l 739 -184 q 621 -215 673 -215 q 523 -186 559 -215 q 486 -110 486 -157 q 543 0 486 -54 z "},"Ŵ":{"ha":1131,"x_min":0,"x_max":1131,"o":"m 1131 1098 l 1004 0 l 648 0 q 562 575 599 253 q 482 0 545 437 l 127 0 l 0 1098 l 277 1098 l 307 715 l 336 345 q 415 1098 352 632 l 712 1098 q 743 736 718 1050 l 774 319 q 854 1098 798 717 l 1131 1098 m 566 1221 l 486 1133 l 296 1133 l 470 1324 l 661 1324 l 825 1133 l 641 1133 l 566 1221 z "},"ŵ":{"ha":930,"x_min":-4,"x_max":934,"o":"m 934 900 l 825 0 l 527 0 q 471 434 503 165 q 440 195 460 316 l 410 0 l 112 0 l -4 900 l 232 900 q 292 385 235 865 q 353 900 296 434 l 580 900 l 635 385 q 698 900 648 610 l 934 900 m 467 1049 l 387 960 l 197 960 l 372 1152 l 563 1152 l 726 960 l 543 960 l 467 1049 z "},"Ŷ":{"ha":657,"x_min":-8,"x_max":665,"o":"m 665 1098 l 457 397 l 457 0 l 193 0 l 193 397 l -8 1098 l 254 1098 q 323 666 316 777 q 403 1098 347 842 l 665 1098 m 330 1221 l 250 1133 l 60 1133 l 234 1324 l 425 1324 l 589 1133 l 405 1133 l 330 1221 z "},"ŷ":{"ha":623,"x_min":-8,"x_max":623,"o":"m 623 900 l 544 249 q 513 38 526 94 q 471 -55 500 -18 q 390 -109 442 -92 q 224 -126 338 -126 l 58 -126 l 58 18 q 140 24 122 18 q 159 53 159 31 q 142 147 159 64 l -8 900 l 241 900 l 330 293 l 374 900 l 623 900 m 307 1049 l 227 960 l 37 960 l 212 1152 l 403 1152 l 566 960 l 382 960 l 307 1049 z "},"Ź":{"ha":551,"x_min":8,"x_max":534,"o":"m 534 1098 l 534 878 l 321 220 l 534 220 l 534 0 l 8 0 l 8 159 l 228 878 l 34 878 l 34 1098 l 534 1098 m 487 1316 l 264 1133 l 126 1133 l 245 1316 l 487 1316 z "},"ź":{"ha":488,"x_min":8,"x_max":475,"o":"m 475 900 l 475 701 l 273 180 l 475 180 l 475 0 l 8 0 l 8 189 l 215 720 l 29 720 l 29 900 l 475 900 m 464 1144 l 241 960 l 103 960 l 222 1144 l 464 1144 z "},"Ż":{"ha":551,"x_min":8,"x_max":534,"o":"m 534 1098 l 534 878 l 321 220 l 534 220 l 534 0 l 8 0 l 8 159 l 228 878 l 34 878 l 34 1098 l 534 1098 m 370 1309 l 370 1133 l 193 1133 l 193 1309 l 370 1309 z "},"ż":{"ha":488,"x_min":8,"x_max":475,"o":"m 475 900 l 475 701 l 273 180 l 475 180 l 475 0 l 8 0 l 8 189 l 215 720 l 29 720 l 29 900 l 475 900 m 334 1137 l 334 960 l 157 960 l 157 1137 l 334 1137 z "},"ſ":{"ha":400,"x_min":49,"x_max":396,"o":"m 379 961 q 322 847 322 961 l 322 0 l 49 0 l 49 733 q 57 915 49 854 q 103 1025 65 976 q 211 1098 140 1074 q 379 1121 281 1121 l 396 1121 l 396 961 l 379 961 z "},"Ǻ":{"ha":705,"x_min":-8,"x_max":713,"o":"m 550 1098 l 713 0 l 421 0 l 407 197 l 304 197 l 288 0 l -8 0 l 137 1098 l 550 1098 m 399 392 q 355 852 377 578 q 301 392 312 538 l 399 392 m 353 1418 q 453 1377 410 1418 q 496 1275 496 1336 q 454 1174 496 1216 q 353 1133 412 1133 q 252 1174 294 1133 q 210 1275 210 1216 q 252 1376 210 1334 q 353 1418 294 1418 m 352 1329 q 313 1312 330 1329 q 296 1272 296 1296 q 313 1233 296 1249 q 352 1217 330 1217 q 392 1233 375 1217 q 408 1272 408 1249 q 392 1312 408 1296 q 352 1329 375 1329 m 577 1622 l 354 1438 l 216 1438 l 336 1622 l 577 1622 z "},"ǻ":{"ha":700,"x_min":37,"x_max":654,"o":"m 294 551 l 37 551 l 37 612 q 61 773 37 716 q 157 873 85 829 q 346 916 230 916 q 555 867 485 916 q 640 746 626 818 q 654 452 654 675 l 654 0 l 388 0 l 388 80 q 323 8 363 32 q 229 -16 283 -16 q 97 24 157 -16 q 37 201 37 64 l 37 275 q 68 412 37 376 q 227 498 100 449 q 371 569 361 551 q 380 644 380 587 q 370 735 380 714 q 335 757 359 757 q 300 739 307 757 q 294 646 294 721 l 294 551 m 380 428 q 304 347 315 380 q 294 254 294 315 q 303 163 294 184 q 339 143 312 143 q 373 159 365 143 q 380 243 380 175 l 380 428 m 343 1246 q 443 1205 400 1246 q 486 1103 486 1164 q 444 1002 486 1044 q 343 960 401 960 q 242 1002 283 960 q 200 1103 200 1044 q 242 1204 200 1162 q 343 1246 284 1246 m 342 1156 q 303 1140 319 1156 q 286 1100 286 1124 q 303 1061 286 1077 q 342 1044 319 1044 q 381 1061 365 1044 q 398 1100 398 1077 q 381 1140 398 1124 q 342 1156 365 1156 m 559 1461 l 336 1277 l 199 1277 l 318 1461 l 559 1461 z "},"Ǽ":{"ha":991,"x_min":-8,"x_max":966,"o":"m 952 1098 l 952 878 l 760 878 l 760 670 l 941 670 l 941 461 l 760 461 l 760 220 l 966 220 l 966 0 l 475 0 l 475 197 l 311 197 l 264 0 l -8 0 l 281 1098 l 952 1098 m 475 892 l 353 392 l 475 392 l 475 892 m 786 1316 l 563 1133 l 425 1133 l 545 1316 l 786 1316 z "},"ǽ":{"ha":1046,"x_min":37,"x_max":1005,"o":"m 1005 434 l 648 434 l 648 252 q 656 163 648 183 q 694 143 665 143 q 735 163 724 143 q 746 248 746 184 l 746 376 l 1005 376 l 1005 285 q 978 135 1005 196 q 881 29 951 74 q 708 -16 810 -16 q 547 9 613 -16 q 441 87 480 35 q 353 9 404 35 q 239 -16 302 -16 q 116 14 164 -16 q 52 92 67 45 q 37 245 37 138 q 51 375 37 340 q 108 437 64 410 q 258 502 151 465 q 334 534 314 521 q 361 566 353 547 q 368 649 368 585 q 360 733 368 709 q 330 757 352 757 q 301 737 308 757 q 295 637 295 718 l 295 551 l 38 551 l 38 618 q 48 736 38 693 q 97 822 59 779 q 192 890 134 865 q 340 916 250 916 q 437 904 391 916 q 527 867 484 892 q 600 904 558 892 q 692 916 641 916 q 870 871 795 916 q 975 757 944 827 q 1005 550 1005 687 l 1005 434 m 731 581 l 731 662 q 720 741 731 725 q 690 757 708 757 q 657 739 667 757 q 648 662 648 720 l 648 581 l 731 581 m 374 422 q 303 354 321 385 q 286 239 286 323 q 296 165 286 186 q 334 143 307 143 q 363 157 354 143 q 373 197 373 170 l 374 277 l 374 422 m 739 1144 l 516 960 l 378 960 l 498 1144 l 739 1144 z "},"Ǿ":{"ha":759,"x_min":-37,"x_max":795,"o":"m 696 908 q 709 642 709 857 l 709 454 q 702 220 709 289 q 653 94 694 151 q 542 7 612 37 q 379 -24 472 -24 q 210 9 280 -24 q 98 106 140 41 l 25 11 l -37 58 l 62 189 q 49 454 49 237 l 49 642 q 57 877 49 808 q 105 1002 64 945 q 216 1090 146 1059 q 379 1120 286 1120 q 548 1088 477 1120 q 661 991 618 1056 l 733 1086 l 795 1039 l 696 908 m 424 669 l 424 815 q 415 913 424 892 q 380 935 407 935 q 343 912 353 935 q 334 815 334 889 l 334 551 l 424 669 m 334 422 l 334 302 q 342 184 334 207 q 378 162 350 162 q 416 188 408 162 q 424 311 424 214 l 424 541 l 334 422 m 589 1316 l 366 1133 l 228 1133 l 347 1316 l 589 1316 z "},"ǿ":{"ha":710,"x_min":41,"x_max":669,"o":"m 618 801 q 657 723 645 765 q 669 584 669 680 l 669 363 q 656 185 669 242 q 604 80 644 129 q 502 7 564 31 q 357 -16 439 -16 q 223 -2 280 -16 q 130 41 166 13 l 109 9 l 56 44 l 86 91 q 52 176 63 129 q 41 334 41 224 l 41 564 q 68 760 41 690 q 165 873 95 831 q 346 916 236 916 q 474 899 417 916 q 573 848 531 882 l 601 890 l 654 856 l 618 801 m 395 566 l 395 652 q 387 739 395 721 q 355 757 380 757 q 323 739 331 757 q 315 652 315 721 l 315 444 l 395 566 m 315 326 l 315 245 q 323 162 315 182 q 355 143 331 143 q 387 161 379 143 q 395 237 395 178 l 395 449 l 315 326 m 572 1144 l 349 960 l 211 960 l 330 1144 l 572 1144 z "},"΄":{"ha":463,"x_min":134,"x_max":355,"o":"m 170 1099 l 355 1099 l 271 916 l 134 916 l 170 1099 z "},"΅":{"ha":463,"x_min":-4,"x_max":468,"o":"m 174 1440 l 359 1440 l 275 1257 l 138 1257 l 174 1440 m -4 1194 l 170 1194 l 170 1018 l -4 1018 l -4 1194 m 290 1194 l 468 1194 l 468 1018 l 290 1018 l 290 1194 z "},"Ά":{"ha":705,"x_min":-111,"x_max":713,"o":"m 550 1098 l 713 0 l 421 0 l 407 197 l 304 197 l 288 0 l -8 0 l 137 1098 l 550 1098 m 399 392 q 355 852 377 578 q 301 392 312 538 l 399 392 m -75 1099 l 111 1099 l 26 916 l -111 916 l -75 1099 z "},"·":{"ha":305,"x_min":49,"x_max":256,"o":"m 256 659 l 256 435 l 49 435 l 49 659 l 256 659 z "},"Έ":{"ha":746,"x_min":-11,"x_max":722,"o":"m 227 1098 l 703 1098 l 703 878 l 512 878 l 512 670 l 690 670 l 690 461 l 512 461 l 512 220 l 722 220 l 722 0 l 227 0 l 227 1098 m 25 1099 l 211 1099 l 126 916 l -11 916 l 25 1099 z "},"Ή":{"ha":940,"x_min":-11,"x_max":883,"o":"m 883 1098 l 883 0 l 597 0 l 597 461 l 512 461 l 512 0 l 227 0 l 227 1098 l 512 1098 l 512 705 l 597 705 l 597 1098 l 883 1098 m 25 1099 l 211 1099 l 126 916 l -11 916 l 25 1099 z "},"Ί":{"ha":570,"x_min":-11,"x_max":512,"o":"m 512 1098 l 512 0 l 227 0 l 227 1098 l 512 1098 m 25 1099 l 211 1099 l 126 916 l -11 916 l 25 1099 z "},"Ό":{"ha":889,"x_min":-11,"x_max":831,"o":"m 831 456 q 824 221 831 290 q 775 96 816 153 q 664 8 734 39 q 501 -22 594 -22 q 343 6 413 -22 q 230 93 273 35 q 179 218 187 151 q 171 456 171 286 l 171 644 q 179 878 171 809 q 228 1004 186 947 q 338 1091 269 1061 q 501 1122 408 1122 q 660 1093 589 1122 q 772 1006 730 1064 q 823 881 815 949 q 831 644 831 813 l 831 456 m 546 817 q 537 915 546 893 q 503 936 529 936 q 468 919 480 936 q 456 817 456 901 l 456 304 q 464 186 456 208 q 500 163 472 163 q 538 189 530 163 q 546 312 546 215 l 546 817 m 25 1099 l 211 1099 l 126 916 l -11 916 l 25 1099 z "},"Ύ":{"ha":889,"x_min":-11,"x_max":896,"o":"m 896 1098 l 688 397 l 688 0 l 423 0 l 423 397 l 222 1098 l 485 1098 q 554 666 547 777 q 633 1098 578 842 l 896 1098 m 25 1099 l 211 1099 l 126 916 l -11 916 l 25 1099 z "},"Ώ":{"ha":909,"x_min":-11,"x_max":868,"o":"m 502 167 l 502 0 l 172 0 l 172 165 l 214 165 q 321 158 245 165 q 225 274 262 197 q 188 453 188 351 l 188 713 q 195 903 188 855 q 240 1005 201 951 q 345 1083 278 1059 q 518 1107 412 1107 q 686 1083 616 1107 q 797 1009 755 1060 q 845 909 838 958 q 853 713 853 859 l 853 453 q 816 274 853 351 q 720 158 779 197 q 821 165 783 165 l 868 165 l 868 0 l 539 0 l 539 167 q 567 307 567 194 l 567 827 q 557 927 567 907 q 523 947 547 947 q 485 928 496 947 q 474 827 474 909 l 474 307 q 502 167 474 194 m 25 1099 l 211 1099 l 126 916 l -11 916 l 25 1099 z "},"ΐ":{"ha":422,"x_min":-49,"x_max":423,"o":"m 49 257 l 49 900 l 322 900 l 322 243 q 339 169 322 195 q 412 142 357 142 l 412 0 l 368 0 q 167 13 228 0 q 77 80 106 26 q 49 257 49 133 m 129 1383 l 315 1383 l 231 1199 l 93 1199 l 129 1383 m -49 1137 l 125 1137 l 125 960 l -49 960 l -49 1137 m 245 1137 l 423 1137 l 423 960 l 245 960 l 245 1137 z "},"Α":{"ha":705,"x_min":-8,"x_max":713,"o":"m 550 1098 l 713 0 l 421 0 l 407 197 l 304 197 l 288 0 l -8 0 l 137 1098 l 550 1098 m 399 392 q 355 852 377 578 q 301 392 312 538 l 399 392 z "},"Β":{"ha":767,"x_min":57,"x_max":722,"o":"m 57 1098 l 342 1098 q 546 1077 477 1098 q 659 992 616 1056 q 701 785 701 928 q 671 651 701 689 q 552 593 641 613 q 686 518 651 570 q 722 359 722 467 l 722 258 q 696 93 722 146 q 615 20 671 39 q 387 0 559 0 l 57 0 l 57 1098 m 342 910 l 342 666 q 371 667 361 667 q 425 687 413 667 q 436 806 436 708 q 427 878 436 857 q 402 904 417 899 q 342 910 387 909 m 342 495 l 342 188 q 419 207 403 190 q 436 290 436 224 l 436 393 q 421 478 436 463 q 342 495 406 493 z "},"Γ":{"ha":528,"x_min":57,"x_max":515,"o":"m 57 0 l 57 1099 l 515 1099 l 515 880 l 343 880 l 343 0 l 57 0 z "},"Δ":{"ha":705,"x_min":-8,"x_max":714,"o":"m 138 1099 l 550 1099 l 714 0 l -8 0 l 138 1099 m 301 196 l 399 196 q 381 513 399 217 q 355 852 363 809 q 325 509 348 808 q 301 196 301 210 z "},"Ε":{"ha":577,"x_min":57,"x_max":552,"o":"m 57 1098 l 533 1098 l 533 878 l 342 878 l 342 670 l 521 670 l 521 461 l 342 461 l 342 220 l 552 220 l 552 0 l 57 0 l 57 1098 z "},"Ζ":{"ha":551,"x_min":8,"x_max":534,"o":"m 534 1098 l 534 878 l 321 220 l 534 220 l 534 0 l 8 0 l 8 159 l 228 878 l 34 878 l 34 1098 l 534 1098 z "},"Η":{"ha":771,"x_min":57,"x_max":713,"o":"m 713 1098 l 713 0 l 428 0 l 428 461 l 342 461 l 342 0 l 57 0 l 57 1098 l 342 1098 l 342 705 l 428 705 l 428 1098 l 713 1098 z "},"Θ":{"ha":758,"x_min":49,"x_max":710,"o":"m 710 450 q 699 201 710 273 q 645 81 688 129 q 535 13 602 33 q 379 -8 469 -8 q 232 10 295 -8 q 126 68 169 28 q 71 155 84 109 q 53 269 57 201 q 49 450 49 337 l 49 654 q 59 902 49 830 q 113 1021 70 975 q 222 1087 156 1067 q 379 1107 288 1107 q 536 1088 471 1107 q 645 1022 602 1069 q 699 903 688 976 q 710 654 710 829 l 710 450 m 424 633 l 424 827 q 417 922 424 896 q 379 947 410 947 q 345 927 355 947 q 335 827 335 907 l 335 633 l 424 633 m 335 473 l 335 245 q 343 180 335 203 q 378 157 351 157 q 413 176 401 157 q 424 265 424 195 l 424 473 l 335 473 z "},"Ι":{"ha":400,"x_min":57,"x_max":343,"o":"m 57 0 l 57 1099 l 343 1099 l 343 0 l 57 0 z "},"Κ":{"ha":745,"x_min":57,"x_max":753,"o":"m 737 1098 l 574 602 l 753 0 l 458 0 l 342 471 l 342 0 l 57 0 l 57 1098 l 342 1098 l 342 671 l 469 1098 l 737 1098 z "},"Λ":{"ha":728,"x_min":-7,"x_max":736,"o":"m 736 0 l 435 0 q 361 768 390 384 q 294 0 334 384 l -7 0 l 138 1099 l 571 1099 l 736 0 z "},"Μ":{"ha":996,"x_min":57,"x_max":938,"o":"m 938 1098 l 938 0 l 688 0 l 688 741 l 589 0 l 412 0 l 307 724 l 307 0 l 57 0 l 57 1098 l 427 1098 q 461 865 443 999 l 500 585 l 566 1098 l 938 1098 z "},"Ν":{"ha":752,"x_min":57,"x_max":694,"o":"m 694 1098 l 694 0 l 444 0 l 296 499 l 296 0 l 57 0 l 57 1098 l 296 1098 l 456 604 l 456 1098 l 694 1098 z "},"Ξ":{"ha":640,"x_min":22,"x_max":618,"o":"m 22 879 l 22 1099 l 618 1099 l 618 879 l 22 879 m 78 452 l 78 671 l 562 671 l 562 452 l 78 452 m 22 0 l 22 220 l 618 220 l 618 0 l 22 0 z "},"Ο":{"ha":759,"x_min":49,"x_max":709,"o":"m 709 455 q 702 221 709 290 q 653 95 694 152 q 542 7 612 38 q 379 -23 472 -23 q 221 6 291 -23 q 108 92 151 35 q 57 218 65 150 q 49 455 49 286 l 49 643 q 57 877 49 808 q 105 1003 64 946 q 216 1090 146 1060 q 379 1121 286 1121 q 537 1092 467 1121 q 650 1006 608 1063 q 701 880 693 948 q 709 643 709 812 l 709 455 m 424 816 q 415 914 424 892 q 380 935 407 935 q 346 918 358 935 q 334 816 334 901 l 334 303 q 342 185 334 208 q 378 163 350 163 q 416 189 408 163 q 424 311 424 214 l 424 816 z "},"Π":{"ha":771,"x_min":57,"x_max":714,"o":"m 428 879 l 343 879 l 343 0 l 57 0 l 57 1099 l 714 1099 l 714 0 l 428 0 l 428 879 z "},"Ρ":{"ha":697,"x_min":57,"x_max":672,"o":"m 343 0 l 57 0 l 57 1099 l 345 1099 q 512 1085 451 1099 q 613 1030 572 1072 q 663 940 654 988 q 672 790 672 892 l 672 696 q 606 486 672 531 q 419 441 541 441 l 343 441 l 343 0 m 433 730 l 433 819 q 416 892 433 875 q 343 909 399 909 l 343 631 l 364 631 q 418 649 403 631 q 433 730 433 668 z "},"Σ":{"ha":547,"x_min":-16,"x_max":521,"o":"m 302 220 l 521 220 l 521 0 l -12 0 l 175 589 l -16 1099 l 517 1099 l 517 879 l 306 879 l 419 587 l 302 220 z "},"Τ":{"ha":640,"x_min":8,"x_max":632,"o":"m 632 1098 l 632 878 l 463 878 l 463 0 l 177 0 l 177 878 l 8 878 l 8 1098 l 632 1098 z "},"Υ":{"ha":657,"x_min":-8,"x_max":665,"o":"m 665 1098 l 457 397 l 457 0 l 193 0 l 193 397 l -8 1098 l 254 1098 q 323 666 316 777 q 403 1098 347 842 l 665 1098 z "},"Φ":{"ha":1107,"x_min":21,"x_max":1086,"o":"m 1084 538 q 1074 382 1084 430 q 1014 264 1060 317 q 743 182 942 182 l 693 182 l 693 0 l 407 0 l 407 182 l 363 182 q 92 264 163 182 q 31 382 45 317 q 21 538 21 430 l 21 557 q 31 712 21 665 q 92 831 45 778 q 363 911 163 911 q 407 913 378 911 l 407 1099 l 693 1099 l 693 913 q 743 911 728 911 q 1014 831 943 911 q 1074 712 1060 778 q 1084 557 1084 665 l 1084 538 m 799 476 l 799 618 q 777 708 799 674 q 722 742 755 742 l 693 742 l 693 353 l 722 353 q 777 387 755 353 q 799 476 799 420 m 407 353 l 407 742 l 383 742 q 329 708 351 742 q 307 618 307 674 l 307 476 q 329 387 307 420 q 383 353 351 353 l 407 353 m 1086 538 z "},"Χ":{"ha":670,"x_min":0,"x_max":686,"o":"m 635 1098 l 536 612 l 686 0 l 422 0 q 335 399 374 164 q 305 179 324 296 l 278 0 l 0 0 l 103 612 l 0 1098 l 276 1098 q 306 947 283 1053 q 335 799 323 866 l 396 1098 l 635 1098 z "},"Ψ":{"ha":1090,"x_min":3,"x_max":1089,"o":"m 403 1099 l 689 1099 l 689 566 q 755 592 730 567 q 779 656 779 616 l 779 940 q 825 1099 779 1059 l 1089 1099 q 1051 922 1051 1048 l 1051 648 q 979 461 1051 526 q 781 396 907 396 l 689 396 l 689 0 l 403 0 l 403 396 l 311 396 q 113 461 185 396 q 40 648 40 526 l 40 922 q 3 1099 40 1048 l 267 1099 q 313 940 313 1059 l 313 656 q 337 592 313 616 q 403 566 361 567 l 403 1099 z "},"Ω":{"ha":779,"x_min":41,"x_max":737,"o":"m 371 167 l 371 0 l 41 0 l 41 165 l 83 165 q 191 158 115 165 q 94 274 131 197 q 57 453 57 351 l 57 713 q 64 903 57 855 q 109 1005 71 951 q 214 1083 147 1059 q 387 1107 281 1107 q 555 1083 486 1107 q 666 1009 625 1060 q 714 909 707 958 q 722 713 722 859 l 722 453 q 685 274 722 351 q 589 158 648 197 q 690 165 652 165 l 737 165 l 737 0 l 408 0 l 408 167 q 436 307 436 194 l 436 827 q 426 927 436 907 q 392 947 416 947 q 354 928 365 947 q 343 827 343 909 l 343 307 q 371 167 343 194 z "},"Ϊ":{"ha":400,"x_min":-37,"x_max":436,"o":"m 342 1098 l 342 0 l 57 0 l 57 1098 l 342 1098 m 140 1309 l 140 1133 l -37 1133 l -37 1309 l 140 1309 m 436 1309 l 436 1133 l 259 1133 l 259 1309 l 436 1309 z "},"Ϋ":{"ha":657,"x_min":-8,"x_max":665,"o":"m 665 1098 l 457 397 l 457 0 l 193 0 l 193 397 l -8 1098 l 254 1098 q 323 666 316 777 q 403 1098 347 842 l 665 1098 m 270 1309 l 270 1133 l 93 1133 l 93 1309 l 270 1309 m 566 1309 l 566 1133 l 389 1133 l 389 1309 l 566 1309 z "},"ά":{"ha":728,"x_min":40,"x_max":747,"o":"m 40 232 l 40 671 q 46 787 40 748 q 79 859 52 826 q 138 900 106 892 q 228 908 171 908 q 415 821 342 908 q 454 900 425 863 l 713 900 q 672 669 672 806 l 672 350 q 747 0 672 125 l 471 0 q 418 89 430 48 q 332 18 386 43 q 225 -8 278 -8 q 110 17 155 -8 q 52 90 64 42 q 40 232 40 138 m 314 711 l 314 227 q 320 157 314 178 q 353 136 327 136 q 392 160 385 136 q 399 250 399 184 l 399 685 q 388 753 399 739 q 355 768 377 768 q 314 711 314 768 m 309 1143 l 495 1143 l 410 960 l 273 960 l 309 1143 z "},"έ":{"ha":717,"x_min":35,"x_max":689,"o":"m 689 216 q 610 43 689 94 q 347 -8 532 -8 q 35 227 35 -8 l 35 282 q 83 404 35 354 q 211 472 132 454 q 91 529 140 480 q 41 643 41 578 l 41 697 q 123 854 41 801 q 357 908 204 908 q 592 857 511 908 q 673 705 673 805 l 673 603 l 431 603 l 431 684 q 416 746 431 729 q 372 764 401 764 q 323 744 338 764 q 309 676 309 724 q 340 585 309 618 q 422 549 371 552 l 422 411 q 340 367 371 406 q 309 258 309 328 q 322 162 309 189 q 364 136 335 136 q 416 160 405 136 q 427 250 427 184 l 427 322 l 689 322 l 689 216 m 309 1143 l 495 1143 l 410 960 l 273 960 l 309 1143 z "},"ή":{"ha":726,"x_min":9,"x_max":681,"o":"m 289 900 q 322 821 318 864 q 494 908 378 908 q 584 896 548 908 q 644 848 619 884 q 675 768 669 813 q 681 631 681 722 l 681 -126 l 407 -126 l 407 628 q 401 739 407 716 q 367 761 396 761 q 329 733 335 761 q 322 612 322 705 l 322 0 l 49 0 l 49 777 q 9 900 49 841 l 289 900 m 309 1143 l 495 1143 l 410 960 l 273 960 l 309 1143 z "},"ί":{"ha":422,"x_min":49,"x_max":412,"o":"m 49 257 l 49 900 l 322 900 l 322 243 q 339 169 322 195 q 412 142 357 142 l 412 0 l 368 0 q 167 13 228 0 q 77 80 106 26 q 49 257 49 133 m 132 1143 l 317 1143 l 233 960 l 96 960 l 132 1143 z "},"ΰ":{"ha":725,"x_min":49,"x_max":681,"o":"m 681 900 l 681 281 q 652 113 681 175 q 559 21 623 50 q 364 -8 494 -8 q 115 62 182 -8 q 49 288 49 133 l 49 900 l 322 900 l 322 199 q 364 138 322 138 q 397 152 387 138 q 407 214 407 167 l 407 900 l 681 900 m 309 1383 l 495 1383 l 411 1199 l 273 1199 l 309 1383 m 132 1137 l 305 1137 l 305 960 l 132 960 l 132 1137 m 426 1137 l 604 1137 l 604 960 l 426 960 l 426 1137 z "},"α":{"ha":728,"x_min":40,"x_max":747,"o":"m 40 232 l 40 671 q 46 787 40 748 q 79 859 52 826 q 138 900 106 892 q 228 908 171 908 q 415 821 342 908 q 454 900 425 863 l 713 900 q 672 669 672 806 l 672 350 q 747 0 672 125 l 471 0 q 418 89 430 48 q 332 18 386 43 q 225 -8 278 -8 q 110 17 155 -8 q 52 90 64 42 q 40 232 40 138 m 314 711 l 314 227 q 320 157 314 178 q 353 136 327 136 q 392 160 385 136 q 399 250 399 184 l 399 685 q 388 753 399 739 q 355 768 377 768 q 314 711 314 768 z "},"β":{"ha":730,"x_min":49,"x_max":690,"o":"m 322 72 l 322 -126 l 49 -126 l 49 838 q 131 1030 49 961 q 359 1099 212 1099 q 592 1041 510 1099 q 675 875 675 984 l 675 765 q 626 651 675 701 q 505 593 576 601 q 640 534 589 577 q 690 427 690 490 l 690 231 q 638 62 690 127 q 494 -4 587 -4 q 322 72 385 -4 m 322 186 q 338 160 322 177 q 370 143 355 143 q 398 157 389 143 q 408 211 408 170 l 408 443 q 400 508 408 483 q 349 541 391 534 l 349 660 q 399 691 389 662 q 408 762 408 721 l 408 886 q 396 941 408 927 q 361 954 384 954 q 322 879 322 954 l 322 186 z "},"γ":{"ha":694,"x_min":-8,"x_max":701,"o":"m 701 900 l 492 138 l 492 -126 l 218 -126 l 218 142 l 65 650 q 30 739 45 720 q -8 757 14 757 l -8 905 q 28 908 12 908 q 165 890 119 908 q 238 825 212 871 q 292 675 264 779 l 349 463 l 457 900 l 701 900 z "},"δ":{"ha":708,"x_min":40,"x_max":668,"o":"m 244 778 l 61 954 l 61 1099 l 619 1099 l 619 957 l 375 957 q 615 715 562 812 q 668 478 668 619 l 668 357 q 655 174 668 234 q 599 70 643 115 q 493 9 555 26 q 312 -8 431 -8 q 214 -1 252 -8 q 135 33 175 5 q 74 101 96 60 q 46 193 53 142 q 40 326 40 244 l 40 453 q 46 568 40 524 q 76 656 52 612 q 144 731 101 700 q 244 778 188 762 m 395 541 q 385 629 395 613 q 354 646 376 646 q 324 630 334 646 q 314 541 314 614 l 314 214 q 354 136 314 136 q 383 150 372 136 q 395 184 395 163 l 395 541 z "},"ε":{"ha":717,"x_min":35,"x_max":689,"o":"m 689 216 q 610 43 689 94 q 347 -8 532 -8 q 35 227 35 -8 l 35 282 q 83 404 35 354 q 211 472 132 454 q 91 529 140 480 q 41 643 41 578 l 41 697 q 123 854 41 801 q 357 908 204 908 q 592 857 511 908 q 673 705 673 805 l 673 603 l 431 603 l 431 684 q 416 746 431 729 q 372 764 401 764 q 323 744 338 764 q 309 676 309 724 q 340 585 309 618 q 422 549 371 552 l 422 411 q 340 367 371 406 q 309 258 309 328 q 322 162 309 189 q 364 136 335 136 q 416 160 405 136 q 427 250 427 184 l 427 322 l 689 322 l 689 216 z "},"ζ":{"ha":533,"x_min":36,"x_max":525,"o":"m 36 578 q 86 750 36 667 q 285 957 137 833 l 41 957 l 41 1099 l 518 1099 l 518 961 q 353 778 397 857 q 310 595 310 699 l 310 425 q 316 378 310 395 q 332 353 321 360 q 380 336 342 346 q 493 260 461 315 q 525 115 525 205 q 478 -66 525 -7 q 314 -126 431 -126 l 180 -126 l 180 28 l 288 28 q 344 44 332 28 q 357 93 357 60 q 342 143 357 125 q 292 168 328 161 l 151 195 q 83 224 108 203 q 47 288 58 246 q 36 414 36 329 l 36 578 z "},"η":{"ha":726,"x_min":9,"x_max":681,"o":"m 289 900 q 322 821 318 864 q 494 908 378 908 q 584 896 548 908 q 644 848 619 884 q 675 768 669 813 q 681 631 681 722 l 681 -126 l 407 -126 l 407 628 q 401 739 407 716 q 367 761 396 761 q 329 733 335 761 q 322 612 322 705 l 322 0 l 49 0 l 49 777 q 9 900 49 841 l 289 900 z "},"θ":{"ha":710,"x_min":52,"x_max":679,"o":"m 52 326 l 52 765 q 61 903 52 845 q 109 1010 71 961 q 210 1083 147 1059 q 357 1107 272 1107 q 514 1083 447 1107 q 622 1011 581 1059 q 670 917 662 964 q 679 785 679 869 l 679 357 q 666 174 679 234 q 610 70 654 115 q 504 9 567 26 q 323 -8 441 -8 q 225 -1 264 -8 q 146 33 186 5 q 85 101 107 60 q 58 193 64 142 q 52 326 52 244 m 406 625 l 406 852 q 399 942 406 918 q 366 965 393 965 q 331 941 338 965 q 325 852 325 917 l 325 625 l 406 625 m 325 476 l 325 214 q 366 129 325 129 q 394 146 382 129 q 406 184 406 163 l 406 476 l 325 476 z "},"ι":{"ha":422,"x_min":49,"x_max":412,"o":"m 49 257 l 49 900 l 322 900 l 322 243 q 339 169 322 195 q 412 142 357 142 l 412 0 l 368 0 q 167 13 228 0 q 77 80 106 26 q 49 257 49 133 z "},"κ":{"ha":725,"x_min":49,"x_max":730,"o":"m 730 0 l 436 0 l 322 359 l 322 0 l 49 0 l 49 900 l 322 900 l 322 561 q 423 777 404 738 q 474 850 443 817 q 542 893 505 883 q 631 904 578 904 q 717 899 669 904 l 717 757 q 660 741 680 757 q 627 696 640 726 l 538 504 l 730 0 z "},"λ":{"ha":675,"x_min":-1,"x_max":675,"o":"m -1 0 l 149 827 q 158 914 158 880 q 102 957 158 957 l 65 957 l 65 1099 l 232 1099 q 431 1068 370 1099 q 512 967 491 1038 q 551 725 534 896 l 606 210 q 618 156 610 165 q 639 146 627 146 q 675 147 649 146 l 675 1 q 518 -8 595 -8 q 375 147 386 -8 l 338 681 l 248 0 l -1 0 z "},"μ":{"ha":732,"x_min":49,"x_max":681,"o":"m 49 900 l 322 900 l 322 204 q 364 143 322 143 q 397 158 387 143 q 407 220 407 172 l 407 900 l 681 900 l 681 0 l 401 0 l 406 75 q 322 9 368 24 l 322 -115 l 49 -115 l 49 900 z "},"ν":{"ha":607,"x_min":-8,"x_max":615,"o":"m 615 900 l 487 0 l 130 0 l -8 900 l 237 900 l 313 243 q 343 596 322 315 q 370 900 355 753 l 615 900 z "},"ξ":{"ha":530,"x_min":33,"x_max":522,"o":"m 168 578 q 41 745 41 635 q 58 817 41 784 q 106 877 74 850 q 172 924 138 905 q 225 957 205 944 l 39 957 l 39 1099 l 521 1099 l 521 961 q 357 863 418 917 q 296 760 296 810 q 334 680 296 707 q 428 653 373 653 l 428 518 q 307 412 307 496 q 313 374 307 389 q 330 352 319 359 q 378 336 340 346 q 490 260 458 315 q 522 115 522 205 q 475 -66 522 -7 q 311 -126 429 -126 l 178 -126 l 178 28 l 285 28 q 340 42 327 28 q 354 94 354 57 q 339 145 354 128 q 290 168 323 161 l 144 196 q 33 386 33 216 q 65 508 33 463 q 168 578 96 553 z "},"ο":{"ha":710,"x_min":41,"x_max":669,"o":"m 669 584 l 669 363 q 656 185 669 242 q 604 80 644 129 q 502 7 564 31 q 357 -16 439 -16 q 203 4 267 -16 q 105 64 140 24 q 56 162 71 104 q 41 334 41 219 l 41 564 q 68 760 41 690 q 165 873 95 831 q 346 916 236 916 q 504 889 438 916 q 606 817 570 861 q 655 726 642 773 q 669 584 669 680 m 395 652 q 387 739 395 721 q 355 757 380 757 q 323 739 331 757 q 315 652 315 721 l 315 245 q 323 162 315 182 q 355 143 331 143 q 387 161 379 143 q 395 237 395 178 l 395 652 z "},"π":{"ha":755,"x_min":4,"x_max":751,"o":"m 751 900 l 751 745 l 694 745 l 694 0 l 421 0 l 421 745 l 336 745 l 336 0 l 62 0 l 62 745 l 4 745 l 4 900 l 751 900 z "},"ρ":{"ha":718,"x_min":49,"x_max":676,"o":"m 322 5 l 322 -129 l 49 -129 l 49 567 q 58 704 49 646 q 106 811 68 762 q 207 884 144 860 q 354 908 269 908 q 511 884 444 908 q 619 813 578 860 q 668 718 659 766 q 676 586 676 671 l 676 311 q 630 74 676 149 q 464 0 585 0 q 322 5 399 0 m 322 654 l 322 146 q 363 144 345 144 q 391 158 380 144 q 403 193 403 172 l 403 654 q 397 738 403 717 q 363 760 391 760 q 328 738 334 760 q 322 654 322 715 z "},"ς":{"ha":538,"x_min":36,"x_max":525,"o":"m 310 425 q 316 378 310 395 q 332 353 321 360 q 380 336 342 346 q 493 260 461 315 q 525 115 525 205 q 478 -66 525 -7 q 314 -126 431 -126 l 180 -126 l 180 28 l 288 28 q 344 41 331 28 q 357 97 357 54 q 344 145 357 131 q 292 168 332 160 l 144 198 q 82 228 107 205 q 47 293 58 251 q 36 414 36 336 l 36 600 q 102 827 36 747 q 285 908 168 908 q 493 899 353 908 l 493 760 q 400 764 436 764 q 332 731 354 764 q 310 619 310 699 l 310 425 z "},"σ":{"ha":722,"x_min":40,"x_max":728,"o":"m 728 900 l 728 746 l 648 746 q 668 568 668 706 l 668 357 q 655 174 668 234 q 599 70 643 115 q 493 9 555 26 q 312 -8 431 -8 q 214 -1 252 -8 q 135 33 175 5 q 74 101 96 60 q 46 193 53 142 q 40 326 40 244 l 40 558 q 50 697 40 640 q 100 803 60 754 q 201 876 139 852 q 346 900 264 900 l 728 900 m 395 184 l 395 636 q 389 721 395 699 q 354 742 382 742 q 320 720 326 742 q 314 636 314 698 l 314 214 q 354 136 314 136 q 383 150 372 136 q 395 184 395 163 z "},"τ":{"ha":510,"x_min":4,"x_max":505,"o":"m 505 900 l 505 745 l 392 745 l 392 243 q 409 169 392 195 q 482 142 427 142 l 482 0 l 437 0 q 236 13 298 0 q 146 80 175 26 q 118 257 118 133 l 118 745 l 4 745 l 4 900 l 505 900 z "},"υ":{"ha":725,"x_min":49,"x_max":681,"o":"m 681 900 l 681 281 q 652 113 681 175 q 559 21 623 50 q 364 -8 494 -8 q 115 62 182 -8 q 49 288 49 133 l 49 900 l 322 900 l 322 199 q 364 138 322 138 q 397 152 387 138 q 407 214 407 167 l 407 900 l 681 900 z "},"φ":{"ha":1067,"x_min":41,"x_max":1026,"o":"m 41 635 q 132 837 41 768 q 383 905 222 905 l 383 761 q 336 732 357 761 q 315 657 315 703 l 315 205 q 371 144 315 144 l 399 144 l 399 567 q 408 704 399 646 q 456 811 418 762 q 557 884 494 860 q 704 908 619 908 q 861 884 794 908 q 969 813 928 860 q 1018 718 1009 766 q 1026 586 1026 671 l 1026 311 q 1004 159 1026 233 q 905 42 981 85 q 722 0 828 0 l 672 0 l 672 -129 l 399 -129 l 399 0 l 347 0 q 165 41 241 0 q 65 158 90 83 q 41 306 41 233 l 41 635 m 753 205 l 753 654 q 743 743 753 726 q 713 760 732 760 q 682 741 692 760 q 672 654 672 722 l 672 144 l 699 144 q 738 162 724 144 q 753 205 753 180 z "},"χ":{"ha":690,"x_min":14,"x_max":681,"o":"m 100 675 q 77 741 88 723 q 36 758 66 758 q 14 757 28 758 l 14 896 q 154 905 77 905 q 255 869 222 905 q 300 760 288 832 l 339 543 l 415 900 l 659 900 l 522 400 l 576 186 q 608 62 604 73 q 620 38 612 50 q 638 20 629 25 q 681 12 648 14 l 681 -123 q 524 -134 601 -134 q 432 -96 466 -134 q 385 17 399 -59 l 334 281 l 248 -129 l 14 -129 l 164 414 l 100 675 z "},"ψ":{"ha":1028,"x_min":-1,"x_max":1029,"o":"m 325 171 q 110 246 184 171 q 36 482 36 321 l 36 722 q -1 900 36 848 l 249 900 q 294 741 294 859 l 294 396 q 314 339 294 362 q 363 315 334 315 l 378 315 l 378 1099 l 650 1099 l 650 315 l 665 315 q 713 339 694 315 q 733 396 733 363 l 733 741 q 779 900 733 859 l 1029 900 q 991 722 991 848 l 991 482 q 970 332 991 406 q 878 215 948 258 q 703 171 808 171 l 650 171 l 650 -129 l 378 -129 l 378 171 l 325 171 z "},"ω":{"ha":1088,"x_min":49,"x_max":1039,"o":"m 765 647 q 675 751 765 743 l 644 754 l 644 901 q 697 904 678 904 q 928 862 849 904 q 1039 652 1039 802 l 1039 307 q 1017 126 1039 180 q 906 16 983 47 q 742 -8 846 -8 q 618 26 675 -8 q 543 114 562 60 q 470 27 529 61 q 339 -7 410 -7 q 68 138 129 -8 q 49 306 49 184 l 49 650 q 159 860 49 800 q 390 903 239 903 q 443 900 410 903 l 443 753 l 412 750 q 322 646 322 742 l 322 204 q 364 138 322 138 q 407 183 407 138 l 407 637 l 681 637 l 681 182 q 695 151 681 163 q 728 138 709 138 q 765 205 765 138 l 765 646 l 765 647 z "},"ϊ":{"ha":422,"x_min":-26,"x_max":447,"o":"m 49 257 l 49 900 l 322 900 l 322 243 q 339 169 322 195 q 412 142 357 142 l 412 0 l 368 0 q 167 13 228 0 q 77 80 106 26 q 49 257 49 133 m 151 1137 l 151 960 l -26 960 l -26 1137 l 151 1137 m 447 1137 l 447 960 l 270 960 l 270 1137 l 447 1137 z "},"ϋ":{"ha":725,"x_min":49,"x_max":681,"o":"m 681 900 l 681 281 q 652 113 681 175 q 559 21 623 50 q 364 -8 494 -8 q 115 62 182 -8 q 49 288 49 133 l 49 900 l 322 900 l 322 199 q 364 138 322 138 q 397 152 387 138 q 407 214 407 167 l 407 900 l 681 900 m 302 1137 l 302 960 l 125 960 l 125 1137 l 302 1137 m 598 1137 l 598 960 l 421 960 l 421 1137 l 598 1137 z "},"ό":{"ha":710,"x_min":41,"x_max":669,"o":"m 669 584 l 669 363 q 656 185 669 242 q 604 80 644 129 q 502 7 564 31 q 357 -16 439 -16 q 203 4 267 -16 q 105 64 140 24 q 56 162 71 104 q 41 334 41 219 l 41 564 q 68 760 41 690 q 165 873 95 831 q 346 916 236 916 q 504 889 438 916 q 606 817 570 861 q 655 726 642 773 q 669 584 669 680 m 395 652 q 387 739 395 721 q 355 757 380 757 q 323 739 331 757 q 315 652 315 721 l 315 245 q 323 162 315 182 q 355 143 331 143 q 387 161 379 143 q 395 237 395 178 l 395 652 m 297 1143 l 483 1143 l 398 960 l 261 960 l 297 1143 z "},"ύ":{"ha":725,"x_min":49,"x_max":681,"o":"m 681 900 l 681 281 q 652 113 681 175 q 559 21 623 50 q 364 -8 494 -8 q 115 62 182 -8 q 49 288 49 133 l 49 900 l 322 900 l 322 199 q 364 138 322 138 q 397 152 387 138 q 407 214 407 167 l 407 900 l 681 900 m 309 1143 l 495 1143 l 410 960 l 273 960 l 309 1143 z "},"ώ":{"ha":1088,"x_min":49,"x_max":1039,"o":"m 765 647 q 675 751 765 743 l 644 754 l 644 901 q 697 904 678 904 q 928 862 849 904 q 1039 652 1039 802 l 1039 307 q 1017 126 1039 180 q 906 16 983 47 q 742 -8 846 -8 q 618 26 675 -8 q 543 114 562 60 q 470 27 529 61 q 339 -7 410 -7 q 68 138 129 -8 q 49 306 49 184 l 49 650 q 159 860 49 800 q 390 903 239 903 q 443 900 410 903 l 443 753 l 412 750 q 322 646 322 742 l 322 204 q 364 138 322 138 q 407 183 407 138 l 407 637 l 681 637 l 681 182 q 695 151 681 163 q 728 138 709 138 q 765 205 765 138 l 765 646 l 765 647 m 489 1143 l 675 1143 l 590 960 l 453 960 l 489 1143 z "},"Ё":{"ha":577,"x_min":57,"x_max":552,"o":"m 57 1098 l 533 1098 l 533 878 l 342 878 l 342 670 l 521 670 l 521 461 l 342 461 l 342 220 l 552 220 l 552 0 l 57 0 l 57 1098 m 251 1309 l 251 1133 l 74 1133 l 74 1309 l 251 1309 m 547 1309 l 547 1133 l 370 1133 l 370 1309 l 547 1309 z "},"Ђ":{"ha":918,"x_min":7,"x_max":861,"o":"m 861 244 q 811 47 861 94 q 610 0 761 0 l 514 0 l 514 189 q 563 211 550 189 q 575 275 575 232 l 575 473 q 564 586 575 564 q 526 607 553 607 q 463 497 463 607 l 463 0 l 176 0 l 176 907 l 7 907 l 7 1099 l 631 1099 l 631 907 l 463 907 l 463 671 q 549 736 491 713 q 675 758 606 758 q 775 732 729 758 q 841 660 821 707 q 861 524 861 612 l 861 244 z "},"Ѓ":{"ha":572,"x_min":57,"x_max":553,"o":"m 553 879 l 343 879 l 343 0 l 57 0 l 57 1099 l 553 1099 l 553 879 m 534 1316 l 311 1133 l 174 1133 l 293 1316 l 534 1316 z "},"Є":{"ha":770,"x_min":57,"x_max":715,"o":"m 715 310 q 633 68 715 144 q 371 -8 550 -8 q 133 65 210 -8 q 57 298 57 138 l 57 836 q 378 1107 57 1107 q 642 1045 568 1107 q 715 840 715 983 l 715 747 l 441 747 l 441 873 q 392 939 441 939 q 355 921 368 939 q 343 844 343 903 l 343 654 l 507 654 l 507 494 l 343 494 l 343 313 q 351 192 343 222 q 395 161 359 161 q 441 228 441 161 l 441 396 l 715 396 l 715 310 z "},"Ѕ":{"ha":718,"x_min":33,"x_max":686,"o":"m 662 766 l 397 766 l 397 847 q 387 920 397 904 q 353 935 376 935 q 314 914 327 935 q 300 850 300 893 q 315 768 300 795 q 396 701 330 740 q 636 515 587 587 q 686 281 686 442 q 658 108 686 163 q 552 15 631 52 q 369 -23 473 -23 q 173 20 254 -23 q 67 131 92 64 q 42 321 42 198 l 42 393 l 307 393 l 307 260 q 318 180 307 198 q 358 163 330 163 q 400 185 387 163 q 414 252 414 208 q 388 378 414 349 q 254 478 361 408 q 113 581 148 549 q 56 669 79 612 q 33 812 33 725 q 65 997 33 939 q 170 1088 98 1055 q 343 1121 241 1121 q 533 1085 454 1121 q 636 995 611 1049 q 662 809 662 940 l 662 766 z "},"І":{"ha":400,"x_min":57,"x_max":342,"o":"m 342 1098 l 342 0 l 57 0 l 57 1098 l 342 1098 z "},"Ї":{"ha":400,"x_min":-39,"x_max":435,"o":"m 342 1098 l 342 0 l 57 0 l 57 1098 l 342 1098 m 138 1309 l 138 1133 l -39 1133 l -39 1309 l 138 1309 m 435 1309 l 435 1133 l 258 1133 l 258 1309 l 435 1309 z "},"Ј":{"ha":460,"x_min":12,"x_max":406,"o":"m 406 1098 l 406 364 q 403 152 406 199 q 372 67 399 105 q 297 15 345 29 q 155 0 250 0 l 12 0 l 12 192 q 50 190 38 190 q 98 205 80 190 q 118 241 115 220 q 121 326 121 263 l 121 1098 l 406 1098 z "},"Љ":{"ha":1166,"x_min":7,"x_max":1133,"o":"m 1133 257 q 1101 81 1133 134 q 1005 14 1069 27 q 799 0 940 0 l 468 0 l 468 879 l 385 879 l 385 257 q 353 81 385 134 q 257 14 321 27 q 52 0 193 0 l 7 0 l 7 189 q 79 202 59 189 q 98 290 98 215 l 98 1099 l 754 1099 l 754 722 l 799 722 q 998 707 930 722 q 1100 638 1066 691 q 1133 471 1133 585 l 1133 257 m 847 290 l 847 449 q 833 533 847 518 q 754 550 819 548 l 754 189 q 828 203 808 189 q 847 290 847 217 z "},"Њ":{"ha":1128,"x_min":57,"x_max":1092,"o":"m 1092 257 q 1060 81 1092 134 q 963 14 1028 27 q 757 0 899 0 l 427 0 l 427 461 l 343 461 l 343 0 l 57 0 l 57 1099 l 343 1099 l 343 705 l 427 705 l 427 1099 l 713 1099 l 713 722 l 757 722 q 957 707 889 722 q 1058 638 1024 691 q 1092 471 1092 585 l 1092 257 m 806 290 l 806 449 q 792 533 806 518 q 713 550 778 548 l 713 189 q 786 203 767 189 q 806 290 806 217 z "},"Ћ":{"ha":918,"x_min":7,"x_max":861,"o":"m 463 667 q 550 734 492 711 q 675 758 609 758 q 797 727 754 758 q 850 644 840 696 q 861 481 861 591 l 861 0 l 575 0 l 575 473 q 564 586 575 564 q 526 607 553 607 q 463 497 463 607 l 463 0 l 176 0 l 176 907 l 7 907 l 7 1099 l 631 1099 l 631 907 l 463 907 l 463 667 z "},"Ќ":{"ha":745,"x_min":57,"x_max":743,"o":"m 57 1099 l 343 1099 l 345 635 q 428 724 425 637 l 433 939 q 479 1099 436 1057 l 743 1099 q 705 933 705 1059 l 707 745 q 514 550 708 574 q 707 353 708 526 l 705 178 q 743 0 705 53 l 479 0 q 433 160 433 41 l 433 374 q 409 440 433 415 q 345 465 384 465 l 343 0 l 57 0 l 57 1099 m 340 1213 l 526 1213 l 441 1030 l 304 1030 l 340 1213 z "},"Ў":{"ha":623,"x_min":-8,"x_max":623,"o":"m 623 1099 l 545 371 q 505 129 526 199 q 424 30 484 60 q 225 0 363 0 l 58 0 l 58 142 l 75 142 q 145 151 132 142 q 158 179 158 160 q 142 272 158 180 l -8 1099 l 240 1099 l 330 415 l 374 1099 l 623 1099 m 394 1337 l 509 1337 q 455 1189 505 1245 q 317 1133 406 1133 q 178 1189 227 1133 q 125 1337 129 1246 l 240 1337 q 317 1244 248 1244 q 394 1337 386 1244 z "},"Џ":{"ha":771,"x_min":57,"x_max":714,"o":"m 714 0 l 486 0 l 486 -189 l 289 -189 l 289 0 l 57 0 l 57 1099 l 343 1099 l 343 220 l 428 220 l 428 1099 l 714 1099 l 714 0 z "},"А":{"ha":705,"x_min":-8,"x_max":713,"o":"m 550 1098 l 713 0 l 421 0 l 407 197 l 304 197 l 288 0 l -8 0 l 137 1098 l 550 1098 m 399 392 q 355 852 377 578 q 301 392 312 538 l 399 392 z "},"Б":{"ha":766,"x_min":57,"x_max":722,"o":"m 722 257 q 690 81 722 134 q 594 14 659 27 q 387 0 529 0 l 57 0 l 57 1099 l 616 1099 l 616 908 l 343 908 l 343 722 l 387 722 q 587 707 519 722 q 689 638 655 691 q 722 471 722 585 l 722 257 m 436 290 l 436 449 q 422 533 436 518 q 343 550 408 548 l 343 189 q 417 203 397 189 q 436 290 436 217 z "},"В":{"ha":767,"x_min":57,"x_max":722,"o":"m 57 1098 l 342 1098 q 546 1077 477 1098 q 659 992 616 1056 q 701 785 701 928 q 671 651 701 689 q 552 593 641 613 q 686 518 651 570 q 722 359 722 467 l 722 258 q 696 93 722 146 q 615 20 671 39 q 387 0 559 0 l 57 0 l 57 1098 m 342 910 l 342 666 q 371 667 361 667 q 425 687 413 667 q 436 806 436 708 q 427 878 436 857 q 402 904 417 899 q 342 910 387 909 m 342 495 l 342 188 q 419 207 403 190 q 436 290 436 224 l 436 393 q 421 478 436 463 q 342 495 406 493 z "},"Г":{"ha":572,"x_min":57,"x_max":553,"o":"m 553 879 l 343 879 l 343 0 l 57 0 l 57 1099 l 553 1099 l 553 879 z "},"Д":{"ha":905,"x_min":18,"x_max":873,"o":"m 873 -189 l 676 -189 l 676 0 l 215 0 l 215 -189 l 18 -189 l 18 229 l 77 229 q 152 584 123 364 q 182 1065 182 804 l 182 1099 l 815 1099 l 815 231 l 873 231 l 873 -189 m 529 231 l 529 882 l 444 882 l 444 873 q 376 231 444 558 l 529 231 z "},"Е":{"ha":577,"x_min":57,"x_max":552,"o":"m 57 1098 l 533 1098 l 533 878 l 342 878 l 342 670 l 521 670 l 521 461 l 342 461 l 342 220 l 552 220 l 552 0 l 57 0 l 57 1098 z "},"Ж":{"ha":1028,"x_min":16,"x_max":1017,"o":"m 372 472 q 282 395 282 470 l 282 106 q 270 24 282 48 q 252 0 257 0 l 16 0 q 46 131 46 44 l 46 378 q 90 498 46 456 q 240 557 134 539 l 240 558 q 47 737 47 568 l 47 970 q 17 1099 47 1056 l 253 1099 q 273 1069 263 1095 q 283 994 283 1044 l 283 721 q 372 643 283 646 l 372 1099 l 659 1099 l 659 643 q 749 721 749 646 l 749 994 q 761 1075 749 1051 q 779 1099 773 1099 l 1015 1099 q 985 970 985 1056 l 985 737 q 791 558 985 568 l 791 557 q 942 498 898 539 q 986 378 986 456 l 986 131 q 1017 0 986 44 l 781 0 q 760 31 770 5 q 750 106 750 56 l 750 395 q 659 472 750 470 l 659 0 l 372 0 l 372 472 z "},"З":{"ha":736,"x_min":41,"x_max":687,"o":"m 564 622 q 656 553 626 601 q 687 329 687 505 q 657 126 687 198 q 554 16 627 54 q 366 -22 481 -22 q 162 22 236 -22 q 64 129 87 66 q 41 349 41 193 l 41 436 l 315 436 l 315 258 q 323 167 315 186 q 361 148 332 148 q 403 172 393 148 q 413 300 413 197 l 413 376 q 399 468 413 439 q 357 506 385 497 q 249 517 329 515 l 249 676 q 370 684 347 676 q 403 716 393 691 q 413 795 413 741 l 413 856 q 401 932 413 913 q 364 950 389 950 q 325 931 336 950 q 315 848 315 911 l 315 758 l 41 758 l 41 852 q 113 1064 41 1009 q 341 1120 184 1120 q 607 1043 537 1120 q 677 830 677 966 q 652 697 677 738 q 564 622 627 656 z "},"И":{"ha":751,"x_min":57,"x_max":694,"o":"m 694 0 l 456 0 l 456 500 l 307 0 l 57 0 l 57 1099 l 296 1099 l 296 603 l 456 1099 l 694 1099 l 694 0 z "},"Й":{"ha":751,"x_min":57,"x_max":694,"o":"m 694 0 l 456 0 l 456 500 l 307 0 l 57 0 l 57 1099 l 296 1099 l 296 603 l 456 1099 l 694 1099 l 694 0 m 451 1337 l 566 1337 q 512 1189 562 1245 q 374 1133 463 1133 q 235 1189 284 1133 q 182 1337 186 1246 l 297 1337 q 374 1244 305 1244 q 451 1337 443 1244 z "},"К":{"ha":745,"x_min":57,"x_max":743,"o":"m 57 1099 l 343 1099 l 345 635 q 428 724 425 637 l 433 939 q 479 1099 436 1057 l 743 1099 q 705 933 705 1059 l 707 745 q 514 550 708 574 q 707 353 708 526 l 705 178 q 743 0 705 53 l 479 0 q 433 160 433 41 l 433 374 q 409 440 433 415 q 345 465 384 465 l 343 0 l 57 0 l 57 1099 z "},"Л":{"ha":811,"x_min":7,"x_max":754,"o":"m 754 0 l 468 0 l 468 879 l 385 879 l 385 257 q 353 81 385 134 q 257 14 321 27 q 52 0 193 0 l 7 0 l 7 189 q 79 202 59 189 q 98 290 98 215 l 98 1099 l 754 1099 l 754 0 z "},"М":{"ha":996,"x_min":57,"x_max":938,"o":"m 938 1098 l 938 0 l 688 0 l 688 741 l 589 0 l 412 0 l 307 724 l 307 0 l 57 0 l 57 1098 l 427 1098 q 461 865 443 999 l 500 585 l 566 1098 l 938 1098 z "},"Н":{"ha":771,"x_min":57,"x_max":713,"o":"m 713 1098 l 713 0 l 428 0 l 428 461 l 342 461 l 342 0 l 57 0 l 57 1098 l 342 1098 l 342 705 l 428 705 l 428 1098 l 713 1098 z "},"О":{"ha":759,"x_min":49,"x_max":709,"o":"m 709 455 q 702 221 709 290 q 653 95 694 152 q 542 7 612 38 q 379 -23 472 -23 q 221 6 291 -23 q 108 92 151 35 q 57 218 65 150 q 49 455 49 286 l 49 643 q 57 877 49 808 q 105 1003 64 946 q 216 1090 146 1060 q 379 1121 286 1121 q 537 1092 467 1121 q 650 1006 608 1063 q 701 880 693 948 q 709 643 709 812 l 709 455 m 424 816 q 415 914 424 892 q 380 935 407 935 q 346 918 358 935 q 334 816 334 901 l 334 303 q 342 185 334 208 q 378 163 350 163 q 416 189 408 163 q 424 311 424 214 l 424 816 z "},"П":{"ha":771,"x_min":57,"x_max":714,"o":"m 714 0 l 428 0 l 428 879 l 343 879 l 343 0 l 57 0 l 57 1099 l 714 1099 l 714 0 z "},"Р":{"ha":697,"x_min":57,"x_max":672,"o":"m 57 1098 l 345 1098 q 524 1080 461 1098 q 618 1027 587 1061 q 661 943 650 992 q 672 791 672 894 l 672 695 q 650 542 672 590 q 571 468 629 494 q 419 442 513 442 l 342 442 l 342 0 l 57 0 l 57 1098 m 342 910 l 342 631 q 363 630 355 630 q 418 649 403 630 q 433 730 433 669 l 433 820 q 416 893 433 876 q 342 910 398 910 z "},"С":{"ha":769,"x_min":49,"x_max":724,"o":"m 724 619 l 438 619 l 438 810 q 429 915 438 894 q 389 935 420 935 q 344 910 353 935 q 334 802 334 885 l 334 292 q 344 187 334 212 q 387 163 353 163 q 428 187 418 163 q 438 302 438 212 l 438 439 l 724 439 l 724 397 q 700 155 724 227 q 593 31 675 84 q 390 -23 511 -23 q 183 22 264 -23 q 75 148 102 68 q 49 390 49 229 l 49 711 q 57 889 49 829 q 105 1003 65 948 q 217 1089 146 1058 q 382 1121 289 1121 q 590 1072 508 1121 q 698 950 672 1023 q 724 724 724 878 l 724 619 z "},"Т":{"ha":640,"x_min":8,"x_max":632,"o":"m 632 1098 l 632 878 l 463 878 l 463 0 l 177 0 l 177 878 l 8 878 l 8 1098 l 632 1098 z "},"У":{"ha":623,"x_min":-8,"x_max":623,"o":"m 623 1099 l 545 371 q 505 129 526 199 q 424 30 484 60 q 225 0 363 0 l 58 0 l 58 142 l 75 142 q 145 151 132 142 q 158 179 158 160 q 142 272 158 180 l -8 1099 l 240 1099 l 330 415 l 374 1099 l 623 1099 z "},"Ф":{"ha":1107,"x_min":21,"x_max":1086,"o":"m 1084 538 q 1074 382 1084 430 q 1014 264 1060 317 q 743 182 942 182 l 693 182 l 693 0 l 407 0 l 407 182 l 363 182 q 92 264 163 182 q 31 382 45 317 q 21 538 21 430 l 21 557 q 31 712 21 665 q 92 831 45 778 q 363 911 163 911 q 407 913 378 911 l 407 1099 l 693 1099 l 693 913 q 743 911 728 911 q 1014 831 943 911 q 1074 712 1060 778 q 1084 557 1084 665 l 1084 538 m 799 476 l 799 618 q 777 708 799 674 q 722 742 755 742 l 693 742 l 693 353 l 722 353 q 777 387 755 353 q 799 476 799 420 m 407 353 l 407 742 l 383 742 q 329 708 351 742 q 307 618 307 674 l 307 476 q 329 387 307 420 q 383 353 351 353 l 407 353 m 1086 538 z "},"Х":{"ha":670,"x_min":0,"x_max":686,"o":"m 635 1098 l 536 612 l 686 0 l 422 0 q 335 399 374 164 q 305 179 324 296 l 278 0 l 0 0 l 103 612 l 0 1098 l 276 1098 q 306 947 283 1053 q 335 799 323 866 l 396 1098 l 635 1098 z "},"Ц":{"ha":791,"x_min":57,"x_max":772,"o":"m 772 -189 l 575 -189 l 575 0 l 57 0 l 57 1099 l 343 1099 l 343 220 l 428 220 l 428 1099 l 714 1099 l 714 220 l 772 220 l 772 -189 z "},"Ч":{"ha":790,"x_min":49,"x_max":733,"o":"m 447 421 q 357 362 412 385 q 244 340 301 340 q 95 397 142 340 q 49 574 49 454 l 49 1099 l 335 1099 l 335 604 q 346 516 335 540 q 383 492 357 492 q 447 602 447 492 l 447 1099 l 733 1099 l 733 0 l 447 0 l 447 421 z "},"Ш":{"ha":1143,"x_min":57,"x_max":1086,"o":"m 1086 0 l 57 0 l 57 1099 l 343 1099 l 343 220 l 428 220 l 428 1099 l 714 1099 l 714 220 l 799 220 l 799 1099 l 1086 1099 l 1086 0 z "},"Щ":{"ha":1166,"x_min":57,"x_max":1140,"o":"m 1140 -189 l 943 -189 l 943 0 l 57 0 l 57 1099 l 343 1099 l 343 220 l 425 220 l 425 1099 l 711 1099 l 711 220 l 796 220 l 796 1099 l 1082 1099 l 1082 220 l 1140 220 l 1140 -189 z "},"Ъ":{"ha":863,"x_min":17,"x_max":819,"o":"m 819 257 q 787 81 819 134 q 691 14 755 27 q 485 0 626 0 l 154 0 l 154 926 l 17 926 l 17 1099 l 440 1099 l 440 722 l 485 722 q 685 707 617 722 q 786 638 752 691 q 819 471 819 585 l 819 257 m 533 290 l 533 449 q 519 533 533 518 q 440 550 505 548 l 440 189 q 514 203 494 189 q 533 290 533 217 z "},"Ы":{"ha":1153,"x_min":57,"x_max":1105,"o":"m 722 257 q 690 81 722 134 q 594 14 659 27 q 387 0 529 0 l 57 0 l 57 1099 l 343 1099 l 343 722 l 387 722 q 587 707 519 722 q 689 638 655 691 q 722 471 722 585 l 722 257 m 436 290 l 436 449 q 422 533 436 518 q 343 550 408 548 l 343 189 q 417 203 397 189 q 436 290 436 217 m 1105 0 l 819 0 l 819 1099 l 1105 1099 l 1105 0 z "},"Ь":{"ha":766,"x_min":57,"x_max":722,"o":"m 722 257 q 690 81 722 134 q 594 14 659 27 q 387 0 529 0 l 57 0 l 57 1099 l 343 1099 l 343 722 l 387 722 q 587 707 519 722 q 689 638 655 691 q 722 471 722 585 l 722 257 m 436 290 l 436 449 q 422 533 436 518 q 343 550 408 548 l 343 189 q 417 203 397 189 q 436 290 436 217 z "},"Э":{"ha":736,"x_min":40,"x_max":681,"o":"m 681 298 q 603 66 681 140 q 363 -8 525 -8 q 115 64 191 -8 q 40 310 40 136 l 40 396 l 314 396 l 314 228 q 361 161 314 161 q 401 187 395 161 q 407 313 407 213 l 407 494 l 249 494 l 249 654 l 407 654 l 407 842 q 400 915 407 895 q 364 936 393 936 q 314 871 314 936 l 314 745 l 40 745 l 40 838 q 111 1048 40 991 q 355 1105 181 1105 q 598 1036 516 1105 q 681 833 681 967 l 681 298 z "},"Ю":{"ha":1131,"x_min":57,"x_max":1082,"o":"m 421 461 l 343 461 l 343 0 l 57 0 l 57 1099 l 343 1099 l 343 705 l 421 705 q 436 912 422 848 q 492 1018 449 975 q 600 1078 536 1060 q 751 1096 664 1096 q 908 1077 843 1096 q 1017 1011 974 1057 q 1070 892 1059 965 q 1082 643 1082 819 l 1082 456 q 1071 206 1082 278 q 1017 87 1060 134 q 908 18 974 39 q 751 -3 842 -3 q 604 16 667 -3 q 499 74 541 34 q 443 160 456 114 q 425 274 429 206 q 421 456 421 342 l 421 461 m 796 271 l 796 815 q 789 910 796 884 q 751 936 782 936 q 717 916 727 936 q 707 815 707 896 l 707 252 q 715 186 707 209 q 750 163 723 163 q 785 181 774 163 q 796 271 796 200 z "},"Я":{"ha":747,"x_min":56,"x_max":693,"o":"m 693 0 l 407 0 l 407 494 q 337 476 353 494 q 321 397 321 458 l 321 0 l 56 0 l 56 328 q 65 454 56 411 q 107 526 74 498 q 212 574 140 555 q 85 630 114 583 q 56 799 56 677 q 83 971 56 909 q 161 1060 110 1033 q 280 1093 213 1087 q 490 1099 347 1099 l 693 1099 l 693 0 m 407 667 l 407 909 l 393 909 q 339 893 357 909 q 321 825 321 878 l 321 765 q 336 685 321 704 q 407 667 351 667 z "},"а":{"ha":700,"x_min":37,"x_max":654,"o":"m 294 551 l 37 551 l 37 612 q 61 773 37 716 q 157 873 85 829 q 346 916 230 916 q 555 867 485 916 q 640 746 626 818 q 654 452 654 675 l 654 0 l 388 0 l 388 80 q 323 8 363 32 q 229 -16 283 -16 q 97 24 157 -16 q 37 201 37 64 l 37 275 q 68 412 37 376 q 227 498 100 449 q 371 569 361 551 q 380 644 380 587 q 370 735 380 714 q 335 757 359 757 q 300 739 307 757 q 294 646 294 721 l 294 551 m 380 428 q 304 347 315 380 q 294 254 294 315 q 303 163 294 184 q 339 143 312 143 q 373 159 365 143 q 380 243 380 175 l 380 428 z "},"б":{"ha":725,"x_min":49,"x_max":676,"o":"m 403 184 l 403 644 q 399 719 403 705 q 363 750 392 750 q 326 718 333 750 q 322 644 322 703 l 322 214 q 363 136 322 136 q 403 184 403 136 m 468 900 q 672 742 663 900 q 676 576 676 667 l 676 357 q 656 149 676 204 q 361 -8 596 -8 q 245 -5 273 -8 q 149 29 189 2 q 64 149 85 73 q 49 326 49 205 l 49 854 q 123 1037 49 966 q 318 1107 198 1107 q 462 1100 368 1107 q 585 1093 555 1093 q 646 1101 621 1093 l 646 960 q 593 950 612 950 q 489 956 556 950 q 392 961 421 961 q 323 908 336 961 q 319 821 319 892 q 468 900 385 900 z "},"в":{"ha":714,"x_min":49,"x_max":684,"o":"m 684 237 q 624 50 684 100 q 363 0 564 0 l 49 0 l 49 900 l 372 900 q 601 845 538 900 q 664 657 664 790 q 505 484 664 505 q 636 419 588 470 q 684 290 684 368 l 684 237 m 321 566 q 397 581 383 566 q 411 643 411 597 q 395 696 411 682 q 321 711 380 711 l 321 566 m 411 279 l 411 310 q 395 383 411 368 q 321 397 380 397 l 321 189 q 393 205 376 189 q 411 279 411 221 z "},"г":{"ha":479,"x_min":49,"x_max":479,"o":"m 49 0 l 49 900 l 479 900 l 479 745 l 322 745 l 322 0 l 49 0 z "},"д":{"ha":865,"x_min":18,"x_max":846,"o":"m 846 -174 l 663 -174 l 663 0 l 201 0 l 201 -174 l 18 -174 l 18 215 l 77 215 q 162 466 129 296 q 196 867 196 635 l 196 900 l 787 900 l 787 216 l 846 216 l 846 -174 m 515 216 l 515 697 l 444 697 l 444 688 q 363 216 444 437 l 515 216 z "},"е":{"ha":710,"x_min":41,"x_max":669,"o":"m 669 434 l 315 434 l 315 239 q 323 161 315 178 q 357 143 332 143 q 399 166 389 143 q 410 257 410 190 l 410 376 l 669 376 l 669 309 q 659 181 669 226 q 610 85 648 136 q 512 9 571 35 q 363 -16 452 -16 q 210 9 276 -16 q 106 78 143 34 q 55 174 69 121 q 41 327 41 227 l 41 589 q 73 775 41 707 q 177 880 104 844 q 344 916 250 916 q 534 872 459 916 q 639 756 609 829 q 669 553 669 684 l 669 434 m 395 581 l 395 646 q 387 736 395 716 q 357 757 380 757 q 321 740 328 757 q 315 646 315 722 l 315 581 l 395 581 z "},"ж":{"ha":1038,"x_min":8,"x_max":1029,"o":"m 1029 0 l 765 0 q 734 106 734 41 l 734 296 q 647 387 734 387 l 647 0 l 376 0 l 376 387 q 302 296 302 387 l 302 106 q 272 0 302 14 l 8 0 q 39 131 39 44 l 39 289 q 179 446 39 401 q 268 468 218 458 q 176 492 244 469 q 87 542 108 524 q 40 648 40 582 l 40 770 q 9 900 40 856 l 273 900 q 304 794 304 859 l 304 642 q 376 550 304 550 l 376 900 l 647 900 l 647 550 q 733 642 733 550 l 733 794 q 764 900 733 886 l 1028 900 q 997 770 997 856 l 997 648 q 951 542 997 582 q 861 492 930 524 q 770 468 820 473 q 859 446 793 464 q 999 289 999 401 l 999 131 q 1029 0 999 44 z "},"з":{"ha":701,"x_min":40,"x_max":660,"o":"m 534 482 q 629 422 599 462 q 660 300 660 383 q 646 166 660 208 q 594 81 633 124 q 487 19 555 38 q 336 0 419 0 q 106 64 172 0 q 40 298 40 129 l 40 364 l 300 364 l 300 237 q 347 170 300 170 q 386 189 372 170 q 399 290 399 208 l 399 347 q 372 401 399 387 q 262 416 346 416 l 262 545 l 283 545 q 359 547 341 545 q 388 567 376 550 q 399 623 399 583 l 399 642 q 386 715 399 699 q 350 730 374 730 q 300 671 300 730 l 300 597 l 40 597 l 40 637 q 110 840 40 780 q 342 900 179 900 q 573 842 498 900 q 648 664 648 785 q 624 543 648 583 q 534 482 600 503 z "},"и":{"ha":777,"x_min":49,"x_max":728,"o":"m 728 0 l 489 0 l 489 486 l 298 0 l 49 0 l 49 900 l 288 900 l 288 418 l 475 900 l 728 900 l 728 0 z "},"й":{"ha":777,"x_min":49,"x_max":728,"o":"m 728 0 l 489 0 l 489 486 l 298 0 l 49 0 l 49 900 l 288 900 l 288 418 l 475 900 l 728 900 l 728 0 m 464 1165 l 579 1165 q 525 1017 575 1073 q 387 960 475 960 q 248 1017 297 960 q 195 1165 199 1074 l 310 1165 q 387 1072 318 1072 q 464 1165 456 1072 z "},"к":{"ha":710,"x_min":49,"x_max":701,"o":"m 319 900 l 319 550 q 406 642 406 550 l 406 794 q 436 900 406 886 l 700 900 q 669 770 669 856 l 669 644 q 616 535 669 578 q 533 489 596 519 q 441 468 492 469 q 530 446 465 464 q 671 289 671 401 l 671 131 q 701 0 671 44 l 437 0 q 407 106 407 41 l 407 296 q 319 387 407 387 l 319 0 l 49 0 l 49 900 l 319 900 z "},"л":{"ha":779,"x_min":4,"x_max":737,"o":"m 465 0 l 465 711 l 368 711 l 368 257 q 340 80 368 133 q 250 13 311 26 q 49 0 189 0 l 4 0 l 4 147 q 76 160 56 148 q 96 249 96 173 l 96 900 l 737 900 l 737 0 l 465 0 z "},"м":{"ha":949,"x_min":49,"x_max":900,"o":"m 900 0 l 665 0 l 665 621 l 551 0 l 401 0 l 283 621 l 283 0 l 49 0 l 49 900 l 389 900 l 476 403 l 555 900 l 900 900 l 900 0 z "},"н":{"ha":741,"x_min":49,"x_max":692,"o":"m 692 0 l 419 0 l 419 332 l 321 332 l 321 0 l 49 0 l 49 900 l 321 900 l 321 576 l 419 576 l 419 900 l 692 900 l 692 0 z "},"о":{"ha":710,"x_min":41,"x_max":669,"o":"m 669 584 l 669 363 q 656 185 669 242 q 604 80 644 129 q 502 7 564 31 q 357 -16 439 -16 q 203 4 267 -16 q 105 64 140 24 q 56 162 71 104 q 41 334 41 219 l 41 564 q 68 760 41 690 q 165 873 95 831 q 346 916 236 916 q 504 889 438 916 q 606 817 570 861 q 655 726 642 773 q 669 584 669 680 m 395 652 q 387 739 395 721 q 355 757 380 757 q 323 739 331 757 q 315 652 315 721 l 315 245 q 323 162 315 182 q 355 143 331 143 q 387 161 379 143 q 395 237 395 178 l 395 652 z "},"п":{"ha":739,"x_min":49,"x_max":690,"o":"m 49 0 l 49 900 l 690 900 l 690 0 l 418 0 l 418 711 l 321 711 l 321 0 l 49 0 z "},"р":{"ha":721,"x_min":49,"x_max":680,"o":"m 328 900 l 323 821 q 404 892 359 869 q 500 916 448 916 q 610 882 564 916 q 668 803 656 848 q 680 651 680 758 l 680 272 q 665 97 680 149 q 605 15 650 45 q 496 -16 560 -16 q 402 7 446 -16 q 323 78 359 31 l 323 -128 l 49 -128 l 49 900 l 328 900 m 406 638 q 399 739 406 722 q 366 757 393 757 q 331 736 338 757 q 323 638 323 716 l 323 265 q 331 163 323 184 q 366 143 339 143 q 399 162 393 143 q 406 252 406 180 l 406 638 z "},"с":{"ha":687,"x_min":41,"x_max":654,"o":"m 654 560 l 396 560 l 396 664 q 387 738 396 718 q 355 757 378 757 q 323 740 331 757 q 315 664 315 723 l 315 239 q 327 167 315 191 q 363 143 339 143 q 400 168 391 143 q 410 263 410 193 l 410 370 l 654 370 q 647 209 654 262 q 601 98 640 155 q 501 13 563 41 q 349 -16 439 -16 q 165 23 233 -16 q 69 135 97 63 q 41 338 41 206 l 41 593 q 64 766 41 708 q 162 870 87 825 q 345 916 237 916 q 528 871 452 916 q 629 756 604 825 q 654 560 654 687 z "},"т":{"ha":597,"x_min":4,"x_max":591,"o":"m 591 900 l 591 711 l 435 711 l 435 0 l 161 0 l 161 711 l 4 711 l 4 900 l 591 900 z "},"у":{"ha":623,"x_min":-8,"x_max":623,"o":"m 623 900 l 544 249 q 513 38 526 94 q 471 -55 500 -18 q 390 -109 442 -92 q 224 -126 338 -126 l 58 -126 l 58 18 q 140 24 122 18 q 159 53 159 31 q 142 147 159 64 l -8 900 l 241 900 l 330 293 l 374 900 l 623 900 z "},"ф":{"ha":1068,"x_min":40,"x_max":1026,"o":"m 1026 272 q 1015 121 1026 178 q 963 30 1004 64 q 839 -4 922 -4 q 669 78 730 -4 l 669 -129 l 397 -129 l 397 77 q 220 -5 332 -5 q 104 23 146 -5 q 51 101 61 52 q 40 245 40 151 l 40 625 q 52 776 40 720 q 104 867 63 833 q 228 901 144 901 q 397 819 336 901 l 397 1040 l 669 1040 l 669 821 q 847 903 735 903 q 963 874 920 903 q 1016 796 1006 846 q 1026 652 1026 746 l 1026 272 m 753 211 l 753 639 q 752 719 753 705 q 743 745 751 733 q 713 757 734 757 q 680 740 690 757 q 669 681 669 724 l 669 212 q 714 143 669 143 q 743 157 733 143 q 753 211 753 170 m 397 216 l 397 685 q 353 754 397 754 q 324 741 334 754 q 314 686 314 727 l 314 258 q 315 178 314 193 q 324 152 315 164 q 354 140 333 140 q 387 157 377 140 q 397 216 397 174 z "},"х":{"ha":602,"x_min":0,"x_max":614,"o":"m 591 900 l 482 470 l 614 0 l 348 0 q 288 306 309 178 q 229 0 261 146 l 0 0 l 118 470 l 0 900 l 229 900 q 288 587 284 625 q 348 900 328 817 l 591 900 z "},"ц":{"ha":768,"x_min":49,"x_max":749,"o":"m 49 0 l 49 900 l 321 900 l 321 189 l 418 189 l 418 900 l 690 900 l 690 189 l 749 189 l 749 -174 l 566 -174 l 566 0 l 49 0 z "},"ч":{"ha":715,"x_min":40,"x_max":673,"o":"m 673 0 l 400 0 l 400 248 q 236 199 349 199 q 110 227 158 199 q 51 307 62 254 q 40 478 40 360 l 40 900 l 314 900 l 314 465 q 321 368 314 393 q 357 343 328 343 q 391 366 381 343 q 400 456 400 388 l 400 900 l 673 900 l 673 0 z "},"ш":{"ha":1112,"x_min":49,"x_max":1064,"o":"m 693 189 l 790 189 l 790 900 l 1064 900 l 1064 0 l 49 0 l 49 900 l 322 900 l 322 189 l 419 189 l 419 900 l 693 900 l 693 189 z "},"щ":{"ha":1141,"x_min":49,"x_max":1122,"o":"m 49 0 l 49 900 l 322 900 l 322 189 l 419 189 l 419 900 l 693 900 l 693 189 l 790 189 l 790 900 l 1064 900 l 1064 189 l 1122 189 l 1122 -174 l 939 -174 l 939 0 l 49 0 z "},"ъ":{"ha":823,"x_min":7,"x_max":782,"o":"m 782 257 q 753 80 782 134 q 663 13 724 26 q 461 0 602 0 l 144 0 l 144 711 l 7 711 l 7 900 l 416 900 l 416 600 l 461 600 q 656 585 592 600 q 751 516 721 569 q 782 349 782 463 l 782 257 m 510 290 l 510 326 q 496 411 510 396 q 416 428 481 426 l 416 189 q 490 203 471 189 q 510 290 510 217 z "},"ы":{"ha":1089,"x_min":49,"x_max":1042,"o":"m 686 257 q 657 80 686 134 q 567 13 629 26 q 366 0 505 0 l 49 0 l 49 900 l 321 900 l 321 600 l 366 600 q 561 585 496 600 q 656 516 625 569 q 686 349 686 463 l 686 257 m 414 290 l 414 326 q 400 411 414 396 q 321 428 386 426 l 321 189 q 394 203 375 189 q 414 290 414 217 m 1042 0 l 770 0 l 770 900 l 1042 900 l 1042 0 z "},"ь":{"ha":725,"x_min":49,"x_max":686,"o":"m 686 257 q 657 80 686 134 q 567 13 629 26 q 366 0 505 0 l 49 0 l 49 900 l 321 900 l 321 600 l 366 600 q 561 585 496 600 q 656 516 625 569 q 686 349 686 463 l 686 257 m 414 290 l 414 326 q 400 411 414 396 q 321 428 386 426 l 321 189 q 394 203 375 189 q 414 290 414 217 z "},"э":{"ha":694,"x_min":39,"x_max":653,"o":"m 269 533 l 393 533 l 393 689 q 383 741 393 728 q 351 754 373 754 q 319 731 326 754 q 313 644 313 708 l 313 587 l 40 587 l 40 628 q 78 780 40 716 q 184 871 117 844 q 364 899 251 899 q 581 831 509 899 q 653 587 653 764 l 653 325 q 643 186 653 239 q 595 87 633 134 q 496 19 557 41 q 345 -3 435 -3 q 197 16 255 -3 q 99 82 139 35 q 48 179 58 129 q 39 309 39 230 l 39 347 l 297 347 l 297 236 q 310 162 297 183 q 350 142 322 142 q 382 157 371 142 q 393 237 393 173 l 393 411 l 269 411 l 269 533 z "},"ю":{"ha":1075,"x_min":49,"x_max":1034,"o":"m 406 363 l 322 363 l 322 0 l 49 0 l 49 900 l 323 900 l 323 551 l 406 551 l 406 564 q 415 702 406 644 q 463 808 425 760 q 564 881 501 857 q 711 905 626 905 q 868 881 801 905 q 976 810 935 857 q 1025 715 1017 763 q 1034 583 1034 668 l 1034 364 q 1021 181 1034 241 q 965 77 1008 122 q 859 16 921 33 q 677 -1 796 -1 q 579 5 618 -1 q 500 39 540 12 q 439 108 461 66 q 412 200 418 149 q 406 334 406 251 l 406 363 m 760 192 l 760 652 q 753 735 760 714 q 720 757 747 757 q 685 735 692 757 q 679 652 679 713 l 679 221 q 720 143 679 143 q 748 157 737 143 q 760 192 760 171 z "},"я":{"ha":710,"x_min":45,"x_max":661,"o":"m 661 0 l 389 0 l 389 354 q 316 332 336 354 q 296 248 296 309 l 296 0 l 45 0 l 45 211 q 54 327 45 292 q 94 383 62 363 q 201 424 125 404 q 74 480 103 433 q 45 648 45 527 q 122 841 45 783 q 458 900 200 900 l 661 900 l 661 0 m 389 510 l 389 725 l 361 725 q 313 708 331 725 q 296 627 296 690 l 296 615 q 316 530 296 550 q 389 510 336 510 z "},"ё":{"ha":710,"x_min":41,"x_max":669,"o":"m 669 434 l 315 434 l 315 239 q 323 161 315 178 q 357 143 332 143 q 399 166 389 143 q 410 257 410 190 l 410 376 l 669 376 l 669 309 q 659 181 669 226 q 610 85 648 136 q 512 9 571 35 q 363 -16 452 -16 q 210 9 276 -16 q 106 78 143 34 q 55 174 69 121 q 41 327 41 227 l 41 589 q 73 775 41 707 q 177 880 104 844 q 344 916 250 916 q 534 872 459 916 q 639 756 609 829 q 669 553 669 684 l 669 434 m 395 581 l 395 646 q 387 736 395 716 q 357 757 380 757 q 321 740 328 757 q 315 646 315 722 l 315 581 l 395 581 m 294 1137 l 294 960 l 117 960 l 117 1137 l 294 1137 m 590 1137 l 590 960 l 413 960 l 413 1137 l 590 1137 z "},"ђ":{"ha":743,"x_min":5,"x_max":701,"o":"m 68 875 l 5 875 l 5 1017 l 68 1017 l 68 1100 l 342 1100 l 342 1017 l 489 1017 l 489 875 l 342 875 l 342 745 q 505 793 396 793 q 632 765 584 793 q 691 685 680 738 q 701 514 701 631 l 701 52 q 636 -143 701 -81 q 390 -205 571 -205 l 374 -205 l 374 -17 q 417 11 407 -17 q 428 85 428 39 l 428 526 q 421 624 428 599 q 385 648 414 648 q 351 626 360 648 q 342 536 342 604 l 342 0 l 68 0 l 68 875 z "},"ѓ":{"ha":479,"x_min":49,"x_max":479,"o":"m 49 8 l 49 908 l 479 908 l 479 753 l 322 753 l 322 8 l 49 8 m 472 1146 l 249 962 l 111 962 l 231 1146 l 472 1146 z "},"є":{"ha":694,"x_min":41,"x_max":656,"o":"m 656 302 q 645 172 656 223 q 594 74 635 121 q 495 10 553 28 q 350 -8 438 -8 q 197 14 259 -8 q 98 83 135 36 q 51 182 61 130 q 41 319 41 235 l 41 597 q 53 725 41 670 q 98 823 64 779 q 190 888 133 867 q 330 908 247 908 q 582 834 509 908 q 654 637 654 760 l 654 597 l 382 597 l 382 654 q 375 741 382 718 q 343 764 369 764 q 311 751 321 764 q 301 699 301 738 l 301 533 l 425 533 l 425 406 l 301 406 l 301 232 q 312 152 301 167 q 345 136 323 136 q 385 157 372 136 q 397 231 397 178 l 397 342 l 656 342 l 656 302 z "},"ѕ":{"ha":654,"x_min":28,"x_max":629,"o":"m 608 612 l 366 612 l 366 661 q 358 740 366 724 q 323 757 351 757 q 288 742 300 757 q 277 696 277 726 q 282 635 277 654 q 317 593 288 616 q 435 526 346 570 q 592 416 555 467 q 629 266 629 364 q 601 100 629 156 q 506 14 572 44 q 345 -16 439 -16 q 166 16 240 -16 q 64 104 92 49 q 36 273 36 160 l 36 316 l 279 316 l 279 259 q 288 165 279 186 q 324 143 297 143 q 365 158 353 143 q 376 219 376 172 q 361 300 376 283 q 202 396 346 316 q 55 519 81 464 q 28 650 28 574 q 57 809 28 758 q 154 888 85 861 q 312 916 222 916 q 464 893 401 916 q 561 833 527 871 q 601 764 594 796 q 608 665 608 732 l 608 612 z "},"і":{"ha":380,"x_min":49,"x_max":331,"o":"m 331 1098 l 331 955 l 49 955 l 49 1098 l 331 1098 m 331 900 l 331 0 l 49 0 l 49 900 l 331 900 z "},"ї":{"ha":380,"x_min":-45,"x_max":429,"o":"m 331 900 l 331 0 l 49 0 l 49 900 l 331 900 m 132 1137 l 132 961 l -45 961 l -45 1137 l 132 1137 m 429 1137 l 429 961 l 252 961 l 252 1137 l 429 1137 z "},"ј":{"ha":389,"x_min":-4,"x_max":339,"o":"m 339 1098 l 339 955 l 57 955 l 57 1098 l 339 1098 m 339 900 l 339 188 q 334 18 339 62 q 303 -60 329 -26 q 233 -110 277 -94 q 102 -126 189 -126 l -4 -126 l -4 18 q 51 28 45 18 q 57 164 57 39 l 57 900 l 339 900 z "},"љ":{"ha":1145,"x_min":4,"x_max":1103,"o":"m 368 711 l 368 257 q 340 80 368 133 q 250 13 311 26 q 49 0 189 0 l 4 0 l 4 189 q 76 202 56 189 q 96 290 96 215 l 96 900 l 737 900 l 737 600 l 782 600 q 977 585 913 600 q 1072 516 1042 569 q 1103 349 1103 463 l 1103 257 q 1074 80 1103 134 q 984 13 1045 26 q 782 0 922 0 l 465 0 l 465 711 l 368 711 m 831 290 l 831 326 q 817 411 831 396 q 737 428 802 426 l 737 189 q 811 203 791 189 q 831 290 831 217 z "},"њ":{"ha":1089,"x_min":40,"x_max":1047,"o":"m 682 900 l 682 600 l 726 600 q 922 585 857 600 q 1017 516 986 569 q 1047 349 1047 463 l 1047 257 q 1018 80 1047 134 q 928 13 989 26 q 726 0 867 0 l 410 0 l 410 336 l 313 336 l 313 0 l 40 0 l 40 900 l 313 900 l 313 576 l 410 576 l 410 900 l 682 900 m 775 290 l 775 326 q 761 411 775 396 q 682 428 747 426 l 682 189 q 756 203 736 189 q 775 290 775 217 z "},"ћ":{"ha":743,"x_min":5,"x_max":701,"o":"m 428 0 l 428 526 q 421 624 428 599 q 385 648 414 648 q 351 626 360 648 q 342 536 342 604 l 342 0 l 68 0 l 68 875 l 5 875 l 5 1017 l 68 1017 l 68 1100 l 342 1100 l 342 1017 l 489 1017 l 489 875 l 342 875 l 342 745 q 505 793 393 793 q 632 765 584 793 q 691 685 680 738 q 701 514 701 631 l 701 0 l 428 0 z "},"ќ":{"ha":710,"x_min":49,"x_max":701,"o":"m 319 900 l 319 550 q 406 642 406 550 l 406 794 q 436 900 406 886 l 700 900 q 669 770 669 856 l 669 644 q 616 535 669 578 q 533 489 596 519 q 441 468 492 469 q 530 446 465 464 q 671 289 671 401 l 671 131 q 701 0 671 44 l 437 0 q 407 106 407 41 l 407 296 q 319 387 407 387 l 319 0 l 49 0 l 49 900 l 319 900 m 591 1144 l 368 960 l 231 960 l 350 1144 l 591 1144 z "},"ў":{"ha":623,"x_min":-8,"x_max":623,"o":"m 623 900 l 544 249 q 513 38 526 94 q 471 -55 500 -18 q 390 -109 442 -92 q 224 -126 338 -126 l 58 -126 l 58 18 q 140 24 122 18 q 159 53 159 31 q 142 147 159 64 l -8 900 l 241 900 l 330 293 l 374 900 l 623 900 m 394 1165 l 509 1165 q 455 1017 505 1073 q 317 960 406 960 q 178 1017 227 960 q 125 1165 129 1074 l 240 1165 q 317 1072 248 1072 q 394 1165 386 1072 z "},"џ":{"ha":724,"x_min":40,"x_max":682,"o":"m 269 0 l 40 0 l 40 900 l 313 900 l 313 189 l 410 189 l 410 900 l 682 900 l 682 0 l 453 0 l 453 -174 l 269 -174 l 269 0 z "},"Ґ":{"ha":597,"x_min":57,"x_max":579,"o":"m 382 1182 l 579 1182 l 579 879 l 343 879 l 343 0 l 57 0 l 57 1099 l 382 1099 l 382 1182 z "},"ґ":{"ha":561,"x_min":49,"x_max":558,"o":"m 375 900 l 375 1029 l 558 1029 l 558 711 l 322 711 l 322 0 l 49 0 l 49 900 l 375 900 z "},"Ẁ":{"ha":1131,"x_min":0,"x_max":1131,"o":"m 1131 1098 l 1004 0 l 648 0 q 562 575 599 253 q 482 0 545 437 l 127 0 l 0 1098 l 277 1098 l 307 715 l 336 345 q 415 1098 352 632 l 712 1098 q 743 736 718 1050 l 774 319 q 854 1098 798 717 l 1131 1098 m 330 1316 l 572 1316 l 691 1133 l 553 1133 l 330 1316 z "},"ẁ":{"ha":930,"x_min":-4,"x_max":934,"o":"m 934 900 l 825 0 l 527 0 q 471 434 503 165 q 440 195 460 316 l 410 0 l 112 0 l -4 900 l 232 900 q 292 385 235 865 q 353 900 296 434 l 580 900 l 635 385 q 698 900 648 610 l 934 900 m 253 1144 l 494 1144 l 614 960 l 476 960 l 253 1144 z "},"Ẃ":{"ha":1131,"x_min":0,"x_max":1131,"o":"m 1131 1098 l 1004 0 l 648 0 q 562 575 599 253 q 482 0 545 437 l 127 0 l 0 1098 l 277 1098 l 307 715 l 336 345 q 415 1098 352 632 l 712 1098 q 743 736 718 1050 l 774 319 q 854 1098 798 717 l 1131 1098 m 764 1316 l 541 1133 l 403 1133 l 522 1316 l 764 1316 z "},"ẃ":{"ha":930,"x_min":-4,"x_max":934,"o":"m 934 900 l 825 0 l 527 0 q 471 434 503 165 q 440 195 460 316 l 410 0 l 112 0 l -4 900 l 232 900 q 292 385 235 865 q 353 900 296 434 l 580 900 l 635 385 q 698 900 648 610 l 934 900 m 663 1144 l 440 960 l 302 960 l 422 1144 l 663 1144 z "},"Ẅ":{"ha":1131,"x_min":0,"x_max":1131,"o":"m 1131 1098 l 1004 0 l 648 0 q 562 575 599 253 q 482 0 545 437 l 127 0 l 0 1098 l 277 1098 l 307 715 l 336 345 q 415 1098 352 632 l 712 1098 q 743 736 718 1050 l 774 319 q 854 1098 798 717 l 1131 1098 m 506 1309 l 506 1133 l 329 1133 l 329 1309 l 506 1309 m 802 1309 l 802 1133 l 625 1133 l 625 1309 l 802 1309 z "},"ẅ":{"ha":930,"x_min":-4,"x_max":934,"o":"m 934 900 l 825 0 l 527 0 q 471 434 503 165 q 440 195 460 316 l 410 0 l 112 0 l -4 900 l 232 900 q 292 385 235 865 q 353 900 296 434 l 580 900 l 635 385 q 698 900 648 610 l 934 900 m 404 1137 l 404 960 l 227 960 l 227 1137 l 404 1137 m 700 1137 l 700 960 l 523 960 l 523 1137 l 700 1137 z "},"Ỳ":{"ha":657,"x_min":-8,"x_max":665,"o":"m 665 1098 l 457 397 l 457 0 l 193 0 l 193 397 l -8 1098 l 254 1098 q 323 666 316 777 q 403 1098 347 842 l 665 1098 m 114 1316 l 355 1316 l 475 1133 l 337 1133 l 114 1316 z "},"ỳ":{"ha":623,"x_min":-8,"x_max":623,"o":"m 623 900 l 544 249 q 513 38 526 94 q 471 -55 500 -18 q 390 -109 442 -92 q 224 -126 338 -126 l 58 -126 l 58 18 q 140 24 122 18 q 159 53 159 31 q 142 147 159 64 l -8 900 l 241 900 l 330 293 l 374 900 l 623 900 m 97 1144 l 338 1144 l 458 960 l 320 960 l 97 1144 z "},"―":{"ha":1389,"x_min":-8,"x_max":1397,"o":"m -8 534 l 1397 534 l 1397 366 l -8 366 l -8 534 z "},"‗":{"ha":766,"x_min":-8,"x_max":775,"o":"m -8 -174 l -8 -104 l 775 -104 l 775 -174 l -8 -174 m -8 -313 l -8 -243 l 775 -243 l 775 -313 l -8 -313 z "},"‛":{"ha":233,"x_min":25,"x_max":209,"o":"m 25 1098 l 209 1098 l 209 883 l 163 883 q 209 822 168 844 l 209 743 q 43 873 81 770 q 25 1000 25 923 l 25 1098 z "},"′":{"ha":257,"x_min":54,"x_max":261,"o":"m 201 745 l 61 745 l 54 1099 l 261 1099 l 201 745 z "},"″":{"ha":539,"x_min":54,"x_max":539,"o":"m 201 745 l 61 745 l 54 1099 l 261 1099 l 201 745 m 479 745 l 339 745 l 332 1099 l 539 1099 l 479 745 z "},"‼":{"ha":755,"x_min":49,"x_max":701,"o":"m 49 1099 l 350 1099 l 306 271 l 93 271 l 49 1099 m 400 1099 l 701 1099 l 657 271 l 444 271 l 400 1099 m 71 220 l 328 220 l 328 0 l 71 0 l 71 220 m 422 220 l 679 220 l 679 0 l 422 0 l 422 220 z "},"‾":{"ha":814,"x_min":-28,"x_max":844,"o":"m -28 1267 l 844 1267 l 844 1217 l -28 1217 l -28 1267 z "},"ⁿ":{"ha":463,"x_min":25,"x_max":432,"o":"m 207 1099 l 203 1048 q 323 1105 241 1105 q 391 1088 365 1105 q 425 1039 418 1070 q 432 940 432 1008 l 432 570 l 254 570 l 254 935 q 249 1002 254 989 q 232 1014 244 1014 q 209 994 216 1014 q 203 926 203 974 l 203 570 l 25 570 l 25 1099 l 207 1099 z "},"₣":{"ha":553,"x_min":1,"x_max":541,"o":"m 343 196 l 343 0 l 57 0 l 57 196 l 1 196 l 1 313 l 57 313 l 57 1099 l 541 1099 l 541 879 l 343 879 l 343 669 l 519 669 l 519 461 l 343 461 l 343 313 l 437 313 l 437 196 l 343 196 z "},"₤":{"ha":743,"x_min":46,"x_max":710,"o":"m 264 160 q 330 168 318 168 q 385 163 349 168 q 421 158 410 158 q 466 179 452 158 q 481 264 481 199 l 481 309 l 710 309 l 710 221 q 698 83 710 127 q 636 9 686 40 q 507 -21 586 -21 q 375 1 463 -21 q 215 25 274 25 q 49 -21 113 25 l 49 139 q 149 363 123 184 l 49 363 l 49 479 l 161 479 q 153 541 161 500 l 46 541 l 46 656 l 117 656 q 91 703 106 677 q 68 759 77 729 q 60 832 60 789 q 142 1042 60 965 q 367 1120 224 1120 q 600 1042 515 1120 q 685 835 685 964 q 677 745 685 806 l 432 745 l 432 904 q 378 975 432 975 q 334 952 352 975 q 315 899 315 930 q 352 750 315 856 q 378 656 378 675 l 496 656 l 496 541 l 393 541 q 396 476 396 500 l 498 476 l 498 363 l 390 363 q 264 160 374 231 z "},"₧":{"ha":1784,"x_min":57,"x_max":1752,"o":"m 343 0 l 57 0 l 57 1099 l 345 1099 q 512 1085 451 1099 q 613 1030 572 1072 q 663 940 654 988 q 672 790 672 892 l 672 696 q 606 486 672 531 q 419 441 541 441 l 343 441 l 343 0 m 433 730 l 433 819 q 416 892 433 875 q 343 909 399 909 l 343 631 l 364 631 q 418 649 403 631 q 433 730 433 668 m 761 878 l 761 1021 l 1035 1021 l 1035 878 l 1108 878 l 1108 736 l 1035 736 l 1035 254 q 1038 172 1035 191 q 1056 149 1042 153 q 1121 144 1069 144 l 1121 0 l 1010 0 q 881 7 924 0 q 806 43 838 14 q 767 118 773 73 q 761 279 761 163 l 761 736 l 701 736 l 701 878 l 761 878 m 1401 317 l 1401 221 q 1450 143 1401 143 q 1487 157 1475 143 q 1499 221 1499 170 q 1487 293 1499 274 q 1419 343 1474 313 q 1227 462 1271 427 q 1168 541 1184 497 q 1152 684 1152 585 q 1219 850 1152 798 q 1438 903 1286 903 q 1590 885 1527 903 q 1685 830 1653 867 q 1725 761 1718 794 q 1732 664 1732 728 l 1732 612 l 1489 612 l 1489 696 q 1479 744 1489 730 q 1446 758 1469 758 q 1409 742 1420 758 q 1398 677 1398 725 q 1415 616 1398 642 q 1480 567 1432 591 q 1651 473 1594 509 q 1730 389 1708 437 q 1752 267 1752 340 q 1685 56 1752 117 q 1468 -5 1617 -5 q 1322 9 1383 -5 q 1222 59 1261 24 q 1171 144 1184 94 q 1158 272 1158 194 l 1158 317 l 1401 317 z "},"℅":{"ha":962,"x_min":25,"x_max":939,"o":"m 646 1120 l 749 1120 l 319 -21 l 215 -21 l 646 1120 m 429 722 q 414 612 429 656 q 350 544 398 568 q 235 519 301 519 q 133 532 174 519 q 64 575 92 545 q 31 633 37 605 q 25 713 25 662 l 25 911 q 46 1040 25 999 q 112 1101 68 1082 q 222 1120 155 1120 q 346 1094 295 1120 q 413 1027 397 1069 q 429 917 429 986 l 429 890 l 262 890 l 262 920 q 228 1023 262 1023 q 199 982 199 1023 l 199 656 q 207 622 199 629 q 228 615 215 615 q 251 628 247 615 q 256 677 256 641 l 256 737 l 429 737 l 429 722 m 534 182 l 534 380 q 551 500 534 458 q 618 565 568 542 q 732 589 669 589 q 860 560 807 589 q 926 492 913 531 q 939 380 939 453 l 939 192 q 887 30 939 71 q 745 -11 836 -11 q 641 3 684 -11 q 572 46 598 16 q 540 104 546 76 q 534 182 534 133 m 765 147 l 765 428 q 761 480 765 467 q 736 493 757 493 q 708 452 708 493 l 708 125 q 716 92 708 98 q 737 85 724 85 q 761 97 757 85 q 765 147 765 110 z "},"ℓ":{"ha":814,"x_min":178,"x_max":667,"o":"m 422 368 q 385 115 385 170 q 404 78 385 78 q 460 143 430 78 q 492 172 474 172 q 518 141 518 172 q 472 32 518 86 q 362 -22 425 -22 q 280 22 311 -22 q 250 182 250 66 q 252 243 250 205 q 205 206 216 206 q 188 217 197 206 q 178 245 178 227 q 197 283 178 262 q 262 359 243 335 q 375 768 304 599 q 555 938 447 938 q 638 900 609 938 q 667 807 667 863 q 422 368 667 612 m 443 494 q 543 646 504 562 q 582 795 582 730 q 558 845 582 845 q 503 756 531 845 q 443 494 474 667 z "},"№":{"ha":1207,"x_min":57,"x_max":1189,"o":"m 456 603 l 456 1099 l 694 1099 l 694 0 l 444 0 l 296 500 l 296 0 l 57 0 l 57 1099 l 296 1099 l 456 603 m 768 371 l 768 570 q 785 689 768 648 q 852 754 801 731 q 965 778 903 778 q 1093 749 1040 778 q 1159 681 1146 720 q 1173 570 1173 642 l 1173 380 q 1121 218 1173 259 q 978 178 1069 178 q 874 191 917 178 q 806 235 832 205 q 774 293 779 264 q 768 371 768 321 m 999 336 l 999 616 q 995 669 999 656 q 970 682 990 682 q 942 640 942 682 l 942 314 q 947 284 942 294 q 971 273 951 273 q 995 286 990 273 q 999 336 999 299 m 753 142 l 1189 142 l 1189 25 l 753 25 l 753 142 z "},"℮":{"ha":833,"x_min":61,"x_max":779,"o":"m 218 360 l 218 109 q 420 26 299 26 q 688 193 592 26 l 736 164 q 579 13 656 49 q 420 -23 503 -23 q 162 84 262 -23 q 61 360 61 192 q 162 637 61 531 q 420 743 264 743 q 668 647 565 743 q 779 360 771 551 l 218 360 m 622 410 l 622 612 q 418 694 538 694 q 218 612 300 694 l 218 410 l 622 410 z "},"⅛":{"ha":926,"x_min":8,"x_max":901,"o":"m 197 1109 l 298 1109 l 298 530 l 125 530 l 125 892 q 106 935 125 924 q 54 943 92 943 l 8 943 l 8 1018 q 197 1109 132 1040 m 576 1120 l 679 1120 l 250 -21 l 146 -21 l 576 1120 m 500 441 q 561 555 500 516 q 696 590 613 590 q 896 437 896 590 q 876 371 896 395 q 817 328 860 351 q 901 168 901 291 q 699 -11 901 -11 q 496 175 496 -11 q 571 328 496 283 q 500 441 500 366 m 727 395 l 727 466 q 697 500 727 500 q 669 463 669 500 l 669 391 q 699 362 669 362 q 727 395 727 362 m 730 218 q 697 267 730 267 q 666 212 666 267 l 666 131 q 700 78 666 78 q 730 131 730 78 l 730 218 z "},"⅜":{"ha":1023,"x_min":25,"x_max":998,"o":"m 25 935 l 25 977 q 67 1089 25 1057 q 214 1121 110 1121 q 368 1086 319 1121 q 422 964 422 1049 q 361 857 422 886 q 422 796 408 841 q 429 707 429 771 q 389 569 429 612 q 229 519 342 519 q 54 580 98 519 q 25 717 25 619 l 25 755 l 199 755 l 199 646 q 225 615 199 615 q 252 633 246 615 q 256 690 256 645 l 256 728 q 233 787 256 774 q 154 798 217 796 l 154 888 l 167 888 q 234 892 222 888 q 256 946 256 902 l 256 978 q 228 1023 256 1023 q 199 993 199 1023 l 199 935 l 25 935 m 671 1120 l 774 1120 l 345 -21 l 240 -21 l 671 1120 m 598 441 q 658 555 598 516 q 794 590 710 590 q 993 437 993 590 q 973 371 993 395 q 915 328 957 351 q 998 168 998 291 q 795 -11 998 -11 q 593 175 593 -11 q 668 328 593 283 q 598 441 598 366 m 825 395 l 825 466 q 795 500 825 500 q 766 463 766 500 l 766 391 q 796 362 766 362 q 825 395 825 362 m 827 218 q 795 267 827 267 q 764 212 764 267 l 764 131 q 797 78 764 78 q 827 131 827 78 l 827 218 z "},"⅝":{"ha":1026,"x_min":25,"x_max":1001,"o":"m 674 1120 l 777 1120 l 347 -21 l 243 -21 l 674 1120 m 601 441 q 661 555 601 516 q 797 590 713 590 q 996 437 996 590 q 976 371 996 395 q 918 328 960 351 q 1001 168 1001 291 q 798 -11 1001 -11 q 596 175 596 -11 q 671 328 596 283 q 601 441 601 366 m 827 395 l 827 466 q 798 500 827 500 q 769 463 769 500 l 769 391 q 799 362 769 362 q 827 395 827 362 m 830 218 q 798 267 830 267 q 766 212 766 267 l 766 131 q 800 78 766 78 q 830 131 830 78 l 830 218 m 33 1111 l 403 1111 l 403 1010 l 194 1010 l 194 920 q 278 960 229 960 q 396 913 355 960 q 434 798 434 869 l 434 706 q 232 521 434 521 q 67 584 116 521 q 25 749 25 637 l 200 749 q 201 672 201 675 q 235 610 208 610 q 264 671 254 610 q 273 747 273 714 q 271 821 273 807 q 231 870 262 870 q 200 819 205 870 l 26 819 l 33 1111 z "},"⅞":{"ha":877,"x_min":8,"x_max":852,"o":"m 525 1120 l 628 1120 l 199 -21 l 94 -21 l 525 1120 m 452 441 q 512 555 452 516 q 648 590 564 590 q 847 437 847 590 q 827 371 847 395 q 769 328 811 351 q 852 168 852 291 q 650 -11 852 -11 q 447 175 447 -11 q 522 328 447 283 q 452 441 452 366 m 679 395 l 679 466 q 649 500 679 500 q 621 463 621 500 l 621 391 q 650 362 621 362 q 679 395 679 362 m 682 218 q 649 267 682 267 q 618 212 618 267 l 618 131 q 651 78 618 78 q 682 131 682 78 l 682 218 m 8 1108 l 315 1108 l 315 981 l 222 529 l 49 529 l 149 992 l 8 994 l 8 1108 z "},"⁄":{"ha":174,"x_min":-180,"x_max":353,"o":"m 353 1119 l -75 -21 l -180 -21 l 251 1119 l 353 1119 z "},"←":{"ha":1389,"x_min":54,"x_max":1335,"o":"m 334 106 q 192 246 252 198 q 54 335 132 294 l 54 366 q 191 455 132 408 q 334 594 250 502 l 385 594 q 333 494 354 529 q 273 410 311 459 l 1335 410 l 1335 291 l 273 291 q 332 208 310 244 q 385 106 355 172 l 334 106 z "},"↑":{"ha":694,"x_min":104,"x_max":591,"o":"m 104 628 q 243 770 195 711 q 332 908 291 829 l 363 908 q 451 771 404 829 q 591 628 498 712 l 591 576 q 491 629 526 608 q 407 689 456 651 l 407 -291 l 288 -291 l 288 689 q 205 630 241 652 q 104 576 169 608 l 104 628 z "},"→":{"ha":1389,"x_min":54,"x_max":1335,"o":"m 1055 594 q 1197 455 1137 503 q 1335 366 1256 408 l 1335 335 q 1197 247 1256 294 q 1055 106 1139 199 l 1003 106 q 1056 207 1034 172 q 1116 291 1078 242 l 54 291 l 54 410 l 1116 410 q 1057 493 1079 456 q 1003 594 1034 529 l 1055 594 z "},"↓":{"ha":694,"x_min":103,"x_max":591,"o":"m 591 -11 q 451 -153 499 -94 q 362 -291 404 -212 l 332 -291 q 243 -154 290 -212 q 103 -11 195 -95 l 103 41 q 204 -12 169 9 q 288 -72 239 -34 l 288 908 l 406 908 l 406 -72 q 489 -13 453 -35 q 591 41 526 9 l 591 -11 z "},"↔":{"ha":1389,"x_min":54,"x_max":1335,"o":"m 273 410 l 1116 410 q 1057 492 1079 456 q 1003 594 1034 529 l 1055 594 q 1197 455 1137 503 q 1335 366 1256 408 l 1335 335 q 1197 247 1256 294 q 1055 106 1139 199 l 1003 106 q 1056 207 1034 172 q 1116 291 1077 241 l 273 291 q 332 208 310 244 q 385 106 355 172 l 334 106 q 192 246 252 198 q 54 335 132 294 l 54 366 q 191 455 132 408 q 334 594 250 502 l 385 594 q 333 494 354 529 q 273 410 311 459 z "},"↕":{"ha":694,"x_min":104,"x_max":591,"o":"m 407 772 l 407 -71 q 490 -11 453 -34 q 591 43 526 12 l 591 -9 q 452 -151 500 -92 q 363 -290 404 -210 l 332 -290 q 243 -152 291 -211 q 104 -9 196 -93 l 104 43 q 204 -10 169 11 q 288 -71 239 -31 l 288 772 q 205 713 241 736 q 104 660 169 691 l 104 711 q 243 853 195 794 q 332 992 291 913 l 363 992 q 451 854 404 913 q 591 711 498 795 l 591 660 q 491 713 526 691 q 407 772 456 734 z "},"↨":{"ha":694,"x_min":103,"x_max":591,"o":"m 406 772 l 406 -71 q 489 -11 452 -34 q 591 43 526 12 l 591 -9 q 451 -151 499 -92 q 362 -290 404 -210 l 332 -290 q 243 -152 290 -211 q 103 -9 195 -93 l 103 43 q 203 -10 168 11 q 288 -71 238 -31 l 288 772 q 204 713 241 736 q 103 660 168 691 l 103 711 q 242 853 195 794 q 332 992 290 913 l 362 992 q 451 854 404 913 q 591 711 498 795 l 591 660 q 490 713 525 691 q 406 772 455 734 m 103 -340 l 591 -340 l 591 -459 l 103 -459 l 103 -340 z "},"∟":{"ha":1389,"x_min":83,"x_max":1305,"o":"m 83 0 l 83 1208 l 175 1208 l 175 92 l 1305 92 l 1305 0 l 83 0 z "},"∩":{"ha":999,"x_min":98,"x_max":901,"o":"m 237 0 l 98 0 l 98 431 q 107 693 98 615 q 164 846 117 771 q 303 972 212 922 q 500 1023 395 1023 q 696 972 604 1023 q 833 849 787 921 q 890 698 880 777 q 901 431 901 619 l 901 0 l 762 0 l 762 435 q 747 697 762 621 q 662 829 732 773 q 500 886 592 886 q 368 850 430 886 q 278 765 306 814 q 244 652 251 717 q 237 435 237 587 l 237 0 z "},"≡":{"ha":741,"x_min":44,"x_max":683,"o":"m 44 807 l 683 807 l 683 642 l 44 642 l 44 807 m 44 548 l 683 548 l 683 382 l 44 382 l 44 548 m 44 289 l 683 289 l 683 123 l 44 123 l 44 289 z "},"⌂":{"ha":833,"x_min":104,"x_max":730,"o":"m 104 0 l 104 430 l 416 782 l 730 430 l 730 0 l 104 0 m 159 55 l 675 55 l 675 407 l 416 696 l 159 407 l 159 55 z "},"⌐":{"ha":741,"x_min":44,"x_max":698,"o":"m 698 764 l 44 764 l 44 334 l 210 334 l 210 597 l 698 597 l 698 764 z "},"⌠":{"ha":839,"x_min":370,"x_max":662,"o":"m 469 -349 l 370 -349 l 370 879 q 431 1103 370 1027 q 568 1178 492 1178 q 638 1156 614 1178 q 662 1104 662 1134 q 645 1059 662 1077 q 602 1042 627 1042 q 564 1052 582 1042 q 535 1083 551 1059 q 504 1108 519 1108 q 483 1100 492 1108 q 473 1082 476 1095 q 469 987 469 1059 l 469 -349 z "},"⌡":{"ha":839,"x_min":177,"x_max":469,"o":"m 370 1178 l 469 1178 l 469 -50 q 408 -274 469 -199 q 271 -349 347 -349 q 201 -327 225 -349 q 177 -275 177 -305 q 194 -231 177 -248 q 236 -213 212 -213 q 276 -224 257 -213 q 304 -255 288 -231 q 335 -279 319 -279 q 356 -272 347 -279 q 366 -252 363 -267 q 370 -159 370 -231 l 370 1178 z "},"─":{"ha":984,"x_min":-16,"x_max":999,"o":"m 999 362 l -16 362 l -16 481 l 999 481 l 999 362 z "},"│":{"ha":984,"x_min":433,"x_max":551,"o":"m 433 -421 l 433 1264 l 551 1264 l 551 -421 l 433 -421 z "},"┌":{"ha":984,"x_min":433,"x_max":1000,"o":"m 1000 481 l 1000 362 l 551 362 l 551 -421 l 433 -421 l 433 481 l 1000 481 z "},"┐":{"ha":984,"x_min":-16,"x_max":551,"o":"m 432 362 l -16 362 l -16 481 l 551 481 l 551 -421 l 432 -421 l 432 362 z "},"└":{"ha":984,"x_min":433,"x_max":1000,"o":"m 433 362 l 433 1264 l 551 1264 l 551 481 l 1000 481 l 1000 362 l 433 362 z "},"┘":{"ha":984,"x_min":-16,"x_max":551,"o":"m 551 362 l -16 362 l -16 481 l 432 481 l 432 1264 l 551 1264 l 551 362 z "},"├":{"ha":984,"x_min":433,"x_max":1000,"o":"m 433 -421 l 433 1264 l 551 1264 l 551 481 l 1000 481 l 1000 362 l 551 362 l 551 -421 l 433 -421 z "},"┤":{"ha":984,"x_min":-16,"x_max":551,"o":"m 432 -421 l 432 362 l -16 362 l -16 481 l 432 481 l 432 1264 l 551 1264 l 551 -421 l 432 -421 z "},"┬":{"ha":984,"x_min":-16,"x_max":999,"o":"m 432 362 l -16 362 l -16 481 l 999 481 l 999 362 l 551 362 l 551 -421 l 432 -421 l 432 362 z "},"┴":{"ha":984,"x_min":-16,"x_max":999,"o":"m 999 362 l -16 362 l -16 481 l 432 481 l 432 1264 l 551 1264 l 551 481 l 999 481 l 999 362 z "},"┼":{"ha":984,"x_min":-16,"x_max":999,"o":"m 432 362 l -16 362 l -16 481 l 432 481 l 432 1264 l 551 1264 l 551 481 l 999 481 l 999 362 l 551 362 l 551 -421 l 432 -421 l 432 362 z "},"═":{"ha":984,"x_min":-16,"x_max":999,"o":"m 999 491 l -16 491 l -16 610 l 999 610 l 999 491 m 999 233 l -16 233 l -16 352 l 999 352 l 999 233 z "},"║":{"ha":984,"x_min":304,"x_max":681,"o":"m 562 -421 l 562 1264 l 681 1264 l 681 -421 l 562 -421 m 304 -421 l 304 1264 l 422 1264 l 422 -421 l 304 -421 z "},"╒":{"ha":984,"x_min":433,"x_max":1000,"o":"m 433 -421 l 433 610 l 1000 610 l 1000 491 l 551 491 l 551 352 l 1000 352 l 1000 233 l 551 233 l 551 -421 l 433 -421 z "},"╓":{"ha":984,"x_min":304,"x_max":1000,"o":"m 304 -421 l 304 481 l 1000 481 l 1000 362 l 681 362 l 681 -421 l 562 -421 l 562 362 l 422 362 l 422 -421 l 304 -421 z "},"╔":{"ha":984,"x_min":304,"x_max":1000,"o":"m 422 -421 l 304 -421 l 304 610 l 1000 610 l 1000 491 l 422 491 l 422 -421 m 681 233 l 681 -421 l 562 -421 l 562 352 l 1000 352 l 1000 233 l 681 233 z "},"╕":{"ha":984,"x_min":-16,"x_max":551,"o":"m 432 233 l -16 233 l -16 352 l 432 352 l 432 491 l -16 491 l -16 610 l 551 610 l 551 -421 l 432 -421 l 432 233 z "},"╖":{"ha":984,"x_min":-16,"x_max":680,"o":"m 304 -421 l 304 362 l -16 362 l -16 481 l 680 481 l 680 -421 l 562 -421 l 562 362 l 422 362 l 422 -421 l 304 -421 z "},"╗":{"ha":984,"x_min":-16,"x_max":680,"o":"m 562 -421 l 562 491 l -16 491 l -16 610 l 680 610 l 680 -421 l 562 -421 m 303 233 l -16 233 l -16 352 l 422 352 l 422 -421 l 303 -421 l 303 233 z "},"╘":{"ha":984,"x_min":433,"x_max":1000,"o":"m 433 233 l 433 1264 l 551 1264 l 551 610 l 1000 610 l 1000 491 l 551 491 l 551 352 l 1000 352 l 1000 233 l 433 233 z "},"╙":{"ha":984,"x_min":304,"x_max":1000,"o":"m 1000 362 l 304 362 l 304 1264 l 422 1264 l 422 481 l 562 481 l 562 1264 l 681 1264 l 681 481 l 1000 481 l 1000 362 z "},"╚":{"ha":984,"x_min":304,"x_max":1000,"o":"m 422 1264 l 422 352 l 999 352 l 999 233 l 304 233 l 304 1264 l 422 1264 m 681 610 l 1000 610 l 1000 491 l 562 491 l 562 1264 l 681 1264 l 681 610 z "},"╛":{"ha":984,"x_min":-16,"x_max":551,"o":"m 551 233 l -16 233 l -16 352 l 432 352 l 432 491 l -16 491 l -16 610 l 432 610 l 432 1264 l 551 1264 l 551 233 z "},"╜":{"ha":984,"x_min":-16,"x_max":680,"o":"m 680 362 l -16 362 l -16 481 l 303 481 l 303 1264 l 422 1264 l 422 481 l 562 481 l 562 1264 l 680 1264 l 680 362 z "},"╝":{"ha":984,"x_min":-16,"x_max":680,"o":"m 562 1264 l 680 1264 l 680 233 l -16 233 l -16 352 l 562 352 l 562 1264 m 303 610 l 303 1264 l 422 1264 l 422 491 l -16 491 l -16 610 l 303 610 z "},"╞":{"ha":984,"x_min":433,"x_max":1000,"o":"m 433 -421 l 433 1264 l 551 1264 l 551 610 l 1000 610 l 1000 491 l 551 491 l 551 352 l 1000 352 l 1000 233 l 551 233 l 551 -421 l 433 -421 z "},"╟":{"ha":984,"x_min":304,"x_max":1000,"o":"m 562 -421 l 562 1264 l 681 1264 l 681 481 l 1000 481 l 1000 362 l 681 362 l 681 -421 l 562 -421 m 304 -421 l 304 1264 l 422 1264 l 422 -421 l 304 -421 z "},"╠":{"ha":984,"x_min":304,"x_max":1000,"o":"m 304 -421 l 304 1264 l 422 1264 l 422 -421 l 304 -421 m 562 491 l 562 1264 l 681 1264 l 681 610 l 1000 610 l 1000 491 l 562 491 m 562 -421 l 562 352 l 1000 352 l 1000 233 l 681 233 l 681 -421 l 562 -421 z "},"╡":{"ha":984,"x_min":-16,"x_max":551,"o":"m 432 233 l -16 233 l -16 352 l 432 352 l 432 491 l -16 491 l -16 610 l 432 610 l 432 1264 l 551 1264 l 551 -421 l 432 -421 l 432 233 z "},"╢":{"ha":984,"x_min":-16,"x_max":680,"o":"m 303 -421 l 304 362 l -16 362 l -16 481 l 303 481 l 303 1264 l 422 1264 l 422 -421 l 303 -421 m 562 -421 l 562 1264 l 680 1264 l 680 -421 l 562 -421 z "},"╣":{"ha":984,"x_min":-16,"x_max":680,"o":"m 562 -421 l 562 1264 l 680 1264 l 680 -421 l 562 -421 m 422 1264 l 422 491 l -16 491 l -16 610 l 303 610 l 303 1264 l 422 1264 m 303 233 l -16 233 l -16 352 l 422 352 l 422 -421 l 303 -421 l 303 233 z "},"╤":{"ha":984,"x_min":-16,"x_max":999,"o":"m 999 491 l -16 491 l -16 610 l 999 610 l 999 491 m 432 233 l -16 233 l -16 352 l 999 352 l 999 233 l 551 233 l 551 -421 l 432 -421 l 432 233 z "},"╥":{"ha":984,"x_min":-16,"x_max":999,"o":"m 303 -421 l 303 362 l -16 362 l -16 481 l 999 481 l 999 362 l 680 362 l 680 -421 l 562 -421 l 562 362 l 422 362 l 422 -421 l 303 -421 z "},"╦":{"ha":984,"x_min":-16,"x_max":999,"o":"m 999 491 l -16 491 l -16 610 l 999 610 l 999 491 m 303 233 l -16 233 l -16 352 l 422 352 l 422 -421 l 303 -421 l 303 233 m 562 -421 l 562 352 l 999 352 l 999 233 l 680 233 l 680 -421 l 562 -421 z "},"╧":{"ha":984,"x_min":-16,"x_max":999,"o":"m 999 491 l -16 491 l -16 610 l 432 610 l 432 1264 l 551 1264 l 551 610 l 999 610 l 999 491 m 999 233 l -16 233 l -16 352 l 999 352 l 999 233 z "},"╨":{"ha":984,"x_min":-16,"x_max":999,"o":"m 999 362 l -16 362 l -16 481 l 303 481 l 303 1264 l 422 1264 l 422 481 l 562 481 l 562 1264 l 680 1264 l 680 481 l 999 481 l 999 362 z "},"╩":{"ha":984,"x_min":-16,"x_max":999,"o":"m 422 491 l -16 491 l -16 610 l 303 610 l 303 1264 l 422 1264 l 422 491 m 999 491 l 562 491 l 562 1264 l 680 1264 l 680 610 l 999 610 l 999 491 m 999 233 l -16 233 l -16 352 l 999 352 l 999 233 z "},"╪":{"ha":984,"x_min":-16,"x_max":999,"o":"m 432 233 l -16 233 l -16 352 l 432 352 l 432 491 l -16 491 l -16 610 l 432 610 l 432 1264 l 551 1264 l 551 610 l 999 610 l 999 491 l 551 491 l 551 352 l 999 352 l 999 233 l 551 233 l 551 -421 l 432 -421 l 432 233 z "},"╫":{"ha":984,"x_min":-16,"x_max":999,"o":"m 303 -421 l 303 362 l -16 362 l -16 481 l 303 481 l 303 1264 l 422 1264 l 422 481 l 562 481 l 562 1264 l 680 1264 l 680 481 l 999 481 l 999 362 l 680 362 l 680 -421 l 562 -421 l 562 362 l 422 362 l 422 -421 l 303 -421 z "},"╬":{"ha":984,"x_min":-16,"x_max":999,"o":"m 680 610 l 999 610 l 999 491 l 562 491 l 562 1264 l 680 1264 l 680 610 m 303 610 l 303 1264 l 422 1264 l 422 491 l -16 491 l -16 610 l 303 610 m 303 233 l -16 233 l -16 352 l 422 352 l 422 -421 l 303 -421 l 303 233 m 680 233 l 680 -421 l 562 -421 l 562 352 l 999 352 l 999 233 l 680 233 z "},"▀":{"ha":984,"x_min":-16,"x_max":999,"o":"m 999 421 l -16 421 l -16 1264 l 999 1264 l 999 421 z "},"▄":{"ha":984,"x_min":-16,"x_max":999,"o":"m 999 -421 l -16 -421 l -16 421 l 999 421 l 999 -421 z "},"█":{"ha":984,"x_min":-16,"x_max":999,"o":"m -16 -421 l -16 1264 l 999 1264 l 999 -421 l -16 -421 z "},"▌":{"ha":984,"x_min":-16,"x_max":492,"o":"m -16 -421 l -16 1264 l 492 1264 l 492 -421 l -16 -421 z "},"▐":{"ha":984,"x_min":492,"x_max":1000,"o":"m 492 -421 l 492 1264 l 1000 1264 l 1000 -421 l 492 -421 z "},"░":{"ha":984,"x_min":0,"x_max":900,"o":"m 0 1264 l 82 1264 l 82 1179 l 0 1179 l 0 1264 m 327 1264 l 409 1264 l 409 1179 l 327 1179 l 327 1264 m 654 1264 l 736 1264 l 736 1179 l 654 1179 l 654 1264 m 163 1095 l 245 1095 l 245 1010 l 163 1010 l 163 1095 m 490 1095 l 572 1095 l 572 1010 l 490 1010 l 490 1095 m 818 1095 l 900 1095 l 900 1010 l 818 1010 l 818 1095 m 654 926 l 736 926 l 736 842 l 654 842 l 654 926 m 327 926 l 409 926 l 409 842 l 327 842 l 327 926 m 0 926 l 82 926 l 82 842 l 0 842 l 0 926 m 818 758 l 900 758 l 900 673 l 818 673 l 818 758 m 490 758 l 572 758 l 572 673 l 490 673 l 490 758 m 163 758 l 245 758 l 245 673 l 163 673 l 163 758 m 0 588 l 82 588 l 82 503 l 0 503 l 0 588 m 327 588 l 409 588 l 409 503 l 327 503 l 327 588 m 654 588 l 736 588 l 736 503 l 654 503 l 654 588 m 818 419 l 900 419 l 900 334 l 818 334 l 818 419 m 490 419 l 572 419 l 572 334 l 490 334 l 490 419 m 163 419 l 245 419 l 245 334 l 163 334 l 163 419 m 0 250 l 82 250 l 82 165 l 0 165 l 0 250 m 327 250 l 409 250 l 409 165 l 327 165 l 327 250 m 654 250 l 736 250 l 736 165 l 654 165 l 654 250 m 163 81 l 245 81 l 245 -3 l 163 -3 l 163 81 m 490 81 l 572 81 l 572 -3 l 490 -3 l 490 81 m 818 81 l 900 81 l 900 -3 l 818 -3 l 818 81 m 654 -88 l 736 -88 l 736 -173 l 654 -173 l 654 -88 m 327 -88 l 409 -88 l 409 -173 l 327 -173 l 327 -88 m 0 -88 l 82 -88 l 82 -173 l 0 -173 l 0 -88 m 163 -257 l 245 -257 l 245 -342 l 163 -342 l 163 -257 m 490 -257 l 572 -257 l 572 -342 l 490 -342 l 490 -257 m 818 -257 l 900 -257 l 900 -342 l 818 -342 l 818 -257 z "},"▒":{"ha":984,"x_min":0,"x_max":981,"o":"m 82 1264 l 163 1264 l 163 1179 l 82 1179 l 82 1264 m 245 1264 l 327 1264 l 327 1179 l 245 1179 l 245 1264 m 409 1264 l 491 1264 l 491 1179 l 409 1179 l 409 1264 m 572 1264 l 654 1264 l 654 1179 l 572 1179 l 572 1264 m 736 1264 l 818 1264 l 818 1179 l 736 1179 l 736 1264 m 900 1264 l 981 1264 l 981 1179 l 900 1179 l 900 1264 m 0 1095 l 82 1095 l 82 1010 l 0 1010 l 0 1095 m 163 1095 l 245 1095 l 245 1010 l 163 1010 l 163 1095 m 327 1095 l 409 1095 l 409 1010 l 327 1010 l 327 1095 m 491 1095 l 572 1095 l 572 1010 l 491 1010 l 491 1095 m 654 1095 l 736 1095 l 736 1010 l 654 1010 l 654 1095 m 818 1095 l 900 1095 l 900 1010 l 818 1010 l 818 1095 m 82 926 l 163 926 l 163 842 l 82 842 l 82 926 m 245 926 l 327 926 l 327 842 l 245 842 l 245 926 m 409 926 l 491 926 l 491 842 l 409 842 l 409 926 m 572 926 l 654 926 l 654 842 l 572 842 l 572 926 m 736 926 l 818 926 l 818 842 l 736 842 l 736 926 m 900 926 l 981 926 l 981 842 l 900 842 l 900 926 m 163 757 l 245 757 l 245 673 l 163 673 l 163 757 m 327 757 l 409 757 l 409 673 l 327 673 l 327 757 m 491 757 l 572 757 l 572 673 l 491 673 l 491 757 m 654 757 l 736 757 l 736 673 l 654 673 l 654 757 m 818 757 l 900 757 l 900 673 l 818 673 l 818 757 m 0 757 l 82 757 l 82 673 l 0 673 l 0 757 m 82 588 l 163 588 l 163 503 l 82 503 l 82 588 m 245 588 l 327 588 l 327 503 l 245 503 l 245 588 m 409 588 l 491 588 l 491 503 l 409 503 l 409 588 m 572 588 l 654 588 l 654 503 l 572 503 l 572 588 m 736 588 l 818 588 l 818 503 l 736 503 l 736 588 m 900 588 l 981 588 l 981 503 l 900 503 l 900 588 m 0 419 l 82 419 l 82 334 l 0 334 l 0 419 m 327 419 l 409 419 l 409 334 l 327 334 l 327 419 m 491 419 l 572 419 l 572 334 l 491 334 l 491 419 m 654 419 l 736 419 l 736 334 l 654 334 l 654 419 m 818 419 l 900 419 l 900 334 l 818 334 l 818 419 m 163 419 l 245 419 l 245 334 l 163 334 l 163 419 m 900 250 l 981 250 l 981 165 l 900 165 l 900 250 m 736 250 l 818 250 l 818 165 l 736 165 l 736 250 m 572 250 l 654 250 l 654 165 l 572 165 l 572 250 m 409 250 l 491 250 l 491 165 l 409 165 l 409 250 m 245 250 l 327 250 l 327 165 l 245 165 l 245 250 m 82 250 l 163 250 l 163 165 l 82 165 l 82 250 m 0 81 l 82 81 l 82 -3 l 0 -3 l 0 81 m 163 81 l 245 81 l 245 -3 l 163 -3 l 163 81 m 327 81 l 409 81 l 409 -3 l 327 -3 l 327 81 m 491 81 l 572 81 l 572 -3 l 491 -3 l 491 81 m 654 81 l 736 81 l 736 -3 l 654 -3 l 654 81 m 818 81 l 900 81 l 900 -3 l 818 -3 l 818 81 m 900 -88 l 981 -88 l 981 -173 l 900 -173 l 900 -88 m 736 -88 l 818 -88 l 818 -173 l 736 -173 l 736 -88 m 572 -88 l 654 -88 l 654 -173 l 572 -173 l 572 -88 m 409 -88 l 491 -88 l 491 -173 l 409 -173 l 409 -88 m 245 -88 l 327 -88 l 327 -173 l 245 -173 l 245 -88 m 82 -88 l 163 -88 l 163 -173 l 82 -173 l 82 -88 m 0 -257 l 82 -257 l 82 -342 l 0 -342 l 0 -257 m 163 -257 l 245 -257 l 245 -342 l 163 -342 l 163 -257 m 327 -257 l 409 -257 l 409 -342 l 327 -342 l 327 -257 m 491 -257 l 572 -257 l 572 -342 l 491 -342 l 491 -257 m 654 -258 l 736 -257 l 736 -342 l 654 -342 l 654 -258 m 818 -257 l 900 -257 l 900 -342 l 818 -342 l 818 -257 z "},"▓":{"ha":984,"x_min":0,"x_max":981,"o":"m 981 1010 l 981 757 l 900 757 l 900 673 l 981 673 l 981 419 l 900 419 l 900 334 l 981 334 l 981 81 l 900 81 l 900 -3 l 981 -3 l 981 -257 l 900 -257 l 900 -342 l 981 -342 l 981 -426 l 0 -426 l 0 -173 l 82 -173 l 82 -88 l 0 -88 l 0 165 l 82 165 l 82 250 l 0 250 l 0 503 l 82 503 l 82 588 l 0 588 l 0 842 l 82 842 l 82 926 l 0 926 l 0 1179 l 82 1179 l 82 1264 l 163 1264 l 163 1179 l 245 1179 l 245 1264 l 327 1264 l 327 1179 l 409 1179 l 409 1264 l 491 1264 l 491 1179 l 572 1179 l 572 1264 l 654 1264 l 654 1179 l 736 1179 l 736 1264 l 818 1264 l 818 1179 l 900 1179 l 900 1264 l 981 1264 l 981 1095 l 900 1095 l 900 1010 l 981 1010 m 82 1095 l 82 1010 l 163 1010 l 163 1095 l 82 1095 m 245 1095 l 245 1010 l 327 1010 l 327 1095 l 245 1095 m 409 1095 l 409 1010 l 491 1010 l 491 1095 l 409 1095 m 572 1095 l 572 1010 l 654 1010 l 654 1095 l 572 1095 m 736 1095 l 736 1010 l 818 1010 l 818 1095 l 736 1095 m 900 926 l 818 926 l 818 842 l 900 842 l 900 926 m 736 926 l 654 926 l 654 842 l 736 842 l 736 926 m 572 926 l 491 926 l 491 842 l 572 842 l 572 926 m 409 926 l 327 926 l 327 842 l 409 842 l 409 926 m 245 926 l 163 926 l 163 842 l 245 842 l 245 926 m 82 757 l 82 673 l 163 673 l 163 757 l 82 757 m 245 757 l 245 673 l 327 673 l 327 757 l 245 757 m 409 757 l 409 673 l 491 673 l 491 757 l 409 757 m 572 757 l 572 673 l 654 673 l 654 757 l 572 757 m 736 757 l 736 673 l 818 673 l 818 757 l 736 757 m 245 588 l 163 588 l 163 503 l 245 503 l 245 588 m 327 588 l 327 503 l 409 503 l 409 588 l 327 588 m 491 588 l 491 503 l 572 503 l 572 588 l 491 588 m 654 588 l 654 503 l 736 503 l 736 588 l 654 588 m 818 588 l 818 503 l 900 503 l 900 588 l 818 588 m 82 419 l 82 334 l 163 334 l 163 419 l 82 419 m 409 419 l 409 334 l 491 334 l 491 419 l 409 419 m 327 334 l 327 419 l 245 419 l 245 334 l 327 334 m 572 419 l 572 334 l 654 334 l 654 419 l 572 419 m 736 419 l 736 334 l 818 334 l 818 419 l 736 419 m 900 165 l 900 250 l 818 250 l 818 165 l 900 165 m 736 165 l 736 250 l 654 250 l 654 165 l 736 165 m 572 165 l 572 250 l 491 250 l 491 165 l 572 165 m 409 165 l 409 250 l 327 250 l 327 165 l 409 165 m 245 165 l 245 250 l 163 250 l 163 165 l 245 165 m 82 81 l 82 -3 l 163 -3 l 163 81 l 82 81 m 245 81 l 245 -3 l 327 -3 l 327 81 l 245 81 m 409 81 l 409 -3 l 491 -3 l 491 81 l 409 81 m 572 81 l 572 -3 l 654 -3 l 654 81 l 572 81 m 736 81 l 736 -3 l 818 -3 l 818 81 l 736 81 m 900 -173 l 900 -88 l 818 -88 l 818 -173 l 900 -173 m 736 -173 l 736 -88 l 654 -88 l 654 -173 l 736 -173 m 572 -173 l 572 -88 l 491 -88 l 491 -173 l 572 -173 m 409 -173 l 409 -88 l 327 -88 l 327 -173 l 409 -173 m 245 -173 l 245 -88 l 163 -88 l 163 -173 l 245 -173 m 82 -257 l 82 -342 l 163 -342 l 163 -257 l 82 -257 m 245 -257 l 245 -342 l 327 -342 l 327 -257 l 245 -257 m 409 -257 l 409 -342 l 491 -342 l 491 -257 l 409 -257 m 572 -257 l 572 -342 l 654 -342 l 654 -257 l 572 -257 m 736 -257 l 736 -342 l 818 -342 l 818 -257 l 736 -257 z "},"■":{"ha":839,"x_min":99,"x_max":739,"o":"m 99 640 l 739 640 l 739 0 l 99 0 l 99 640 z "},"□":{"ha":839,"x_min":99,"x_max":739,"o":"m 99 640 l 739 640 l 739 0 l 99 0 l 99 640 m 151 589 l 151 52 l 688 52 l 688 589 l 151 589 z "},"▪":{"ha":492,"x_min":89,"x_max":403,"o":"m 403 616 l 403 302 l 89 302 l 89 616 l 403 616 z "},"▫":{"ha":492,"x_min":89,"x_max":403,"o":"m 403 616 l 403 302 l 89 302 l 89 616 l 403 616 m 351 565 l 140 564 l 140 353 l 351 353 l 351 565 z "},"▬":{"ha":1389,"x_min":231,"x_max":1158,"o":"m 231 262 l 1158 262 l 1158 0 l 231 0 l 231 262 z "},"▲":{"ha":1375,"x_min":206,"x_max":1169,"o":"m 206 0 l 688 962 l 1169 0 l 206 0 z "},"►":{"ha":1375,"x_min":195,"x_max":1179,"o":"m 195 961 l 1179 470 l 195 -21 l 195 961 z "},"▼":{"ha":1375,"x_min":206,"x_max":1169,"o":"m 1169 941 l 688 -21 l 206 941 l 1169 941 z "},"◄":{"ha":1375,"x_min":195,"x_max":1179,"o":"m 1179 961 l 1179 -21 l 195 470 l 1179 961 z "},"○":{"ha":839,"x_min":121,"x_max":718,"o":"m 420 690 q 566 652 494 690 q 678 541 638 613 q 718 392 718 469 q 631 180 718 268 q 420 93 543 93 q 208 180 296 93 q 121 392 121 268 q 161 542 121 470 q 273 652 201 613 q 420 690 345 690 m 420 639 q 298 607 357 639 q 205 515 239 575 q 172 392 172 456 q 245 217 172 290 q 420 144 317 144 q 594 217 522 144 q 667 392 667 290 q 633 515 667 456 q 541 607 600 575 q 420 639 482 639 z "},"●":{"ha":839,"x_min":121,"x_max":718,"o":"m 420 690 q 566 652 494 690 q 678 541 638 613 q 718 392 718 469 q 631 180 718 268 q 420 93 543 93 q 208 180 296 93 q 121 392 121 268 q 161 542 121 470 q 273 652 201 613 q 420 690 345 690 z "},"◘":{"ha":839,"x_min":87,"x_max":751,"o":"m 87 0 l 87 665 l 751 665 l 751 0 l 87 0 m 419 469 q 322 429 362 469 q 282 332 282 389 q 322 236 282 276 q 419 195 363 195 q 516 236 476 195 q 556 332 556 276 q 516 429 556 389 q 419 469 476 469 z "},"◙":{"ha":839,"x_min":28,"x_max":812,"o":"m 28 0 l 28 783 l 812 783 l 812 0 l 28 0 m 420 690 q 273 652 345 690 q 161 541 201 613 q 121 391 121 469 q 209 180 121 268 q 420 93 296 93 q 631 180 544 93 q 719 391 719 268 q 679 541 719 469 q 567 652 639 613 q 420 690 496 690 m 420 639 q 542 607 482 639 q 634 516 601 575 q 667 391 667 456 q 595 217 667 289 q 420 144 523 144 q 245 217 317 144 q 173 391 173 289 q 206 516 173 456 q 299 607 239 575 q 420 639 358 639 z "},"◦":{"ha":492,"x_min":76,"x_max":416,"o":"m 246 629 q 367 579 317 629 q 416 459 416 530 q 367 339 416 389 q 246 289 317 289 q 126 339 176 289 q 76 459 76 389 q 125 579 76 530 q 246 629 175 629 m 246 578 q 162 543 197 578 q 127 459 127 508 q 162 375 127 410 q 246 340 197 340 q 330 375 295 340 q 365 459 365 410 q 330 543 365 508 q 246 578 296 578 z "},"☺":{"ha":1389,"x_min":262,"x_max":1127,"o":"m 694 784 q 907 728 803 784 q 1069 568 1010 672 q 1127 351 1127 464 q 1070 137 1127 239 q 909 -23 1013 34 q 694 -81 806 -81 q 479 -23 582 -81 q 319 137 376 34 q 262 351 262 239 q 320 568 262 464 q 481 728 378 672 q 694 784 585 784 m 694 721 q 513 673 602 721 q 375 536 425 625 q 325 351 325 448 q 374 168 325 256 q 511 31 422 80 q 694 -18 599 -18 q 878 31 790 -18 q 1015 168 966 80 q 1064 351 1064 256 q 1014 536 1064 448 q 876 673 964 625 q 694 721 787 721 m 528 496 q 567 480 551 496 q 583 441 583 464 q 567 402 583 418 q 528 386 551 386 q 490 402 506 386 q 473 441 473 418 q 490 480 473 464 q 528 496 506 496 m 860 496 q 899 480 883 496 q 915 441 915 464 q 899 402 915 418 q 860 386 883 386 q 821 402 838 386 q 805 441 805 418 q 821 480 805 464 q 860 496 837 496 m 495 212 l 537 237 q 694 139 591 139 q 851 237 798 139 l 894 212 q 810 114 860 148 q 694 80 760 80 q 578 114 628 80 q 495 212 529 148 z "},"☻":{"ha":1389,"x_min":262,"x_max":1127,"o":"m 694 784 q 907 728 803 784 q 1069 568 1010 672 q 1127 351 1127 464 q 1070 137 1127 239 q 909 -23 1013 34 q 694 -81 806 -81 q 479 -23 582 -81 q 319 137 376 34 q 262 351 262 239 q 320 568 262 464 q 481 728 378 672 q 694 784 585 784 m 528 496 q 490 480 506 496 q 473 441 473 464 q 490 402 473 418 q 528 386 506 386 q 567 402 551 386 q 583 441 583 418 q 567 480 583 464 q 528 496 551 496 m 860 496 q 821 480 837 496 q 805 441 805 464 q 821 402 805 418 q 860 386 838 386 q 899 402 883 386 q 915 441 915 418 q 899 480 915 464 q 860 496 883 496 m 495 212 q 578 114 529 148 q 694 80 628 80 q 810 114 760 80 q 894 212 860 148 l 851 237 q 694 139 798 139 q 537 237 591 139 l 495 212 z "},"☼":{"ha":1273,"x_min":11,"x_max":1263,"o":"m 612 1099 l 663 1099 l 663 871 q 786 845 732 866 q 900 775 840 823 l 1097 968 l 1132 932 l 938 738 q 1008 623 987 673 q 1036 498 1034 558 l 1263 498 l 1263 451 l 1036 451 q 939 213 1023 320 l 1132 16 l 1093 -18 l 901 173 q 785 105 835 124 q 663 77 736 85 l 663 -151 l 612 -151 l 612 77 q 484 109 536 87 q 378 171 432 130 l 178 -18 l 144 17 l 337 211 q 269 323 292 268 q 239 451 246 379 l 11 451 l 11 498 l 239 498 q 267 624 245 570 q 336 734 290 677 l 144 929 l 176 968 l 374 777 q 496 845 443 824 q 612 871 549 865 l 612 1099 m 635 821 q 465 777 548 821 q 335 648 381 732 q 288 474 288 564 q 334 301 288 384 q 463 172 380 218 q 635 126 545 126 q 808 172 726 126 q 937 301 891 218 q 983 474 983 384 q 937 648 983 564 q 806 777 890 732 q 635 821 723 821 z "},"♀":{"ha":1042,"x_min":165,"x_max":876,"o":"m 540 313 l 540 40 l 851 40 l 851 0 l 540 0 l 540 -298 l 500 -298 l 500 0 l 188 0 l 188 40 l 500 40 l 500 313 q 347 357 430 313 q 215 487 264 401 q 165 667 165 572 q 213 844 165 759 q 344 975 260 928 q 521 1022 428 1022 q 697 975 613 1022 q 829 843 782 928 q 876 667 876 759 q 778 422 876 525 q 540 313 681 319 m 520 984 q 364 943 440 984 q 245 825 288 902 q 202 666 202 749 q 295 440 202 534 q 520 347 389 347 q 746 440 652 347 q 839 666 839 534 q 796 825 839 749 q 677 943 753 902 q 520 984 601 984 z "},"♂":{"ha":1042,"x_min":75,"x_max":960,"o":"m 825 1099 l 849 1088 l 960 636 l 921 626 l 825 1020 l 582 499 q 734 362 682 448 q 785 178 785 276 q 739 1 785 85 q 607 -131 692 -83 q 430 -178 523 -178 q 253 -131 338 -178 q 122 1 169 -83 q 75 178 75 85 q 179 429 75 325 q 432 532 283 532 q 545 514 485 532 l 789 1037 l 425 857 l 408 893 l 825 1099 m 430 496 q 274 455 350 496 q 155 337 197 414 q 112 178 112 260 q 205 -48 112 45 q 430 -141 298 -141 q 655 -48 562 -141 q 749 178 749 45 q 706 337 749 260 q 587 455 663 414 q 430 496 511 496 z "},"♠":{"ha":911,"x_min":126,"x_max":785,"o":"m 456 835 q 511 704 474 762 q 641 561 547 646 q 760 430 735 476 q 785 338 785 385 q 742 230 785 273 q 637 186 699 186 q 533 225 582 186 q 465 315 496 254 q 491 157 465 216 q 572 65 516 98 q 720 25 627 31 l 725 0 l 188 0 l 193 25 q 386 98 317 25 q 452 315 455 171 q 377 219 422 251 q 275 186 332 186 q 170 231 214 186 q 126 335 126 275 q 148 425 126 385 q 247 538 178 481 q 349 631 316 594 q 421 731 399 687 q 456 835 444 775 z "},"♣":{"ha":911,"x_min":37,"x_max":873,"o":"m 745 0 l 170 0 l 175 23 q 323 70 287 47 q 413 172 378 104 q 448 315 448 240 q 448 347 448 326 q 347 224 406 262 q 226 185 288 185 q 92 240 147 185 q 37 375 37 295 q 87 508 37 454 q 199 563 138 562 q 312 527 242 562 q 275 598 283 574 q 267 650 267 623 q 320 782 267 728 q 454 835 374 835 q 588 782 534 835 q 643 653 643 728 q 596 527 643 593 q 665 557 653 554 q 706 563 683 563 q 824 510 774 563 q 873 378 873 456 q 819 241 873 296 q 686 185 764 186 q 594 208 633 188 q 522 262 555 227 q 463 347 498 287 q 495 176 465 239 q 588 72 526 113 q 739 23 630 44 l 745 0 z "},"♥":{"ha":911,"x_min":86,"x_max":825,"o":"m 457 -16 q 397 134 436 64 q 246 352 358 204 q 145 490 164 460 q 100 577 114 537 q 86 657 86 616 q 136 783 86 732 q 258 835 186 834 q 390 781 335 834 q 457 664 431 742 q 519 780 479 740 q 649 835 576 835 q 774 785 723 835 q 825 665 825 734 q 796 538 825 604 q 680 363 766 472 q 518 133 569 223 q 457 -16 478 62 z "},"♦":{"ha":911,"x_min":144,"x_max":767,"o":"m 455 837 q 603 615 515 732 q 767 410 705 479 q 603 205 717 357 q 455 -16 511 81 q 405 66 437 19 q 269 255 350 147 q 144 410 251 279 q 321 632 213 488 q 455 837 401 739 z "},"♪":{"ha":694,"x_min":25,"x_max":669,"o":"m 330 924 l 355 924 q 509 915 472 924 q 604 863 563 901 q 652 782 634 834 q 669 661 669 730 l 669 591 l 602 591 l 602 621 q 583 699 602 667 q 526 748 564 731 q 416 770 476 770 l 397 770 l 397 203 q 375 76 397 121 q 300 2 353 30 q 185 -25 248 -25 q 68 17 111 -25 q 25 126 25 58 q 77 246 25 197 q 212 294 128 294 q 330 263 264 294 l 330 924 z "},"♫":{"ha":1042,"x_min":58,"x_max":902,"o":"m 362 862 l 902 1030 l 902 279 q 881 152 902 195 q 808 81 859 109 q 692 54 757 54 q 574 96 618 54 q 530 205 530 138 q 583 322 530 273 q 718 372 635 372 q 765 367 745 372 q 833 342 786 362 l 833 833 l 429 708 l 429 141 q 408 13 429 59 q 333 -60 386 -33 q 218 -87 280 -87 q 101 -45 144 -87 q 58 64 58 -3 q 109 183 58 135 q 244 232 161 232 q 362 201 297 232 l 362 862 z "},"":{"ha":779,"x_min":3,"x_max":729,"o":"m 729 1098 l 729 955 l 447 955 l 447 1098 l 729 1098 m 398 1098 l 398 959 q 298 951 313 959 q 283 907 283 943 l 283 878 l 398 878 l 398 736 l 333 736 l 333 0 l 59 0 l 59 736 l 3 736 l 3 878 l 59 878 q 65 997 59 967 q 95 1050 71 1027 q 163 1086 119 1074 q 298 1098 206 1098 l 398 1098 m 729 900 l 729 0 l 447 0 l 447 900 l 729 900 z "},"":{"ha":777,"x_min":3,"x_max":727,"o":"m 398 1098 l 398 959 q 298 951 313 959 q 283 907 283 943 l 283 878 l 398 878 l 398 736 l 333 736 l 333 0 l 59 0 l 59 736 l 3 736 l 3 878 l 59 878 q 65 997 59 967 q 95 1050 71 1027 q 163 1086 119 1074 q 298 1098 206 1098 l 398 1098 m 727 1098 l 727 0 l 445 0 l 445 1098 l 727 1098 z "},"":{"ha":233,"x_min":24,"x_max":209,"o":"m 24 1099 l 209 1099 l 209 1042 q 24 785 209 823 l 24 864 q 70 925 64 888 l 24 925 l 24 1099 z "},"":{"ha":233,"x_min":24,"x_max":209,"o":"m 24 -49 l 209 -49 l 209 -106 q 24 -363 209 -324 l 24 -283 q 70 -222 64 -260 l 24 -222 l 24 -49 z "},"¤":{"ha":762,"x_min":24,"x_max":736,"o":"m 552 720 l 642 810 l 736 713 l 648 623 q 697 454 697 541 q 648 282 697 363 l 736 194 l 642 98 l 552 186 q 469 148 512 161 q 379 136 425 136 q 293 148 335 136 q 210 186 250 161 l 121 98 l 24 194 l 114 282 q 64 454 64 363 q 114 623 64 540 l 24 713 l 119 810 l 210 720 q 294 757 252 745 q 380 770 336 770 q 466 757 423 770 q 552 720 509 745 m 199 457 q 253 324 199 376 q 380 271 307 271 q 509 325 456 271 q 562 452 562 378 q 509 581 562 528 q 380 634 456 634 q 251 579 302 634 q 199 457 199 524 z "}},"familyName":"Impact","ascender":1401,"descender":-293,"underlinePosition":-139,"underlineThickness":69,"boundingBox":{"yMin":-459,"xMin":-180,"yMax":650,"xMax":1752},"resolution":1000,"original_font_information":{"format":0,"copyright":"Digitized data copyright (C) 1991-1996 The Monotype Corporation. All rights reserved. Impact is a trademark of Stephenson Blake (Holdings) Ltd.","fontFamily":"Impact","fontSubfamily":"Regular","uniqueID":"Impact - 1992","fullName":"Impact","version":"Version 2.35","postScriptName":"Impact","trademark":"Impact is a trademark of Stephenson Blake (Holdings) Ltd.","manufacturer":"Monotype Typography, Inc.","designer":"Geoffrey Lee","description":"1965. Designed for the Stephenson Blake type foundry. A very heavy, narrow, sans serif face intended for use in newspapers, for headlines and in advertisements. Aptly named, this face has a very large \\"x\\" height with short ascenders and descenders.","manufacturerURL":"http://www.monotype.com/html/mtname/ms_welcome.html","designerURL":"http://www.monotype.com/html/designer/des_index.html","licence":"NOTIFICATION OF LICENSE AGREEMENT\\r\\n\\r\\nThis typeface is the property of Monotype Typography and its use by you is covered under the terms of a license agreement. You have obtained this typeface software either directly from Monotype or together with software distributed by one of Monotype’s licensees.\\r\\n\\r\\nThis software is a valuable asset of Monotype. Unless you have entered into a specific license agreement granting you additional rights, your use of this software is limited to your workstation for your own publishing use. You may not copy or distribute this software.\\r\\n\\r\\nIf you have any question concerning your rights you should review the license agreement you received with the software or contact Monotype for a copy of the license agreement.\\r\\n\\r\\nMonotype can be contacted at:\\r\\n\\r\\nUSA 847-718-0400  UK 44(0)1737 765959\\r\\n\\r\\nFor license terms and usage rights, please visit our web site at www.monotype.com/html/type/license.html\\r\\n \\r\\nLizenzbedingungen und Nutzungsrechte finden Sie auf unserer Webseite www.monotype.com/html/type/license.html\\r\\n\\r\\nPour plus d\'informations concernant les droits d\'utilisation et les questions contractuelles, veuillez consultez notre site www.monotype.com/html/type/license.html\\r\\n\\r\\nPara obtener información acerca de los términos de licencia y los derechos de uso, visite nuestro sitio en el Web en www.monotype.com/html/type/license.html\\r\\n\\r\\nPer le condizioni contrattuali ed i diritti d\'uso, visitate il nostro sito web all\'indirizzo www.monotype.com/html/type/license.html\\r\\n","licenceURL":"http://www.monotype.com/html/type/license.html"},"cssFontWeight":"normal","cssFontStyle":"normal"}');var e=r.t(t,2);const i="152",n=1,s=2,a=3,o=100,l=0,h=1,c=2,u=0,d=1,p=2,m=3,f=4,g=5,v=301,x=302,_=306,q=1e3,y=1001,b=1002,w=1003,M=1005,S=1006,E=1008,T=1009,A=1014,C=1015,R=1016,P=1020,z=1023,L=1026,U=1027,D=33776,I=33777,N=33778,O=33779,F=36492,B=2300,k=2301,V=2302,H=3e3,G=3001,W="srgb",j="srgb-linear",X="display-p3",Y=7680,K="300 es",Z=1035;class J{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const i=this._listeners;void 0===i[t]&&(i[t]=[]),-1===i[t].indexOf(e)&&i[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;const i=this._listeners;return void 0!==i[t]&&-1!==i[t].indexOf(e)}removeEventListener(t,e){if(void 0===this._listeners)return;const i=this._listeners[t];if(void 0!==i){const t=i.indexOf(e);-1!==t&&i.splice(t,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const e=this._listeners[t.type];if(void 0!==e){t.target=this;const i=e.slice(0);for(let e=0,n=i.length;e<n;e++)i[e].call(this,t);t.target=null}}}const $=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],Q=Math.PI/180,tt=180/Math.PI;function et(){const t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,i=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return($[255&t]+$[t>>8&255]+$[t>>16&255]+$[t>>24&255]+"-"+$[255&e]+$[e>>8&255]+"-"+$[e>>16&15|64]+$[e>>24&255]+"-"+$[63&i|128]+$[i>>8&255]+"-"+$[i>>16&255]+$[i>>24&255]+$[255&n]+$[n>>8&255]+$[n>>16&255]+$[n>>24&255]).toLowerCase()}function it(t,e,i){return Math.max(e,Math.min(i,t))}function nt(t,e,i){return(1-i)*t+i*e}function rt(t){return 0==(t&t-1)&&0!==t}function st(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function at(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function ot(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return Math.round(65535*t);case Uint8Array:return Math.round(255*t);case Int16Array:return Math.round(32767*t);case Int8Array:return Math.round(127*t);default:throw new Error("Invalid component type.")}}class lt{constructor(t=0,e=0){lt.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,i=this.y,n=t.elements;return this.x=n[0]*e+n[3]*i+n[6],this.y=n[1]*e+n[4]*i+n[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const i=this.dot(t)/e;return Math.acos(it(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,i=this.y-t.y;return e*e+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const i=Math.cos(e),n=Math.sin(e),r=this.x-t.x,s=this.y-t.y;return this.x=r*i-s*n+t.x,this.y=r*n+s*i+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class ht{constructor(){ht.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(t,e,i,n,r,s,a,o,l){const h=this.elements;return h[0]=t,h[1]=n,h[2]=a,h[3]=e,h[4]=r,h[5]=o,h[6]=i,h[7]=s,h[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],this}extractBasis(t,e,i){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const i=t.elements,n=e.elements,r=this.elements,s=i[0],a=i[3],o=i[6],l=i[1],h=i[4],c=i[7],u=i[2],d=i[5],p=i[8],m=n[0],f=n[3],g=n[6],v=n[1],x=n[4],_=n[7],q=n[2],y=n[5],b=n[8];return r[0]=s*m+a*v+o*q,r[3]=s*f+a*x+o*y,r[6]=s*g+a*_+o*b,r[1]=l*m+h*v+c*q,r[4]=l*f+h*x+c*y,r[7]=l*g+h*_+c*b,r[2]=u*m+d*v+p*q,r[5]=u*f+d*x+p*y,r[8]=u*g+d*_+p*b,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],i=t[1],n=t[2],r=t[3],s=t[4],a=t[5],o=t[6],l=t[7],h=t[8];return e*s*h-e*a*l-i*r*h+i*a*o+n*r*l-n*s*o}invert(){const t=this.elements,e=t[0],i=t[1],n=t[2],r=t[3],s=t[4],a=t[5],o=t[6],l=t[7],h=t[8],c=h*s-a*l,u=a*o-h*r,d=l*r-s*o,p=e*c+i*u+n*d;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const m=1/p;return t[0]=c*m,t[1]=(n*l-h*i)*m,t[2]=(a*i-n*s)*m,t[3]=u*m,t[4]=(h*e-n*o)*m,t[5]=(n*r-a*e)*m,t[6]=d*m,t[7]=(i*o-l*e)*m,t[8]=(s*e-i*r)*m,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,i,n,r,s,a){const o=Math.cos(r),l=Math.sin(r);return this.set(i*o,i*l,-i*(o*s+l*a)+s+t,-n*l,n*o,-n*(-l*s+o*a)+a+e,0,0,1),this}scale(t,e){return this.premultiply(ct.makeScale(t,e)),this}rotate(t){return this.premultiply(ct.makeRotation(-t)),this}translate(t,e){return this.premultiply(ct.makeTranslation(t,e)),this}makeTranslation(t,e){return this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,i,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){const e=this.elements,i=t.elements;for(let t=0;t<9;t++)if(e[t]!==i[t])return!1;return!0}fromArray(t,e=0){for(let i=0;i<9;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){const i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}const ct=new ht;function ut(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}function dt(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const pt={};function mt(t){t in pt||(pt[t]=!0,console.warn(t))}function ft(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function gt(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}const vt=(new ht).fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),xt=(new ht).fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]),_t={[j]:t=>t,[W]:t=>t.convertSRGBToLinear(),[X]:function(t){return t.convertSRGBToLinear().applyMatrix3(xt)}},qt={[j]:t=>t,[W]:t=>t.convertLinearToSRGB(),[X]:function(t){return t.applyMatrix3(vt).convertLinearToSRGB()}},yt={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(t){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!t},get workingColorSpace(){return j},set workingColorSpace(t){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(t,e,i){if(!1===this.enabled||e===i||!e||!i)return t;const n=_t[e],r=qt[i];if(void 0===n||void 0===r)throw new Error(`Unsupported color space conversion, "${e}" to "${i}".`);return r(n(t))},fromWorkingColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this.workingColorSpace)}};let bt;class wt{static getDataURL(t){if(/^data:/i.test(t.src))return t.src;if("undefined"==typeof HTMLCanvasElement)return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===bt&&(bt=dt("canvas")),bt.width=t.width,bt.height=t.height;const i=bt.getContext("2d");t instanceof ImageData?i.putImageData(t,0,0):i.drawImage(t,0,0,t.width,t.height),e=bt}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){const e=dt("canvas");e.width=t.width,e.height=t.height;const i=e.getContext("2d");i.drawImage(t,0,0,t.width,t.height);const n=i.getImageData(0,0,t.width,t.height),r=n.data;for(let t=0;t<r.length;t++)r[t]=255*ft(r[t]/255);return i.putImageData(n,0,0),e}if(t.data){const e=t.data.slice(0);for(let t=0;t<e.length;t++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[t]=Math.floor(255*ft(e[t]/255)):e[t]=ft(e[t]);return{data:e,width:t.width,height:t.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}class Mt{constructor(t=null){this.isSource=!0,this.uuid=et(),this.data=t,this.version=0}set needsUpdate(t){!0===t&&this.version++}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.images[this.uuid])return t.images[this.uuid];const i={uuid:this.uuid,url:""},n=this.data;if(null!==n){let t;if(Array.isArray(n)){t=[];for(let e=0,i=n.length;e<i;e++)n[e].isDataTexture?t.push(St(n[e].image)):t.push(St(n[e]))}else t=St(n);i.url=t}return e||(t.images[this.uuid]=i),i}}function St(t){return"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?wt.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Et=0;class Tt extends J{constructor(t=Tt.DEFAULT_IMAGE,e=Tt.DEFAULT_MAPPING,i=1001,n=1001,r=1006,s=1008,a=1023,o=1009,l=Tt.DEFAULT_ANISOTROPY,h=""){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Et++}),this.uuid=et(),this.name="",this.source=new Mt(t),this.mipmaps=[],this.mapping=e,this.channel=0,this.wrapS=i,this.wrapT=n,this.magFilter=r,this.minFilter=s,this.anisotropy=l,this.format=a,this.internalFormat=null,this.type=o,this.offset=new lt(0,0),this.repeat=new lt(1,1),this.center=new lt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new ht,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,"string"==typeof h?this.colorSpace=h:(mt("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=h===G?W:""),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),e||(t.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case q:t.x=t.x-Math.floor(t.x);break;case y:t.x=t.x<0?0:1;break;case b:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case q:t.y=t.y-Math.floor(t.y);break;case y:t.y=t.y<0?0:1;break;case b:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return mt("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===W?G:H}set encoding(t){mt("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=t===G?W:""}}Tt.DEFAULT_IMAGE=null,Tt.DEFAULT_MAPPING=300,Tt.DEFAULT_ANISOTROPY=1;class At{constructor(t=0,e=0,i=0,n=1){At.prototype.isVector4=!0,this.x=t,this.y=e,this.z=i,this.w=n}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,i,n){return this.x=t,this.y=e,this.z=i,this.w=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,i=this.y,n=this.z,r=this.w,s=t.elements;return this.x=s[0]*e+s[4]*i+s[8]*n+s[12]*r,this.y=s[1]*e+s[5]*i+s[9]*n+s[13]*r,this.z=s[2]*e+s[6]*i+s[10]*n+s[14]*r,this.w=s[3]*e+s[7]*i+s[11]*n+s[15]*r,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,i,n,r;const s=.01,a=.1,o=t.elements,l=o[0],h=o[4],c=o[8],u=o[1],d=o[5],p=o[9],m=o[2],f=o[6],g=o[10];if(Math.abs(h-u)<s&&Math.abs(c-m)<s&&Math.abs(p-f)<s){if(Math.abs(h+u)<a&&Math.abs(c+m)<a&&Math.abs(p+f)<a&&Math.abs(l+d+g-3)<a)return this.set(1,0,0,0),this;e=Math.PI;const t=(l+1)/2,o=(d+1)/2,v=(g+1)/2,x=(h+u)/4,_=(c+m)/4,q=(p+f)/4;return t>o&&t>v?t<s?(i=0,n=.707106781,r=.707106781):(i=Math.sqrt(t),n=x/i,r=_/i):o>v?o<s?(i=.707106781,n=0,r=.707106781):(n=Math.sqrt(o),i=x/n,r=q/n):v<s?(i=.707106781,n=.707106781,r=0):(r=Math.sqrt(v),i=_/r,n=q/r),this.set(i,n,r,e),this}let v=Math.sqrt((f-p)*(f-p)+(c-m)*(c-m)+(u-h)*(u-h));return Math.abs(v)<.001&&(v=1),this.x=(f-p)/v,this.y=(c-m)/v,this.z=(u-h)/v,this.w=Math.acos((l+d+g-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this.w=t.w+(e.w-t.w)*i,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Ct extends J{constructor(t=1,e=1,i={}){super(),this.isWebGLRenderTarget=!0,this.width=t,this.height=e,this.depth=1,this.scissor=new At(0,0,t,e),this.scissorTest=!1,this.viewport=new At(0,0,t,e);const n={width:t,height:e,depth:1};void 0!==i.encoding&&(mt("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),i.colorSpace=i.encoding===G?W:""),this.texture=new Tt(n,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,this.texture.internalFormat=void 0!==i.internalFormat?i.internalFormat:null,this.texture.minFilter=void 0!==i.minFilter?i.minFilter:S,this.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,this.stencilBuffer=void 0!==i.stencilBuffer&&i.stencilBuffer,this.depthTexture=void 0!==i.depthTexture?i.depthTexture:null,this.samples=void 0!==i.samples?i.samples:0}setSize(t,e,i=1){this.width===t&&this.height===e&&this.depth===i||(this.width=t,this.height=e,this.depth=i,this.texture.image.width=t,this.texture.image.height=e,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return(new this.constructor).copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.isRenderTargetTexture=!0;const e=Object.assign({},t.texture.image);return this.texture.source=new Mt(e),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Rt extends Tt{constructor(t=null,e=1,i=1,n=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:i,depth:n},this.magFilter=w,this.minFilter=w,this.wrapR=y,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Pt extends Tt{constructor(t=null,e=1,i=1,n=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:i,depth:n},this.magFilter=w,this.minFilter=w,this.wrapR=y,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class zt extends Ct{constructor(t=1,e=1,i=1,n={}){super(t,e,n),this.isWebGLMultipleRenderTargets=!0;const r=this.texture;this.texture=[];for(let t=0;t<i;t++)this.texture[t]=r.clone(),this.texture[t].isRenderTargetTexture=!0}setSize(t,e,i=1){if(this.width!==t||this.height!==e||this.depth!==i){this.width=t,this.height=e,this.depth=i;for(let n=0,r=this.texture.length;n<r;n++)this.texture[n].image.width=t,this.texture[n].image.height=e,this.texture[n].image.depth=i;this.dispose()}return this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e),this}copy(t){this.dispose(),this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.texture.length=0;for(let e=0,i=t.texture.length;e<i;e++)this.texture[e]=t.texture[e].clone(),this.texture[e].isRenderTargetTexture=!0;return this}}class Lt{constructor(t=0,e=0,i=0,n=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=i,this._w=n}static slerpFlat(t,e,i,n,r,s,a){let o=i[n+0],l=i[n+1],h=i[n+2],c=i[n+3];const u=r[s+0],d=r[s+1],p=r[s+2],m=r[s+3];if(0===a)return t[e+0]=o,t[e+1]=l,t[e+2]=h,void(t[e+3]=c);if(1===a)return t[e+0]=u,t[e+1]=d,t[e+2]=p,void(t[e+3]=m);if(c!==m||o!==u||l!==d||h!==p){let t=1-a;const e=o*u+l*d+h*p+c*m,i=e>=0?1:-1,n=1-e*e;if(n>Number.EPSILON){const r=Math.sqrt(n),s=Math.atan2(r,e*i);t=Math.sin(t*s)/r,a=Math.sin(a*s)/r}const r=a*i;if(o=o*t+u*r,l=l*t+d*r,h=h*t+p*r,c=c*t+m*r,t===1-a){const t=1/Math.sqrt(o*o+l*l+h*h+c*c);o*=t,l*=t,h*=t,c*=t}}t[e]=o,t[e+1]=l,t[e+2]=h,t[e+3]=c}static multiplyQuaternionsFlat(t,e,i,n,r,s){const a=i[n],o=i[n+1],l=i[n+2],h=i[n+3],c=r[s],u=r[s+1],d=r[s+2],p=r[s+3];return t[e]=a*p+h*c+o*d-l*u,t[e+1]=o*p+h*u+l*c-a*d,t[e+2]=l*p+h*d+a*u-o*c,t[e+3]=h*p-a*c-o*u-l*d,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,i,n){return this._x=t,this._y=e,this._z=i,this._w=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){const i=t._x,n=t._y,r=t._z,s=t._order,a=Math.cos,o=Math.sin,l=a(i/2),h=a(n/2),c=a(r/2),u=o(i/2),d=o(n/2),p=o(r/2);switch(s){case"XYZ":this._x=u*h*c+l*d*p,this._y=l*d*c-u*h*p,this._z=l*h*p+u*d*c,this._w=l*h*c-u*d*p;break;case"YXZ":this._x=u*h*c+l*d*p,this._y=l*d*c-u*h*p,this._z=l*h*p-u*d*c,this._w=l*h*c+u*d*p;break;case"ZXY":this._x=u*h*c-l*d*p,this._y=l*d*c+u*h*p,this._z=l*h*p+u*d*c,this._w=l*h*c-u*d*p;break;case"ZYX":this._x=u*h*c-l*d*p,this._y=l*d*c+u*h*p,this._z=l*h*p-u*d*c,this._w=l*h*c+u*d*p;break;case"YZX":this._x=u*h*c+l*d*p,this._y=l*d*c+u*h*p,this._z=l*h*p-u*d*c,this._w=l*h*c-u*d*p;break;case"XZY":this._x=u*h*c-l*d*p,this._y=l*d*c-u*h*p,this._z=l*h*p+u*d*c,this._w=l*h*c+u*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return!1!==e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const i=e/2,n=Math.sin(i);return this._x=t.x*n,this._y=t.y*n,this._z=t.z*n,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,i=e[0],n=e[4],r=e[8],s=e[1],a=e[5],o=e[9],l=e[2],h=e[6],c=e[10],u=i+a+c;if(u>0){const t=.5/Math.sqrt(u+1);this._w=.25/t,this._x=(h-o)*t,this._y=(r-l)*t,this._z=(s-n)*t}else if(i>a&&i>c){const t=2*Math.sqrt(1+i-a-c);this._w=(h-o)/t,this._x=.25*t,this._y=(n+s)/t,this._z=(r+l)/t}else if(a>c){const t=2*Math.sqrt(1+a-i-c);this._w=(r-l)/t,this._x=(n+s)/t,this._y=.25*t,this._z=(o+h)/t}else{const t=2*Math.sqrt(1+c-i-a);this._w=(s-n)/t,this._x=(r+l)/t,this._y=(o+h)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let i=t.dot(e)+1;return i<Number.EPSILON?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=i):(this._x=0,this._y=-t.z,this._z=t.y,this._w=i)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=i),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(it(this.dot(t),-1,1)))}rotateTowards(t,e){const i=this.angleTo(t);if(0===i)return this;const n=Math.min(1,e/i);return this.slerp(t,n),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const i=t._x,n=t._y,r=t._z,s=t._w,a=e._x,o=e._y,l=e._z,h=e._w;return this._x=i*h+s*a+n*l-r*o,this._y=n*h+s*o+r*a-i*l,this._z=r*h+s*l+i*o-n*a,this._w=s*h-i*a-n*o-r*l,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const i=this._x,n=this._y,r=this._z,s=this._w;let a=s*t._w+i*t._x+n*t._y+r*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=s,this._x=i,this._y=n,this._z=r,this;const o=1-a*a;if(o<=Number.EPSILON){const t=1-e;return this._w=t*s+e*this._w,this._x=t*i+e*this._x,this._y=t*n+e*this._y,this._z=t*r+e*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(o),h=Math.atan2(l,a),c=Math.sin((1-e)*h)/l,u=Math.sin(e*h)/l;return this._w=s*c+this._w*u,this._x=i*c+this._x*u,this._y=n*c+this._y*u,this._z=r*c+this._z*u,this._onChangeCallback(),this}slerpQuaternions(t,e,i){return this.copy(t).slerp(e,i)}random(){const t=Math.random(),e=Math.sqrt(1-t),i=Math.sqrt(t),n=2*Math.PI*Math.random(),r=2*Math.PI*Math.random();return this.set(e*Math.cos(n),i*Math.sin(r),i*Math.cos(r),e*Math.sin(n))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Ut{constructor(t=0,e=0,i=0){Ut.prototype.isVector3=!0,this.x=t,this.y=e,this.z=i}set(t,e,i){return void 0===i&&(i=this.z),this.x=t,this.y=e,this.z=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(It.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(It.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,i=this.y,n=this.z,r=t.elements;return this.x=r[0]*e+r[3]*i+r[6]*n,this.y=r[1]*e+r[4]*i+r[7]*n,this.z=r[2]*e+r[5]*i+r[8]*n,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,i=this.y,n=this.z,r=t.elements,s=1/(r[3]*e+r[7]*i+r[11]*n+r[15]);return this.x=(r[0]*e+r[4]*i+r[8]*n+r[12])*s,this.y=(r[1]*e+r[5]*i+r[9]*n+r[13])*s,this.z=(r[2]*e+r[6]*i+r[10]*n+r[14])*s,this}applyQuaternion(t){const e=this.x,i=this.y,n=this.z,r=t.x,s=t.y,a=t.z,o=t.w,l=o*e+s*n-a*i,h=o*i+a*e-r*n,c=o*n+r*i-s*e,u=-r*e-s*i-a*n;return this.x=l*o+u*-r+h*-a-c*-s,this.y=h*o+u*-s+c*-r-l*-a,this.z=c*o+u*-a+l*-s-h*-r,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,i=this.y,n=this.z,r=t.elements;return this.x=r[0]*e+r[4]*i+r[8]*n,this.y=r[1]*e+r[5]*i+r[9]*n,this.z=r[2]*e+r[6]*i+r[10]*n,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const i=t.x,n=t.y,r=t.z,s=e.x,a=e.y,o=e.z;return this.x=n*o-r*a,this.y=r*s-i*o,this.z=i*a-n*s,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const i=t.dot(this)/e;return this.copy(t).multiplyScalar(i)}projectOnPlane(t){return Dt.copy(this).projectOnVector(t),this.sub(Dt)}reflect(t){return this.sub(Dt.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const i=this.dot(t)/e;return Math.acos(it(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,i=this.y-t.y,n=this.z-t.z;return e*e+i*i+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,i){const n=Math.sin(e)*t;return this.x=n*Math.sin(i),this.y=Math.cos(e)*t,this.z=n*Math.cos(i),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,i){return this.x=t*Math.sin(e),this.y=i,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),n=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=i,this.z=n,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=2*(Math.random()-.5),e=Math.random()*Math.PI*2,i=Math.sqrt(1-t**2);return this.x=i*Math.cos(e),this.y=i*Math.sin(e),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Dt=new Ut,It=new Lt;class Nt{constructor(t=new Ut(1/0,1/0,1/0),e=new Ut(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e+=3)this.expandByPoint(Ft.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,i=t.count;e<i;e++)this.expandByPoint(Ft.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const i=Ft.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){if(t.updateWorldMatrix(!1,!1),void 0!==t.boundingBox)null===t.boundingBox&&t.computeBoundingBox(),Bt.copy(t.boundingBox),Bt.applyMatrix4(t.matrixWorld),this.union(Bt);else{const i=t.geometry;if(void 0!==i)if(e&&void 0!==i.attributes&&void 0!==i.attributes.position){const e=i.attributes.position;for(let i=0,n=e.count;i<n;i++)Ft.fromBufferAttribute(e,i).applyMatrix4(t.matrixWorld),this.expandByPoint(Ft)}else null===i.boundingBox&&i.computeBoundingBox(),Bt.copy(i.boundingBox),Bt.applyMatrix4(t.matrixWorld),this.union(Bt)}const i=t.children;for(let t=0,n=i.length;t<n;t++)this.expandByObject(i[t],e);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,Ft),Ft.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,i;return t.normal.x>0?(e=t.normal.x*this.min.x,i=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,i=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e<=-t.constant&&i>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(Xt),Yt.subVectors(this.max,Xt),kt.subVectors(t.a,Xt),Vt.subVectors(t.b,Xt),Ht.subVectors(t.c,Xt),Gt.subVectors(Vt,kt),Wt.subVectors(Ht,Vt),jt.subVectors(kt,Ht);let e=[0,-Gt.z,Gt.y,0,-Wt.z,Wt.y,0,-jt.z,jt.y,Gt.z,0,-Gt.x,Wt.z,0,-Wt.x,jt.z,0,-jt.x,-Gt.y,Gt.x,0,-Wt.y,Wt.x,0,-jt.y,jt.x,0];return!!Jt(e,kt,Vt,Ht,Yt)&&(e=[1,0,0,0,1,0,0,0,1],!!Jt(e,kt,Vt,Ht,Yt)&&(Kt.crossVectors(Gt,Wt),e=[Kt.x,Kt.y,Kt.z],Jt(e,kt,Vt,Ht,Yt)))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,Ft).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=.5*this.getSize(Ft).length()),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(Ot[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Ot[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Ot[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Ot[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Ot[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Ot[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Ot[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Ot[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Ot)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const Ot=[new Ut,new Ut,new Ut,new Ut,new Ut,new Ut,new Ut,new Ut],Ft=new Ut,Bt=new Nt,kt=new Ut,Vt=new Ut,Ht=new Ut,Gt=new Ut,Wt=new Ut,jt=new Ut,Xt=new Ut,Yt=new Ut,Kt=new Ut,Zt=new Ut;function Jt(t,e,i,n,r){for(let s=0,a=t.length-3;s<=a;s+=3){Zt.fromArray(t,s);const a=r.x*Math.abs(Zt.x)+r.y*Math.abs(Zt.y)+r.z*Math.abs(Zt.z),o=e.dot(Zt),l=i.dot(Zt),h=n.dot(Zt);if(Math.max(-Math.max(o,l,h),Math.min(o,l,h))>a)return!1}return!0}const $t=new Nt,Qt=new Ut,te=new Ut;class ee{constructor(t=new Ut,e=-1){this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const i=this.center;void 0!==e?i.copy(e):$t.setFromPoints(t).getCenter(i);let n=0;for(let e=0,r=t.length;e<r;e++)n=Math.max(n,i.distanceToSquared(t[e]));return this.radius=Math.sqrt(n),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const i=this.center.distanceToSquared(t);return e.copy(t),i>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;Qt.subVectors(t,this.center);const e=Qt.lengthSq();if(e>this.radius*this.radius){const t=Math.sqrt(e),i=.5*(t-this.radius);this.center.addScaledVector(Qt,i/t),this.radius+=i}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(!0===this.center.equals(t.center)?this.radius=Math.max(this.radius,t.radius):(te.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(Qt.copy(t.center).add(te)),this.expandByPoint(Qt.copy(t.center).sub(te))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const ie=new Ut,ne=new Ut,re=new Ut,se=new Ut,ae=new Ut,oe=new Ut,le=new Ut;class he{constructor(t=new Ut,e=new Ut(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,ie)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const i=e.dot(this.direction);return i<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=ie.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(ie.copy(this.origin).addScaledVector(this.direction,e),ie.distanceToSquared(t))}distanceSqToSegment(t,e,i,n){ne.copy(t).add(e).multiplyScalar(.5),re.copy(e).sub(t).normalize(),se.copy(this.origin).sub(ne);const r=.5*t.distanceTo(e),s=-this.direction.dot(re),a=se.dot(this.direction),o=-se.dot(re),l=se.lengthSq(),h=Math.abs(1-s*s);let c,u,d,p;if(h>0)if(c=s*o-a,u=s*a-o,p=r*h,c>=0)if(u>=-p)if(u<=p){const t=1/h;c*=t,u*=t,d=c*(c+s*u+2*a)+u*(s*c+u+2*o)+l}else u=r,c=Math.max(0,-(s*u+a)),d=-c*c+u*(u+2*o)+l;else u=-r,c=Math.max(0,-(s*u+a)),d=-c*c+u*(u+2*o)+l;else u<=-p?(c=Math.max(0,-(-s*r+a)),u=c>0?-r:Math.min(Math.max(-r,-o),r),d=-c*c+u*(u+2*o)+l):u<=p?(c=0,u=Math.min(Math.max(-r,-o),r),d=u*(u+2*o)+l):(c=Math.max(0,-(s*r+a)),u=c>0?r:Math.min(Math.max(-r,-o),r),d=-c*c+u*(u+2*o)+l);else u=s>0?-r:r,c=Math.max(0,-(s*u+a)),d=-c*c+u*(u+2*o)+l;return i&&i.copy(this.origin).addScaledVector(this.direction,c),n&&n.copy(ne).addScaledVector(re,u),d}intersectSphere(t,e){ie.subVectors(t.center,this.origin);const i=ie.dot(this.direction),n=ie.dot(ie)-i*i,r=t.radius*t.radius;if(n>r)return null;const s=Math.sqrt(r-n),a=i-s,o=i+s;return o<0?null:a<0?this.at(o,e):this.at(a,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const i=-(this.origin.dot(t.normal)+t.constant)/e;return i>=0?i:null}intersectPlane(t,e){const i=this.distanceToPlane(t);return null===i?null:this.at(i,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let i,n,r,s,a,o;const l=1/this.direction.x,h=1/this.direction.y,c=1/this.direction.z,u=this.origin;return l>=0?(i=(t.min.x-u.x)*l,n=(t.max.x-u.x)*l):(i=(t.max.x-u.x)*l,n=(t.min.x-u.x)*l),h>=0?(r=(t.min.y-u.y)*h,s=(t.max.y-u.y)*h):(r=(t.max.y-u.y)*h,s=(t.min.y-u.y)*h),i>s||r>n?null:((r>i||isNaN(i))&&(i=r),(s<n||isNaN(n))&&(n=s),c>=0?(a=(t.min.z-u.z)*c,o=(t.max.z-u.z)*c):(a=(t.max.z-u.z)*c,o=(t.min.z-u.z)*c),i>o||a>n?null:((a>i||i!=i)&&(i=a),(o<n||n!=n)&&(n=o),n<0?null:this.at(i>=0?i:n,e)))}intersectsBox(t){return null!==this.intersectBox(t,ie)}intersectTriangle(t,e,i,n,r){ae.subVectors(e,t),oe.subVectors(i,t),le.crossVectors(ae,oe);let s,a=this.direction.dot(le);if(a>0){if(n)return null;s=1}else{if(!(a<0))return null;s=-1,a=-a}se.subVectors(this.origin,t);const o=s*this.direction.dot(oe.crossVectors(se,oe));if(o<0)return null;const l=s*this.direction.dot(ae.cross(se));if(l<0)return null;if(o+l>a)return null;const h=-s*se.dot(le);return h<0?null:this.at(h/a,r)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class ce{constructor(){ce.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(t,e,i,n,r,s,a,o,l,h,c,u,d,p,m,f){const g=this.elements;return g[0]=t,g[4]=e,g[8]=i,g[12]=n,g[1]=r,g[5]=s,g[9]=a,g[13]=o,g[2]=l,g[6]=h,g[10]=c,g[14]=u,g[3]=d,g[7]=p,g[11]=m,g[15]=f,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new ce).fromArray(this.elements)}copy(t){const e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],this}copyPosition(t){const e=this.elements,i=t.elements;return e[12]=i[12],e[13]=i[13],e[14]=i[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,i=t.elements,n=1/ue.setFromMatrixColumn(t,0).length(),r=1/ue.setFromMatrixColumn(t,1).length(),s=1/ue.setFromMatrixColumn(t,2).length();return e[0]=i[0]*n,e[1]=i[1]*n,e[2]=i[2]*n,e[3]=0,e[4]=i[4]*r,e[5]=i[5]*r,e[6]=i[6]*r,e[7]=0,e[8]=i[8]*s,e[9]=i[9]*s,e[10]=i[10]*s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,i=t.x,n=t.y,r=t.z,s=Math.cos(i),a=Math.sin(i),o=Math.cos(n),l=Math.sin(n),h=Math.cos(r),c=Math.sin(r);if("XYZ"===t.order){const t=s*h,i=s*c,n=a*h,r=a*c;e[0]=o*h,e[4]=-o*c,e[8]=l,e[1]=i+n*l,e[5]=t-r*l,e[9]=-a*o,e[2]=r-t*l,e[6]=n+i*l,e[10]=s*o}else if("YXZ"===t.order){const t=o*h,i=o*c,n=l*h,r=l*c;e[0]=t+r*a,e[4]=n*a-i,e[8]=s*l,e[1]=s*c,e[5]=s*h,e[9]=-a,e[2]=i*a-n,e[6]=r+t*a,e[10]=s*o}else if("ZXY"===t.order){const t=o*h,i=o*c,n=l*h,r=l*c;e[0]=t-r*a,e[4]=-s*c,e[8]=n+i*a,e[1]=i+n*a,e[5]=s*h,e[9]=r-t*a,e[2]=-s*l,e[6]=a,e[10]=s*o}else if("ZYX"===t.order){const t=s*h,i=s*c,n=a*h,r=a*c;e[0]=o*h,e[4]=n*l-i,e[8]=t*l+r,e[1]=o*c,e[5]=r*l+t,e[9]=i*l-n,e[2]=-l,e[6]=a*o,e[10]=s*o}else if("YZX"===t.order){const t=s*o,i=s*l,n=a*o,r=a*l;e[0]=o*h,e[4]=r-t*c,e[8]=n*c+i,e[1]=c,e[5]=s*h,e[9]=-a*h,e[2]=-l*h,e[6]=i*c+n,e[10]=t-r*c}else if("XZY"===t.order){const t=s*o,i=s*l,n=a*o,r=a*l;e[0]=o*h,e[4]=-c,e[8]=l*h,e[1]=t*c+r,e[5]=s*h,e[9]=i*c-n,e[2]=n*c-i,e[6]=a*h,e[10]=r*c+t}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(pe,t,me)}lookAt(t,e,i){const n=this.elements;return ve.subVectors(t,e),0===ve.lengthSq()&&(ve.z=1),ve.normalize(),fe.crossVectors(i,ve),0===fe.lengthSq()&&(1===Math.abs(i.z)?ve.x+=1e-4:ve.z+=1e-4,ve.normalize(),fe.crossVectors(i,ve)),fe.normalize(),ge.crossVectors(ve,fe),n[0]=fe.x,n[4]=ge.x,n[8]=ve.x,n[1]=fe.y,n[5]=ge.y,n[9]=ve.y,n[2]=fe.z,n[6]=ge.z,n[10]=ve.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const i=t.elements,n=e.elements,r=this.elements,s=i[0],a=i[4],o=i[8],l=i[12],h=i[1],c=i[5],u=i[9],d=i[13],p=i[2],m=i[6],f=i[10],g=i[14],v=i[3],x=i[7],_=i[11],q=i[15],y=n[0],b=n[4],w=n[8],M=n[12],S=n[1],E=n[5],T=n[9],A=n[13],C=n[2],R=n[6],P=n[10],z=n[14],L=n[3],U=n[7],D=n[11],I=n[15];return r[0]=s*y+a*S+o*C+l*L,r[4]=s*b+a*E+o*R+l*U,r[8]=s*w+a*T+o*P+l*D,r[12]=s*M+a*A+o*z+l*I,r[1]=h*y+c*S+u*C+d*L,r[5]=h*b+c*E+u*R+d*U,r[9]=h*w+c*T+u*P+d*D,r[13]=h*M+c*A+u*z+d*I,r[2]=p*y+m*S+f*C+g*L,r[6]=p*b+m*E+f*R+g*U,r[10]=p*w+m*T+f*P+g*D,r[14]=p*M+m*A+f*z+g*I,r[3]=v*y+x*S+_*C+q*L,r[7]=v*b+x*E+_*R+q*U,r[11]=v*w+x*T+_*P+q*D,r[15]=v*M+x*A+_*z+q*I,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],i=t[4],n=t[8],r=t[12],s=t[1],a=t[5],o=t[9],l=t[13],h=t[2],c=t[6],u=t[10],d=t[14];return t[3]*(+r*o*c-n*l*c-r*a*u+i*l*u+n*a*d-i*o*d)+t[7]*(+e*o*d-e*l*u+r*s*u-n*s*d+n*l*h-r*o*h)+t[11]*(+e*l*c-e*a*d-r*s*c+i*s*d+r*a*h-i*l*h)+t[15]*(-n*a*h-e*o*c+e*a*u+n*s*c-i*s*u+i*o*h)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,i){const n=this.elements;return t.isVector3?(n[12]=t.x,n[13]=t.y,n[14]=t.z):(n[12]=t,n[13]=e,n[14]=i),this}invert(){const t=this.elements,e=t[0],i=t[1],n=t[2],r=t[3],s=t[4],a=t[5],o=t[6],l=t[7],h=t[8],c=t[9],u=t[10],d=t[11],p=t[12],m=t[13],f=t[14],g=t[15],v=c*f*l-m*u*l+m*o*d-a*f*d-c*o*g+a*u*g,x=p*u*l-h*f*l-p*o*d+s*f*d+h*o*g-s*u*g,_=h*m*l-p*c*l+p*a*d-s*m*d-h*a*g+s*c*g,q=p*c*o-h*m*o-p*a*u+s*m*u+h*a*f-s*c*f,y=e*v+i*x+n*_+r*q;if(0===y)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const b=1/y;return t[0]=v*b,t[1]=(m*u*r-c*f*r-m*n*d+i*f*d+c*n*g-i*u*g)*b,t[2]=(a*f*r-m*o*r+m*n*l-i*f*l-a*n*g+i*o*g)*b,t[3]=(c*o*r-a*u*r-c*n*l+i*u*l+a*n*d-i*o*d)*b,t[4]=x*b,t[5]=(h*f*r-p*u*r+p*n*d-e*f*d-h*n*g+e*u*g)*b,t[6]=(p*o*r-s*f*r-p*n*l+e*f*l+s*n*g-e*o*g)*b,t[7]=(s*u*r-h*o*r+h*n*l-e*u*l-s*n*d+e*o*d)*b,t[8]=_*b,t[9]=(p*c*r-h*m*r-p*i*d+e*m*d+h*i*g-e*c*g)*b,t[10]=(s*m*r-p*a*r+p*i*l-e*m*l-s*i*g+e*a*g)*b,t[11]=(h*a*r-s*c*r-h*i*l+e*c*l+s*i*d-e*a*d)*b,t[12]=q*b,t[13]=(h*m*n-p*c*n+p*i*u-e*m*u-h*i*f+e*c*f)*b,t[14]=(p*a*n-s*m*n-p*i*o+e*m*o+s*i*f-e*a*f)*b,t[15]=(s*c*n-h*a*n+h*i*o-e*c*o-s*i*u+e*a*u)*b,this}scale(t){const e=this.elements,i=t.x,n=t.y,r=t.z;return e[0]*=i,e[4]*=n,e[8]*=r,e[1]*=i,e[5]*=n,e[9]*=r,e[2]*=i,e[6]*=n,e[10]*=r,e[3]*=i,e[7]*=n,e[11]*=r,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],n=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,i,n))}makeTranslation(t,e,i){return this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const i=Math.cos(e),n=Math.sin(e),r=1-i,s=t.x,a=t.y,o=t.z,l=r*s,h=r*a;return this.set(l*s+i,l*a-n*o,l*o+n*a,0,l*a+n*o,h*a+i,h*o-n*s,0,l*o-n*a,h*o+n*s,r*o*o+i,0,0,0,0,1),this}makeScale(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this}makeShear(t,e,i,n,r,s){return this.set(1,i,r,0,t,1,s,0,e,n,1,0,0,0,0,1),this}compose(t,e,i){const n=this.elements,r=e._x,s=e._y,a=e._z,o=e._w,l=r+r,h=s+s,c=a+a,u=r*l,d=r*h,p=r*c,m=s*h,f=s*c,g=a*c,v=o*l,x=o*h,_=o*c,q=i.x,y=i.y,b=i.z;return n[0]=(1-(m+g))*q,n[1]=(d+_)*q,n[2]=(p-x)*q,n[3]=0,n[4]=(d-_)*y,n[5]=(1-(u+g))*y,n[6]=(f+v)*y,n[7]=0,n[8]=(p+x)*b,n[9]=(f-v)*b,n[10]=(1-(u+m))*b,n[11]=0,n[12]=t.x,n[13]=t.y,n[14]=t.z,n[15]=1,this}decompose(t,e,i){const n=this.elements;let r=ue.set(n[0],n[1],n[2]).length();const s=ue.set(n[4],n[5],n[6]).length(),a=ue.set(n[8],n[9],n[10]).length();this.determinant()<0&&(r=-r),t.x=n[12],t.y=n[13],t.z=n[14],de.copy(this);const o=1/r,l=1/s,h=1/a;return de.elements[0]*=o,de.elements[1]*=o,de.elements[2]*=o,de.elements[4]*=l,de.elements[5]*=l,de.elements[6]*=l,de.elements[8]*=h,de.elements[9]*=h,de.elements[10]*=h,e.setFromRotationMatrix(de),i.x=r,i.y=s,i.z=a,this}makePerspective(t,e,i,n,r,s){const a=this.elements,o=2*r/(e-t),l=2*r/(i-n),h=(e+t)/(e-t),c=(i+n)/(i-n),u=-(s+r)/(s-r),d=-2*s*r/(s-r);return a[0]=o,a[4]=0,a[8]=h,a[12]=0,a[1]=0,a[5]=l,a[9]=c,a[13]=0,a[2]=0,a[6]=0,a[10]=u,a[14]=d,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(t,e,i,n,r,s){const a=this.elements,o=1/(e-t),l=1/(i-n),h=1/(s-r),c=(e+t)*o,u=(i+n)*l,d=(s+r)*h;return a[0]=2*o,a[4]=0,a[8]=0,a[12]=-c,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-u,a[2]=0,a[6]=0,a[10]=-2*h,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(t){const e=this.elements,i=t.elements;for(let t=0;t<16;t++)if(e[t]!==i[t])return!1;return!0}fromArray(t,e=0){for(let i=0;i<16;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){const i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}}const ue=new Ut,de=new ce,pe=new Ut(0,0,0),me=new Ut(1,1,1),fe=new Ut,ge=new Ut,ve=new Ut,xe=new ce,_e=new Lt;class qe{constructor(t=0,e=0,i=0,n=qe.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=e,this._z=i,this._order=n}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,i,n=this._order){return this._x=t,this._y=e,this._z=i,this._order=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,i=!0){const n=t.elements,r=n[0],s=n[4],a=n[8],o=n[1],l=n[5],h=n[9],c=n[2],u=n[6],d=n[10];switch(e){case"XYZ":this._y=Math.asin(it(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-h,d),this._z=Math.atan2(-s,r)):(this._x=Math.atan2(u,l),this._z=0);break;case"YXZ":this._x=Math.asin(-it(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(a,d),this._z=Math.atan2(o,l)):(this._y=Math.atan2(-c,r),this._z=0);break;case"ZXY":this._x=Math.asin(it(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(-c,d),this._z=Math.atan2(-s,l)):(this._y=0,this._z=Math.atan2(o,r));break;case"ZYX":this._y=Math.asin(-it(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(u,d),this._z=Math.atan2(o,r)):(this._x=0,this._z=Math.atan2(-s,l));break;case"YZX":this._z=Math.asin(it(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-h,l),this._y=Math.atan2(-c,r)):(this._x=0,this._y=Math.atan2(a,d));break;case"XZY":this._z=Math.asin(-it(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(u,l),this._y=Math.atan2(a,r)):(this._x=Math.atan2(-h,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!0===i&&this._onChangeCallback(),this}setFromQuaternion(t,e,i){return xe.makeRotationFromQuaternion(t),this.setFromRotationMatrix(xe,e,i)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return _e.setFromEuler(this),this.setFromQuaternion(_e,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}qe.DEFAULT_ORDER="XYZ";class ye{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!=(this.mask&t.mask)}isEnabled(t){return 0!=(this.mask&(1<<t|0))}}let be=0;const we=new Ut,Me=new Lt,Se=new ce,Ee=new Ut,Te=new Ut,Ae=new Ut,Ce=new Lt,Re=new Ut(1,0,0),Pe=new Ut(0,1,0),ze=new Ut(0,0,1),Le={type:"added"},Ue={type:"removed"};class De extends J{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:be++}),this.uuid=et(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=De.DEFAULT_UP.clone();const t=new Ut,e=new qe,i=new Lt,n=new Ut(1,1,1);e._onChange((function(){i.setFromEuler(e,!1)})),i._onChange((function(){e.setFromQuaternion(i,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:n},modelViewMatrix:{value:new ce},normalMatrix:{value:new ht}}),this.matrix=new ce,this.matrixWorld=new ce,this.matrixAutoUpdate=De.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=De.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new ye,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return Me.setFromAxisAngle(t,e),this.quaternion.multiply(Me),this}rotateOnWorldAxis(t,e){return Me.setFromAxisAngle(t,e),this.quaternion.premultiply(Me),this}rotateX(t){return this.rotateOnAxis(Re,t)}rotateY(t){return this.rotateOnAxis(Pe,t)}rotateZ(t){return this.rotateOnAxis(ze,t)}translateOnAxis(t,e){return we.copy(t).applyQuaternion(this.quaternion),this.position.add(we.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(Re,t)}translateY(t){return this.translateOnAxis(Pe,t)}translateZ(t){return this.translateOnAxis(ze,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Se.copy(this.matrixWorld).invert())}lookAt(t,e,i){t.isVector3?Ee.copy(t):Ee.set(t,e,i);const n=this.parent;this.updateWorldMatrix(!0,!1),Te.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Se.lookAt(Te,Ee,this.up):Se.lookAt(Ee,Te,this.up),this.quaternion.setFromRotationMatrix(Se),n&&(Se.extractRotation(n.matrixWorld),Me.setFromRotationMatrix(Se),this.quaternion.premultiply(Me.invert()))}add(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(Le)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const e=this.children.indexOf(t);return-1!==e&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(Ue)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const e=this.children[t];e.parent=null,e.dispatchEvent(Ue)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),Se.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Se.multiply(t.parent.matrixWorld)),t.applyMatrix4(Se),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let i=0,n=this.children.length;i<n;i++){const n=this.children[i].getObjectByProperty(t,e);if(void 0!==n)return n}}getObjectsByProperty(t,e){let i=[];this[t]===e&&i.push(this);for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n].getObjectsByProperty(t,e);r.length>0&&(i=i.concat(r))}return i}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Te,t,Ae),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Te,Ce,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let i=0,n=e.length;i<n;i++)e[i].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const e=this.children;for(let i=0,n=e.length;i<n;i++)e[i].traverseVisible(t)}traverseAncestors(t){const e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let i=0,n=e.length;i<n;i++){const n=e[i];!0!==n.matrixWorldAutoUpdate&&!0!==t||n.updateMatrixWorld(t)}}updateWorldMatrix(t,e){const i=this.parent;if(!0===t&&null!==i&&!0===i.matrixWorldAutoUpdate&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e){const t=this.children;for(let e=0,i=t.length;e<i;e++){const i=t[e];!0===i.matrixWorldAutoUpdate&&i.updateWorldMatrix(!1,!0)}}}toJSON(t){const e=void 0===t||"string"==typeof t,i={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const n={};function r(e,i){return void 0===e[i.uuid]&&(e[i.uuid]=i.toJSON(t)),i.uuid}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),!0===this.castShadow&&(n.castShadow=!0),!0===this.receiveShadow&&(n.receiveShadow=!0),!1===this.visible&&(n.visible=!1),!1===this.frustumCulled&&(n.frustumCulled=!1),0!==this.renderOrder&&(n.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(n.userData=this.userData),n.layers=this.layers.mask,n.matrix=this.matrix.toArray(),n.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(n.matrixAutoUpdate=!1),this.isInstancedMesh&&(n.type="InstancedMesh",n.count=this.count,n.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(n.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?n.background=this.background.toJSON():this.background.isTexture&&(n.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(n.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){n.geometry=r(t.geometries,this.geometry);const e=this.geometry.parameters;if(void 0!==e&&void 0!==e.shapes){const i=e.shapes;if(Array.isArray(i))for(let e=0,n=i.length;e<n;e++){const n=i[e];r(t.shapes,n)}else r(t.shapes,i)}}if(this.isSkinnedMesh&&(n.bindMode=this.bindMode,n.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(r(t.skeletons,this.skeleton),n.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const e=[];for(let i=0,n=this.material.length;i<n;i++)e.push(r(t.materials,this.material[i]));n.material=e}else n.material=r(t.materials,this.material);if(this.children.length>0){n.children=[];for(let e=0;e<this.children.length;e++)n.children.push(this.children[e].toJSON(t).object)}if(this.animations.length>0){n.animations=[];for(let e=0;e<this.animations.length;e++){const i=this.animations[e];n.animations.push(r(t.animations,i))}}if(e){const e=s(t.geometries),n=s(t.materials),r=s(t.textures),a=s(t.images),o=s(t.shapes),l=s(t.skeletons),h=s(t.animations),c=s(t.nodes);e.length>0&&(i.geometries=e),n.length>0&&(i.materials=n),r.length>0&&(i.textures=r),a.length>0&&(i.images=a),o.length>0&&(i.shapes=o),l.length>0&&(i.skeletons=l),h.length>0&&(i.animations=h),c.length>0&&(i.nodes=c)}return i.object=n,i;function s(t){const e=[];for(const i in t){const n=t[i];delete n.metadata,e.push(n)}return e}}clone(t){return(new this.constructor).copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(let e=0;e<t.children.length;e++){const i=t.children[e];this.add(i.clone())}return this}}De.DEFAULT_UP=new Ut(0,1,0),De.DEFAULT_MATRIX_AUTO_UPDATE=!0,De.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Ie=new Ut,Ne=new Ut,Oe=new Ut,Fe=new Ut,Be=new Ut,ke=new Ut,Ve=new Ut,He=new Ut,Ge=new Ut,We=new Ut;let je=!1;class Xe{constructor(t=new Ut,e=new Ut,i=new Ut){this.a=t,this.b=e,this.c=i}static getNormal(t,e,i,n){n.subVectors(i,e),Ie.subVectors(t,e),n.cross(Ie);const r=n.lengthSq();return r>0?n.multiplyScalar(1/Math.sqrt(r)):n.set(0,0,0)}static getBarycoord(t,e,i,n,r){Ie.subVectors(n,e),Ne.subVectors(i,e),Oe.subVectors(t,e);const s=Ie.dot(Ie),a=Ie.dot(Ne),o=Ie.dot(Oe),l=Ne.dot(Ne),h=Ne.dot(Oe),c=s*l-a*a;if(0===c)return r.set(-2,-1,-1);const u=1/c,d=(l*o-a*h)*u,p=(s*h-a*o)*u;return r.set(1-d-p,p,d)}static containsPoint(t,e,i,n){return this.getBarycoord(t,e,i,n,Fe),Fe.x>=0&&Fe.y>=0&&Fe.x+Fe.y<=1}static getUV(t,e,i,n,r,s,a,o){return!1===je&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),je=!0),this.getInterpolation(t,e,i,n,r,s,a,o)}static getInterpolation(t,e,i,n,r,s,a,o){return this.getBarycoord(t,e,i,n,Fe),o.setScalar(0),o.addScaledVector(r,Fe.x),o.addScaledVector(s,Fe.y),o.addScaledVector(a,Fe.z),o}static isFrontFacing(t,e,i,n){return Ie.subVectors(i,e),Ne.subVectors(t,e),Ie.cross(Ne).dot(n)<0}set(t,e,i){return this.a.copy(t),this.b.copy(e),this.c.copy(i),this}setFromPointsAndIndices(t,e,i,n){return this.a.copy(t[e]),this.b.copy(t[i]),this.c.copy(t[n]),this}setFromAttributeAndIndices(t,e,i,n){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,i),this.c.fromBufferAttribute(t,n),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return Ie.subVectors(this.c,this.b),Ne.subVectors(this.a,this.b),.5*Ie.cross(Ne).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return Xe.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return Xe.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,i,n,r){return!1===je&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),je=!0),Xe.getInterpolation(t,this.a,this.b,this.c,e,i,n,r)}getInterpolation(t,e,i,n,r){return Xe.getInterpolation(t,this.a,this.b,this.c,e,i,n,r)}containsPoint(t){return Xe.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return Xe.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const i=this.a,n=this.b,r=this.c;let s,a;Be.subVectors(n,i),ke.subVectors(r,i),He.subVectors(t,i);const o=Be.dot(He),l=ke.dot(He);if(o<=0&&l<=0)return e.copy(i);Ge.subVectors(t,n);const h=Be.dot(Ge),c=ke.dot(Ge);if(h>=0&&c<=h)return e.copy(n);const u=o*c-h*l;if(u<=0&&o>=0&&h<=0)return s=o/(o-h),e.copy(i).addScaledVector(Be,s);We.subVectors(t,r);const d=Be.dot(We),p=ke.dot(We);if(p>=0&&d<=p)return e.copy(r);const m=d*l-o*p;if(m<=0&&l>=0&&p<=0)return a=l/(l-p),e.copy(i).addScaledVector(ke,a);const f=h*p-d*c;if(f<=0&&c-h>=0&&d-p>=0)return Ve.subVectors(r,n),a=(c-h)/(c-h+(d-p)),e.copy(n).addScaledVector(Ve,a);const g=1/(f+m+u);return s=m*g,a=u*g,e.copy(i).addScaledVector(Be,s).addScaledVector(ke,a)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}let Ye=0;class Ke extends J{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Ye++}),this.uuid=et(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=o,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Y,this.stencilZFail=Y,this.stencilZPass=Y,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const e in t){const i=t[e];if(void 0===i){console.warn(`THREE.Material: parameter '${e}' has value of undefined.`);continue}const n=this[e];void 0!==n?n&&n.isColor?n.set(i):n&&n.isVector3&&i&&i.isVector3?n.copy(i):this[e]=i:console.warn(`THREE.Material: '${e}' is not a property of THREE.${this.type}.`)}}toJSON(t){const e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function n(t){const e=[];for(const i in t){const n=t[i];delete n.metadata,e.push(n)}return e}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),void 0!==this.sheen&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(i.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(i.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(t).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(t).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(t).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(t).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(t).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(i.combine=this.combine)),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(i.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(i.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(i.size=this.size),null!==this.shadowSide&&(i.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(i.blending=this.blending),0!==this.side&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(i.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=this.premultipliedAlpha),!0===this.forceSinglePass&&(i.forceSinglePass=this.forceSinglePass),!0===this.wireframe&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(i.flatShading=this.flatShading),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),!1===this.fog&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData),e){const e=n(t.textures),r=n(t.images);e.length>0&&(i.textures=e),r.length>0&&(i.images=r)}return i}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let i=null;if(null!==e){const t=e.length;i=new Array(t);for(let n=0;n!==t;++n)i[n]=e[n].clone()}return this.clippingPlanes=i,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}}const Ze={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Je={h:0,s:0,l:0},$e={h:0,s:0,l:0};function Qe(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+6*(e-t)*(2/3-i):t}class ti{constructor(t,e,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===e&&void 0===i?this.set(t):this.setRGB(t,e,i)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=W){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,yt.toWorkingColorSpace(this,e),this}setRGB(t,e,i,n=yt.workingColorSpace){return this.r=t,this.g=e,this.b=i,yt.toWorkingColorSpace(this,n),this}setHSL(t,e,i,n=yt.workingColorSpace){if(t=(t%(r=1)+r)%r,e=it(e,0,1),i=it(i,0,1),0===e)this.r=this.g=this.b=i;else{const n=i<=.5?i*(1+e):i+e-i*e,r=2*i-n;this.r=Qe(r,n,t+1/3),this.g=Qe(r,n,t),this.b=Qe(r,n,t-1/3)}var r;return yt.toWorkingColorSpace(this,n),this}setStyle(t,e=W){function i(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let n;if(n=/^(\w+)\(([^\)]*)\)/.exec(t)){let r;const s=n[1],a=n[2];switch(s){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,e);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,e);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,e);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(t)){const i=n[1],r=i.length;if(3===r)return this.setRGB(parseInt(i.charAt(0),16)/15,parseInt(i.charAt(1),16)/15,parseInt(i.charAt(2),16)/15,e);if(6===r)return this.setHex(parseInt(i,16),e);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,e);return this}setColorName(t,e=W){const i=Ze[t.toLowerCase()];return void 0!==i?this.setHex(i,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=ft(t.r),this.g=ft(t.g),this.b=ft(t.b),this}copyLinearToSRGB(t){return this.r=gt(t.r),this.g=gt(t.g),this.b=gt(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=W){return yt.fromWorkingColorSpace(ei.copy(this),t),65536*Math.round(it(255*ei.r,0,255))+256*Math.round(it(255*ei.g,0,255))+Math.round(it(255*ei.b,0,255))}getHexString(t=W){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=yt.workingColorSpace){yt.fromWorkingColorSpace(ei.copy(this),e);const i=ei.r,n=ei.g,r=ei.b,s=Math.max(i,n,r),a=Math.min(i,n,r);let o,l;const h=(a+s)/2;if(a===s)o=0,l=0;else{const t=s-a;switch(l=h<=.5?t/(s+a):t/(2-s-a),s){case i:o=(n-r)/t+(n<r?6:0);break;case n:o=(r-i)/t+2;break;case r:o=(i-n)/t+4}o/=6}return t.h=o,t.s=l,t.l=h,t}getRGB(t,e=yt.workingColorSpace){return yt.fromWorkingColorSpace(ei.copy(this),e),t.r=ei.r,t.g=ei.g,t.b=ei.b,t}getStyle(t=W){yt.fromWorkingColorSpace(ei.copy(this),t);const e=ei.r,i=ei.g,n=ei.b;return t!==W?`color(${t} ${e.toFixed(3)} ${i.toFixed(3)} ${n.toFixed(3)})`:`rgb(${Math.round(255*e)},${Math.round(255*i)},${Math.round(255*n)})`}offsetHSL(t,e,i){return this.getHSL(Je),Je.h+=t,Je.s+=e,Je.l+=i,this.setHSL(Je.h,Je.s,Je.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,i){return this.r=t.r+(e.r-t.r)*i,this.g=t.g+(e.g-t.g)*i,this.b=t.b+(e.b-t.b)*i,this}lerpHSL(t,e){this.getHSL(Je),t.getHSL($e);const i=nt(Je.h,$e.h,e),n=nt(Je.s,$e.s,e),r=nt(Je.l,$e.l,e);return this.setHSL(i,n,r),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const e=this.r,i=this.g,n=this.b,r=t.elements;return this.r=r[0]*e+r[3]*i+r[6]*n,this.g=r[1]*e+r[4]*i+r[7]*n,this.b=r[2]*e+r[5]*i+r[8]*n,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const ei=new ti;ti.NAMES=Ze;class ii extends Ke{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new ti(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=l,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const ni=new Ut,ri=new lt;class si{constructor(t,e,i=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=i,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}copyAt(t,e,i){t*=this.itemSize,i*=e.itemSize;for(let n=0,r=this.itemSize;n<r;n++)this.array[t+n]=e.array[i+n];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(2===this.itemSize)for(let e=0,i=this.count;e<i;e++)ri.fromBufferAttribute(this,e),ri.applyMatrix3(t),this.setXY(e,ri.x,ri.y);else if(3===this.itemSize)for(let e=0,i=this.count;e<i;e++)ni.fromBufferAttribute(this,e),ni.applyMatrix3(t),this.setXYZ(e,ni.x,ni.y,ni.z);return this}applyMatrix4(t){for(let e=0,i=this.count;e<i;e++)ni.fromBufferAttribute(this,e),ni.applyMatrix4(t),this.setXYZ(e,ni.x,ni.y,ni.z);return this}applyNormalMatrix(t){for(let e=0,i=this.count;e<i;e++)ni.fromBufferAttribute(this,e),ni.applyNormalMatrix(t),this.setXYZ(e,ni.x,ni.y,ni.z);return this}transformDirection(t){for(let e=0,i=this.count;e<i;e++)ni.fromBufferAttribute(this,e),ni.transformDirection(t),this.setXYZ(e,ni.x,ni.y,ni.z);return this}set(t,e=0){return this.array.set(t,e),this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=at(e,this.array)),e}setX(t,e){return this.normalized&&(e=ot(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=at(e,this.array)),e}setY(t,e){return this.normalized&&(e=ot(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=at(e,this.array)),e}setZ(t,e){return this.normalized&&(e=ot(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=at(e,this.array)),e}setW(t,e){return this.normalized&&(e=ot(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,i){return t*=this.itemSize,this.normalized&&(e=ot(e,this.array),i=ot(i,this.array)),this.array[t+0]=e,this.array[t+1]=i,this}setXYZ(t,e,i,n){return t*=this.itemSize,this.normalized&&(e=ot(e,this.array),i=ot(i,this.array),n=ot(n,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=n,this}setXYZW(t,e,i,n,r){return t*=this.itemSize,this.normalized&&(e=ot(e,this.array),i=ot(i,this.array),n=ot(n,this.array),r=ot(r,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=n,this.array[t+3]=r,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),35044!==this.usage&&(t.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(t.updateRange=this.updateRange),t}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class ai extends si{constructor(t,e,i){super(new Uint16Array(t),e,i)}}class oi extends si{constructor(t,e,i){super(new Uint32Array(t),e,i)}}class li extends si{constructor(t,e,i){super(new Float32Array(t),e,i)}}let hi=0;const ci=new ce,ui=new De,di=new Ut,pi=new Nt,mi=new Nt,fi=new Ut;class gi extends J{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:hi++}),this.uuid=et(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(ut(t)?oi:ai)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e,i=0){this.groups.push({start:t,count:e,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const i=this.attributes.normal;if(void 0!==i){const e=(new ht).getNormalMatrix(t);i.applyNormalMatrix(e),i.needsUpdate=!0}const n=this.attributes.tangent;return void 0!==n&&(n.transformDirection(t),n.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return ci.makeRotationFromQuaternion(t),this.applyMatrix4(ci),this}rotateX(t){return ci.makeRotationX(t),this.applyMatrix4(ci),this}rotateY(t){return ci.makeRotationY(t),this.applyMatrix4(ci),this}rotateZ(t){return ci.makeRotationZ(t),this.applyMatrix4(ci),this}translate(t,e,i){return ci.makeTranslation(t,e,i),this.applyMatrix4(ci),this}scale(t,e,i){return ci.makeScale(t,e,i),this.applyMatrix4(ci),this}lookAt(t){return ui.lookAt(t),ui.updateMatrix(),this.applyMatrix4(ui.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(di).negate(),this.translate(di.x,di.y,di.z),this}setFromPoints(t){const e=[];for(let i=0,n=t.length;i<n;i++){const n=t[i];e.push(n.x,n.y,n.z||0)}return this.setAttribute("position",new li(e,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Nt);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Ut(-1/0,-1/0,-1/0),new Ut(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let t=0,i=e.length;t<i;t++){const i=e[t];pi.setFromBufferAttribute(i),this.morphTargetsRelative?(fi.addVectors(this.boundingBox.min,pi.min),this.boundingBox.expandByPoint(fi),fi.addVectors(this.boundingBox.max,pi.max),this.boundingBox.expandByPoint(fi)):(this.boundingBox.expandByPoint(pi.min),this.boundingBox.expandByPoint(pi.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new ee);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Ut,1/0);if(t){const i=this.boundingSphere.center;if(pi.setFromBufferAttribute(t),e)for(let t=0,i=e.length;t<i;t++){const i=e[t];mi.setFromBufferAttribute(i),this.morphTargetsRelative?(fi.addVectors(pi.min,mi.min),pi.expandByPoint(fi),fi.addVectors(pi.max,mi.max),pi.expandByPoint(fi)):(pi.expandByPoint(mi.min),pi.expandByPoint(mi.max))}pi.getCenter(i);let n=0;for(let e=0,r=t.count;e<r;e++)fi.fromBufferAttribute(t,e),n=Math.max(n,i.distanceToSquared(fi));if(e)for(let r=0,s=e.length;r<s;r++){const s=e[r],a=this.morphTargetsRelative;for(let e=0,r=s.count;e<r;e++)fi.fromBufferAttribute(s,e),a&&(di.fromBufferAttribute(t,e),fi.add(di)),n=Math.max(n,i.distanceToSquared(fi))}this.boundingSphere.radius=Math.sqrt(n),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const i=t.array,n=e.position.array,r=e.normal.array,s=e.uv.array,a=n.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new si(new Float32Array(4*a),4));const o=this.getAttribute("tangent").array,l=[],h=[];for(let t=0;t<a;t++)l[t]=new Ut,h[t]=new Ut;const c=new Ut,u=new Ut,d=new Ut,p=new lt,m=new lt,f=new lt,g=new Ut,v=new Ut;function x(t,e,i){c.fromArray(n,3*t),u.fromArray(n,3*e),d.fromArray(n,3*i),p.fromArray(s,2*t),m.fromArray(s,2*e),f.fromArray(s,2*i),u.sub(c),d.sub(c),m.sub(p),f.sub(p);const r=1/(m.x*f.y-f.x*m.y);isFinite(r)&&(g.copy(u).multiplyScalar(f.y).addScaledVector(d,-m.y).multiplyScalar(r),v.copy(d).multiplyScalar(m.x).addScaledVector(u,-f.x).multiplyScalar(r),l[t].add(g),l[e].add(g),l[i].add(g),h[t].add(v),h[e].add(v),h[i].add(v))}let _=this.groups;0===_.length&&(_=[{start:0,count:i.length}]);for(let t=0,e=_.length;t<e;++t){const e=_[t],n=e.start;for(let t=n,r=n+e.count;t<r;t+=3)x(i[t+0],i[t+1],i[t+2])}const q=new Ut,y=new Ut,b=new Ut,w=new Ut;function M(t){b.fromArray(r,3*t),w.copy(b);const e=l[t];q.copy(e),q.sub(b.multiplyScalar(b.dot(e))).normalize(),y.crossVectors(w,e);const i=y.dot(h[t])<0?-1:1;o[4*t]=q.x,o[4*t+1]=q.y,o[4*t+2]=q.z,o[4*t+3]=i}for(let t=0,e=_.length;t<e;++t){const e=_[t],n=e.start;for(let t=n,r=n+e.count;t<r;t+=3)M(i[t+0]),M(i[t+1]),M(i[t+2])}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let i=this.getAttribute("normal");if(void 0===i)i=new si(new Float32Array(3*e.count),3),this.setAttribute("normal",i);else for(let t=0,e=i.count;t<e;t++)i.setXYZ(t,0,0,0);const n=new Ut,r=new Ut,s=new Ut,a=new Ut,o=new Ut,l=new Ut,h=new Ut,c=new Ut;if(t)for(let u=0,d=t.count;u<d;u+=3){const d=t.getX(u+0),p=t.getX(u+1),m=t.getX(u+2);n.fromBufferAttribute(e,d),r.fromBufferAttribute(e,p),s.fromBufferAttribute(e,m),h.subVectors(s,r),c.subVectors(n,r),h.cross(c),a.fromBufferAttribute(i,d),o.fromBufferAttribute(i,p),l.fromBufferAttribute(i,m),a.add(h),o.add(h),l.add(h),i.setXYZ(d,a.x,a.y,a.z),i.setXYZ(p,o.x,o.y,o.z),i.setXYZ(m,l.x,l.y,l.z)}else for(let t=0,a=e.count;t<a;t+=3)n.fromBufferAttribute(e,t+0),r.fromBufferAttribute(e,t+1),s.fromBufferAttribute(e,t+2),h.subVectors(s,r),c.subVectors(n,r),h.cross(c),i.setXYZ(t+0,h.x,h.y,h.z),i.setXYZ(t+1,h.x,h.y,h.z),i.setXYZ(t+2,h.x,h.y,h.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeGeometries() instead."),this}normalizeNormals(){const t=this.attributes.normal;for(let e=0,i=t.count;e<i;e++)fi.fromBufferAttribute(t,e),fi.normalize(),t.setXYZ(e,fi.x,fi.y,fi.z)}toNonIndexed(){function t(t,e){const i=t.array,n=t.itemSize,r=t.normalized,s=new i.constructor(e.length*n);let a=0,o=0;for(let r=0,l=e.length;r<l;r++){a=t.isInterleavedBufferAttribute?e[r]*t.data.stride+t.offset:e[r]*n;for(let t=0;t<n;t++)s[o++]=i[a++]}return new si(s,n,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new gi,i=this.index.array,n=this.attributes;for(const r in n){const s=t(n[r],i);e.setAttribute(r,s)}const r=this.morphAttributes;for(const n in r){const s=[],a=r[n];for(let e=0,n=a.length;e<n;e++){const n=t(a[e],i);s.push(n)}e.morphAttributes[n]=s}e.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let t=0,i=s.length;t<i;t++){const i=s[t];e.addGroup(i.start,i.count,i.materialIndex)}return e}toJSON(){const t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const e=this.parameters;for(const i in e)void 0!==e[i]&&(t[i]=e[i]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const i=this.attributes;for(const e in i){const n=i[e];t.data.attributes[e]=n.toJSON(t.data)}const n={};let r=!1;for(const e in this.morphAttributes){const i=this.morphAttributes[e],s=[];for(let e=0,n=i.length;e<n;e++){const n=i[e];s.push(n.toJSON(t.data))}s.length>0&&(n[e]=s,r=!0)}r&&(t.data.morphAttributes=n,t.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(t.data.groups=JSON.parse(JSON.stringify(s)));const a=this.boundingSphere;return null!==a&&(t.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const i=t.index;null!==i&&this.setIndex(i.clone(e));const n=t.attributes;for(const t in n){const i=n[t];this.setAttribute(t,i.clone(e))}const r=t.morphAttributes;for(const t in r){const i=[],n=r[t];for(let t=0,r=n.length;t<r;t++)i.push(n[t].clone(e));this.morphAttributes[t]=i}this.morphTargetsRelative=t.morphTargetsRelative;const s=t.groups;for(let t=0,e=s.length;t<e;t++){const e=s[t];this.addGroup(e.start,e.count,e.materialIndex)}const a=t.boundingBox;null!==a&&(this.boundingBox=a.clone());const o=t.boundingSphere;return null!==o&&(this.boundingSphere=o.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const vi=new ce,xi=new he,_i=new ee,qi=new Ut,yi=new Ut,bi=new Ut,wi=new Ut,Mi=new Ut,Si=new Ut,Ei=new lt,Ti=new lt,Ai=new lt,Ci=new Ut,Ri=new Ut,Pi=new Ut,zi=new Ut,Li=new Ut;class Ui extends De{constructor(t=new gi,e=new ii){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){const i=t[e[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=i.length;t<e;t++){const e=i[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}getVertexPosition(t,e){const i=this.geometry,n=i.attributes.position,r=i.morphAttributes.position,s=i.morphTargetsRelative;e.fromBufferAttribute(n,t);const a=this.morphTargetInfluences;if(r&&a){Si.set(0,0,0);for(let i=0,n=r.length;i<n;i++){const n=a[i],o=r[i];0!==n&&(Mi.fromBufferAttribute(o,t),s?Si.addScaledVector(Mi,n):Si.addScaledVector(Mi.sub(e),n))}e.add(Si)}return e}raycast(t,e){const i=this.geometry,n=this.material,r=this.matrixWorld;if(void 0!==n){if(null===i.boundingSphere&&i.computeBoundingSphere(),_i.copy(i.boundingSphere),_i.applyMatrix4(r),xi.copy(t.ray).recast(t.near),!1===_i.containsPoint(xi.origin)){if(null===xi.intersectSphere(_i,qi))return;if(xi.origin.distanceToSquared(qi)>(t.far-t.near)**2)return}vi.copy(r).invert(),xi.copy(t.ray).applyMatrix4(vi),null!==i.boundingBox&&!1===xi.intersectsBox(i.boundingBox)||this._computeIntersections(t,e)}}_computeIntersections(t,e){let i;const n=this.geometry,r=this.material,s=n.index,a=n.attributes.position,o=n.attributes.uv,l=n.attributes.uv1,h=n.attributes.normal,c=n.groups,u=n.drawRange;if(null!==s)if(Array.isArray(r))for(let n=0,a=c.length;n<a;n++){const a=c[n],d=r[a.materialIndex];for(let n=Math.max(a.start,u.start),r=Math.min(s.count,Math.min(a.start+a.count,u.start+u.count));n<r;n+=3){const r=s.getX(n),c=s.getX(n+1),u=s.getX(n+2);i=Di(this,d,t,xi,o,l,h,r,c,u),i&&(i.faceIndex=Math.floor(n/3),i.face.materialIndex=a.materialIndex,e.push(i))}}else for(let n=Math.max(0,u.start),a=Math.min(s.count,u.start+u.count);n<a;n+=3){const a=s.getX(n),c=s.getX(n+1),u=s.getX(n+2);i=Di(this,r,t,xi,o,l,h,a,c,u),i&&(i.faceIndex=Math.floor(n/3),e.push(i))}else if(void 0!==a)if(Array.isArray(r))for(let n=0,s=c.length;n<s;n++){const s=c[n],d=r[s.materialIndex];for(let n=Math.max(s.start,u.start),r=Math.min(a.count,Math.min(s.start+s.count,u.start+u.count));n<r;n+=3)i=Di(this,d,t,xi,o,l,h,n,n+1,n+2),i&&(i.faceIndex=Math.floor(n/3),i.face.materialIndex=s.materialIndex,e.push(i))}else for(let n=Math.max(0,u.start),s=Math.min(a.count,u.start+u.count);n<s;n+=3)i=Di(this,r,t,xi,o,l,h,n,n+1,n+2),i&&(i.faceIndex=Math.floor(n/3),e.push(i))}}function Di(t,e,i,n,r,s,a,o,l,h){t.getVertexPosition(o,yi),t.getVertexPosition(l,bi),t.getVertexPosition(h,wi);const c=function(t,e,i,n,r,s,a,o){let l;if(l=1===e.side?n.intersectTriangle(a,s,r,!0,o):n.intersectTriangle(r,s,a,0===e.side,o),null===l)return null;Li.copy(o),Li.applyMatrix4(t.matrixWorld);const h=i.ray.origin.distanceTo(Li);return h<i.near||h>i.far?null:{distance:h,point:Li.clone(),object:t}}(t,e,i,n,yi,bi,wi,zi);if(c){r&&(Ei.fromBufferAttribute(r,o),Ti.fromBufferAttribute(r,l),Ai.fromBufferAttribute(r,h),c.uv=Xe.getInterpolation(zi,yi,bi,wi,Ei,Ti,Ai,new lt)),s&&(Ei.fromBufferAttribute(s,o),Ti.fromBufferAttribute(s,l),Ai.fromBufferAttribute(s,h),c.uv1=Xe.getInterpolation(zi,yi,bi,wi,Ei,Ti,Ai,new lt),c.uv2=c.uv1),a&&(Ci.fromBufferAttribute(a,o),Ri.fromBufferAttribute(a,l),Pi.fromBufferAttribute(a,h),c.normal=Xe.getInterpolation(zi,yi,bi,wi,Ci,Ri,Pi,new Ut),c.normal.dot(n.direction)>0&&c.normal.multiplyScalar(-1));const t={a:o,b:l,c:h,normal:new Ut,materialIndex:0};Xe.getNormal(yi,bi,wi,t.normal),c.face=t}return c}class Ii extends gi{constructor(t=1,e=1,i=1,n=1,r=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:n,heightSegments:r,depthSegments:s};const a=this;n=Math.floor(n),r=Math.floor(r),s=Math.floor(s);const o=[],l=[],h=[],c=[];let u=0,d=0;function p(t,e,i,n,r,s,p,m,f,g,v){const x=s/f,_=p/g,q=s/2,y=p/2,b=m/2,w=f+1,M=g+1;let S=0,E=0;const T=new Ut;for(let s=0;s<M;s++){const a=s*_-y;for(let o=0;o<w;o++){const u=o*x-q;T[t]=u*n,T[e]=a*r,T[i]=b,l.push(T.x,T.y,T.z),T[t]=0,T[e]=0,T[i]=m>0?1:-1,h.push(T.x,T.y,T.z),c.push(o/f),c.push(1-s/g),S+=1}}for(let t=0;t<g;t++)for(let e=0;e<f;e++){const i=u+e+w*t,n=u+e+w*(t+1),r=u+(e+1)+w*(t+1),s=u+(e+1)+w*t;o.push(i,n,s),o.push(n,r,s),E+=6}a.addGroup(d,E,v),d+=E,u+=S}p("z","y","x",-1,-1,i,e,t,s,r,0),p("z","y","x",1,-1,i,e,-t,s,r,1),p("x","z","y",1,1,t,i,e,n,s,2),p("x","z","y",1,-1,t,i,-e,n,s,3),p("x","y","z",1,-1,t,e,i,n,r,4),p("x","y","z",-1,-1,t,e,-i,n,r,5),this.setIndex(o),this.setAttribute("position",new li(l,3)),this.setAttribute("normal",new li(h,3)),this.setAttribute("uv",new li(c,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Ii(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function Ni(t){const e={};for(const i in t){e[i]={};for(const n in t[i]){const r=t[i][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[i][n]=null):e[i][n]=r.clone():Array.isArray(r)?e[i][n]=r.slice():e[i][n]=r}}return e}function Oi(t){const e={};for(let i=0;i<t.length;i++){const n=Ni(t[i]);for(const t in n)e[t]=n[t]}return e}function Fi(t){return null===t.getRenderTarget()?t.outputColorSpace:j}const Bi={clone:Ni,merge:Oi};class ki extends Ke{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Ni(t.uniforms),this.uniformsGroups=function(t){const e=[];for(let i=0;i<t.length;i++)e.push(t[i].clone());return e}(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const i in this.uniforms){const n=this.uniforms[i].value;n&&n.isTexture?e.uniforms[i]={type:"t",value:n.toJSON(t).uuid}:n&&n.isColor?e.uniforms[i]={type:"c",value:n.getHex()}:n&&n.isVector2?e.uniforms[i]={type:"v2",value:n.toArray()}:n&&n.isVector3?e.uniforms[i]={type:"v3",value:n.toArray()}:n&&n.isVector4?e.uniforms[i]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?e.uniforms[i]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?e.uniforms[i]={type:"m4",value:n.toArray()}:e.uniforms[i]={value:n}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.lights=this.lights,e.clipping=this.clipping;const i={};for(const t in this.extensions)!0===this.extensions[t]&&(i[t]=!0);return Object.keys(i).length>0&&(e.extensions=i),e}}class Vi extends De{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new ce,this.projectionMatrix=new ce,this.projectionMatrixInverse=new ce}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class Hi extends Vi{constructor(t=50,e=1,i=.1,n=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=i,this.far=n,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=2*tt*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*Q*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*tt*Math.atan(Math.tan(.5*Q*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,e,i,n,r,s){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=n,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(.5*Q*this.fov)/this.zoom,i=2*e,n=this.aspect*i,r=-.5*n;const s=this.view;if(null!==this.view&&this.view.enabled){const t=s.fullWidth,a=s.fullHeight;r+=s.offsetX*n/t,e-=s.offsetY*i/a,n*=s.width/t,i*=s.height/a}const a=this.filmOffset;0!==a&&(r+=t*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+n,e,e-i,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}const Gi=-90;class Wi extends De{constructor(t,e,i){super(),this.type="CubeCamera",this.renderTarget=i;const n=new Hi(Gi,1,t,e);n.layers=this.layers,n.up.set(0,1,0),n.lookAt(1,0,0),this.add(n);const r=new Hi(Gi,1,t,e);r.layers=this.layers,r.up.set(0,1,0),r.lookAt(-1,0,0),this.add(r);const s=new Hi(Gi,1,t,e);s.layers=this.layers,s.up.set(0,0,-1),s.lookAt(0,1,0),this.add(s);const a=new Hi(Gi,1,t,e);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(0,-1,0),this.add(a);const o=new Hi(Gi,1,t,e);o.layers=this.layers,o.up.set(0,1,0),o.lookAt(0,0,1),this.add(o);const l=new Hi(Gi,1,t,e);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,-1),this.add(l)}update(t,e){null===this.parent&&this.updateMatrixWorld();const i=this.renderTarget,[n,r,s,a,o,l]=this.children,h=t.getRenderTarget(),c=t.toneMapping,d=t.xr.enabled;t.toneMapping=u,t.xr.enabled=!1;const p=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,t.setRenderTarget(i,0),t.render(e,n),t.setRenderTarget(i,1),t.render(e,r),t.setRenderTarget(i,2),t.render(e,s),t.setRenderTarget(i,3),t.render(e,a),t.setRenderTarget(i,4),t.render(e,o),i.texture.generateMipmaps=p,t.setRenderTarget(i,5),t.render(e,l),t.setRenderTarget(h),t.toneMapping=c,t.xr.enabled=d,i.texture.needsPMREMUpdate=!0}}class ji extends Tt{constructor(t,e,i,n,r,s,a,o,l,h){super(t=void 0!==t?t:[],e=void 0!==e?e:v,i,n,r,s,a,o,l,h),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class Xi extends Ct{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;const i={width:t,height:t,depth:1},n=[i,i,i,i,i,i];void 0!==e.encoding&&(mt("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),e.colorSpace=e.encoding===G?W:""),this.texture=new ji(n,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==e.generateMipmaps&&e.generateMipmaps,this.texture.minFilter=void 0!==e.minFilter?e.minFilter:S}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.colorSpace=e.colorSpace,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const i={tEquirect:{value:null}},n="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",r="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",s=new Ii(5,5,5),a=new ki({name:"CubemapFromEquirect",uniforms:Ni(i),vertexShader:n,fragmentShader:r,side:1,blending:0});a.uniforms.tEquirect.value=e;const o=new Ui(s,a),l=e.minFilter;return e.minFilter===E&&(e.minFilter=S),new Wi(1,10,this).update(t,o),e.minFilter=l,o.geometry.dispose(),o.material.dispose(),this}clear(t,e,i,n){const r=t.getRenderTarget();for(let r=0;r<6;r++)t.setRenderTarget(this,r),t.clear(e,i,n);t.setRenderTarget(r)}}const Yi=new Ut,Ki=new Ut,Zi=new ht;class Ji{constructor(t=new Ut(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,i,n){return this.normal.set(t,e,i),this.constant=n,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,i){const n=Yi.subVectors(i,e).cross(Ki.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(n,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,e){const i=t.delta(Yi),n=this.normal.dot(i);if(0===n)return 0===this.distanceToPoint(t.start)?e.copy(t.start):null;const r=-(t.start.dot(this.normal)+this.constant)/n;return r<0||r>1?null:e.copy(t.start).addScaledVector(i,r)}intersectsLine(t){const e=this.distanceToPoint(t.start),i=this.distanceToPoint(t.end);return e<0&&i>0||i<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const i=e||Zi.getNormalMatrix(t),n=this.coplanarPoint(Yi).applyMatrix4(t),r=this.normal.applyMatrix3(i).normalize();return this.constant=-n.dot(r),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const $i=new ee,Qi=new Ut;class tn{constructor(t=new Ji,e=new Ji,i=new Ji,n=new Ji,r=new Ji,s=new Ji){this.planes=[t,e,i,n,r,s]}set(t,e,i,n,r,s){const a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(i),a[3].copy(n),a[4].copy(r),a[5].copy(s),this}copy(t){const e=this.planes;for(let i=0;i<6;i++)e[i].copy(t.planes[i]);return this}setFromProjectionMatrix(t){const e=this.planes,i=t.elements,n=i[0],r=i[1],s=i[2],a=i[3],o=i[4],l=i[5],h=i[6],c=i[7],u=i[8],d=i[9],p=i[10],m=i[11],f=i[12],g=i[13],v=i[14],x=i[15];return e[0].setComponents(a-n,c-o,m-u,x-f).normalize(),e[1].setComponents(a+n,c+o,m+u,x+f).normalize(),e[2].setComponents(a+r,c+l,m+d,x+g).normalize(),e[3].setComponents(a-r,c-l,m-d,x-g).normalize(),e[4].setComponents(a-s,c-h,m-p,x-v).normalize(),e[5].setComponents(a+s,c+h,m+p,x+v).normalize(),this}intersectsObject(t){if(void 0!==t.boundingSphere)null===t.boundingSphere&&t.computeBoundingSphere(),$i.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{const e=t.geometry;null===e.boundingSphere&&e.computeBoundingSphere(),$i.copy(e.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere($i)}intersectsSprite(t){return $i.center.set(0,0,0),$i.radius=.7071067811865476,$i.applyMatrix4(t.matrixWorld),this.intersectsSphere($i)}intersectsSphere(t){const e=this.planes,i=t.center,n=-t.radius;for(let t=0;t<6;t++)if(e[t].distanceToPoint(i)<n)return!1;return!0}intersectsBox(t){const e=this.planes;for(let i=0;i<6;i++){const n=e[i];if(Qi.x=n.normal.x>0?t.max.x:t.min.x,Qi.y=n.normal.y>0?t.max.y:t.min.y,Qi.z=n.normal.z>0?t.max.z:t.min.z,n.distanceToPoint(Qi)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let i=0;i<6;i++)if(e[i].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function en(){let t=null,e=!1,i=null,n=null;function r(e,s){i(e,s),n=t.requestAnimationFrame(r)}return{start:function(){!0!==e&&null!==i&&(n=t.requestAnimationFrame(r),e=!0)},stop:function(){t.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(t){i=t},setContext:function(e){t=e}}}function nn(t,e){const i=e.isWebGL2,n=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),n.get(t)},remove:function(e){e.isInterleavedBufferAttribute&&(e=e.data);const i=n.get(e);i&&(t.deleteBuffer(i.buffer),n.delete(e))},update:function(e,r){if(e.isGLBufferAttribute){const t=n.get(e);return void((!t||t.version<e.version)&&n.set(e,{buffer:e.buffer,type:e.type,bytesPerElement:e.elementSize,version:e.version}))}e.isInterleavedBufferAttribute&&(e=e.data);const s=n.get(e);void 0===s?n.set(e,function(e,n){const r=e.array,s=e.usage,a=t.createBuffer();let o;if(t.bindBuffer(n,a),t.bufferData(n,r,s),e.onUploadCallback(),r instanceof Float32Array)o=t.FLOAT;else if(r instanceof Uint16Array)if(e.isFloat16BufferAttribute){if(!i)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");o=t.HALF_FLOAT}else o=t.UNSIGNED_SHORT;else if(r instanceof Int16Array)o=t.SHORT;else if(r instanceof Uint32Array)o=t.UNSIGNED_INT;else if(r instanceof Int32Array)o=t.INT;else if(r instanceof Int8Array)o=t.BYTE;else if(r instanceof Uint8Array)o=t.UNSIGNED_BYTE;else{if(!(r instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+r);o=t.UNSIGNED_BYTE}return{buffer:a,type:o,bytesPerElement:r.BYTES_PER_ELEMENT,version:e.version}}(e,r)):s.version<e.version&&(function(e,n,r){const s=n.array,a=n.updateRange;t.bindBuffer(r,e),-1===a.count?t.bufferSubData(r,0,s):(i?t.bufferSubData(r,a.offset*s.BYTES_PER_ELEMENT,s,a.offset,a.count):t.bufferSubData(r,a.offset*s.BYTES_PER_ELEMENT,s.subarray(a.offset,a.offset+a.count)),a.count=-1),n.onUploadCallback()}(s.buffer,e,r),s.version=e.version)}}}class rn extends gi{constructor(t=1,e=1,i=1,n=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:n};const r=t/2,s=e/2,a=Math.floor(i),o=Math.floor(n),l=a+1,h=o+1,c=t/a,u=e/o,d=[],p=[],m=[],f=[];for(let t=0;t<h;t++){const e=t*u-s;for(let i=0;i<l;i++){const n=i*c-r;p.push(n,-e,0),m.push(0,0,1),f.push(i/a),f.push(1-t/o)}}for(let t=0;t<o;t++)for(let e=0;e<a;e++){const i=e+l*t,n=e+l*(t+1),r=e+1+l*(t+1),s=e+1+l*t;d.push(i,n,s),d.push(n,r,s)}this.setIndex(d),this.setAttribute("position",new li(p,3)),this.setAttribute("normal",new li(m,3)),this.setAttribute("uv",new li(f,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new rn(t.width,t.height,t.widthSegments,t.heightSegments)}}const sn={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, vMapUv );\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_NORMALMAP_TANGENTSPACE\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal, vNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#ifdef USE_UV\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},an={common:{diffuse:{value:new ti(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new ht},alphaMap:{value:null},alphaMapTransform:{value:new ht},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new ht}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new ht}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new ht}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new ht},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new ht},normalScale:{value:new lt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new ht},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new ht}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new ht}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new ht}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ti(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ti(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new ht}},sprite:{diffuse:{value:new ti(16777215)},opacity:{value:1},center:{value:new lt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new ht},alphaMap:{value:null},alphaTest:{value:0}}},on={basic:{uniforms:Oi([an.common,an.specularmap,an.envmap,an.aomap,an.lightmap,an.fog]),vertexShader:sn.meshbasic_vert,fragmentShader:sn.meshbasic_frag},lambert:{uniforms:Oi([an.common,an.specularmap,an.envmap,an.aomap,an.lightmap,an.emissivemap,an.bumpmap,an.normalmap,an.displacementmap,an.fog,an.lights,{emissive:{value:new ti(0)}}]),vertexShader:sn.meshlambert_vert,fragmentShader:sn.meshlambert_frag},phong:{uniforms:Oi([an.common,an.specularmap,an.envmap,an.aomap,an.lightmap,an.emissivemap,an.bumpmap,an.normalmap,an.displacementmap,an.fog,an.lights,{emissive:{value:new ti(0)},specular:{value:new ti(1118481)},shininess:{value:30}}]),vertexShader:sn.meshphong_vert,fragmentShader:sn.meshphong_frag},standard:{uniforms:Oi([an.common,an.envmap,an.aomap,an.lightmap,an.emissivemap,an.bumpmap,an.normalmap,an.displacementmap,an.roughnessmap,an.metalnessmap,an.fog,an.lights,{emissive:{value:new ti(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:sn.meshphysical_vert,fragmentShader:sn.meshphysical_frag},toon:{uniforms:Oi([an.common,an.aomap,an.lightmap,an.emissivemap,an.bumpmap,an.normalmap,an.displacementmap,an.gradientmap,an.fog,an.lights,{emissive:{value:new ti(0)}}]),vertexShader:sn.meshtoon_vert,fragmentShader:sn.meshtoon_frag},matcap:{uniforms:Oi([an.common,an.bumpmap,an.normalmap,an.displacementmap,an.fog,{matcap:{value:null}}]),vertexShader:sn.meshmatcap_vert,fragmentShader:sn.meshmatcap_frag},points:{uniforms:Oi([an.points,an.fog]),vertexShader:sn.points_vert,fragmentShader:sn.points_frag},dashed:{uniforms:Oi([an.common,an.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:sn.linedashed_vert,fragmentShader:sn.linedashed_frag},depth:{uniforms:Oi([an.common,an.displacementmap]),vertexShader:sn.depth_vert,fragmentShader:sn.depth_frag},normal:{uniforms:Oi([an.common,an.bumpmap,an.normalmap,an.displacementmap,{opacity:{value:1}}]),vertexShader:sn.meshnormal_vert,fragmentShader:sn.meshnormal_frag},sprite:{uniforms:Oi([an.sprite,an.fog]),vertexShader:sn.sprite_vert,fragmentShader:sn.sprite_frag},background:{uniforms:{uvTransform:{value:new ht},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:sn.background_vert,fragmentShader:sn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:sn.backgroundCube_vert,fragmentShader:sn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:sn.cube_vert,fragmentShader:sn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:sn.equirect_vert,fragmentShader:sn.equirect_frag},distanceRGBA:{uniforms:Oi([an.common,an.displacementmap,{referencePosition:{value:new Ut},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:sn.distanceRGBA_vert,fragmentShader:sn.distanceRGBA_frag},shadow:{uniforms:Oi([an.lights,an.fog,{color:{value:new ti(0)},opacity:{value:1}}]),vertexShader:sn.shadow_vert,fragmentShader:sn.shadow_frag}};on.physical={uniforms:Oi([on.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new ht},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new ht},clearcoatNormalScale:{value:new lt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new ht},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new ht},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new ht},sheen:{value:0},sheenColor:{value:new ti(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new ht},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new ht},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new ht},transmissionSamplerSize:{value:new lt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new ht},attenuationDistance:{value:0},attenuationColor:{value:new ti(0)},specularColor:{value:new ti(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new ht},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new ht}}]),vertexShader:sn.meshphysical_vert,fragmentShader:sn.meshphysical_frag};const ln={r:0,b:0,g:0};function hn(t,e,i,n,r,s,a){const o=new ti(0);let l,h,c=!0===s?0:1,u=null,d=0,p=null;function m(e,i){e.getRGB(ln,Fi(t)),n.buffers.color.setClear(ln.r,ln.g,ln.b,i,a)}return{getClearColor:function(){return o},setClearColor:function(t,e=1){o.set(t),c=e,m(o,c)},getClearAlpha:function(){return c},setClearAlpha:function(t){c=t,m(o,c)},render:function(s,f){let g=!1,v=!0===f.isScene?f.background:null;switch(v&&v.isTexture&&(v=(f.backgroundBlurriness>0?i:e).get(v)),null===v?m(o,c):v&&v.isColor&&(m(v,1),g=!0),t.xr.getEnvironmentBlendMode()){case"opaque":g=!0;break;case"additive":n.buffers.color.setClear(0,0,0,1,a),g=!0;break;case"alpha-blend":n.buffers.color.setClear(0,0,0,0,a),g=!0}(t.autoClear||g)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),v&&(v.isCubeTexture||v.mapping===_)?(void 0===h&&(h=new Ui(new Ii(1,1,1),new ki({name:"BackgroundCubeMaterial",uniforms:Ni(on.backgroundCube.uniforms),vertexShader:on.backgroundCube.vertexShader,fragmentShader:on.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(t,e,i){this.matrixWorld.copyPosition(i.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(h)),h.material.uniforms.envMap.value=v,h.material.uniforms.flipEnvMap.value=v.isCubeTexture&&!1===v.isRenderTargetTexture?-1:1,h.material.uniforms.backgroundBlurriness.value=f.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=f.backgroundIntensity,h.material.toneMapped=v.colorSpace!==W,u===v&&d===v.version&&p===t.toneMapping||(h.material.needsUpdate=!0,u=v,d=v.version,p=t.toneMapping),h.layers.enableAll(),s.unshift(h,h.geometry,h.material,0,0,null)):v&&v.isTexture&&(void 0===l&&(l=new Ui(new rn(2,2),new ki({name:"BackgroundMaterial",uniforms:Ni(on.background.uniforms),vertexShader:on.background.vertexShader,fragmentShader:on.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(l)),l.material.uniforms.t2D.value=v,l.material.uniforms.backgroundIntensity.value=f.backgroundIntensity,l.material.toneMapped=v.colorSpace!==W,!0===v.matrixAutoUpdate&&v.updateMatrix(),l.material.uniforms.uvTransform.value.copy(v.matrix),u===v&&d===v.version&&p===t.toneMapping||(l.material.needsUpdate=!0,u=v,d=v.version,p=t.toneMapping),l.layers.enableAll(),s.unshift(l,l.geometry,l.material,0,0,null))}}}function cn(t,e,i,n){const r=t.getParameter(t.MAX_VERTEX_ATTRIBS),s=n.isWebGL2?null:e.get("OES_vertex_array_object"),a=n.isWebGL2||null!==s,o={},l=p(null);let h=l,c=!1;function u(e){return n.isWebGL2?t.bindVertexArray(e):s.bindVertexArrayOES(e)}function d(e){return n.isWebGL2?t.deleteVertexArray(e):s.deleteVertexArrayOES(e)}function p(t){const e=[],i=[],n=[];for(let t=0;t<r;t++)e[t]=0,i[t]=0,n[t]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:i,attributeDivisors:n,object:t,attributes:{},index:null}}function m(){const t=h.newAttributes;for(let e=0,i=t.length;e<i;e++)t[e]=0}function f(t){g(t,0)}function g(i,r){const s=h.newAttributes,a=h.enabledAttributes,o=h.attributeDivisors;s[i]=1,0===a[i]&&(t.enableVertexAttribArray(i),a[i]=1),o[i]!==r&&((n.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](i,r),o[i]=r)}function v(){const e=h.newAttributes,i=h.enabledAttributes;for(let n=0,r=i.length;n<r;n++)i[n]!==e[n]&&(t.disableVertexAttribArray(n),i[n]=0)}function x(e,i,r,s,a,o){!0!==n.isWebGL2||r!==t.INT&&r!==t.UNSIGNED_INT?t.vertexAttribPointer(e,i,r,s,a,o):t.vertexAttribIPointer(e,i,r,a,o)}function _(){q(),c=!0,h!==l&&(h=l,u(h.object))}function q(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(r,l,d,_,q){let y=!1;if(a){const e=function(e,i,r){const a=!0===r.wireframe;let l=o[e.id];void 0===l&&(l={},o[e.id]=l);let h=l[i.id];void 0===h&&(h={},l[i.id]=h);let c=h[a];return void 0===c&&(c=p(n.isWebGL2?t.createVertexArray():s.createVertexArrayOES()),h[a]=c),c}(_,d,l);h!==e&&(h=e,u(h.object)),y=function(t,e,i,n){const r=h.attributes,s=e.attributes;let a=0;const o=i.getAttributes();for(const e in o)if(o[e].location>=0){const i=r[e];let n=s[e];if(void 0===n&&("instanceMatrix"===e&&t.instanceMatrix&&(n=t.instanceMatrix),"instanceColor"===e&&t.instanceColor&&(n=t.instanceColor)),void 0===i)return!0;if(i.attribute!==n)return!0;if(n&&i.data!==n.data)return!0;a++}return h.attributesNum!==a||h.index!==n}(r,_,d,q),y&&function(t,e,i,n){const r={},s=e.attributes;let a=0;const o=i.getAttributes();for(const e in o)if(o[e].location>=0){let i=s[e];void 0===i&&("instanceMatrix"===e&&t.instanceMatrix&&(i=t.instanceMatrix),"instanceColor"===e&&t.instanceColor&&(i=t.instanceColor));const n={};n.attribute=i,i&&i.data&&(n.data=i.data),r[e]=n,a++}h.attributes=r,h.attributesNum=a,h.index=n}(r,_,d,q)}else{const t=!0===l.wireframe;h.geometry===_.id&&h.program===d.id&&h.wireframe===t||(h.geometry=_.id,h.program=d.id,h.wireframe=t,y=!0)}null!==q&&i.update(q,t.ELEMENT_ARRAY_BUFFER),(y||c)&&(c=!1,function(r,s,a,o){if(!1===n.isWebGL2&&(r.isInstancedMesh||o.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;m();const l=o.attributes,h=a.getAttributes(),c=s.defaultAttributeValues;for(const e in h){const n=h[e];if(n.location>=0){let s=l[e];if(void 0===s&&("instanceMatrix"===e&&r.instanceMatrix&&(s=r.instanceMatrix),"instanceColor"===e&&r.instanceColor&&(s=r.instanceColor)),void 0!==s){const e=s.normalized,a=s.itemSize,l=i.get(s);if(void 0===l)continue;const h=l.buffer,c=l.type,u=l.bytesPerElement;if(s.isInterleavedBufferAttribute){const i=s.data,l=i.stride,d=s.offset;if(i.isInstancedInterleavedBuffer){for(let t=0;t<n.locationSize;t++)g(n.location+t,i.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=i.meshPerAttribute*i.count)}else for(let t=0;t<n.locationSize;t++)f(n.location+t);t.bindBuffer(t.ARRAY_BUFFER,h);for(let t=0;t<n.locationSize;t++)x(n.location+t,a/n.locationSize,c,e,l*u,(d+a/n.locationSize*t)*u)}else{if(s.isInstancedBufferAttribute){for(let t=0;t<n.locationSize;t++)g(n.location+t,s.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=s.meshPerAttribute*s.count)}else for(let t=0;t<n.locationSize;t++)f(n.location+t);t.bindBuffer(t.ARRAY_BUFFER,h);for(let t=0;t<n.locationSize;t++)x(n.location+t,a/n.locationSize,c,e,a*u,a/n.locationSize*t*u)}}else if(void 0!==c){const i=c[e];if(void 0!==i)switch(i.length){case 2:t.vertexAttrib2fv(n.location,i);break;case 3:t.vertexAttrib3fv(n.location,i);break;case 4:t.vertexAttrib4fv(n.location,i);break;default:t.vertexAttrib1fv(n.location,i)}}}}v()}(r,l,d,_),null!==q&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,i.get(q).buffer))},reset:_,resetDefaultState:q,dispose:function(){_();for(const t in o){const e=o[t];for(const t in e){const i=e[t];for(const t in i)d(i[t].object),delete i[t];delete e[t]}delete o[t]}},releaseStatesOfGeometry:function(t){if(void 0===o[t.id])return;const e=o[t.id];for(const t in e){const i=e[t];for(const t in i)d(i[t].object),delete i[t];delete e[t]}delete o[t.id]},releaseStatesOfProgram:function(t){for(const e in o){const i=o[e];if(void 0===i[t.id])continue;const n=i[t.id];for(const t in n)d(n[t].object),delete n[t];delete i[t.id]}},initAttributes:m,enableAttribute:f,disableUnusedAttributes:v}}function un(t,e,i,n){const r=n.isWebGL2;let s;this.setMode=function(t){s=t},this.render=function(e,n){t.drawArrays(s,e,n),i.update(n,s,1)},this.renderInstances=function(n,a,o){if(0===o)return;let l,h;if(r)l=t,h="drawArraysInstanced";else if(l=e.get("ANGLE_instanced_arrays"),h="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[h](s,n,a,o),i.update(a,s,o)}}function dn(t,e,i){let n;function r(e){if("highp"===e){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const s="undefined"!=typeof WebGL2RenderingContext&&"WebGL2RenderingContext"===t.constructor.name;let a=void 0!==i.precision?i.precision:"highp";const o=r(a);o!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",o,"instead."),a=o);const l=s||e.has("WEBGL_draw_buffers"),h=!0===i.logarithmicDepthBuffer,c=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),u=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),d=t.getParameter(t.MAX_TEXTURE_SIZE),p=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),m=t.getParameter(t.MAX_VERTEX_ATTRIBS),f=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),g=t.getParameter(t.MAX_VARYING_VECTORS),v=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),x=u>0,_=s||e.has("OES_texture_float");return{isWebGL2:s,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==n)return n;if(!0===e.has("EXT_texture_filter_anisotropic")){const i=e.get("EXT_texture_filter_anisotropic");n=t.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else n=0;return n},getMaxPrecision:r,precision:a,logarithmicDepthBuffer:h,maxTextures:c,maxVertexTextures:u,maxTextureSize:d,maxCubemapSize:p,maxAttributes:m,maxVertexUniforms:f,maxVaryings:g,maxFragmentUniforms:v,vertexTextures:x,floatFragmentTextures:_,floatVertexTextures:x&&_,maxSamples:s?t.getParameter(t.MAX_SAMPLES):0}}function pn(t){const e=this;let i=null,n=0,r=!1,s=!1;const a=new Ji,o=new ht,l={value:null,needsUpdate:!1};function h(t,i,n,r){const s=null!==t?t.length:0;let h=null;if(0!==s){if(h=l.value,!0!==r||null===h){const e=n+4*s,r=i.matrixWorldInverse;o.getNormalMatrix(r),(null===h||h.length<e)&&(h=new Float32Array(e));for(let e=0,i=n;e!==s;++e,i+=4)a.copy(t[e]).applyMatrix4(r,o),a.normal.toArray(h,i),h[i+3]=a.constant}l.value=h,l.needsUpdate=!0}return e.numPlanes=s,e.numIntersection=0,h}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(t,e){const i=0!==t.length||e||0!==n||r;return r=e,n=t.length,i},this.beginShadows=function(){s=!0,h(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(t,e){i=h(t,e,0)},this.setState=function(a,o,c){const u=a.clippingPlanes,d=a.clipIntersection,p=a.clipShadows,m=t.get(a);if(!r||null===u||0===u.length||s&&!p)s?h(null):(l.value!==i&&(l.value=i,l.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0);else{const t=s?0:n,e=4*t;let r=m.clippingState||null;l.value=r,r=h(u,o,e,c);for(let t=0;t!==e;++t)r[t]=i[t];m.clippingState=r,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=t}}}function mn(t){let e=new WeakMap;function i(t,e){return 303===e?t.mapping=v:304===e&&(t.mapping=x),t}function n(t){const i=t.target;i.removeEventListener("dispose",n);const r=e.get(i);void 0!==r&&(e.delete(i),r.dispose())}return{get:function(r){if(r&&r.isTexture&&!1===r.isRenderTargetTexture){const s=r.mapping;if(303===s||304===s){if(e.has(r))return i(e.get(r).texture,r.mapping);{const s=r.image;if(s&&s.height>0){const a=new Xi(s.height/2);return a.fromEquirectangularTexture(t,r),e.set(r,a),r.addEventListener("dispose",n),i(a.texture,r.mapping)}return null}}}return r},dispose:function(){e=new WeakMap}}}class fn extends Vi{constructor(t=-1,e=1,i=1,n=-1,r=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=i,this.bottom=n,this.near=r,this.far=s,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,e,i,n,r,s){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=n,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,n=(this.top+this.bottom)/2;let r=i-t,s=i+t,a=n+e,o=n-e;if(null!==this.view&&this.view.enabled){const t=(this.right-this.left)/this.view.fullWidth/this.zoom,e=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=t*this.view.offsetX,s=r+t*this.view.width,a-=e*this.view.offsetY,o=a-e*this.view.height}this.projectionMatrix.makeOrthographic(r,s,a,o,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}const gn=[.125,.215,.35,.446,.526,.582],vn=new fn,xn=new ti;let _n=null;const qn=(1+Math.sqrt(5))/2,yn=1/qn,bn=[new Ut(1,1,1),new Ut(-1,1,1),new Ut(1,1,-1),new Ut(-1,1,-1),new Ut(0,qn,yn),new Ut(0,qn,-yn),new Ut(yn,0,qn),new Ut(-yn,0,qn),new Ut(qn,yn,0),new Ut(-qn,yn,0)];class wn{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,i=.1,n=100){_n=this._renderer.getRenderTarget(),this._setSize(256);const r=this._allocateTargets();return r.depthBuffer=!0,this._sceneToCubeUV(t,i,n,r),e>0&&this._blur(r,0,0,e),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=Tn(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=En(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(_n),t.scissorTest=!1,Sn(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===v||t.mapping===x?this._setSize(0===t.image.length?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),_n=this._renderer.getRenderTarget();const i=e||this._allocateTargets();return this._textureToCubeUV(t,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,i={magFilter:S,minFilter:S,generateMipmaps:!1,type:R,format:z,colorSpace:j,depthBuffer:!1},n=Mn(t,e,i);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=Mn(t,e,i);const{_lodMax:n}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(t){const e=[],i=[],n=[];let r=t;const s=t-4+1+gn.length;for(let a=0;a<s;a++){const s=Math.pow(2,r);i.push(s);let o=1/s;a>t-4?o=gn[a-t+4-1]:0===a&&(o=0),n.push(o);const l=1/(s-2),h=-l,c=1+l,u=[h,h,c,h,c,c,h,h,c,c,h,c],d=6,p=6,m=3,f=2,g=1,v=new Float32Array(m*p*d),x=new Float32Array(f*p*d),_=new Float32Array(g*p*d);for(let t=0;t<d;t++){const e=t%3*2/3-1,i=t>2?0:-1,n=[e,i,0,e+2/3,i,0,e+2/3,i+1,0,e,i,0,e+2/3,i+1,0,e,i+1,0];v.set(n,m*p*t),x.set(u,f*p*t);const r=[t,t,t,t,t,t];_.set(r,g*p*t)}const q=new gi;q.setAttribute("position",new si(v,m)),q.setAttribute("uv",new si(x,f)),q.setAttribute("faceIndex",new si(_,g)),e.push(q),r>4&&r--}return{lodPlanes:e,sizeLods:i,sigmas:n}}(n)),this._blurMaterial=function(t,e,i){const n=new Float32Array(20),r=new Ut(0,1,0);return new ki({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/i,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(n,t,e)}return n}_compileMaterial(t){const e=new Ui(this._lodPlanes[0],t);this._renderer.compile(e,vn)}_sceneToCubeUV(t,e,i,n){const r=new Hi(90,1,e,i),s=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],o=this._renderer,l=o.autoClear,h=o.toneMapping;o.getClearColor(xn),o.toneMapping=u,o.autoClear=!1;const c=new ii({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),d=new Ui(new Ii,c);let p=!1;const m=t.background;m?m.isColor&&(c.color.copy(m),t.background=null,p=!0):(c.color.copy(xn),p=!0);for(let e=0;e<6;e++){const i=e%3;0===i?(r.up.set(0,s[e],0),r.lookAt(a[e],0,0)):1===i?(r.up.set(0,0,s[e]),r.lookAt(0,a[e],0)):(r.up.set(0,s[e],0),r.lookAt(0,0,a[e]));const l=this._cubeSize;Sn(n,i*l,e>2?l:0,l,l),o.setRenderTarget(n),p&&o.render(d,r),o.render(t,r)}d.geometry.dispose(),d.material.dispose(),o.toneMapping=h,o.autoClear=l,t.background=m}_textureToCubeUV(t,e){const i=this._renderer,n=t.mapping===v||t.mapping===x;n?(null===this._cubemapMaterial&&(this._cubemapMaterial=Tn()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===t.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=En());const r=n?this._cubemapMaterial:this._equirectMaterial,s=new Ui(this._lodPlanes[0],r);r.uniforms.envMap.value=t;const a=this._cubeSize;Sn(e,0,0,3*a,2*a),i.setRenderTarget(e),i.render(s,vn)}_applyPMREM(t){const e=this._renderer,i=e.autoClear;e.autoClear=!1;for(let e=1;e<this._lodPlanes.length;e++){const i=Math.sqrt(this._sigmas[e]*this._sigmas[e]-this._sigmas[e-1]*this._sigmas[e-1]),n=bn[(e-1)%bn.length];this._blur(t,e-1,e,i,n)}e.autoClear=i}_blur(t,e,i,n,r){const s=this._pingPongRenderTarget;this._halfBlur(t,s,e,i,n,"latitudinal",r),this._halfBlur(s,t,i,i,n,"longitudinal",r)}_halfBlur(t,e,i,n,r,s,a){const o=this._renderer,l=this._blurMaterial;"latitudinal"!==s&&"longitudinal"!==s&&console.error("blur direction must be either latitudinal or longitudinal!");const h=new Ui(this._lodPlanes[n],l),c=l.uniforms,u=this._sizeLods[i]-1,d=isFinite(r)?Math.PI/(2*u):2*Math.PI/39,p=r/d,m=isFinite(r)?1+Math.floor(3*p):20;m>20&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${m} samples when the maximum is set to 20`);const f=[];let g=0;for(let t=0;t<20;++t){const e=t/p,i=Math.exp(-e*e/2);f.push(i),0===t?g+=i:t<m&&(g+=2*i)}for(let t=0;t<f.length;t++)f[t]=f[t]/g;c.envMap.value=t.texture,c.samples.value=m,c.weights.value=f,c.latitudinal.value="latitudinal"===s,a&&(c.poleAxis.value=a);const{_lodMax:v}=this;c.dTheta.value=d,c.mipInt.value=v-i;const x=this._sizeLods[n];Sn(e,3*x*(n>v-4?n-v+4:0),4*(this._cubeSize-x),3*x,2*x),o.setRenderTarget(e),o.render(h,vn)}}function Mn(t,e,i){const n=new Ct(t,e,i);return n.texture.mapping=_,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function Sn(t,e,i,n,r){t.viewport.set(e,i,n,r),t.scissor.set(e,i,n,r)}function En(){return new ki({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Tn(){return new ki({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function An(t){let e=new WeakMap,i=null;function n(t){const i=t.target;i.removeEventListener("dispose",n);const r=e.get(i);void 0!==r&&(e.delete(i),r.dispose())}return{get:function(r){if(r&&r.isTexture){const s=r.mapping,a=303===s||304===s,o=s===v||s===x;if(a||o){if(r.isRenderTargetTexture&&!0===r.needsPMREMUpdate){r.needsPMREMUpdate=!1;let n=e.get(r);return null===i&&(i=new wn(t)),n=a?i.fromEquirectangular(r,n):i.fromCubemap(r,n),e.set(r,n),n.texture}if(e.has(r))return e.get(r).texture;{const s=r.image;if(a&&s&&s.height>0||o&&s&&function(t){let e=0;for(let i=0;i<6;i++)void 0!==t[i]&&e++;return 6===e}(s)){null===i&&(i=new wn(t));const s=a?i.fromEquirectangular(r):i.fromCubemap(r);return e.set(r,s),r.addEventListener("dispose",n),s.texture}return null}}}return r},dispose:function(){e=new WeakMap,null!==i&&(i.dispose(),i=null)}}}function Cn(t){const e={};function i(i){if(void 0!==e[i])return e[i];let n;switch(i){case"WEBGL_depth_texture":n=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:n=t.getExtension(i)}return e[i]=n,n}return{has:function(t){return null!==i(t)},init:function(t){t.isWebGL2?i("EXT_color_buffer_float"):(i("WEBGL_depth_texture"),i("OES_texture_float"),i("OES_texture_half_float"),i("OES_texture_half_float_linear"),i("OES_standard_derivatives"),i("OES_element_index_uint"),i("OES_vertex_array_object"),i("ANGLE_instanced_arrays")),i("OES_texture_float_linear"),i("EXT_color_buffer_half_float"),i("WEBGL_multisampled_render_to_texture")},get:function(t){const e=i(t);return null===e&&console.warn("THREE.WebGLRenderer: "+t+" extension not supported."),e}}}function Rn(t,e,i,n){const r={},s=new WeakMap;function a(t){const o=t.target;null!==o.index&&e.remove(o.index);for(const t in o.attributes)e.remove(o.attributes[t]);o.removeEventListener("dispose",a),delete r[o.id];const l=s.get(o);l&&(e.remove(l),s.delete(o)),n.releaseStatesOfGeometry(o),!0===o.isInstancedBufferGeometry&&delete o._maxInstanceCount,i.memory.geometries--}function o(t){const i=[],n=t.index,r=t.attributes.position;let a=0;if(null!==n){const t=n.array;a=n.version;for(let e=0,n=t.length;e<n;e+=3){const n=t[e+0],r=t[e+1],s=t[e+2];i.push(n,r,r,s,s,n)}}else{const t=r.array;a=r.version;for(let e=0,n=t.length/3-1;e<n;e+=3){const t=e+0,n=e+1,r=e+2;i.push(t,n,n,r,r,t)}}const o=new(ut(i)?oi:ai)(i,1);o.version=a;const l=s.get(t);l&&e.remove(l),s.set(t,o)}return{get:function(t,e){return!0===r[e.id]||(e.addEventListener("dispose",a),r[e.id]=!0,i.memory.geometries++),e},update:function(i){const n=i.attributes;for(const i in n)e.update(n[i],t.ARRAY_BUFFER);const r=i.morphAttributes;for(const i in r){const n=r[i];for(let i=0,r=n.length;i<r;i++)e.update(n[i],t.ARRAY_BUFFER)}},getWireframeAttribute:function(t){const e=s.get(t);if(e){const i=t.index;null!==i&&e.version<i.version&&o(t)}else o(t);return s.get(t)}}}function Pn(t,e,i,n){const r=n.isWebGL2;let s,a,o;this.setMode=function(t){s=t},this.setIndex=function(t){a=t.type,o=t.bytesPerElement},this.render=function(e,n){t.drawElements(s,n,a,e*o),i.update(n,s,1)},this.renderInstances=function(n,l,h){if(0===h)return;let c,u;if(r)c=t,u="drawElementsInstanced";else if(c=e.get("ANGLE_instanced_arrays"),u="drawElementsInstancedANGLE",null===c)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[u](s,l,a,n*o,h),i.update(l,s,h)}}function zn(t){const e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(i,n,r){switch(e.calls++,n){case t.TRIANGLES:e.triangles+=r*(i/3);break;case t.LINES:e.lines+=r*(i/2);break;case t.LINE_STRIP:e.lines+=r*(i-1);break;case t.LINE_LOOP:e.lines+=r*i;break;case t.POINTS:e.points+=r*i;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function Ln(t,e){return t[0]-e[0]}function Un(t,e){return Math.abs(e[1])-Math.abs(t[1])}function Dn(t,e,i){const n={},r=new Float32Array(8),s=new WeakMap,a=new At,o=[];for(let t=0;t<8;t++)o[t]=[t,0];return{update:function(l,h,c){const u=l.morphTargetInfluences;if(!0===e.isWebGL2){const d=h.morphAttributes.position||h.morphAttributes.normal||h.morphAttributes.color,p=void 0!==d?d.length:0;let m=s.get(h);if(void 0===m||m.count!==p){void 0!==m&&m.texture.dispose();const v=void 0!==h.morphAttributes.position,x=void 0!==h.morphAttributes.normal,_=void 0!==h.morphAttributes.color,q=h.morphAttributes.position||[],y=h.morphAttributes.normal||[],b=h.morphAttributes.color||[];let w=0;!0===v&&(w=1),!0===x&&(w=2),!0===_&&(w=3);let M=h.attributes.position.count*w,S=1;M>e.maxTextureSize&&(S=Math.ceil(M/e.maxTextureSize),M=e.maxTextureSize);const E=new Float32Array(M*S*4*p),T=new Rt(E,M,S,p);T.type=C,T.needsUpdate=!0;const A=4*w;for(let P=0;P<p;P++){const z=q[P],L=y[P],U=b[P],D=M*S*4*P;for(let I=0;I<z.count;I++){const N=I*A;!0===v&&(a.fromBufferAttribute(z,I),E[D+N+0]=a.x,E[D+N+1]=a.y,E[D+N+2]=a.z,E[D+N+3]=0),!0===x&&(a.fromBufferAttribute(L,I),E[D+N+4]=a.x,E[D+N+5]=a.y,E[D+N+6]=a.z,E[D+N+7]=0),!0===_&&(a.fromBufferAttribute(U,I),E[D+N+8]=a.x,E[D+N+9]=a.y,E[D+N+10]=a.z,E[D+N+11]=4===U.itemSize?a.w:1)}}function R(){T.dispose(),s.delete(h),h.removeEventListener("dispose",R)}m={count:p,texture:T,size:new lt(M,S)},s.set(h,m),h.addEventListener("dispose",R)}let f=0;for(let O=0;O<u.length;O++)f+=u[O];const g=h.morphTargetsRelative?1:1-f;c.getUniforms().setValue(t,"morphTargetBaseInfluence",g),c.getUniforms().setValue(t,"morphTargetInfluences",u),c.getUniforms().setValue(t,"morphTargetsTexture",m.texture,i),c.getUniforms().setValue(t,"morphTargetsTextureSize",m.size)}else{const F=void 0===u?0:u.length;let B=n[h.id];if(void 0===B||B.length!==F){B=[];for(let W=0;W<F;W++)B[W]=[W,0];n[h.id]=B}for(let j=0;j<F;j++){const X=B[j];X[0]=j,X[1]=u[j]}B.sort(Un);for(let Y=0;Y<8;Y++)Y<F&&B[Y][1]?(o[Y][0]=B[Y][0],o[Y][1]=B[Y][1]):(o[Y][0]=Number.MAX_SAFE_INTEGER,o[Y][1]=0);o.sort(Ln);const k=h.morphAttributes.position,V=h.morphAttributes.normal;let H=0;for(let K=0;K<8;K++){const Z=o[K],J=Z[0],$=Z[1];J!==Number.MAX_SAFE_INTEGER&&$?(k&&h.getAttribute("morphTarget"+K)!==k[J]&&h.setAttribute("morphTarget"+K,k[J]),V&&h.getAttribute("morphNormal"+K)!==V[J]&&h.setAttribute("morphNormal"+K,V[J]),r[K]=$,H+=$):(k&&!0===h.hasAttribute("morphTarget"+K)&&h.deleteAttribute("morphTarget"+K),V&&!0===h.hasAttribute("morphNormal"+K)&&h.deleteAttribute("morphNormal"+K),r[K]=0)}const G=h.morphTargetsRelative?1:1-H;c.getUniforms().setValue(t,"morphTargetBaseInfluence",G),c.getUniforms().setValue(t,"morphTargetInfluences",r)}}}}function In(t,e,i,n){let r=new WeakMap;function s(t){const e=t.target;e.removeEventListener("dispose",s),i.remove(e.instanceMatrix),null!==e.instanceColor&&i.remove(e.instanceColor)}return{update:function(a){const o=n.render.frame,l=a.geometry,h=e.get(a,l);return r.get(h)!==o&&(e.update(h),r.set(h,o)),a.isInstancedMesh&&(!1===a.hasEventListener("dispose",s)&&a.addEventListener("dispose",s),i.update(a.instanceMatrix,t.ARRAY_BUFFER),null!==a.instanceColor&&i.update(a.instanceColor,t.ARRAY_BUFFER)),h},dispose:function(){r=new WeakMap}}}const Nn=new Tt,On=new Rt,Fn=new Pt,Bn=new ji,kn=[],Vn=[],Hn=new Float32Array(16),Gn=new Float32Array(9),Wn=new Float32Array(4);function jn(t,e,i){const n=t[0];if(n<=0||n>0)return t;const r=e*i;let s=kn[r];if(void 0===s&&(s=new Float32Array(r),kn[r]=s),0!==e){n.toArray(s,0);for(let n=1,r=0;n!==e;++n)r+=i,t[n].toArray(s,r)}return s}function Xn(t,e){if(t.length!==e.length)return!1;for(let i=0,n=t.length;i<n;i++)if(t[i]!==e[i])return!1;return!0}function Yn(t,e){for(let i=0,n=e.length;i<n;i++)t[i]=e[i]}function Kn(t,e){let i=Vn[e];void 0===i&&(i=new Int32Array(e),Vn[e]=i);for(let n=0;n!==e;++n)i[n]=t.allocateTextureUnit();return i}function Zn(t,e){const i=this.cache;i[0]!==e&&(t.uniform1f(this.addr,e),i[0]=e)}function Jn(t,e){const i=this.cache;if(void 0!==e.x)i[0]===e.x&&i[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),i[0]=e.x,i[1]=e.y);else{if(Xn(i,e))return;t.uniform2fv(this.addr,e),Yn(i,e)}}function $n(t,e){const i=this.cache;if(void 0!==e.x)i[0]===e.x&&i[1]===e.y&&i[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),i[0]=e.x,i[1]=e.y,i[2]=e.z);else if(void 0!==e.r)i[0]===e.r&&i[1]===e.g&&i[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),i[0]=e.r,i[1]=e.g,i[2]=e.b);else{if(Xn(i,e))return;t.uniform3fv(this.addr,e),Yn(i,e)}}function Qn(t,e){const i=this.cache;if(void 0!==e.x)i[0]===e.x&&i[1]===e.y&&i[2]===e.z&&i[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),i[0]=e.x,i[1]=e.y,i[2]=e.z,i[3]=e.w);else{if(Xn(i,e))return;t.uniform4fv(this.addr,e),Yn(i,e)}}function tr(t,e){const i=this.cache,n=e.elements;if(void 0===n){if(Xn(i,e))return;t.uniformMatrix2fv(this.addr,!1,e),Yn(i,e)}else{if(Xn(i,n))return;Wn.set(n),t.uniformMatrix2fv(this.addr,!1,Wn),Yn(i,n)}}function er(t,e){const i=this.cache,n=e.elements;if(void 0===n){if(Xn(i,e))return;t.uniformMatrix3fv(this.addr,!1,e),Yn(i,e)}else{if(Xn(i,n))return;Gn.set(n),t.uniformMatrix3fv(this.addr,!1,Gn),Yn(i,n)}}function ir(t,e){const i=this.cache,n=e.elements;if(void 0===n){if(Xn(i,e))return;t.uniformMatrix4fv(this.addr,!1,e),Yn(i,e)}else{if(Xn(i,n))return;Hn.set(n),t.uniformMatrix4fv(this.addr,!1,Hn),Yn(i,n)}}function nr(t,e){const i=this.cache;i[0]!==e&&(t.uniform1i(this.addr,e),i[0]=e)}function rr(t,e){const i=this.cache;if(void 0!==e.x)i[0]===e.x&&i[1]===e.y||(t.uniform2i(this.addr,e.x,e.y),i[0]=e.x,i[1]=e.y);else{if(Xn(i,e))return;t.uniform2iv(this.addr,e),Yn(i,e)}}function sr(t,e){const i=this.cache;if(void 0!==e.x)i[0]===e.x&&i[1]===e.y&&i[2]===e.z||(t.uniform3i(this.addr,e.x,e.y,e.z),i[0]=e.x,i[1]=e.y,i[2]=e.z);else{if(Xn(i,e))return;t.uniform3iv(this.addr,e),Yn(i,e)}}function ar(t,e){const i=this.cache;if(void 0!==e.x)i[0]===e.x&&i[1]===e.y&&i[2]===e.z&&i[3]===e.w||(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),i[0]=e.x,i[1]=e.y,i[2]=e.z,i[3]=e.w);else{if(Xn(i,e))return;t.uniform4iv(this.addr,e),Yn(i,e)}}function or(t,e){const i=this.cache;i[0]!==e&&(t.uniform1ui(this.addr,e),i[0]=e)}function lr(t,e){const i=this.cache;if(void 0!==e.x)i[0]===e.x&&i[1]===e.y||(t.uniform2ui(this.addr,e.x,e.y),i[0]=e.x,i[1]=e.y);else{if(Xn(i,e))return;t.uniform2uiv(this.addr,e),Yn(i,e)}}function hr(t,e){const i=this.cache;if(void 0!==e.x)i[0]===e.x&&i[1]===e.y&&i[2]===e.z||(t.uniform3ui(this.addr,e.x,e.y,e.z),i[0]=e.x,i[1]=e.y,i[2]=e.z);else{if(Xn(i,e))return;t.uniform3uiv(this.addr,e),Yn(i,e)}}function cr(t,e){const i=this.cache;if(void 0!==e.x)i[0]===e.x&&i[1]===e.y&&i[2]===e.z&&i[3]===e.w||(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),i[0]=e.x,i[1]=e.y,i[2]=e.z,i[3]=e.w);else{if(Xn(i,e))return;t.uniform4uiv(this.addr,e),Yn(i,e)}}function ur(t,e,i){const n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(t.uniform1i(this.addr,r),n[0]=r),i.setTexture2D(e||Nn,r)}function dr(t,e,i){const n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(t.uniform1i(this.addr,r),n[0]=r),i.setTexture3D(e||Fn,r)}function pr(t,e,i){const n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(t.uniform1i(this.addr,r),n[0]=r),i.setTextureCube(e||Bn,r)}function mr(t,e,i){const n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(t.uniform1i(this.addr,r),n[0]=r),i.setTexture2DArray(e||On,r)}function fr(t,e){t.uniform1fv(this.addr,e)}function gr(t,e){const i=jn(e,this.size,2);t.uniform2fv(this.addr,i)}function vr(t,e){const i=jn(e,this.size,3);t.uniform3fv(this.addr,i)}function xr(t,e){const i=jn(e,this.size,4);t.uniform4fv(this.addr,i)}function _r(t,e){const i=jn(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,i)}function qr(t,e){const i=jn(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,i)}function yr(t,e){const i=jn(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,i)}function br(t,e){t.uniform1iv(this.addr,e)}function wr(t,e){t.uniform2iv(this.addr,e)}function Mr(t,e){t.uniform3iv(this.addr,e)}function Sr(t,e){t.uniform4iv(this.addr,e)}function Er(t,e){t.uniform1uiv(this.addr,e)}function Tr(t,e){t.uniform2uiv(this.addr,e)}function Ar(t,e){t.uniform3uiv(this.addr,e)}function Cr(t,e){t.uniform4uiv(this.addr,e)}function Rr(t,e,i){const n=this.cache,r=e.length,s=Kn(i,r);Xn(n,s)||(t.uniform1iv(this.addr,s),Yn(n,s));for(let t=0;t!==r;++t)i.setTexture2D(e[t]||Nn,s[t])}function Pr(t,e,i){const n=this.cache,r=e.length,s=Kn(i,r);Xn(n,s)||(t.uniform1iv(this.addr,s),Yn(n,s));for(let t=0;t!==r;++t)i.setTexture3D(e[t]||Fn,s[t])}function zr(t,e,i){const n=this.cache,r=e.length,s=Kn(i,r);Xn(n,s)||(t.uniform1iv(this.addr,s),Yn(n,s));for(let t=0;t!==r;++t)i.setTextureCube(e[t]||Bn,s[t])}function Lr(t,e,i){const n=this.cache,r=e.length,s=Kn(i,r);Xn(n,s)||(t.uniform1iv(this.addr,s),Yn(n,s));for(let t=0;t!==r;++t)i.setTexture2DArray(e[t]||On,s[t])}class Ur{constructor(t,e,i){this.id=t,this.addr=i,this.cache=[],this.setValue=function(t){switch(t){case 5126:return Zn;case 35664:return Jn;case 35665:return $n;case 35666:return Qn;case 35674:return tr;case 35675:return er;case 35676:return ir;case 5124:case 35670:return nr;case 35667:case 35671:return rr;case 35668:case 35672:return sr;case 35669:case 35673:return ar;case 5125:return or;case 36294:return lr;case 36295:return hr;case 36296:return cr;case 35678:case 36198:case 36298:case 36306:case 35682:return ur;case 35679:case 36299:case 36307:return dr;case 35680:case 36300:case 36308:case 36293:return pr;case 36289:case 36303:case 36311:case 36292:return mr}}(e.type)}}class Dr{constructor(t,e,i){this.id=t,this.addr=i,this.cache=[],this.size=e.size,this.setValue=function(t){switch(t){case 5126:return fr;case 35664:return gr;case 35665:return vr;case 35666:return xr;case 35674:return _r;case 35675:return qr;case 35676:return yr;case 5124:case 35670:return br;case 35667:case 35671:return wr;case 35668:case 35672:return Mr;case 35669:case 35673:return Sr;case 5125:return Er;case 36294:return Tr;case 36295:return Ar;case 36296:return Cr;case 35678:case 36198:case 36298:case 36306:case 35682:return Rr;case 35679:case 36299:case 36307:return Pr;case 35680:case 36300:case 36308:case 36293:return zr;case 36289:case 36303:case 36311:case 36292:return Lr}}(e.type)}}class Ir{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,i){const n=this.seq;for(let r=0,s=n.length;r!==s;++r){const s=n[r];s.setValue(t,e[s.id],i)}}}const Nr=/(\w+)(\])?(\[|\.)?/g;function Or(t,e){t.seq.push(e),t.map[e.id]=e}function Fr(t,e,i){const n=t.name,r=n.length;for(Nr.lastIndex=0;;){const s=Nr.exec(n),a=Nr.lastIndex;let o=s[1];const l="]"===s[2],h=s[3];if(l&&(o|=0),void 0===h||"["===h&&a+2===r){Or(i,void 0===h?new Ur(o,t,e):new Dr(o,t,e));break}{let t=i.map[o];void 0===t&&(t=new Ir(o),Or(i,t)),i=t}}}class Br{constructor(t,e){this.seq=[],this.map={};const i=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let n=0;n<i;++n){const i=t.getActiveUniform(e,n);Fr(i,t.getUniformLocation(e,i.name),this)}}setValue(t,e,i,n){const r=this.map[e];void 0!==r&&r.setValue(t,i,n)}setOptional(t,e,i){const n=e[i];void 0!==n&&this.setValue(t,i,n)}static upload(t,e,i,n){for(let r=0,s=e.length;r!==s;++r){const s=e[r],a=i[s.id];!1!==a.needsUpdate&&s.setValue(t,a.value,n)}}static seqWithValue(t,e){const i=[];for(let n=0,r=t.length;n!==r;++n){const r=t[n];r.id in e&&i.push(r)}return i}}function kr(t,e,i){const n=t.createShader(e);return t.shaderSource(n,i),t.compileShader(n),n}let Vr=0;function Hr(t,e,i){const n=t.getShaderParameter(e,t.COMPILE_STATUS),r=t.getShaderInfoLog(e).trim();if(n&&""===r)return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const n=parseInt(s[1]);return i.toUpperCase()+"\n\n"+r+"\n\n"+function(t,e){const i=t.split("\n"),n=[],r=Math.max(e-6,0),s=Math.min(e+6,i.length);for(let t=r;t<s;t++){const r=t+1;n.push(`${r===e?">":" "} ${r}: ${i[t]}`)}return n.join("\n")}(t.getShaderSource(e),n)}return r}function Gr(t,e){const i=function(t){switch(t){case j:return["Linear","( value )"];case W:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",t),["Linear","( value )"]}}(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+i[0]+i[1]+"; }"}function Wr(t,e){let i;switch(e){case d:i="Linear";break;case p:i="Reinhard";break;case m:i="OptimizedCineon";break;case f:i="ACESFilmic";break;case g:i="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),i="Linear"}return"vec3 "+t+"( vec3 color ) { return "+i+"ToneMapping( color ); }"}function jr(t){return""!==t}function Xr(t,e){const i=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,i).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Yr(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Kr=/^[ \t]*#include +<([\w\d./]+)>/gm;function Zr(t){return t.replace(Kr,Jr)}function Jr(t,e){const i=sn[e];if(void 0===i)throw new Error("Can not resolve #include <"+e+">");return Zr(i)}const $r=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Qr(t){return t.replace($r,ts)}function ts(t,e,i,n){let r="";for(let t=parseInt(e);t<parseInt(i);t++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+t+" ]").replace(/UNROLLED_LOOP_INDEX/g,t);return r}function es(t){let e="precision "+t.precision+" float;\nprecision "+t.precision+" int;";return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function is(t,e,i,r){const o=t.getContext(),d=i.defines;let p=i.vertexShader,m=i.fragmentShader;const f=function(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===n?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===s?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===a&&(e="SHADOWMAP_TYPE_VSM"),e}(i),g=function(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case v:case x:e="ENVMAP_TYPE_CUBE";break;case _:e="ENVMAP_TYPE_CUBE_UV"}return e}(i),q=function(t){let e="ENVMAP_MODE_REFLECTION";return t.envMap&&t.envMapMode===x&&(e="ENVMAP_MODE_REFRACTION"),e}(i),y=function(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case l:e="ENVMAP_BLENDING_MULTIPLY";break;case h:e="ENVMAP_BLENDING_MIX";break;case c:e="ENVMAP_BLENDING_ADD"}return e}(i),b=function(t){const e=t.envMapCubeUVHeight;if(null===e)return null;const i=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,i),112)),texelHeight:n,maxMip:i}}(i),w=i.isWebGL2?"":function(t){return[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.normalMapTangentSpace||t.clearcoatNormalMap||t.flatShading||"physical"===t.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(jr).join("\n")}(i),M=function(t){const e=[];for(const i in t){const n=t[i];!1!==n&&e.push("#define "+i+" "+n)}return e.join("\n")}(d),S=o.createProgram();let E,T,A=i.glslVersion?"#version "+i.glslVersion+"\n":"";i.isRawShaderMaterial?(E=[M].filter(jr).join("\n"),E.length>0&&(E+="\n"),T=[w,M].filter(jr).join("\n"),T.length>0&&(T+="\n")):(E=[es(i),"#define SHADER_NAME "+i.shaderName,M,i.instancing?"#define USE_INSTANCING":"",i.instancingColor?"#define USE_INSTANCING_COLOR":"",i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+q:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",i.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",i.displacementMap?"#define USE_DISPLACEMENTMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",i.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",i.mapUv?"#define MAP_UV "+i.mapUv:"",i.alphaMapUv?"#define ALPHAMAP_UV "+i.alphaMapUv:"",i.lightMapUv?"#define LIGHTMAP_UV "+i.lightMapUv:"",i.aoMapUv?"#define AOMAP_UV "+i.aoMapUv:"",i.emissiveMapUv?"#define EMISSIVEMAP_UV "+i.emissiveMapUv:"",i.bumpMapUv?"#define BUMPMAP_UV "+i.bumpMapUv:"",i.normalMapUv?"#define NORMALMAP_UV "+i.normalMapUv:"",i.displacementMapUv?"#define DISPLACEMENTMAP_UV "+i.displacementMapUv:"",i.metalnessMapUv?"#define METALNESSMAP_UV "+i.metalnessMapUv:"",i.roughnessMapUv?"#define ROUGHNESSMAP_UV "+i.roughnessMapUv:"",i.clearcoatMapUv?"#define CLEARCOATMAP_UV "+i.clearcoatMapUv:"",i.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+i.clearcoatNormalMapUv:"",i.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+i.clearcoatRoughnessMapUv:"",i.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+i.iridescenceMapUv:"",i.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+i.iridescenceThicknessMapUv:"",i.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+i.sheenColorMapUv:"",i.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+i.sheenRoughnessMapUv:"",i.specularMapUv?"#define SPECULARMAP_UV "+i.specularMapUv:"",i.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+i.specularColorMapUv:"",i.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+i.specularIntensityMapUv:"",i.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+i.transmissionMapUv:"",i.thicknessMapUv?"#define THICKNESSMAP_UV "+i.thicknessMapUv:"",i.vertexTangents?"#define USE_TANGENT":"",i.vertexColors?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUv1s?"#define USE_UV1":"",i.vertexUv2s?"#define USE_UV2":"",i.vertexUv3s?"#define USE_UV3":"",i.pointsUvs?"#define USE_POINTS_UV":"",i.flatShading?"#define FLAT_SHADED":"",i.skinning?"#define USE_SKINNING":"",i.morphTargets?"#define USE_MORPHTARGETS":"",i.morphNormals&&!1===i.flatShading?"#define USE_MORPHNORMALS":"",i.morphColors&&i.isWebGL2?"#define USE_MORPHCOLORS":"",i.morphTargetsCount>0&&i.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",i.morphTargetsCount>0&&i.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+i.morphTextureStride:"",i.morphTargetsCount>0&&i.isWebGL2?"#define MORPHTARGETS_COUNT "+i.morphTargetsCount:"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+f:"",i.sizeAttenuation?"#define USE_SIZEATTENUATION":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&i.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(jr).join("\n"),T=[w,es(i),"#define SHADER_NAME "+i.shaderName,M,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.matcap?"#define USE_MATCAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+g:"",i.envMap?"#define "+q:"",i.envMap?"#define "+y:"",b?"#define CUBEUV_TEXEL_WIDTH "+b.texelWidth:"",b?"#define CUBEUV_TEXEL_HEIGHT "+b.texelHeight:"",b?"#define CUBEUV_MAX_MIP "+b.maxMip+".0":"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",i.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.clearcoat?"#define USE_CLEARCOAT":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.iridescence?"#define USE_IRIDESCENCE":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",i.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.alphaTest?"#define USE_ALPHATEST":"",i.sheen?"#define USE_SHEEN":"",i.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.vertexTangents?"#define USE_TANGENT":"",i.vertexColors||i.instancingColor?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUv1s?"#define USE_UV1":"",i.vertexUv2s?"#define USE_UV2":"",i.vertexUv3s?"#define USE_UV3":"",i.pointsUvs?"#define USE_POINTS_UV":"",i.gradientMap?"#define USE_GRADIENTMAP":"",i.flatShading?"#define FLAT_SHADED":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+f:"",i.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",i.useLegacyLights?"#define LEGACY_LIGHTS":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&i.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",i.toneMapping!==u?"#define TONE_MAPPING":"",i.toneMapping!==u?sn.tonemapping_pars_fragment:"",i.toneMapping!==u?Wr("toneMapping",i.toneMapping):"",i.dithering?"#define DITHERING":"",i.opaque?"#define OPAQUE":"",sn.encodings_pars_fragment,Gr("linearToOutputTexel",i.outputColorSpace),i.useDepthPacking?"#define DEPTH_PACKING "+i.depthPacking:"","\n"].filter(jr).join("\n")),p=Zr(p),p=Xr(p,i),p=Yr(p,i),m=Zr(m),m=Xr(m,i),m=Yr(m,i),p=Qr(p),m=Qr(m),i.isWebGL2&&!0!==i.isRawShaderMaterial&&(A="#version 300 es\n",E=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+E,T=["#define varying in",i.glslVersion===K?"":"layout(location = 0) out highp vec4 pc_fragColor;",i.glslVersion===K?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+T);const C=A+E+p,R=A+T+m,P=kr(o,o.VERTEX_SHADER,C),z=kr(o,o.FRAGMENT_SHADER,R);if(o.attachShader(S,P),o.attachShader(S,z),void 0!==i.index0AttributeName?o.bindAttribLocation(S,0,i.index0AttributeName):!0===i.morphTargets&&o.bindAttribLocation(S,0,"position"),o.linkProgram(S),t.debug.checkShaderErrors){const e=o.getProgramInfoLog(S).trim(),i=o.getShaderInfoLog(P).trim(),n=o.getShaderInfoLog(z).trim();let r=!0,s=!0;if(!1===o.getProgramParameter(S,o.LINK_STATUS))if(r=!1,"function"==typeof t.debug.onShaderError)t.debug.onShaderError(o,S,P,z);else{const t=Hr(o,P,"vertex"),i=Hr(o,z,"fragment");console.error("THREE.WebGLProgram: Shader Error "+o.getError()+" - VALIDATE_STATUS "+o.getProgramParameter(S,o.VALIDATE_STATUS)+"\n\nProgram Info Log: "+e+"\n"+t+"\n"+i)}else""!==e?console.warn("THREE.WebGLProgram: Program Info Log:",e):""!==i&&""!==n||(s=!1);s&&(this.diagnostics={runnable:r,programLog:e,vertexShader:{log:i,prefix:E},fragmentShader:{log:n,prefix:T}})}let L,U;return o.deleteShader(P),o.deleteShader(z),this.getUniforms=function(){return void 0===L&&(L=new Br(o,S)),L},this.getAttributes=function(){return void 0===U&&(U=function(t,e){const i={},n=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let r=0;r<n;r++){const n=t.getActiveAttrib(e,r),s=n.name;let a=1;n.type===t.FLOAT_MAT2&&(a=2),n.type===t.FLOAT_MAT3&&(a=3),n.type===t.FLOAT_MAT4&&(a=4),i[s]={type:n.type,location:t.getAttribLocation(e,s),locationSize:a}}return i}(o,S)),U},this.destroy=function(){r.releaseStatesOfProgram(this),o.deleteProgram(S),this.program=void 0},this.name=i.shaderName,this.id=Vr++,this.cacheKey=e,this.usedTimes=1,this.program=S,this.vertexShader=P,this.fragmentShader=z,this}let ns=0;class rs{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const e=t.vertexShader,i=t.fragmentShader,n=this._getShaderStage(e),r=this._getShaderStage(i),s=this._getShaderCacheForMaterial(t);return!1===s.has(n)&&(s.add(n),n.usedTimes++),!1===s.has(r)&&(s.add(r),r.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const t of e)t.usedTimes--,0===t.usedTimes&&this.shaderCache.delete(t.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;let i=e.get(t);return void 0===i&&(i=new Set,e.set(t,i)),i}_getShaderStage(t){const e=this.shaderCache;let i=e.get(t);return void 0===i&&(i=new ss(t),e.set(t,i)),i}}class ss{constructor(t){this.id=ns++,this.code=t,this.usedTimes=0}}function as(t,e,i,n,r,s,a){const o=new ye,l=new rs,h=[],c=r.isWebGL2,d=r.logarithmicDepthBuffer,p=r.vertexTextures;let m=r.precision;const f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function g(t){return 1===t?"uv1":2===t?"uv2":3===t?"uv3":"uv"}return{getParameters:function(s,o,h,v,x){const q=v.fog,y=x.geometry,b=s.isMeshStandardMaterial?v.environment:null,w=(s.isMeshStandardMaterial?i:e).get(s.envMap||b),M=w&&w.mapping===_?w.image.height:null,S=f[s.type];null!==s.precision&&(m=r.getMaxPrecision(s.precision),m!==s.precision&&console.warn("THREE.WebGLProgram.getParameters:",s.precision,"not supported, using",m,"instead."));const E=y.morphAttributes.position||y.morphAttributes.normal||y.morphAttributes.color,T=void 0!==E?E.length:0;let A,C,R,P,z=0;if(void 0!==y.morphAttributes.position&&(z=1),void 0!==y.morphAttributes.normal&&(z=2),void 0!==y.morphAttributes.color&&(z=3),S){const t=on[S];A=t.vertexShader,C=t.fragmentShader}else A=s.vertexShader,C=s.fragmentShader,l.update(s),R=l.getVertexShaderID(s),P=l.getFragmentShaderID(s);const L=t.getRenderTarget(),U=!0===x.isInstancedMesh,D=!!s.map,I=!!s.matcap,N=!!w,O=!!s.aoMap,F=!!s.lightMap,B=!!s.bumpMap,k=!!s.normalMap,V=!!s.displacementMap,H=!!s.emissiveMap,G=!!s.metalnessMap,W=!!s.roughnessMap,X=s.clearcoat>0,Y=s.iridescence>0,K=s.sheen>0,Z=s.transmission>0,J=X&&!!s.clearcoatMap,$=X&&!!s.clearcoatNormalMap,Q=X&&!!s.clearcoatRoughnessMap,tt=Y&&!!s.iridescenceMap,et=Y&&!!s.iridescenceThicknessMap,it=K&&!!s.sheenColorMap,nt=K&&!!s.sheenRoughnessMap,rt=!!s.specularMap,st=!!s.specularColorMap,at=!!s.specularIntensityMap,ot=Z&&!!s.transmissionMap,lt=Z&&!!s.thicknessMap,ht=!!s.gradientMap,ct=!!s.alphaMap,ut=s.alphaTest>0,dt=!!s.extensions,pt=!!y.attributes.uv1,mt=!!y.attributes.uv2,ft=!!y.attributes.uv3;return{isWebGL2:c,shaderID:S,shaderName:s.type,vertexShader:A,fragmentShader:C,defines:s.defines,customVertexShaderID:R,customFragmentShaderID:P,isRawShaderMaterial:!0===s.isRawShaderMaterial,glslVersion:s.glslVersion,precision:m,instancing:U,instancingColor:U&&null!==x.instanceColor,supportsVertexTextures:p,outputColorSpace:null===L?t.outputColorSpace:!0===L.isXRRenderTarget?L.texture.colorSpace:j,map:D,matcap:I,envMap:N,envMapMode:N&&w.mapping,envMapCubeUVHeight:M,aoMap:O,lightMap:F,bumpMap:B,normalMap:k,displacementMap:p&&V,emissiveMap:H,normalMapObjectSpace:k&&1===s.normalMapType,normalMapTangentSpace:k&&0===s.normalMapType,metalnessMap:G,roughnessMap:W,clearcoat:X,clearcoatMap:J,clearcoatNormalMap:$,clearcoatRoughnessMap:Q,iridescence:Y,iridescenceMap:tt,iridescenceThicknessMap:et,sheen:K,sheenColorMap:it,sheenRoughnessMap:nt,specularMap:rt,specularColorMap:st,specularIntensityMap:at,transmission:Z,transmissionMap:ot,thicknessMap:lt,gradientMap:ht,opaque:!1===s.transparent&&1===s.blending,alphaMap:ct,alphaTest:ut,combine:s.combine,mapUv:D&&g(s.map.channel),aoMapUv:O&&g(s.aoMap.channel),lightMapUv:F&&g(s.lightMap.channel),bumpMapUv:B&&g(s.bumpMap.channel),normalMapUv:k&&g(s.normalMap.channel),displacementMapUv:V&&g(s.displacementMap.channel),emissiveMapUv:H&&g(s.emissiveMap.channel),metalnessMapUv:G&&g(s.metalnessMap.channel),roughnessMapUv:W&&g(s.roughnessMap.channel),clearcoatMapUv:J&&g(s.clearcoatMap.channel),clearcoatNormalMapUv:$&&g(s.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Q&&g(s.clearcoatRoughnessMap.channel),iridescenceMapUv:tt&&g(s.iridescenceMap.channel),iridescenceThicknessMapUv:et&&g(s.iridescenceThicknessMap.channel),sheenColorMapUv:it&&g(s.sheenColorMap.channel),sheenRoughnessMapUv:nt&&g(s.sheenRoughnessMap.channel),specularMapUv:rt&&g(s.specularMap.channel),specularColorMapUv:st&&g(s.specularColorMap.channel),specularIntensityMapUv:at&&g(s.specularIntensityMap.channel),transmissionMapUv:ot&&g(s.transmissionMap.channel),thicknessMapUv:lt&&g(s.thicknessMap.channel),alphaMapUv:ct&&g(s.alphaMap.channel),vertexTangents:k&&!!y.attributes.tangent,vertexColors:s.vertexColors,vertexAlphas:!0===s.vertexColors&&!!y.attributes.color&&4===y.attributes.color.itemSize,vertexUv1s:pt,vertexUv2s:mt,vertexUv3s:ft,pointsUvs:!0===x.isPoints&&!!y.attributes.uv&&(D||ct),fog:!!q,useFog:!0===s.fog,fogExp2:q&&q.isFogExp2,flatShading:!0===s.flatShading,sizeAttenuation:!0===s.sizeAttenuation,logarithmicDepthBuffer:d,skinning:!0===x.isSkinnedMesh,morphTargets:void 0!==y.morphAttributes.position,morphNormals:void 0!==y.morphAttributes.normal,morphColors:void 0!==y.morphAttributes.color,morphTargetsCount:T,morphTextureStride:z,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numSpotLightMaps:o.spotLightMap.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numDirLightShadows:o.directionalShadowMap.length,numPointLightShadows:o.pointShadowMap.length,numSpotLightShadows:o.spotShadowMap.length,numSpotLightShadowsWithMaps:o.numSpotLightShadowsWithMaps,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:s.dithering,shadowMapEnabled:t.shadowMap.enabled&&h.length>0,shadowMapType:t.shadowMap.type,toneMapping:s.toneMapped?t.toneMapping:u,useLegacyLights:t.useLegacyLights,premultipliedAlpha:s.premultipliedAlpha,doubleSided:2===s.side,flipSided:1===s.side,useDepthPacking:s.depthPacking>=0,depthPacking:s.depthPacking||0,index0AttributeName:s.index0AttributeName,extensionDerivatives:dt&&!0===s.extensions.derivatives,extensionFragDepth:dt&&!0===s.extensions.fragDepth,extensionDrawBuffers:dt&&!0===s.extensions.drawBuffers,extensionShaderTextureLOD:dt&&!0===s.extensions.shaderTextureLOD,rendererExtensionFragDepth:c||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||n.has("EXT_shader_texture_lod"),customProgramCacheKey:s.customProgramCacheKey()}},getProgramCacheKey:function(e){const i=[];if(e.shaderID?i.push(e.shaderID):(i.push(e.customVertexShaderID),i.push(e.customFragmentShaderID)),void 0!==e.defines)for(const t in e.defines)i.push(t),i.push(e.defines[t]);return!1===e.isRawShaderMaterial&&(function(t,e){t.push(e.precision),t.push(e.outputColorSpace),t.push(e.envMapMode),t.push(e.envMapCubeUVHeight),t.push(e.mapUv),t.push(e.alphaMapUv),t.push(e.lightMapUv),t.push(e.aoMapUv),t.push(e.bumpMapUv),t.push(e.normalMapUv),t.push(e.displacementMapUv),t.push(e.emissiveMapUv),t.push(e.metalnessMapUv),t.push(e.roughnessMapUv),t.push(e.clearcoatMapUv),t.push(e.clearcoatNormalMapUv),t.push(e.clearcoatRoughnessMapUv),t.push(e.iridescenceMapUv),t.push(e.iridescenceThicknessMapUv),t.push(e.sheenColorMapUv),t.push(e.sheenRoughnessMapUv),t.push(e.specularMapUv),t.push(e.specularColorMapUv),t.push(e.specularIntensityMapUv),t.push(e.transmissionMapUv),t.push(e.thicknessMapUv),t.push(e.combine),t.push(e.fogExp2),t.push(e.sizeAttenuation),t.push(e.morphTargetsCount),t.push(e.morphAttributeCount),t.push(e.numDirLights),t.push(e.numPointLights),t.push(e.numSpotLights),t.push(e.numSpotLightMaps),t.push(e.numHemiLights),t.push(e.numRectAreaLights),t.push(e.numDirLightShadows),t.push(e.numPointLightShadows),t.push(e.numSpotLightShadows),t.push(e.numSpotLightShadowsWithMaps),t.push(e.shadowMapType),t.push(e.toneMapping),t.push(e.numClippingPlanes),t.push(e.numClipIntersection),t.push(e.depthPacking)}(i,e),function(t,e){o.disableAll(),e.isWebGL2&&o.enable(0),e.supportsVertexTextures&&o.enable(1),e.instancing&&o.enable(2),e.instancingColor&&o.enable(3),e.matcap&&o.enable(4),e.envMap&&o.enable(5),e.normalMapObjectSpace&&o.enable(6),e.normalMapTangentSpace&&o.enable(7),e.clearcoat&&o.enable(8),e.iridescence&&o.enable(9),e.alphaTest&&o.enable(10),e.vertexColors&&o.enable(11),e.vertexAlphas&&o.enable(12),e.vertexUv1s&&o.enable(13),e.vertexUv2s&&o.enable(14),e.vertexUv3s&&o.enable(15),e.vertexTangents&&o.enable(16),t.push(o.mask),o.disableAll(),e.fog&&o.enable(0),e.useFog&&o.enable(1),e.flatShading&&o.enable(2),e.logarithmicDepthBuffer&&o.enable(3),e.skinning&&o.enable(4),e.morphTargets&&o.enable(5),e.morphNormals&&o.enable(6),e.morphColors&&o.enable(7),e.premultipliedAlpha&&o.enable(8),e.shadowMapEnabled&&o.enable(9),e.useLegacyLights&&o.enable(10),e.doubleSided&&o.enable(11),e.flipSided&&o.enable(12),e.useDepthPacking&&o.enable(13),e.dithering&&o.enable(14),e.transmission&&o.enable(15),e.sheen&&o.enable(16),e.opaque&&o.enable(17),e.pointsUvs&&o.enable(18),t.push(o.mask)}(i,e),i.push(t.outputColorSpace)),i.push(e.customProgramCacheKey),i.join()},getUniforms:function(t){const e=f[t.type];let i;if(e){const t=on[e];i=Bi.clone(t.uniforms)}else i=t.uniforms;return i},acquireProgram:function(e,i){let n;for(let t=0,e=h.length;t<e;t++){const e=h[t];if(e.cacheKey===i){n=e,++n.usedTimes;break}}return void 0===n&&(n=new is(t,i,e,s),h.push(n)),n},releaseProgram:function(t){if(0==--t.usedTimes){const e=h.indexOf(t);h[e]=h[h.length-1],h.pop(),t.destroy()}},releaseShaderCache:function(t){l.remove(t)},programs:h,dispose:function(){l.dispose()}}}function os(){let t=new WeakMap;return{get:function(e){let i=t.get(e);return void 0===i&&(i={},t.set(e,i)),i},remove:function(e){t.delete(e)},update:function(e,i,n){t.get(e)[i]=n},dispose:function(){t=new WeakMap}}}function ls(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function hs(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function cs(){const t=[];let e=0;const i=[],n=[],r=[];function s(i,n,r,s,a,o){let l=t[e];return void 0===l?(l={id:i.id,object:i,geometry:n,material:r,groupOrder:s,renderOrder:i.renderOrder,z:a,group:o},t[e]=l):(l.id=i.id,l.object=i,l.geometry=n,l.material=r,l.groupOrder=s,l.renderOrder=i.renderOrder,l.z=a,l.group=o),e++,l}return{opaque:i,transmissive:n,transparent:r,init:function(){e=0,i.length=0,n.length=0,r.length=0},push:function(t,e,a,o,l,h){const c=s(t,e,a,o,l,h);a.transmission>0?n.push(c):!0===a.transparent?r.push(c):i.push(c)},unshift:function(t,e,a,o,l,h){const c=s(t,e,a,o,l,h);a.transmission>0?n.unshift(c):!0===a.transparent?r.unshift(c):i.unshift(c)},finish:function(){for(let i=e,n=t.length;i<n;i++){const e=t[i];if(null===e.id)break;e.id=null,e.object=null,e.geometry=null,e.material=null,e.group=null}},sort:function(t,e){i.length>1&&i.sort(t||ls),n.length>1&&n.sort(e||hs),r.length>1&&r.sort(e||hs)}}}function us(){let t=new WeakMap;return{get:function(e,i){const n=t.get(e);let r;return void 0===n?(r=new cs,t.set(e,[r])):i>=n.length?(r=new cs,n.push(r)):r=n[i],r},dispose:function(){t=new WeakMap}}}function ds(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let i;switch(e.type){case"DirectionalLight":i={direction:new Ut,color:new ti};break;case"SpotLight":i={position:new Ut,direction:new Ut,color:new ti,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":i={position:new Ut,color:new ti,distance:0,decay:0};break;case"HemisphereLight":i={direction:new Ut,skyColor:new ti,groundColor:new ti};break;case"RectAreaLight":i={color:new ti,position:new Ut,halfWidth:new Ut,halfHeight:new Ut}}return t[e.id]=i,i}}}let ps=0;function ms(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function fs(t,e){const i=new ds,n=function(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let i;switch(e.type){case"DirectionalLight":case"SpotLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new lt};break;case"PointLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new lt,shadowCameraNear:1,shadowCameraFar:1e3}}return t[e.id]=i,i}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let t=0;t<9;t++)r.probe.push(new Ut);const s=new Ut,a=new ce,o=new ce;return{setup:function(s,a){let o=0,l=0,h=0;for(let t=0;t<9;t++)r.probe[t].set(0,0,0);let c=0,u=0,d=0,p=0,m=0,f=0,g=0,v=0,x=0,_=0;s.sort(ms);const q=!0===a?Math.PI:1;for(let t=0,e=s.length;t<e;t++){const e=s[t],a=e.color,y=e.intensity,b=e.distance,w=e.shadow&&e.shadow.map?e.shadow.map.texture:null;if(e.isAmbientLight)o+=a.r*y*q,l+=a.g*y*q,h+=a.b*y*q;else if(e.isLightProbe)for(let t=0;t<9;t++)r.probe[t].addScaledVector(e.sh.coefficients[t],y);else if(e.isDirectionalLight){const t=i.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity*q),e.castShadow){const t=e.shadow,i=n.get(e);i.shadowBias=t.bias,i.shadowNormalBias=t.normalBias,i.shadowRadius=t.radius,i.shadowMapSize=t.mapSize,r.directionalShadow[c]=i,r.directionalShadowMap[c]=w,r.directionalShadowMatrix[c]=e.shadow.matrix,f++}r.directional[c]=t,c++}else if(e.isSpotLight){const t=i.get(e);t.position.setFromMatrixPosition(e.matrixWorld),t.color.copy(a).multiplyScalar(y*q),t.distance=b,t.coneCos=Math.cos(e.angle),t.penumbraCos=Math.cos(e.angle*(1-e.penumbra)),t.decay=e.decay,r.spot[d]=t;const s=e.shadow;if(e.map&&(r.spotLightMap[x]=e.map,x++,s.updateMatrices(e),e.castShadow&&_++),r.spotLightMatrix[d]=s.matrix,e.castShadow){const t=n.get(e);t.shadowBias=s.bias,t.shadowNormalBias=s.normalBias,t.shadowRadius=s.radius,t.shadowMapSize=s.mapSize,r.spotShadow[d]=t,r.spotShadowMap[d]=w,v++}d++}else if(e.isRectAreaLight){const t=i.get(e);t.color.copy(a).multiplyScalar(y),t.halfWidth.set(.5*e.width,0,0),t.halfHeight.set(0,.5*e.height,0),r.rectArea[p]=t,p++}else if(e.isPointLight){const t=i.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity*q),t.distance=e.distance,t.decay=e.decay,e.castShadow){const t=e.shadow,i=n.get(e);i.shadowBias=t.bias,i.shadowNormalBias=t.normalBias,i.shadowRadius=t.radius,i.shadowMapSize=t.mapSize,i.shadowCameraNear=t.camera.near,i.shadowCameraFar=t.camera.far,r.pointShadow[u]=i,r.pointShadowMap[u]=w,r.pointShadowMatrix[u]=e.shadow.matrix,g++}r.point[u]=t,u++}else if(e.isHemisphereLight){const t=i.get(e);t.skyColor.copy(e.color).multiplyScalar(y*q),t.groundColor.copy(e.groundColor).multiplyScalar(y*q),r.hemi[m]=t,m++}}p>0&&(e.isWebGL2||!0===t.has("OES_texture_float_linear")?(r.rectAreaLTC1=an.LTC_FLOAT_1,r.rectAreaLTC2=an.LTC_FLOAT_2):!0===t.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=an.LTC_HALF_1,r.rectAreaLTC2=an.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=o,r.ambient[1]=l,r.ambient[2]=h;const y=r.hash;y.directionalLength===c&&y.pointLength===u&&y.spotLength===d&&y.rectAreaLength===p&&y.hemiLength===m&&y.numDirectionalShadows===f&&y.numPointShadows===g&&y.numSpotShadows===v&&y.numSpotMaps===x||(r.directional.length=c,r.spot.length=d,r.rectArea.length=p,r.point.length=u,r.hemi.length=m,r.directionalShadow.length=f,r.directionalShadowMap.length=f,r.pointShadow.length=g,r.pointShadowMap.length=g,r.spotShadow.length=v,r.spotShadowMap.length=v,r.directionalShadowMatrix.length=f,r.pointShadowMatrix.length=g,r.spotLightMatrix.length=v+x-_,r.spotLightMap.length=x,r.numSpotLightShadowsWithMaps=_,y.directionalLength=c,y.pointLength=u,y.spotLength=d,y.rectAreaLength=p,y.hemiLength=m,y.numDirectionalShadows=f,y.numPointShadows=g,y.numSpotShadows=v,y.numSpotMaps=x,r.version=ps++)},setupView:function(t,e){let i=0,n=0,l=0,h=0,c=0;const u=e.matrixWorldInverse;for(let e=0,d=t.length;e<d;e++){const d=t[e];if(d.isDirectionalLight){const t=r.directional[i];t.direction.setFromMatrixPosition(d.matrixWorld),s.setFromMatrixPosition(d.target.matrixWorld),t.direction.sub(s),t.direction.transformDirection(u),i++}else if(d.isSpotLight){const t=r.spot[l];t.position.setFromMatrixPosition(d.matrixWorld),t.position.applyMatrix4(u),t.direction.setFromMatrixPosition(d.matrixWorld),s.setFromMatrixPosition(d.target.matrixWorld),t.direction.sub(s),t.direction.transformDirection(u),l++}else if(d.isRectAreaLight){const t=r.rectArea[h];t.position.setFromMatrixPosition(d.matrixWorld),t.position.applyMatrix4(u),o.identity(),a.copy(d.matrixWorld),a.premultiply(u),o.extractRotation(a),t.halfWidth.set(.5*d.width,0,0),t.halfHeight.set(0,.5*d.height,0),t.halfWidth.applyMatrix4(o),t.halfHeight.applyMatrix4(o),h++}else if(d.isPointLight){const t=r.point[n];t.position.setFromMatrixPosition(d.matrixWorld),t.position.applyMatrix4(u),n++}else if(d.isHemisphereLight){const t=r.hemi[c];t.direction.setFromMatrixPosition(d.matrixWorld),t.direction.transformDirection(u),c++}}},state:r}}function gs(t,e){const i=new fs(t,e),n=[],r=[];return{init:function(){n.length=0,r.length=0},state:{lightsArray:n,shadowsArray:r,lights:i},setupLights:function(t){i.setup(n,t)},setupLightsView:function(t){i.setupView(n,t)},pushLight:function(t){n.push(t)},pushShadow:function(t){r.push(t)}}}function vs(t,e){let i=new WeakMap;return{get:function(n,r=0){const s=i.get(n);let a;return void 0===s?(a=new gs(t,e),i.set(n,[a])):r>=s.length?(a=new gs(t,e),s.push(a)):a=s[r],a},dispose:function(){i=new WeakMap}}}class xs extends Ke{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class _s extends Ke{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}function qs(t,e,i){let r=new tn;const s=new lt,o=new lt,l=new At,h=new xs({depthPacking:3201}),c=new _s,u={},d=i.maxTextureSize,p={0:1,1:0,2:2},m=new ki({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new lt},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),f=m.clone();f.defines.HORIZONTAL_PASS=1;const g=new gi;g.setAttribute("position",new si(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const v=new Ui(g,m),x=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=n;let _=this.type;function q(i,n){const r=e.update(v);m.defines.VSM_SAMPLES!==i.blurSamples&&(m.defines.VSM_SAMPLES=i.blurSamples,f.defines.VSM_SAMPLES=i.blurSamples,m.needsUpdate=!0,f.needsUpdate=!0),null===i.mapPass&&(i.mapPass=new Ct(s.x,s.y)),m.uniforms.shadow_pass.value=i.map.texture,m.uniforms.resolution.value=i.mapSize,m.uniforms.radius.value=i.radius,t.setRenderTarget(i.mapPass),t.clear(),t.renderBufferDirect(n,null,r,m,v,null),f.uniforms.shadow_pass.value=i.mapPass.texture,f.uniforms.resolution.value=i.mapSize,f.uniforms.radius.value=i.radius,t.setRenderTarget(i.map),t.clear(),t.renderBufferDirect(n,null,r,f,v,null)}function y(e,i,n,r){let s=null;const o=!0===n.isPointLight?e.customDistanceMaterial:e.customDepthMaterial;if(void 0!==o)s=o;else if(s=!0===n.isPointLight?c:h,t.localClippingEnabled&&!0===i.clipShadows&&Array.isArray(i.clippingPlanes)&&0!==i.clippingPlanes.length||i.displacementMap&&0!==i.displacementScale||i.alphaMap&&i.alphaTest>0||i.map&&i.alphaTest>0){const t=s.uuid,e=i.uuid;let n=u[t];void 0===n&&(n={},u[t]=n);let r=n[e];void 0===r&&(r=s.clone(),n[e]=r),s=r}return s.visible=i.visible,s.wireframe=i.wireframe,s.side=r===a?null!==i.shadowSide?i.shadowSide:i.side:null!==i.shadowSide?i.shadowSide:p[i.side],s.alphaMap=i.alphaMap,s.alphaTest=i.alphaTest,s.map=i.map,s.clipShadows=i.clipShadows,s.clippingPlanes=i.clippingPlanes,s.clipIntersection=i.clipIntersection,s.displacementMap=i.displacementMap,s.displacementScale=i.displacementScale,s.displacementBias=i.displacementBias,s.wireframeLinewidth=i.wireframeLinewidth,s.linewidth=i.linewidth,!0===n.isPointLight&&!0===s.isMeshDistanceMaterial&&(t.properties.get(s).light=n),s}function b(i,n,s,o,l){if(!1===i.visible)return;if(i.layers.test(n.layers)&&(i.isMesh||i.isLine||i.isPoints)&&(i.castShadow||i.receiveShadow&&l===a)&&(!i.frustumCulled||r.intersectsObject(i))){i.modelViewMatrix.multiplyMatrices(s.matrixWorldInverse,i.matrixWorld);const n=e.update(i),r=i.material;if(Array.isArray(r)){const e=n.groups;for(let a=0,h=e.length;a<h;a++){const h=e[a],c=r[h.materialIndex];if(c&&c.visible){const e=y(i,c,o,l);t.renderBufferDirect(s,null,n,e,i,h)}}}else if(r.visible){const e=y(i,r,o,l);t.renderBufferDirect(s,null,n,e,i,null)}}const h=i.children;for(let t=0,e=h.length;t<e;t++)b(h[t],n,s,o,l)}this.render=function(e,i,n){if(!1===x.enabled)return;if(!1===x.autoUpdate&&!1===x.needsUpdate)return;if(0===e.length)return;const h=t.getRenderTarget(),c=t.getActiveCubeFace(),u=t.getActiveMipmapLevel(),p=t.state;p.setBlending(0),p.buffers.color.setClear(1,1,1,1),p.buffers.depth.setTest(!0),p.setScissorTest(!1);const m=_!==a&&this.type===a,f=_===a&&this.type!==a;for(let h=0,c=e.length;h<c;h++){const c=e[h],u=c.shadow;if(void 0===u){console.warn("THREE.WebGLShadowMap:",c,"has no shadow.");continue}if(!1===u.autoUpdate&&!1===u.needsUpdate)continue;s.copy(u.mapSize);const g=u.getFrameExtents();if(s.multiply(g),o.copy(u.mapSize),(s.x>d||s.y>d)&&(s.x>d&&(o.x=Math.floor(d/g.x),s.x=o.x*g.x,u.mapSize.x=o.x),s.y>d&&(o.y=Math.floor(d/g.y),s.y=o.y*g.y,u.mapSize.y=o.y)),null===u.map||!0===m||!0===f){const t=this.type!==a?{minFilter:w,magFilter:w}:{};null!==u.map&&u.map.dispose(),u.map=new Ct(s.x,s.y,t),u.map.texture.name=c.name+".shadowMap",u.camera.updateProjectionMatrix()}t.setRenderTarget(u.map),t.clear();const v=u.getViewportCount();for(let t=0;t<v;t++){const e=u.getViewport(t);l.set(o.x*e.x,o.y*e.y,o.x*e.z,o.y*e.w),p.viewport(l),u.updateMatrices(c,t),r=u.getFrustum(),b(i,n,u.camera,c,this.type)}!0!==u.isPointLightShadow&&this.type===a&&q(u,n),u.needsUpdate=!1}_=this.type,x.needsUpdate=!1,t.setRenderTarget(h,c,u)}}function ys(t,e,i){const n=i.isWebGL2,r=new function(){let e=!1;const i=new At;let n=null;const r=new At(0,0,0,0);return{setMask:function(i){n===i||e||(t.colorMask(i,i,i,i),n=i)},setLocked:function(t){e=t},setClear:function(e,n,s,a,o){!0===o&&(e*=a,n*=a,s*=a),i.set(e,n,s,a),!1===r.equals(i)&&(t.clearColor(e,n,s,a),r.copy(i))},reset:function(){e=!1,n=null,r.set(-1,0,0,0)}}},s=new function(){let e=!1,i=null,n=null,r=null;return{setTest:function(e){e?k(t.DEPTH_TEST):V(t.DEPTH_TEST)},setMask:function(n){i===n||e||(t.depthMask(n),i=n)},setFunc:function(e){if(n!==e){switch(e){case 0:t.depthFunc(t.NEVER);break;case 1:t.depthFunc(t.ALWAYS);break;case 2:t.depthFunc(t.LESS);break;case 3:default:t.depthFunc(t.LEQUAL);break;case 4:t.depthFunc(t.EQUAL);break;case 5:t.depthFunc(t.GEQUAL);break;case 6:t.depthFunc(t.GREATER);break;case 7:t.depthFunc(t.NOTEQUAL)}n=e}},setLocked:function(t){e=t},setClear:function(e){r!==e&&(t.clearDepth(e),r=e)},reset:function(){e=!1,i=null,n=null,r=null}}},a=new function(){let e=!1,i=null,n=null,r=null,s=null,a=null,o=null,l=null,h=null;return{setTest:function(i){e||(i?k(t.STENCIL_TEST):V(t.STENCIL_TEST))},setMask:function(n){i===n||e||(t.stencilMask(n),i=n)},setFunc:function(e,i,a){n===e&&r===i&&s===a||(t.stencilFunc(e,i,a),n=e,r=i,s=a)},setOp:function(e,i,n){a===e&&o===i&&l===n||(t.stencilOp(e,i,n),a=e,o=i,l=n)},setLocked:function(t){e=t},setClear:function(e){h!==e&&(t.clearStencil(e),h=e)},reset:function(){e=!1,i=null,n=null,r=null,s=null,a=null,o=null,l=null,h=null}}},l=new WeakMap,h=new WeakMap;let c={},u={},d=new WeakMap,p=[],m=null,f=!1,g=null,v=null,x=null,_=null,q=null,y=null,b=null,w=!1,M=null,S=null,E=null,T=null,A=null;const C=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let R=!1,P=0;const z=t.getParameter(t.VERSION);-1!==z.indexOf("WebGL")?(P=parseFloat(/^WebGL (\d)/.exec(z)[1]),R=P>=1):-1!==z.indexOf("OpenGL ES")&&(P=parseFloat(/^OpenGL ES (\d)/.exec(z)[1]),R=P>=2);let L=null,U={};const D=t.getParameter(t.SCISSOR_BOX),I=t.getParameter(t.VIEWPORT),N=(new At).fromArray(D),O=(new At).fromArray(I);function F(e,i,r,s){const a=new Uint8Array(4),o=t.createTexture();t.bindTexture(e,o),t.texParameteri(e,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(e,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let o=0;o<r;o++)!n||e!==t.TEXTURE_3D&&e!==t.TEXTURE_2D_ARRAY?t.texImage2D(i+o,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,a):t.texImage3D(i,0,t.RGBA,1,1,s,0,t.RGBA,t.UNSIGNED_BYTE,a);return o}const B={};function k(e){!0!==c[e]&&(t.enable(e),c[e]=!0)}function V(e){!1!==c[e]&&(t.disable(e),c[e]=!1)}B[t.TEXTURE_2D]=F(t.TEXTURE_2D,t.TEXTURE_2D,1),B[t.TEXTURE_CUBE_MAP]=F(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),n&&(B[t.TEXTURE_2D_ARRAY]=F(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),B[t.TEXTURE_3D]=F(t.TEXTURE_3D,t.TEXTURE_3D,1,1)),r.setClear(0,0,0,1),s.setClear(1),a.setClear(0),k(t.DEPTH_TEST),s.setFunc(3),j(!1),X(1),k(t.CULL_FACE),W(0);const H={[o]:t.FUNC_ADD,101:t.FUNC_SUBTRACT,102:t.FUNC_REVERSE_SUBTRACT};if(n)H[103]=t.MIN,H[104]=t.MAX;else{const t=e.get("EXT_blend_minmax");null!==t&&(H[103]=t.MIN_EXT,H[104]=t.MAX_EXT)}const G={200:t.ZERO,201:t.ONE,202:t.SRC_COLOR,204:t.SRC_ALPHA,210:t.SRC_ALPHA_SATURATE,208:t.DST_COLOR,206:t.DST_ALPHA,203:t.ONE_MINUS_SRC_COLOR,205:t.ONE_MINUS_SRC_ALPHA,209:t.ONE_MINUS_DST_COLOR,207:t.ONE_MINUS_DST_ALPHA};function W(e,i,n,r,s,a,l,h){if(0!==e){if(!1===f&&(k(t.BLEND),f=!0),5===e)s=s||i,a=a||n,l=l||r,i===v&&s===q||(t.blendEquationSeparate(H[i],H[s]),v=i,q=s),n===x&&r===_&&a===y&&l===b||(t.blendFuncSeparate(G[n],G[r],G[a],G[l]),x=n,_=r,y=a,b=l),g=e,w=!1;else if(e!==g||h!==w){if(v===o&&q===o||(t.blendEquation(t.FUNC_ADD),v=o,q=o),h)switch(e){case 1:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case 2:t.blendFunc(t.ONE,t.ONE);break;case 3:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case 4:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case 1:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case 2:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case 3:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case 4:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}x=null,_=null,y=null,b=null,g=e,w=h}}else!0===f&&(V(t.BLEND),f=!1)}function j(e){M!==e&&(e?t.frontFace(t.CW):t.frontFace(t.CCW),M=e)}function X(e){0!==e?(k(t.CULL_FACE),e!==S&&(1===e?t.cullFace(t.BACK):2===e?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):V(t.CULL_FACE),S=e}function Y(e,i,n){e?(k(t.POLYGON_OFFSET_FILL),T===i&&A===n||(t.polygonOffset(i,n),T=i,A=n)):V(t.POLYGON_OFFSET_FILL)}return{buffers:{color:r,depth:s,stencil:a},enable:k,disable:V,bindFramebuffer:function(e,i){return u[e]!==i&&(t.bindFramebuffer(e,i),u[e]=i,n&&(e===t.DRAW_FRAMEBUFFER&&(u[t.FRAMEBUFFER]=i),e===t.FRAMEBUFFER&&(u[t.DRAW_FRAMEBUFFER]=i)),!0)},drawBuffers:function(n,r){let s=p,a=!1;if(n)if(s=d.get(r),void 0===s&&(s=[],d.set(r,s)),n.isWebGLMultipleRenderTargets){const e=n.texture;if(s.length!==e.length||s[0]!==t.COLOR_ATTACHMENT0){for(let i=0,n=e.length;i<n;i++)s[i]=t.COLOR_ATTACHMENT0+i;s.length=e.length,a=!0}}else s[0]!==t.COLOR_ATTACHMENT0&&(s[0]=t.COLOR_ATTACHMENT0,a=!0);else s[0]!==t.BACK&&(s[0]=t.BACK,a=!0);a&&(i.isWebGL2?t.drawBuffers(s):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(s))},useProgram:function(e){return m!==e&&(t.useProgram(e),m=e,!0)},setBlending:W,setMaterial:function(e,i){2===e.side?V(t.CULL_FACE):k(t.CULL_FACE);let n=1===e.side;i&&(n=!n),j(n),1===e.blending&&!1===e.transparent?W(0):W(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),s.setFunc(e.depthFunc),s.setTest(e.depthTest),s.setMask(e.depthWrite),r.setMask(e.colorWrite);const o=e.stencilWrite;a.setTest(o),o&&(a.setMask(e.stencilWriteMask),a.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),a.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),Y(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?k(t.SAMPLE_ALPHA_TO_COVERAGE):V(t.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:j,setCullFace:X,setLineWidth:function(e){e!==E&&(R&&t.lineWidth(e),E=e)},setPolygonOffset:Y,setScissorTest:function(e){e?k(t.SCISSOR_TEST):V(t.SCISSOR_TEST)},activeTexture:function(e){void 0===e&&(e=t.TEXTURE0+C-1),L!==e&&(t.activeTexture(e),L=e)},bindTexture:function(e,i,n){void 0===n&&(n=null===L?t.TEXTURE0+C-1:L);let r=U[n];void 0===r&&(r={type:void 0,texture:void 0},U[n]=r),r.type===e&&r.texture===i||(L!==n&&(t.activeTexture(n),L=n),t.bindTexture(e,i||B[e]),r.type=e,r.texture=i)},unbindTexture:function(){const e=U[L];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexImage3D:function(){try{t.compressedTexImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},updateUBOMapping:function(e,i){let n=h.get(i);void 0===n&&(n=new WeakMap,h.set(i,n));let r=n.get(e);void 0===r&&(r=t.getUniformBlockIndex(i,e.name),n.set(e,r))},uniformBlockBinding:function(e,i){const n=h.get(i).get(e);l.get(i)!==n&&(t.uniformBlockBinding(i,n,e.__bindingPointIndex),l.set(i,n))},texStorage2D:function(){try{t.texStorage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texStorage3D:function(){try{t.texStorage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage2D:function(){try{t.texSubImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage3D:function(){try{t.texSubImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage2D:function(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage3D:function(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(e){!1===N.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),N.copy(e))},viewport:function(e){!1===O.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),O.copy(e))},reset:function(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),!0===n&&(t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),c={},L=null,U={},u={},d=new WeakMap,p=[],m=null,f=!1,g=null,v=null,x=null,_=null,q=null,y=null,b=null,w=!1,M=null,S=null,E=null,T=null,A=null,N.set(0,0,t.canvas.width,t.canvas.height),O.set(0,0,t.canvas.width,t.canvas.height),r.reset(),s.reset(),a.reset()}}}function bs(t,e,i,n,r,s,a){const o=r.isWebGL2,l=r.maxTextures,h=r.maxCubemapSize,c=r.maxTextureSize,u=r.maxSamples,d=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,p="undefined"!=typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),m=new WeakMap;let f;const g=new WeakMap;let v=!1;try{v="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(t){}function x(t,e){return v?new OffscreenCanvas(t,e):dt("canvas")}function _(t,e,i,n){let r=1;if((t.width>n||t.height>n)&&(r=n/Math.max(t.width,t.height)),r<1||!0===e){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){const n=e?st:Math.floor,s=n(r*t.width),a=n(r*t.height);void 0===f&&(f=x(s,a));const o=i?x(s,a):f;return o.width=s,o.height=a,o.getContext("2d").drawImage(t,0,0,s,a),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+s+"x"+a+")."),o}return"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+")."),t}return t}function D(t){return rt(t.width)&&rt(t.height)}function I(t,e){return t.generateMipmaps&&e&&t.minFilter!==w&&t.minFilter!==S}function N(e){t.generateMipmap(e)}function O(i,n,r,s,a=!1){if(!1===o)return n;if(null!==i){if(void 0!==t[i])return t[i];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+i+"'")}let l=n;return n===t.RED&&(r===t.FLOAT&&(l=t.R32F),r===t.HALF_FLOAT&&(l=t.R16F),r===t.UNSIGNED_BYTE&&(l=t.R8)),n===t.RG&&(r===t.FLOAT&&(l=t.RG32F),r===t.HALF_FLOAT&&(l=t.RG16F),r===t.UNSIGNED_BYTE&&(l=t.RG8)),n===t.RGBA&&(r===t.FLOAT&&(l=t.RGBA32F),r===t.HALF_FLOAT&&(l=t.RGBA16F),r===t.UNSIGNED_BYTE&&(l=s===W&&!1===a?t.SRGB8_ALPHA8:t.RGBA8),r===t.UNSIGNED_SHORT_4_4_4_4&&(l=t.RGBA4),r===t.UNSIGNED_SHORT_5_5_5_1&&(l=t.RGB5_A1)),l!==t.R16F&&l!==t.R32F&&l!==t.RG16F&&l!==t.RG32F&&l!==t.RGBA16F&&l!==t.RGBA32F||e.get("EXT_color_buffer_float"),l}function F(t,e,i){return!0===I(t,i)||t.isFramebufferTexture&&t.minFilter!==w&&t.minFilter!==S?Math.log2(Math.max(e.width,e.height))+1:void 0!==t.mipmaps&&t.mipmaps.length>0?t.mipmaps.length:t.isCompressedTexture&&Array.isArray(t.image)?e.mipmaps.length:1}function B(e){return e===w||1004===e||e===M?t.NEAREST:t.LINEAR}function k(t){const e=t.target;e.removeEventListener("dispose",k),function(t){const e=n.get(t);if(void 0===e.__webglInit)return;const i=t.source,r=g.get(i);if(r){const n=r[e.__cacheKey];n.usedTimes--,0===n.usedTimes&&H(t),0===Object.keys(r).length&&g.delete(i)}n.remove(t)}(e),e.isVideoTexture&&m.delete(e)}function V(e){const i=e.target;i.removeEventListener("dispose",V),function(e){const i=e.texture,r=n.get(e),s=n.get(i);if(void 0!==s.__webglTexture&&(t.deleteTexture(s.__webglTexture),a.memory.textures--),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLCubeRenderTarget)for(let e=0;e<6;e++)t.deleteFramebuffer(r.__webglFramebuffer[e]),r.__webglDepthbuffer&&t.deleteRenderbuffer(r.__webglDepthbuffer[e]);else{if(t.deleteFramebuffer(r.__webglFramebuffer),r.__webglDepthbuffer&&t.deleteRenderbuffer(r.__webglDepthbuffer),r.__webglMultisampledFramebuffer&&t.deleteFramebuffer(r.__webglMultisampledFramebuffer),r.__webglColorRenderbuffer)for(let e=0;e<r.__webglColorRenderbuffer.length;e++)r.__webglColorRenderbuffer[e]&&t.deleteRenderbuffer(r.__webglColorRenderbuffer[e]);r.__webglDepthRenderbuffer&&t.deleteRenderbuffer(r.__webglDepthRenderbuffer)}if(e.isWebGLMultipleRenderTargets)for(let e=0,r=i.length;e<r;e++){const r=n.get(i[e]);r.__webglTexture&&(t.deleteTexture(r.__webglTexture),a.memory.textures--),n.remove(i[e])}n.remove(i),n.remove(e)}(i)}function H(e){const i=n.get(e);t.deleteTexture(i.__webglTexture);const r=e.source;delete g.get(r)[i.__cacheKey],a.memory.textures--}let G=0;function X(e,r){const s=n.get(e);if(e.isVideoTexture&&function(t){const e=a.render.frame;m.get(t)!==e&&(m.set(t,e),t.update())}(e),!1===e.isRenderTargetTexture&&e.version>0&&s.__version!==e.version){const t=e.image;if(null===t)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==t.complete)return void Q(s,e,r);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}i.bindTexture(t.TEXTURE_2D,s.__webglTexture,t.TEXTURE0+r)}const Y={[q]:t.REPEAT,[y]:t.CLAMP_TO_EDGE,[b]:t.MIRRORED_REPEAT},K={[w]:t.NEAREST,1004:t.NEAREST_MIPMAP_NEAREST,[M]:t.NEAREST_MIPMAP_LINEAR,[S]:t.LINEAR,1007:t.LINEAR_MIPMAP_NEAREST,[E]:t.LINEAR_MIPMAP_LINEAR};function J(i,s,a){if(a?(t.texParameteri(i,t.TEXTURE_WRAP_S,Y[s.wrapS]),t.texParameteri(i,t.TEXTURE_WRAP_T,Y[s.wrapT]),i!==t.TEXTURE_3D&&i!==t.TEXTURE_2D_ARRAY||t.texParameteri(i,t.TEXTURE_WRAP_R,Y[s.wrapR]),t.texParameteri(i,t.TEXTURE_MAG_FILTER,K[s.magFilter]),t.texParameteri(i,t.TEXTURE_MIN_FILTER,K[s.minFilter])):(t.texParameteri(i,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(i,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),i!==t.TEXTURE_3D&&i!==t.TEXTURE_2D_ARRAY||t.texParameteri(i,t.TEXTURE_WRAP_R,t.CLAMP_TO_EDGE),s.wrapS===y&&s.wrapT===y||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(i,t.TEXTURE_MAG_FILTER,B(s.magFilter)),t.texParameteri(i,t.TEXTURE_MIN_FILTER,B(s.minFilter)),s.minFilter!==w&&s.minFilter!==S&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){const a=e.get("EXT_texture_filter_anisotropic");if(s.magFilter===w)return;if(s.minFilter!==M&&s.minFilter!==E)return;if(s.type===C&&!1===e.has("OES_texture_float_linear"))return;if(!1===o&&s.type===R&&!1===e.has("OES_texture_half_float_linear"))return;(s.anisotropy>1||n.get(s).__currentAnisotropy)&&(t.texParameterf(i,a.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(s.anisotropy,r.getMaxAnisotropy())),n.get(s).__currentAnisotropy=s.anisotropy)}}function $(e,i){let n=!1;void 0===e.__webglInit&&(e.__webglInit=!0,i.addEventListener("dispose",k));const r=i.source;let s=g.get(r);void 0===s&&(s={},g.set(r,s));const o=function(t){const e=[];return e.push(t.wrapS),e.push(t.wrapT),e.push(t.wrapR||0),e.push(t.magFilter),e.push(t.minFilter),e.push(t.anisotropy),e.push(t.internalFormat),e.push(t.format),e.push(t.type),e.push(t.generateMipmaps),e.push(t.premultiplyAlpha),e.push(t.flipY),e.push(t.unpackAlignment),e.push(t.colorSpace),e.join()}(i);if(o!==e.__cacheKey){void 0===s[o]&&(s[o]={texture:t.createTexture(),usedTimes:0},a.memory.textures++,n=!0),s[o].usedTimes++;const r=s[e.__cacheKey];void 0!==r&&(s[e.__cacheKey].usedTimes--,0===r.usedTimes&&H(i)),e.__cacheKey=o,e.__webglTexture=s[o].texture}return n}function Q(e,r,a){let l=t.TEXTURE_2D;(r.isDataArrayTexture||r.isCompressedArrayTexture)&&(l=t.TEXTURE_2D_ARRAY),r.isData3DTexture&&(l=t.TEXTURE_3D);const h=$(e,r),u=r.source;i.bindTexture(l,e.__webglTexture,t.TEXTURE0+a);const d=n.get(u);if(u.version!==d.__version||!0===h){i.activeTexture(t.TEXTURE0+a),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,r.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,r.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE);const e=function(t){return!o&&(t.wrapS!==y||t.wrapT!==y||t.minFilter!==w&&t.minFilter!==S)}(r)&&!1===D(r.image);let n=_(r.image,e,!1,c);n=ot(r,n);const p=D(n)||o,m=s.convert(r.format,r.colorSpace);let f,g=s.convert(r.type),v=O(r.internalFormat,m,g,r.colorSpace);J(l,r,p);const x=r.mipmaps,q=o&&!0!==r.isVideoTexture,b=void 0===d.__version||!0===h,M=F(r,n,p);if(r.isDepthTexture)v=t.DEPTH_COMPONENT,o?v=r.type===C?t.DEPTH_COMPONENT32F:r.type===A?t.DEPTH_COMPONENT24:r.type===P?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT16:r.type===C&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),r.format===L&&v===t.DEPTH_COMPONENT&&1012!==r.type&&r.type!==A&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=A,g=s.convert(r.type)),r.format===U&&v===t.DEPTH_COMPONENT&&(v=t.DEPTH_STENCIL,r.type!==P&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=P,g=s.convert(r.type))),b&&(q?i.texStorage2D(t.TEXTURE_2D,1,v,n.width,n.height):i.texImage2D(t.TEXTURE_2D,0,v,n.width,n.height,0,m,g,null));else if(r.isDataTexture)if(x.length>0&&p){q&&b&&i.texStorage2D(t.TEXTURE_2D,M,v,x[0].width,x[0].height);for(let e=0,n=x.length;e<n;e++)f=x[e],q?i.texSubImage2D(t.TEXTURE_2D,e,0,0,f.width,f.height,m,g,f.data):i.texImage2D(t.TEXTURE_2D,e,v,f.width,f.height,0,m,g,f.data);r.generateMipmaps=!1}else q?(b&&i.texStorage2D(t.TEXTURE_2D,M,v,n.width,n.height),i.texSubImage2D(t.TEXTURE_2D,0,0,0,n.width,n.height,m,g,n.data)):i.texImage2D(t.TEXTURE_2D,0,v,n.width,n.height,0,m,g,n.data);else if(r.isCompressedTexture)if(r.isCompressedArrayTexture){q&&b&&i.texStorage3D(t.TEXTURE_2D_ARRAY,M,v,x[0].width,x[0].height,n.depth);for(let e=0,s=x.length;e<s;e++)f=x[e],r.format!==z?null!==m?q?i.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,e,0,0,0,f.width,f.height,n.depth,m,f.data,0,0):i.compressedTexImage3D(t.TEXTURE_2D_ARRAY,e,v,f.width,f.height,n.depth,0,f.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):q?i.texSubImage3D(t.TEXTURE_2D_ARRAY,e,0,0,0,f.width,f.height,n.depth,m,g,f.data):i.texImage3D(t.TEXTURE_2D_ARRAY,e,v,f.width,f.height,n.depth,0,m,g,f.data)}else{q&&b&&i.texStorage2D(t.TEXTURE_2D,M,v,x[0].width,x[0].height);for(let e=0,n=x.length;e<n;e++)f=x[e],r.format!==z?null!==m?q?i.compressedTexSubImage2D(t.TEXTURE_2D,e,0,0,f.width,f.height,m,f.data):i.compressedTexImage2D(t.TEXTURE_2D,e,v,f.width,f.height,0,f.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):q?i.texSubImage2D(t.TEXTURE_2D,e,0,0,f.width,f.height,m,g,f.data):i.texImage2D(t.TEXTURE_2D,e,v,f.width,f.height,0,m,g,f.data)}else if(r.isDataArrayTexture)q?(b&&i.texStorage3D(t.TEXTURE_2D_ARRAY,M,v,n.width,n.height,n.depth),i.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,n.width,n.height,n.depth,m,g,n.data)):i.texImage3D(t.TEXTURE_2D_ARRAY,0,v,n.width,n.height,n.depth,0,m,g,n.data);else if(r.isData3DTexture)q?(b&&i.texStorage3D(t.TEXTURE_3D,M,v,n.width,n.height,n.depth),i.texSubImage3D(t.TEXTURE_3D,0,0,0,0,n.width,n.height,n.depth,m,g,n.data)):i.texImage3D(t.TEXTURE_3D,0,v,n.width,n.height,n.depth,0,m,g,n.data);else if(r.isFramebufferTexture){if(b)if(q)i.texStorage2D(t.TEXTURE_2D,M,v,n.width,n.height);else{let e=n.width,r=n.height;for(let n=0;n<M;n++)i.texImage2D(t.TEXTURE_2D,n,v,e,r,0,m,g,null),e>>=1,r>>=1}}else if(x.length>0&&p){q&&b&&i.texStorage2D(t.TEXTURE_2D,M,v,x[0].width,x[0].height);for(let e=0,n=x.length;e<n;e++)f=x[e],q?i.texSubImage2D(t.TEXTURE_2D,e,0,0,m,g,f):i.texImage2D(t.TEXTURE_2D,e,v,m,g,f);r.generateMipmaps=!1}else q?(b&&i.texStorage2D(t.TEXTURE_2D,M,v,n.width,n.height),i.texSubImage2D(t.TEXTURE_2D,0,0,0,m,g,n)):i.texImage2D(t.TEXTURE_2D,0,v,m,g,n);I(r,p)&&N(l),d.__version=u.version,r.onUpdate&&r.onUpdate(r)}e.__version=r.version}function tt(e,r,a,o,l){const h=s.convert(a.format,a.colorSpace),c=s.convert(a.type),u=O(a.internalFormat,h,c,a.colorSpace);n.get(r).__hasExternalTextures||(l===t.TEXTURE_3D||l===t.TEXTURE_2D_ARRAY?i.texImage3D(l,0,u,r.width,r.height,r.depth,0,h,c,null):i.texImage2D(l,0,u,r.width,r.height,0,h,c,null)),i.bindFramebuffer(t.FRAMEBUFFER,e),at(r)?d.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,o,l,n.get(a).__webglTexture,0,nt(r)):(l===t.TEXTURE_2D||l>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&l<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,o,l,n.get(a).__webglTexture,0),i.bindFramebuffer(t.FRAMEBUFFER,null)}function et(e,i,n){if(t.bindRenderbuffer(t.RENDERBUFFER,e),i.depthBuffer&&!i.stencilBuffer){let r=t.DEPTH_COMPONENT16;if(n||at(i)){const e=i.depthTexture;e&&e.isDepthTexture&&(e.type===C?r=t.DEPTH_COMPONENT32F:e.type===A&&(r=t.DEPTH_COMPONENT24));const n=nt(i);at(i)?d.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,n,r,i.width,i.height):t.renderbufferStorageMultisample(t.RENDERBUFFER,n,r,i.width,i.height)}else t.renderbufferStorage(t.RENDERBUFFER,r,i.width,i.height);t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e)}else if(i.depthBuffer&&i.stencilBuffer){const r=nt(i);n&&!1===at(i)?t.renderbufferStorageMultisample(t.RENDERBUFFER,r,t.DEPTH24_STENCIL8,i.width,i.height):at(i)?d.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,r,t.DEPTH24_STENCIL8,i.width,i.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,i.width,i.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,e)}else{const e=!0===i.isWebGLMultipleRenderTargets?i.texture:[i.texture];for(let r=0;r<e.length;r++){const a=e[r],o=s.convert(a.format,a.colorSpace),l=s.convert(a.type),h=O(a.internalFormat,o,l,a.colorSpace),c=nt(i);n&&!1===at(i)?t.renderbufferStorageMultisample(t.RENDERBUFFER,c,h,i.width,i.height):at(i)?d.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,c,h,i.width,i.height):t.renderbufferStorage(t.RENDERBUFFER,h,i.width,i.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function it(e){const r=n.get(e),s=!0===e.isWebGLCubeRenderTarget;if(e.depthTexture&&!r.__autoAllocateDepthBuffer){if(s)throw new Error("target.depthTexture not supported in Cube render targets");!function(e,r){if(r&&r.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(i.bindFramebuffer(t.FRAMEBUFFER,e),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");n.get(r.depthTexture).__webglTexture&&r.depthTexture.image.width===r.width&&r.depthTexture.image.height===r.height||(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),X(r.depthTexture,0);const s=n.get(r.depthTexture).__webglTexture,a=nt(r);if(r.depthTexture.format===L)at(r)?d.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,s,0,a):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,s,0);else{if(r.depthTexture.format!==U)throw new Error("Unknown depthTexture format");at(r)?d.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,s,0,a):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,s,0)}}(r.__webglFramebuffer,e)}else if(s){r.__webglDepthbuffer=[];for(let n=0;n<6;n++)i.bindFramebuffer(t.FRAMEBUFFER,r.__webglFramebuffer[n]),r.__webglDepthbuffer[n]=t.createRenderbuffer(),et(r.__webglDepthbuffer[n],e,!1)}else i.bindFramebuffer(t.FRAMEBUFFER,r.__webglFramebuffer),r.__webglDepthbuffer=t.createRenderbuffer(),et(r.__webglDepthbuffer,e,!1);i.bindFramebuffer(t.FRAMEBUFFER,null)}function nt(t){return Math.min(u,t.samples)}function at(t){const i=n.get(t);return o&&t.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==i.__useRenderToTexture}function ot(t,i){const n=t.colorSpace,r=t.format,s=t.type;return!0===t.isCompressedTexture||t.format===Z||n!==j&&""!==n&&(n===W?!1===o?!0===e.has("EXT_sRGB")&&r===z?(t.format=Z,t.minFilter=S,t.generateMipmaps=!1):i=wt.sRGBToLinear(i):r===z&&s===T||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",n)),i}this.allocateTextureUnit=function(){const t=G;return t>=l&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+l),G+=1,t},this.resetTextureUnits=function(){G=0},this.setTexture2D=X,this.setTexture2DArray=function(e,r){const s=n.get(e);e.version>0&&s.__version!==e.version?Q(s,e,r):i.bindTexture(t.TEXTURE_2D_ARRAY,s.__webglTexture,t.TEXTURE0+r)},this.setTexture3D=function(e,r){const s=n.get(e);e.version>0&&s.__version!==e.version?Q(s,e,r):i.bindTexture(t.TEXTURE_3D,s.__webglTexture,t.TEXTURE0+r)},this.setTextureCube=function(e,r){const a=n.get(e);e.version>0&&a.__version!==e.version?function(e,r,a){if(6!==r.image.length)return;const l=$(e,r),c=r.source;i.bindTexture(t.TEXTURE_CUBE_MAP,e.__webglTexture,t.TEXTURE0+a);const u=n.get(c);if(c.version!==u.__version||!0===l){i.activeTexture(t.TEXTURE0+a),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,r.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,r.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE);const e=r.isCompressedTexture||r.image[0].isCompressedTexture,n=r.image[0]&&r.image[0].isDataTexture,d=[];for(let t=0;t<6;t++)d[t]=e||n?n?r.image[t].image:r.image[t]:_(r.image[t],!1,!0,h),d[t]=ot(r,d[t]);const p=d[0],m=D(p)||o,f=s.convert(r.format,r.colorSpace),g=s.convert(r.type),v=O(r.internalFormat,f,g,r.colorSpace),x=o&&!0!==r.isVideoTexture,q=void 0===u.__version||!0===l;let y,b=F(r,p,m);if(J(t.TEXTURE_CUBE_MAP,r,m),e){x&&q&&i.texStorage2D(t.TEXTURE_CUBE_MAP,b,v,p.width,p.height);for(let e=0;e<6;e++){y=d[e].mipmaps;for(let n=0;n<y.length;n++){const s=y[n];r.format!==z?null!==f?x?i.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,n,0,0,s.width,s.height,f,s.data):i.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,n,v,s.width,s.height,0,s.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):x?i.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,n,0,0,s.width,s.height,f,g,s.data):i.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,n,v,s.width,s.height,0,f,g,s.data)}}}else{y=r.mipmaps,x&&q&&(y.length>0&&b++,i.texStorage2D(t.TEXTURE_CUBE_MAP,b,v,d[0].width,d[0].height));for(let e=0;e<6;e++)if(n){x?i.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,0,0,d[e].width,d[e].height,f,g,d[e].data):i.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,v,d[e].width,d[e].height,0,f,g,d[e].data);for(let n=0;n<y.length;n++){const r=y[n].image[e].image;x?i.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,n+1,0,0,r.width,r.height,f,g,r.data):i.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,n+1,v,r.width,r.height,0,f,g,r.data)}}else{x?i.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,0,0,f,g,d[e]):i.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,v,f,g,d[e]);for(let n=0;n<y.length;n++){const r=y[n];x?i.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,n+1,0,0,f,g,r.image[e]):i.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,n+1,v,f,g,r.image[e])}}}I(r,m)&&N(t.TEXTURE_CUBE_MAP),u.__version=c.version,r.onUpdate&&r.onUpdate(r)}e.__version=r.version}(a,e,r):i.bindTexture(t.TEXTURE_CUBE_MAP,a.__webglTexture,t.TEXTURE0+r)},this.rebindTextures=function(e,i,r){const s=n.get(e);void 0!==i&&tt(s.__webglFramebuffer,e,e.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D),void 0!==r&&it(e)},this.setupRenderTarget=function(e){const l=e.texture,h=n.get(e),c=n.get(l);e.addEventListener("dispose",V),!0!==e.isWebGLMultipleRenderTargets&&(void 0===c.__webglTexture&&(c.__webglTexture=t.createTexture()),c.__version=l.version,a.memory.textures++);const u=!0===e.isWebGLCubeRenderTarget,d=!0===e.isWebGLMultipleRenderTargets,p=D(e)||o;if(u){h.__webglFramebuffer=[];for(let e=0;e<6;e++)h.__webglFramebuffer[e]=t.createFramebuffer()}else{if(h.__webglFramebuffer=t.createFramebuffer(),d)if(r.drawBuffers){const i=e.texture;for(let e=0,r=i.length;e<r;e++){const r=n.get(i[e]);void 0===r.__webglTexture&&(r.__webglTexture=t.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(o&&e.samples>0&&!1===at(e)){const n=d?l:[l];h.__webglMultisampledFramebuffer=t.createFramebuffer(),h.__webglColorRenderbuffer=[],i.bindFramebuffer(t.FRAMEBUFFER,h.__webglMultisampledFramebuffer);for(let i=0;i<n.length;i++){const r=n[i];h.__webglColorRenderbuffer[i]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,h.__webglColorRenderbuffer[i]);const a=s.convert(r.format,r.colorSpace),o=s.convert(r.type),l=O(r.internalFormat,a,o,r.colorSpace,!0===e.isXRRenderTarget),c=nt(e);t.renderbufferStorageMultisample(t.RENDERBUFFER,c,l,e.width,e.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+i,t.RENDERBUFFER,h.__webglColorRenderbuffer[i])}t.bindRenderbuffer(t.RENDERBUFFER,null),e.depthBuffer&&(h.__webglDepthRenderbuffer=t.createRenderbuffer(),et(h.__webglDepthRenderbuffer,e,!0)),i.bindFramebuffer(t.FRAMEBUFFER,null)}}if(u){i.bindTexture(t.TEXTURE_CUBE_MAP,c.__webglTexture),J(t.TEXTURE_CUBE_MAP,l,p);for(let i=0;i<6;i++)tt(h.__webglFramebuffer[i],e,l,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+i);I(l,p)&&N(t.TEXTURE_CUBE_MAP),i.unbindTexture()}else if(d){const r=e.texture;for(let s=0,a=r.length;s<a;s++){const a=r[s],o=n.get(a);i.bindTexture(t.TEXTURE_2D,o.__webglTexture),J(t.TEXTURE_2D,a,p),tt(h.__webglFramebuffer,e,a,t.COLOR_ATTACHMENT0+s,t.TEXTURE_2D),I(a,p)&&N(t.TEXTURE_2D)}i.unbindTexture()}else{let n=t.TEXTURE_2D;(e.isWebGL3DRenderTarget||e.isWebGLArrayRenderTarget)&&(o?n=e.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),i.bindTexture(n,c.__webglTexture),J(n,l,p),tt(h.__webglFramebuffer,e,l,t.COLOR_ATTACHMENT0,n),I(l,p)&&N(n),i.unbindTexture()}e.depthBuffer&&it(e)},this.updateRenderTargetMipmap=function(e){const r=D(e)||o,s=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture];for(let a=0,o=s.length;a<o;a++){const o=s[a];if(I(o,r)){const r=e.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,s=n.get(o).__webglTexture;i.bindTexture(r,s),N(r),i.unbindTexture()}}},this.updateMultisampleRenderTarget=function(e){if(o&&e.samples>0&&!1===at(e)){const r=e.isWebGLMultipleRenderTargets?e.texture:[e.texture],s=e.width,a=e.height;let o=t.COLOR_BUFFER_BIT;const l=[],h=e.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,c=n.get(e),u=!0===e.isWebGLMultipleRenderTargets;if(u)for(let e=0;e<r.length;e++)i.bindFramebuffer(t.FRAMEBUFFER,c.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.RENDERBUFFER,null),i.bindFramebuffer(t.FRAMEBUFFER,c.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.TEXTURE_2D,null,0);i.bindFramebuffer(t.READ_FRAMEBUFFER,c.__webglMultisampledFramebuffer),i.bindFramebuffer(t.DRAW_FRAMEBUFFER,c.__webglFramebuffer);for(let i=0;i<r.length;i++){l.push(t.COLOR_ATTACHMENT0+i),e.depthBuffer&&l.push(h);const d=void 0!==c.__ignoreDepthValues&&c.__ignoreDepthValues;if(!1===d&&(e.depthBuffer&&(o|=t.DEPTH_BUFFER_BIT),e.stencilBuffer&&(o|=t.STENCIL_BUFFER_BIT)),u&&t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,c.__webglColorRenderbuffer[i]),!0===d&&(t.invalidateFramebuffer(t.READ_FRAMEBUFFER,[h]),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[h])),u){const e=n.get(r[i]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0)}t.blitFramebuffer(0,0,s,a,0,0,s,a,o,t.NEAREST),p&&t.invalidateFramebuffer(t.READ_FRAMEBUFFER,l)}if(i.bindFramebuffer(t.READ_FRAMEBUFFER,null),i.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),u)for(let e=0;e<r.length;e++){i.bindFramebuffer(t.FRAMEBUFFER,c.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.RENDERBUFFER,c.__webglColorRenderbuffer[e]);const s=n.get(r[e]).__webglTexture;i.bindFramebuffer(t.FRAMEBUFFER,c.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.TEXTURE_2D,s,0)}i.bindFramebuffer(t.DRAW_FRAMEBUFFER,c.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=it,this.setupFrameBufferTexture=tt,this.useMultisampledRTT=at}function ws(t,e,i){const n=i.isWebGL2;return{convert:function(i,r=""){let s;if(i===T)return t.UNSIGNED_BYTE;if(1017===i)return t.UNSIGNED_SHORT_4_4_4_4;if(1018===i)return t.UNSIGNED_SHORT_5_5_5_1;if(1010===i)return t.BYTE;if(1011===i)return t.SHORT;if(1012===i)return t.UNSIGNED_SHORT;if(1013===i)return t.INT;if(i===A)return t.UNSIGNED_INT;if(i===C)return t.FLOAT;if(i===R)return n?t.HALF_FLOAT:(s=e.get("OES_texture_half_float"),null!==s?s.HALF_FLOAT_OES:null);if(1021===i)return t.ALPHA;if(i===z)return t.RGBA;if(1024===i)return t.LUMINANCE;if(1025===i)return t.LUMINANCE_ALPHA;if(i===L)return t.DEPTH_COMPONENT;if(i===U)return t.DEPTH_STENCIL;if(i===Z)return s=e.get("EXT_sRGB"),null!==s?s.SRGB_ALPHA_EXT:null;if(1028===i)return t.RED;if(1029===i)return t.RED_INTEGER;if(1030===i)return t.RG;if(1031===i)return t.RG_INTEGER;if(1033===i)return t.RGBA_INTEGER;if(i===D||i===I||i===N||i===O)if(r===W){if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===s)return null;if(i===D)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===I)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===N)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===O)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(s=e.get("WEBGL_compressed_texture_s3tc"),null===s)return null;if(i===D)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===I)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===N)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===O)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===i||35841===i||35842===i||35843===i){if(s=e.get("WEBGL_compressed_texture_pvrtc"),null===s)return null;if(35840===i)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===i)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===i)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===i)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===i)return s=e.get("WEBGL_compressed_texture_etc1"),null!==s?s.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===i||37496===i){if(s=e.get("WEBGL_compressed_texture_etc"),null===s)return null;if(37492===i)return r===W?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(37496===i)return r===W?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}if(37808===i||37809===i||37810===i||37811===i||37812===i||37813===i||37814===i||37815===i||37816===i||37817===i||37818===i||37819===i||37820===i||37821===i){if(s=e.get("WEBGL_compressed_texture_astc"),null===s)return null;if(37808===i)return r===W?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===i)return r===W?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===i)return r===W?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===i)return r===W?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===i)return r===W?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===i)return r===W?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===i)return r===W?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===i)return r===W?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===i)return r===W?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===i)return r===W?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===i)return r===W?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===i)return r===W?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===i)return r===W?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===i)return r===W?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}if(i===F){if(s=e.get("EXT_texture_compression_bptc"),null===s)return null;if(i===F)return r===W?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT}if(36283===i||36284===i||36285===i||36286===i){if(s=e.get("EXT_texture_compression_rgtc"),null===s)return null;if(i===F)return s.COMPRESSED_RED_RGTC1_EXT;if(36284===i)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(36285===i)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(36286===i)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return i===P?n?t.UNSIGNED_INT_24_8:(s=e.get("WEBGL_depth_texture"),null!==s?s.UNSIGNED_INT_24_8_WEBGL:null):void 0!==t[i]?t[i]:null}}}class Ms extends Hi{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}}class Ss extends De{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Es={type:"move"};class Ts{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Ss,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Ss,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Ut,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Ut),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Ss,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Ut,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Ut),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const e=this._hand;if(e)for(const i of t.hand.values())this._getHandJoint(e,i)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,e,i){let n=null,r=null,s=null;const a=this._targetRay,o=this._grip,l=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState){if(l&&t.hand){s=!0;for(const n of t.hand.values()){const t=e.getJointPose(n,i),r=this._getHandJoint(l,n);null!==t&&(r.matrix.fromArray(t.transform.matrix),r.matrix.decompose(r.position,r.rotation,r.scale),r.matrixWorldNeedsUpdate=!0,r.jointRadius=t.radius),r.visible=null!==t}const n=l.joints["index-finger-tip"],r=l.joints["thumb-tip"],a=n.position.distanceTo(r.position),o=.02,h=.005;l.inputState.pinching&&a>o+h?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!l.inputState.pinching&&a<=o-h&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==o&&t.gripSpace&&(r=e.getPose(t.gripSpace,i),null!==r&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1));null!==a&&(n=e.getPose(t.targetRaySpace,i),null===n&&null!==r&&(n=r),null!==n&&(a.matrix.fromArray(n.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,n.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(n.linearVelocity)):a.hasLinearVelocity=!1,n.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(n.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Es)))}return null!==a&&(a.visible=null!==n),null!==o&&(o.visible=null!==r),null!==l&&(l.visible=null!==s),this}_getHandJoint(t,e){if(void 0===t.joints[e.jointName]){const i=new Ss;i.matrixAutoUpdate=!1,i.visible=!1,t.joints[e.jointName]=i,t.add(i)}return t.joints[e.jointName]}}class As extends Tt{constructor(t,e,i,n,r,s,a,o,l,h){if((h=void 0!==h?h:L)!==L&&h!==U)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&h===L&&(i=A),void 0===i&&h===U&&(i=P),super(null,n,r,s,a,o,h,i,l),this.isDepthTexture=!0,this.image={width:t,height:e},this.magFilter=void 0!==a?a:w,this.minFilter=void 0!==o?o:w,this.flipY=!1,this.generateMipmaps=!1}}class Cs extends J{constructor(t,e){super();const i=this;let n=null,r=1,s=null,a="local-floor",o=1,l=null,h=null,c=null,u=null,d=null,p=null;const m=e.getContextAttributes();let f=null,g=null;const v=[],x=[],_=new Set,q=new Map,y=new Hi;y.layers.enable(1),y.viewport=new At;const b=new Hi;b.layers.enable(2),b.viewport=new At;const w=[y,b],M=new Ms;M.layers.enable(1),M.layers.enable(2);let S=null,E=null;function C(t){const e=x.indexOf(t.inputSource);if(-1===e)return;const i=v[e];void 0!==i&&(i.update(t.inputSource,t.frame,l||s),i.dispatchEvent({type:t.type,data:t.inputSource}))}function R(){n.removeEventListener("select",C),n.removeEventListener("selectstart",C),n.removeEventListener("selectend",C),n.removeEventListener("squeeze",C),n.removeEventListener("squeezestart",C),n.removeEventListener("squeezeend",C),n.removeEventListener("end",R),n.removeEventListener("inputsourceschange",D);for(let t=0;t<v.length;t++){const e=x[t];null!==e&&(x[t]=null,v[t].disconnect(e))}S=null,E=null,t.setRenderTarget(f),d=null,u=null,c=null,n=null,g=null,B.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}function D(t){for(let e=0;e<t.removed.length;e++){const i=t.removed[e],n=x.indexOf(i);n>=0&&(x[n]=null,v[n].disconnect(i))}for(let e=0;e<t.added.length;e++){const i=t.added[e];let n=x.indexOf(i);if(-1===n){for(let t=0;t<v.length;t++){if(t>=x.length){x.push(i),n=t;break}if(null===x[t]){x[t]=i,n=t;break}}if(-1===n)break}const r=v[n];r&&r.connect(i)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(t){let e=v[t];return void 0===e&&(e=new Ts,v[t]=e),e.getTargetRaySpace()},this.getControllerGrip=function(t){let e=v[t];return void 0===e&&(e=new Ts,v[t]=e),e.getGripSpace()},this.getHand=function(t){let e=v[t];return void 0===e&&(e=new Ts,v[t]=e),e.getHandSpace()},this.setFramebufferScaleFactor=function(t){r=t,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(t){a=t,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||s},this.setReferenceSpace=function(t){l=t},this.getBaseLayer=function(){return null!==u?u:d},this.getBinding=function(){return c},this.getFrame=function(){return p},this.getSession=function(){return n},this.setSession=async function(h){if(n=h,null!==n){if(f=t.getRenderTarget(),n.addEventListener("select",C),n.addEventListener("selectstart",C),n.addEventListener("selectend",C),n.addEventListener("squeeze",C),n.addEventListener("squeezestart",C),n.addEventListener("squeezeend",C),n.addEventListener("end",R),n.addEventListener("inputsourceschange",D),!0!==m.xrCompatible&&await e.makeXRCompatible(),void 0===n.renderState.layers||!1===t.capabilities.isWebGL2){const i={antialias:void 0!==n.renderState.layers||m.antialias,alpha:!0,depth:m.depth,stencil:m.stencil,framebufferScaleFactor:r};d=new XRWebGLLayer(n,e,i),n.updateRenderState({baseLayer:d}),g=new Ct(d.framebufferWidth,d.framebufferHeight,{format:z,type:T,colorSpace:t.outputColorSpace,stencilBuffer:m.stencil})}else{let i=null,s=null,a=null;m.depth&&(a=m.stencil?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT24,i=m.stencil?U:L,s=m.stencil?P:A);const o={colorFormat:e.RGBA8,depthFormat:a,scaleFactor:r};c=new XRWebGLBinding(n,e),u=c.createProjectionLayer(o),n.updateRenderState({layers:[u]}),g=new Ct(u.textureWidth,u.textureHeight,{format:z,type:T,depthTexture:new As(u.textureWidth,u.textureHeight,s,void 0,void 0,void 0,void 0,void 0,void 0,i),stencilBuffer:m.stencil,colorSpace:t.outputColorSpace,samples:m.antialias?4:0}),t.properties.get(g).__ignoreDepthValues=u.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(o),l=null,s=await n.requestReferenceSpace(a),B.setContext(n),B.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==n)return n.environmentBlendMode};const I=new Ut,N=new Ut;function O(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.copy(t.matrixWorld).invert()}this.updateCamera=function(t){if(null===n)return;M.near=b.near=y.near=t.near,M.far=b.far=y.far=t.far,S===M.near&&E===M.far||(n.updateRenderState({depthNear:M.near,depthFar:M.far}),S=M.near,E=M.far);const e=t.parent,i=M.cameras;O(M,e);for(let t=0;t<i.length;t++)O(i[t],e);2===i.length?function(t,e,i){I.setFromMatrixPosition(e.matrixWorld),N.setFromMatrixPosition(i.matrixWorld);const n=I.distanceTo(N),r=e.projectionMatrix.elements,s=i.projectionMatrix.elements,a=r[14]/(r[10]-1),o=r[14]/(r[10]+1),l=(r[9]+1)/r[5],h=(r[9]-1)/r[5],c=(r[8]-1)/r[0],u=(s[8]+1)/s[0],d=a*c,p=a*u,m=n/(-c+u),f=m*-c;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(f),t.translateZ(m),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.copy(t.matrixWorld).invert();const g=a+m,v=o+m,x=d-f,_=p+(n-f),q=l*o/v*g,y=h*o/v*g;t.projectionMatrix.makePerspective(x,_,q,y,g,v),t.projectionMatrixInverse.copy(t.projectionMatrix).invert()}(M,y,b):M.projectionMatrix.copy(y.projectionMatrix),function(t,e,i){null===i?t.matrix.copy(e.matrixWorld):(t.matrix.copy(i.matrixWorld),t.matrix.invert(),t.matrix.multiply(e.matrixWorld)),t.matrix.decompose(t.position,t.quaternion,t.scale),t.updateMatrixWorld(!0);const n=t.children;for(let t=0,e=n.length;t<e;t++)n[t].updateMatrixWorld(!0);t.projectionMatrix.copy(e.projectionMatrix),t.projectionMatrixInverse.copy(e.projectionMatrixInverse),t.isPerspectiveCamera&&(t.fov=2*tt*Math.atan(1/t.projectionMatrix.elements[5]),t.zoom=1)}(t,M,e)},this.getCamera=function(){return M},this.getFoveation=function(){if(null!==u||null!==d)return o},this.setFoveation=function(t){o=t,null!==u&&(u.fixedFoveation=t),null!==d&&void 0!==d.fixedFoveation&&(d.fixedFoveation=t)},this.getPlanes=function(){return _};let F=null;const B=new en;B.setAnimationLoop((function(e,n){if(h=n.getViewerPose(l||s),p=n,null!==h){const e=h.views;null!==d&&(t.setRenderTargetFramebuffer(g,d.framebuffer),t.setRenderTarget(g));let i=!1;e.length!==M.cameras.length&&(M.cameras.length=0,i=!0);for(let n=0;n<e.length;n++){const r=e[n];let s=null;if(null!==d)s=d.getViewport(r);else{const e=c.getViewSubImage(u,r);s=e.viewport,0===n&&(t.setRenderTargetTextures(g,e.colorTexture,u.ignoreDepthValues?void 0:e.depthStencilTexture),t.setRenderTarget(g))}let a=w[n];void 0===a&&(a=new Hi,a.layers.enable(n),a.viewport=new At,w[n]=a),a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.quaternion,a.scale),a.projectionMatrix.fromArray(r.projectionMatrix),a.projectionMatrixInverse.copy(a.projectionMatrix).invert(),a.viewport.set(s.x,s.y,s.width,s.height),0===n&&(M.matrix.copy(a.matrix),M.matrix.decompose(M.position,M.quaternion,M.scale)),!0===i&&M.cameras.push(a)}}for(let t=0;t<v.length;t++){const e=x[t],i=v[t];null!==e&&void 0!==i&&i.update(e,n,l||s)}if(F&&F(e,n),n.detectedPlanes){i.dispatchEvent({type:"planesdetected",data:n.detectedPlanes});let t=null;for(const e of _)n.detectedPlanes.has(e)||(null===t&&(t=[]),t.push(e));if(null!==t)for(const e of t)_.delete(e),q.delete(e),i.dispatchEvent({type:"planeremoved",data:e});for(const t of n.detectedPlanes)if(_.has(t)){const e=q.get(t);t.lastChangedTime>e&&(q.set(t,t.lastChangedTime),i.dispatchEvent({type:"planechanged",data:t}))}else _.add(t),q.set(t,n.lastChangedTime),i.dispatchEvent({type:"planeadded",data:t})}p=null})),this.setAnimationLoop=function(t){F=t},this.dispose=function(){}}}function Rs(t,e){function i(t,e){!0===t.matrixAutoUpdate&&t.updateMatrix(),e.value.copy(t.matrix)}function n(n,r){n.opacity.value=r.opacity,r.color&&n.diffuse.value.copy(r.color),r.emissive&&n.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(n.map.value=r.map,i(r.map,n.mapTransform)),r.alphaMap&&(n.alphaMap.value=r.alphaMap,i(r.alphaMap,n.alphaMapTransform)),r.bumpMap&&(n.bumpMap.value=r.bumpMap,i(r.bumpMap,n.bumpMapTransform),n.bumpScale.value=r.bumpScale,1===r.side&&(n.bumpScale.value*=-1)),r.normalMap&&(n.normalMap.value=r.normalMap,i(r.normalMap,n.normalMapTransform),n.normalScale.value.copy(r.normalScale),1===r.side&&n.normalScale.value.negate()),r.displacementMap&&(n.displacementMap.value=r.displacementMap,i(r.displacementMap,n.displacementMapTransform),n.displacementScale.value=r.displacementScale,n.displacementBias.value=r.displacementBias),r.emissiveMap&&(n.emissiveMap.value=r.emissiveMap,i(r.emissiveMap,n.emissiveMapTransform)),r.specularMap&&(n.specularMap.value=r.specularMap,i(r.specularMap,n.specularMapTransform)),r.alphaTest>0&&(n.alphaTest.value=r.alphaTest);const s=e.get(r).envMap;if(s&&(n.envMap.value=s,n.flipEnvMap.value=s.isCubeTexture&&!1===s.isRenderTargetTexture?-1:1,n.reflectivity.value=r.reflectivity,n.ior.value=r.ior,n.refractionRatio.value=r.refractionRatio),r.lightMap){n.lightMap.value=r.lightMap;const e=!0===t.useLegacyLights?Math.PI:1;n.lightMapIntensity.value=r.lightMapIntensity*e,i(r.lightMap,n.lightMapTransform)}r.aoMap&&(n.aoMap.value=r.aoMap,n.aoMapIntensity.value=r.aoMapIntensity,i(r.aoMap,n.aoMapTransform))}return{refreshFogUniforms:function(e,i){i.color.getRGB(e.fogColor.value,Fi(t)),i.isFog?(e.fogNear.value=i.near,e.fogFar.value=i.far):i.isFogExp2&&(e.fogDensity.value=i.density)},refreshMaterialUniforms:function(t,r,s,a,o){r.isMeshBasicMaterial||r.isMeshLambertMaterial?n(t,r):r.isMeshToonMaterial?(n(t,r),function(t,e){e.gradientMap&&(t.gradientMap.value=e.gradientMap)}(t,r)):r.isMeshPhongMaterial?(n(t,r),function(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4)}(t,r)):r.isMeshStandardMaterial?(n(t,r),function(t,n){t.metalness.value=n.metalness,n.metalnessMap&&(t.metalnessMap.value=n.metalnessMap,i(n.metalnessMap,t.metalnessMapTransform)),t.roughness.value=n.roughness,n.roughnessMap&&(t.roughnessMap.value=n.roughnessMap,i(n.roughnessMap,t.roughnessMapTransform));e.get(n).envMap&&(t.envMapIntensity.value=n.envMapIntensity)}(t,r),r.isMeshPhysicalMaterial&&function(t,e,n){t.ior.value=e.ior,e.sheen>0&&(t.sheenColor.value.copy(e.sheenColor).multiplyScalar(e.sheen),t.sheenRoughness.value=e.sheenRoughness,e.sheenColorMap&&(t.sheenColorMap.value=e.sheenColorMap,i(e.sheenColorMap,t.sheenColorMapTransform)),e.sheenRoughnessMap&&(t.sheenRoughnessMap.value=e.sheenRoughnessMap,i(e.sheenRoughnessMap,t.sheenRoughnessMapTransform))),e.clearcoat>0&&(t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.clearcoatMap&&(t.clearcoatMap.value=e.clearcoatMap,i(e.clearcoatMap,t.clearcoatMapTransform)),e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap,i(e.clearcoatRoughnessMap,t.clearcoatRoughnessMapTransform)),e.clearcoatNormalMap&&(t.clearcoatNormalMap.value=e.clearcoatNormalMap,i(e.clearcoatNormalMap,t.clearcoatNormalMapTransform),t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),1===e.side&&t.clearcoatNormalScale.value.negate())),e.iridescence>0&&(t.iridescence.value=e.iridescence,t.iridescenceIOR.value=e.iridescenceIOR,t.iridescenceThicknessMinimum.value=e.iridescenceThicknessRange[0],t.iridescenceThicknessMaximum.value=e.iridescenceThicknessRange[1],e.iridescenceMap&&(t.iridescenceMap.value=e.iridescenceMap,i(e.iridescenceMap,t.iridescenceMapTransform)),e.iridescenceThicknessMap&&(t.iridescenceThicknessMap.value=e.iridescenceThicknessMap,i(e.iridescenceThicknessMap,t.iridescenceThicknessMapTransform))),e.transmission>0&&(t.transmission.value=e.transmission,t.transmissionSamplerMap.value=n.texture,t.transmissionSamplerSize.value.set(n.width,n.height),e.transmissionMap&&(t.transmissionMap.value=e.transmissionMap,i(e.transmissionMap,t.transmissionMapTransform)),t.thickness.value=e.thickness,e.thicknessMap&&(t.thicknessMap.value=e.thicknessMap,i(e.thicknessMap,t.thicknessMapTransform)),t.attenuationDistance.value=e.attenuationDistance,t.attenuationColor.value.copy(e.attenuationColor)),t.specularIntensity.value=e.specularIntensity,t.specularColor.value.copy(e.specularColor),e.specularColorMap&&(t.specularColorMap.value=e.specularColorMap,i(e.specularColorMap,t.specularColorMapTransform)),e.specularIntensityMap&&(t.specularIntensityMap.value=e.specularIntensityMap,i(e.specularIntensityMap,t.specularIntensityMapTransform))}(t,r,o)):r.isMeshMatcapMaterial?(n(t,r),function(t,e){e.matcap&&(t.matcap.value=e.matcap)}(t,r)):r.isMeshDepthMaterial?n(t,r):r.isMeshDistanceMaterial?(n(t,r),function(t,i){const n=e.get(i).light;t.referencePosition.value.setFromMatrixPosition(n.matrixWorld),t.nearDistance.value=n.shadow.camera.near,t.farDistance.value=n.shadow.camera.far}(t,r)):r.isMeshNormalMaterial?n(t,r):r.isLineBasicMaterial?(function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,e.map&&(t.map.value=e.map,i(e.map,t.mapTransform))}(t,r),r.isLineDashedMaterial&&function(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}(t,r)):r.isPointsMaterial?function(t,e,n,r){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*n,t.scale.value=.5*r,e.map&&(t.map.value=e.map,i(e.map,t.uvTransform)),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.alphaTest>0&&(t.alphaTest.value=e.alphaTest)}(t,r,s,a):r.isSpriteMaterial?function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map,i(e.map,t.mapTransform)),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.alphaTest>0&&(t.alphaTest.value=e.alphaTest)}(t,r):r.isShadowMaterial?(t.color.value.copy(r.color),t.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function Ps(t,e,i,n){let r={},s={},a=[];const o=i.isWebGL2?t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(t,e,i){const n=t.value;if(void 0===i[e]){if("number"==typeof n)i[e]=n;else{const t=Array.isArray(n)?n:[n],r=[];for(let e=0;e<t.length;e++)r.push(t[e].clone());i[e]=r}return!0}if("number"==typeof n){if(i[e]!==n)return i[e]=n,!0}else{const t=Array.isArray(i[e])?i[e]:[i[e]],r=Array.isArray(n)?n:[n];for(let e=0;e<t.length;e++){const i=t[e];if(!1===i.equals(r[e]))return i.copy(r[e]),!0}}return!1}function h(t){const e={boundary:0,storage:0};return"number"==typeof t?(e.boundary=4,e.storage=4):t.isVector2?(e.boundary=8,e.storage=8):t.isVector3||t.isColor?(e.boundary=16,e.storage=12):t.isVector4?(e.boundary=16,e.storage=16):t.isMatrix3?(e.boundary=48,e.storage=48):t.isMatrix4?(e.boundary=64,e.storage=64):t.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",t),e}function c(e){const i=e.target;i.removeEventListener("dispose",c);const n=a.indexOf(i.__bindingPointIndex);a.splice(n,1),t.deleteBuffer(r[i.id]),delete r[i.id],delete s[i.id]}return{bind:function(t,e){const i=e.program;n.uniformBlockBinding(t,i)},update:function(i,u){let d=r[i.id];void 0===d&&(function(t){const e=t.uniforms;let i=0;let n=0;for(let t=0,r=e.length;t<r;t++){const r=e[t],s={boundary:0,storage:0},a=Array.isArray(r.value)?r.value:[r.value];for(let t=0,e=a.length;t<e;t++){const e=h(a[t]);s.boundary+=e.boundary,s.storage+=e.storage}r.__data=new Float32Array(s.storage/Float32Array.BYTES_PER_ELEMENT),r.__offset=i,t>0&&(n=i%16,0!==n&&16-n-s.boundary<0&&(i+=16-n,r.__offset=i)),i+=s.storage}n=i%16,n>0&&(i+=16-n),t.__size=i,t.__cache={}}(i),d=function(e){const i=function(){for(let t=0;t<o;t++)if(-1===a.indexOf(t))return a.push(t),t;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();e.__bindingPointIndex=i;const n=t.createBuffer(),r=e.__size,s=e.usage;return t.bindBuffer(t.UNIFORM_BUFFER,n),t.bufferData(t.UNIFORM_BUFFER,r,s),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,i,n),n}(i),r[i.id]=d,i.addEventListener("dispose",c));const p=u.program;n.updateUBOMapping(i,p);const m=e.render.frame;s[i.id]!==m&&(function(e){const i=r[e.id],n=e.uniforms,s=e.__cache;t.bindBuffer(t.UNIFORM_BUFFER,i);for(let e=0,i=n.length;e<i;e++){const i=n[e];if(!0===l(i,e,s)){const e=i.__offset,n=Array.isArray(i.value)?i.value:[i.value];let r=0;for(let s=0;s<n.length;s++){const a=n[s],o=h(a);"number"==typeof a?(i.__data[0]=a,t.bufferSubData(t.UNIFORM_BUFFER,e+r,i.__data)):a.isMatrix3?(i.__data[0]=a.elements[0],i.__data[1]=a.elements[1],i.__data[2]=a.elements[2],i.__data[3]=a.elements[0],i.__data[4]=a.elements[3],i.__data[5]=a.elements[4],i.__data[6]=a.elements[5],i.__data[7]=a.elements[0],i.__data[8]=a.elements[6],i.__data[9]=a.elements[7],i.__data[10]=a.elements[8],i.__data[11]=a.elements[0]):(a.toArray(i.__data,r),r+=o.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,e,i.__data)}}t.bindBuffer(t.UNIFORM_BUFFER,null)}(i),s[i.id]=m)},dispose:function(){for(const e in r)t.deleteBuffer(r[e]);a=[],r={},s={}}}}function zs(){const t=dt("canvas");return t.style.display="block",t}class Ls{constructor(t={}){const{canvas:e=zs(),context:n=null,depth:r=!0,stencil:s=!0,alpha:a=!1,antialias:o=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:h=!1,powerPreference:c="default",failIfMajorPerformanceCaveat:d=!1}=t;let p;this.isWebGLRenderer=!0,p=null!==n?n.getContextAttributes().alpha:a;let m=null,f=null;const g=[],v=[];this.domElement=e,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=W,this.useLegacyLights=!0,this.toneMapping=u,this.toneMappingExposure=1;const x=this;let _=!1,q=0,y=0,b=null,w=-1,M=null;const S=new At,A=new At;let P=null,L=e.width,U=e.height,D=1,I=null,N=null;const O=new At(0,0,L,U),F=new At(0,0,L,U);let B=!1;const k=new tn;let V=!1,H=!1,G=null;const X=new ce,Y=new Ut,K={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Z(){return null===b?D:1}let J,$,Q,tt,et,it,nt,rt,st,at,ot,lt,ht,ct,ut,dt,pt,mt,ft,gt,vt,xt,_t,qt,yt=n;function bt(t,i){for(let n=0;n<t.length;n++){const r=t[n],s=e.getContext(r,i);if(null!==s)return s}return null}try{const t={alpha:!0,depth:r,stencil:s,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:h,powerPreference:c,failIfMajorPerformanceCaveat:d};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${i}`),e.addEventListener("webglcontextlost",St,!1),e.addEventListener("webglcontextrestored",Et,!1),e.addEventListener("webglcontextcreationerror",Tt,!1),null===yt){const e=["webgl2","webgl","experimental-webgl"];if(!0===x.isWebGL1Renderer&&e.shift(),yt=bt(e,t),null===yt)throw bt(e)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===yt.getShaderPrecisionFormat&&(yt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(t){throw console.error("THREE.WebGLRenderer: "+t.message),t}function wt(){J=new Cn(yt),$=new dn(yt,J,t),J.init($),xt=new ws(yt,J,$),Q=new ys(yt,J,$),tt=new zn(yt),et=new os,it=new bs(yt,J,Q,et,$,xt,tt),nt=new mn(x),rt=new An(x),st=new nn(yt,$),_t=new cn(yt,J,st,$),at=new Rn(yt,st,tt,_t),ot=new In(yt,at,st,tt),ft=new Dn(yt,$,it),dt=new pn(et),lt=new as(x,nt,rt,J,$,_t,dt),ht=new Rs(x,et),ct=new us,ut=new vs(J,$),mt=new hn(x,nt,rt,Q,ot,p,l),pt=new qs(x,ot,$),qt=new Ps(yt,tt,$,Q),gt=new un(yt,J,tt,$),vt=new Pn(yt,J,tt,$),tt.programs=lt.programs,x.capabilities=$,x.extensions=J,x.properties=et,x.renderLists=ct,x.shadowMap=pt,x.state=Q,x.info=tt}wt();const Mt=new Cs(x,yt);function St(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),_=!0}function Et(){console.log("THREE.WebGLRenderer: Context Restored."),_=!1;const t=tt.autoReset,e=pt.enabled,i=pt.autoUpdate,n=pt.needsUpdate,r=pt.type;wt(),tt.autoReset=t,pt.enabled=e,pt.autoUpdate=i,pt.needsUpdate=n,pt.type=r}function Tt(t){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",t.statusMessage)}function Rt(t){const e=t.target;e.removeEventListener("dispose",Rt),function(t){(function(t){const e=et.get(t).programs;void 0!==e&&(e.forEach((function(t){lt.releaseProgram(t)})),t.isShaderMaterial&&lt.releaseShaderCache(t))})(t),et.remove(t)}(e)}this.xr=Mt,this.getContext=function(){return yt},this.getContextAttributes=function(){return yt.getContextAttributes()},this.forceContextLoss=function(){const t=J.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){const t=J.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return D},this.setPixelRatio=function(t){void 0!==t&&(D=t,this.setSize(L,U,!1))},this.getSize=function(t){return t.set(L,U)},this.setSize=function(t,i,n=!0){Mt.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(L=t,U=i,e.width=Math.floor(t*D),e.height=Math.floor(i*D),!0===n&&(e.style.width=t+"px",e.style.height=i+"px"),this.setViewport(0,0,t,i))},this.getDrawingBufferSize=function(t){return t.set(L*D,U*D).floor()},this.setDrawingBufferSize=function(t,i,n){L=t,U=i,D=n,e.width=Math.floor(t*n),e.height=Math.floor(i*n),this.setViewport(0,0,t,i)},this.getCurrentViewport=function(t){return t.copy(S)},this.getViewport=function(t){return t.copy(O)},this.setViewport=function(t,e,i,n){t.isVector4?O.set(t.x,t.y,t.z,t.w):O.set(t,e,i,n),Q.viewport(S.copy(O).multiplyScalar(D).floor())},this.getScissor=function(t){return t.copy(F)},this.setScissor=function(t,e,i,n){t.isVector4?F.set(t.x,t.y,t.z,t.w):F.set(t,e,i,n),Q.scissor(A.copy(F).multiplyScalar(D).floor())},this.getScissorTest=function(){return B},this.setScissorTest=function(t){Q.setScissorTest(B=t)},this.setOpaqueSort=function(t){I=t},this.setTransparentSort=function(t){N=t},this.getClearColor=function(t){return t.copy(mt.getClearColor())},this.setClearColor=function(){mt.setClearColor.apply(mt,arguments)},this.getClearAlpha=function(){return mt.getClearAlpha()},this.setClearAlpha=function(){mt.setClearAlpha.apply(mt,arguments)},this.clear=function(t=!0,e=!0,i=!0){let n=0;t&&(n|=yt.COLOR_BUFFER_BIT),e&&(n|=yt.DEPTH_BUFFER_BIT),i&&(n|=yt.STENCIL_BUFFER_BIT),yt.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",St,!1),e.removeEventListener("webglcontextrestored",Et,!1),e.removeEventListener("webglcontextcreationerror",Tt,!1),ct.dispose(),ut.dispose(),et.dispose(),nt.dispose(),rt.dispose(),ot.dispose(),_t.dispose(),qt.dispose(),lt.dispose(),Mt.dispose(),Mt.removeEventListener("sessionstart",zt),Mt.removeEventListener("sessionend",Lt),G&&(G.dispose(),G=null),Dt.stop()},this.renderBufferDirect=function(t,e,i,n,r,s){null===e&&(e=K);const a=r.isMesh&&r.matrixWorld.determinant()<0,o=function(t,e,i,n,r){!0!==e.isScene&&(e=K),it.resetTextureUnits();const s=e.fog,a=n.isMeshStandardMaterial?e.environment:null,o=null===b?x.outputColorSpace:!0===b.isXRRenderTarget?b.texture.colorSpace:j,l=(n.isMeshStandardMaterial?rt:nt).get(n.envMap||a),h=!0===n.vertexColors&&!!i.attributes.color&&4===i.attributes.color.itemSize,c=!!n.normalMap&&!!i.attributes.tangent,d=!!i.morphAttributes.position,p=!!i.morphAttributes.normal,m=!!i.morphAttributes.color,g=n.toneMapped?x.toneMapping:u,v=i.morphAttributes.position||i.morphAttributes.normal||i.morphAttributes.color,_=void 0!==v?v.length:0,q=et.get(n),y=f.state.lights;if(!0===V&&(!0===H||t!==M)){const e=t===M&&n.id===w;dt.setState(n,t,e)}let S=!1;n.version===q.__version?q.needsLights&&q.lightsStateVersion!==y.state.version||q.outputColorSpace!==o||r.isInstancedMesh&&!1===q.instancing?S=!0:r.isInstancedMesh||!0!==q.instancing?r.isSkinnedMesh&&!1===q.skinning?S=!0:r.isSkinnedMesh||!0!==q.skinning?q.envMap!==l||!0===n.fog&&q.fog!==s?S=!0:void 0===q.numClippingPlanes||q.numClippingPlanes===dt.numPlanes&&q.numIntersection===dt.numIntersection?(q.vertexAlphas!==h||q.vertexTangents!==c||q.morphTargets!==d||q.morphNormals!==p||q.morphColors!==m||q.toneMapping!==g||!0===$.isWebGL2&&q.morphTargetsCount!==_)&&(S=!0):S=!0:S=!0:S=!0:(S=!0,q.__version=n.version);let E=q.currentProgram;!0===S&&(E=Bt(n,e,r));let T=!1,A=!1,C=!1;const R=E.getUniforms(),P=q.uniforms;if(Q.useProgram(E.program)&&(T=!0,A=!0,C=!0),n.id!==w&&(w=n.id,A=!0),T||M!==t){if(R.setValue(yt,"projectionMatrix",t.projectionMatrix),$.logarithmicDepthBuffer&&R.setValue(yt,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),M!==t&&(M=t,A=!0,C=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshStandardMaterial||n.envMap){const e=R.map.cameraPosition;void 0!==e&&e.setValue(yt,Y.setFromMatrixPosition(t.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&R.setValue(yt,"isOrthographic",!0===t.isOrthographicCamera),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.isShadowMaterial||r.isSkinnedMesh)&&R.setValue(yt,"viewMatrix",t.matrixWorldInverse)}if(r.isSkinnedMesh){R.setOptional(yt,r,"bindMatrix"),R.setOptional(yt,r,"bindMatrixInverse");const t=r.skeleton;t&&($.floatVertexTextures?(null===t.boneTexture&&t.computeBoneTexture(),R.setValue(yt,"boneTexture",t.boneTexture,it),R.setValue(yt,"boneTextureSize",t.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const z=i.morphAttributes;var L,I;if((void 0!==z.position||void 0!==z.normal||void 0!==z.color&&!0===$.isWebGL2)&&ft.update(r,i,E),(A||q.receiveShadow!==r.receiveShadow)&&(q.receiveShadow=r.receiveShadow,R.setValue(yt,"receiveShadow",r.receiveShadow)),n.isMeshGouraudMaterial&&null!==n.envMap&&(P.envMap.value=l,P.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1),A&&(R.setValue(yt,"toneMappingExposure",x.toneMappingExposure),q.needsLights&&(I=C,(L=P).ambientLightColor.needsUpdate=I,L.lightProbe.needsUpdate=I,L.directionalLights.needsUpdate=I,L.directionalLightShadows.needsUpdate=I,L.pointLights.needsUpdate=I,L.pointLightShadows.needsUpdate=I,L.spotLights.needsUpdate=I,L.spotLightShadows.needsUpdate=I,L.rectAreaLights.needsUpdate=I,L.hemisphereLights.needsUpdate=I),s&&!0===n.fog&&ht.refreshFogUniforms(P,s),ht.refreshMaterialUniforms(P,n,D,U,G),Br.upload(yt,q.uniformsList,P,it)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(Br.upload(yt,q.uniformsList,P,it),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&R.setValue(yt,"center",r.center),R.setValue(yt,"modelViewMatrix",r.modelViewMatrix),R.setValue(yt,"normalMatrix",r.normalMatrix),R.setValue(yt,"modelMatrix",r.matrixWorld),n.isShaderMaterial||n.isRawShaderMaterial){const t=n.uniformsGroups;for(let e=0,i=t.length;e<i;e++)if($.isWebGL2){const i=t[e];qt.update(i,E),qt.bind(i,E)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return E}(t,e,i,n,r);Q.setMaterial(n,a);let l=i.index,h=1;!0===n.wireframe&&(l=at.getWireframeAttribute(i),h=2);const c=i.drawRange,d=i.attributes.position;let p=c.start*h,m=(c.start+c.count)*h;null!==s&&(p=Math.max(p,s.start*h),m=Math.min(m,(s.start+s.count)*h)),null!==l?(p=Math.max(p,0),m=Math.min(m,l.count)):null!=d&&(p=Math.max(p,0),m=Math.min(m,d.count));const g=m-p;if(g<0||g===1/0)return;let v;_t.setup(r,n,o,i,l);let _=gt;if(null!==l&&(v=st.get(l),_=vt,_.setIndex(v)),r.isMesh)!0===n.wireframe?(Q.setLineWidth(n.wireframeLinewidth*Z()),_.setMode(yt.LINES)):_.setMode(yt.TRIANGLES);else if(r.isLine){let t=n.linewidth;void 0===t&&(t=1),Q.setLineWidth(t*Z()),r.isLineSegments?_.setMode(yt.LINES):r.isLineLoop?_.setMode(yt.LINE_LOOP):_.setMode(yt.LINE_STRIP)}else r.isPoints?_.setMode(yt.POINTS):r.isSprite&&_.setMode(yt.TRIANGLES);if(r.isInstancedMesh)_.renderInstances(p,g,r.count);else if(i.isInstancedBufferGeometry){const t=void 0!==i._maxInstanceCount?i._maxInstanceCount:1/0,e=Math.min(i.instanceCount,t);_.renderInstances(p,g,e)}else _.render(p,g)},this.compile=function(t,e){function i(t,e,i){!0===t.transparent&&2===t.side&&!1===t.forceSinglePass?(t.side=1,t.needsUpdate=!0,Bt(t,e,i),t.side=0,t.needsUpdate=!0,Bt(t,e,i),t.side=2):Bt(t,e,i)}f=ut.get(t),f.init(),v.push(f),t.traverseVisible((function(t){t.isLight&&t.layers.test(e.layers)&&(f.pushLight(t),t.castShadow&&f.pushShadow(t))})),f.setupLights(x.useLegacyLights),t.traverse((function(e){const n=e.material;if(n)if(Array.isArray(n))for(let r=0;r<n.length;r++)i(n[r],t,e);else i(n,t,e)})),v.pop(),f=null};let Pt=null;function zt(){Dt.stop()}function Lt(){Dt.start()}const Dt=new en;function It(t,e,i,n){if(!1===t.visible)return;if(t.layers.test(e.layers))if(t.isGroup)i=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(e);else if(t.isLight)f.pushLight(t),t.castShadow&&f.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||k.intersectsSprite(t)){n&&Y.setFromMatrixPosition(t.matrixWorld).applyMatrix4(X);const e=ot.update(t),r=t.material;r.visible&&m.push(t,e,r,i,Y.z,null)}}else if((t.isMesh||t.isLine||t.isPoints)&&(!t.frustumCulled||k.intersectsObject(t))){t.isSkinnedMesh&&t.skeleton.frame!==tt.render.frame&&(t.skeleton.update(),t.skeleton.frame=tt.render.frame);const e=ot.update(t),r=t.material;if(n&&(null===e.boundingSphere&&e.computeBoundingSphere(),Y.copy(e.boundingSphere.center).applyMatrix4(t.matrixWorld).applyMatrix4(X)),Array.isArray(r)){const n=e.groups;for(let s=0,a=n.length;s<a;s++){const a=n[s],o=r[a.materialIndex];o&&o.visible&&m.push(t,e,o,i,Y.z,a)}}else r.visible&&m.push(t,e,r,i,Y.z,null)}const r=t.children;for(let t=0,s=r.length;t<s;t++)It(r[t],e,i,n)}function Nt(t,e,i,n){const r=t.opaque,s=t.transmissive,a=t.transparent;f.setupLightsView(i),!0===V&&dt.setGlobalState(x.clippingPlanes,i),s.length>0&&function(t,e,i,n){if(null===G){const t=$.isWebGL2;G=new Ct(1024,1024,{generateMipmaps:!0,type:J.has("EXT_color_buffer_half_float")?R:T,minFilter:E,samples:t&&!0===o?4:0})}const r=x.getRenderTarget();x.setRenderTarget(G),x.clear();const s=x.toneMapping;x.toneMapping=u,Ot(t,i,n),it.updateMultisampleRenderTarget(G),it.updateRenderTargetMipmap(G);let a=!1;for(let t=0,r=e.length;t<r;t++){const r=e[t],s=r.object,o=r.geometry,l=r.material,h=r.group;if(2===l.side&&s.layers.test(n.layers)){const t=l.side;l.side=1,l.needsUpdate=!0,Ft(s,i,n,o,l,h),l.side=t,l.needsUpdate=!0,a=!0}}!0===a&&(it.updateMultisampleRenderTarget(G),it.updateRenderTargetMipmap(G)),x.setRenderTarget(r),x.toneMapping=s}(r,s,e,i),n&&Q.viewport(S.copy(n)),r.length>0&&Ot(r,e,i),s.length>0&&Ot(s,e,i),a.length>0&&Ot(a,e,i),Q.buffers.depth.setTest(!0),Q.buffers.depth.setMask(!0),Q.buffers.color.setMask(!0),Q.setPolygonOffset(!1)}function Ot(t,e,i){const n=!0===e.isScene?e.overrideMaterial:null;for(let r=0,s=t.length;r<s;r++){const s=t[r],a=s.object,o=s.geometry,l=null===n?s.material:n,h=s.group;a.layers.test(i.layers)&&Ft(a,e,i,o,l,h)}}function Ft(t,e,i,n,r,s){t.onBeforeRender(x,e,i,n,r,s),t.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),r.onBeforeRender(x,e,i,n,t,s),!0===r.transparent&&2===r.side&&!1===r.forceSinglePass?(r.side=1,r.needsUpdate=!0,x.renderBufferDirect(i,e,n,r,t,s),r.side=0,r.needsUpdate=!0,x.renderBufferDirect(i,e,n,r,t,s),r.side=2):x.renderBufferDirect(i,e,n,r,t,s),t.onAfterRender(x,e,i,n,r,s)}function Bt(t,e,i){!0!==e.isScene&&(e=K);const n=et.get(t),r=f.state.lights,s=f.state.shadowsArray,a=r.state.version,o=lt.getParameters(t,r.state,s,e,i),l=lt.getProgramCacheKey(o);let h=n.programs;n.environment=t.isMeshStandardMaterial?e.environment:null,n.fog=e.fog,n.envMap=(t.isMeshStandardMaterial?rt:nt).get(t.envMap||n.environment),void 0===h&&(t.addEventListener("dispose",Rt),h=new Map,n.programs=h);let c=h.get(l);if(void 0!==c){if(n.currentProgram===c&&n.lightsStateVersion===a)return kt(t,o),c}else o.uniforms=lt.getUniforms(t),t.onBuild(i,o,x),t.onBeforeCompile(o,x),c=lt.acquireProgram(o,l),h.set(l,c),n.uniforms=o.uniforms;const u=n.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(u.clippingPlanes=dt.uniform),kt(t,o),n.needsLights=function(t){return t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights}(t),n.lightsStateVersion=a,n.needsLights&&(u.ambientLightColor.value=r.state.ambient,u.lightProbe.value=r.state.probe,u.directionalLights.value=r.state.directional,u.directionalLightShadows.value=r.state.directionalShadow,u.spotLights.value=r.state.spot,u.spotLightShadows.value=r.state.spotShadow,u.rectAreaLights.value=r.state.rectArea,u.ltc_1.value=r.state.rectAreaLTC1,u.ltc_2.value=r.state.rectAreaLTC2,u.pointLights.value=r.state.point,u.pointLightShadows.value=r.state.pointShadow,u.hemisphereLights.value=r.state.hemi,u.directionalShadowMap.value=r.state.directionalShadowMap,u.directionalShadowMatrix.value=r.state.directionalShadowMatrix,u.spotShadowMap.value=r.state.spotShadowMap,u.spotLightMatrix.value=r.state.spotLightMatrix,u.spotLightMap.value=r.state.spotLightMap,u.pointShadowMap.value=r.state.pointShadowMap,u.pointShadowMatrix.value=r.state.pointShadowMatrix);const d=c.getUniforms(),p=Br.seqWithValue(d.seq,u);return n.currentProgram=c,n.uniformsList=p,c}function kt(t,e){const i=et.get(t);i.outputColorSpace=e.outputColorSpace,i.instancing=e.instancing,i.skinning=e.skinning,i.morphTargets=e.morphTargets,i.morphNormals=e.morphNormals,i.morphColors=e.morphColors,i.morphTargetsCount=e.morphTargetsCount,i.numClippingPlanes=e.numClippingPlanes,i.numIntersection=e.numClipIntersection,i.vertexAlphas=e.vertexAlphas,i.vertexTangents=e.vertexTangents,i.toneMapping=e.toneMapping}Dt.setAnimationLoop((function(t){Pt&&Pt(t)})),"undefined"!=typeof self&&Dt.setContext(self),this.setAnimationLoop=function(t){Pt=t,Mt.setAnimationLoop(t),null===t?Dt.stop():Dt.start()},Mt.addEventListener("sessionstart",zt),Mt.addEventListener("sessionend",Lt),this.render=function(t,e){if(void 0!==e&&!0!==e.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===_)return;!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),null===e.parent&&!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),!0===Mt.enabled&&!0===Mt.isPresenting&&(!0===Mt.cameraAutoUpdate&&Mt.updateCamera(e),e=Mt.getCamera()),!0===t.isScene&&t.onBeforeRender(x,t,e,b),f=ut.get(t,v.length),f.init(),v.push(f),X.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),k.setFromProjectionMatrix(X),H=this.localClippingEnabled,V=dt.init(this.clippingPlanes,H),m=ct.get(t,g.length),m.init(),g.push(m),It(t,e,0,x.sortObjects),m.finish(),!0===x.sortObjects&&m.sort(I,N),!0===V&&dt.beginShadows();const i=f.state.shadowsArray;if(pt.render(i,t,e),!0===V&&dt.endShadows(),!0===this.info.autoReset&&this.info.reset(),mt.render(m,t),f.setupLights(x.useLegacyLights),e.isArrayCamera){const i=e.cameras;for(let e=0,n=i.length;e<n;e++){const n=i[e];Nt(m,t,n,n.viewport)}}else Nt(m,t,e);null!==b&&(it.updateMultisampleRenderTarget(b),it.updateRenderTargetMipmap(b)),!0===t.isScene&&t.onAfterRender(x,t,e),_t.resetDefaultState(),w=-1,M=null,v.pop(),f=v.length>0?v[v.length-1]:null,g.pop(),m=g.length>0?g[g.length-1]:null},this.getActiveCubeFace=function(){return q},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return b},this.setRenderTargetTextures=function(t,e,i){et.get(t.texture).__webglTexture=e,et.get(t.depthTexture).__webglTexture=i;const n=et.get(t);n.__hasExternalTextures=!0,n.__hasExternalTextures&&(n.__autoAllocateDepthBuffer=void 0===i,n.__autoAllocateDepthBuffer||!0===J.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),n.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(t,e){const i=et.get(t);i.__webglFramebuffer=e,i.__useDefaultFramebuffer=void 0===e},this.setRenderTarget=function(t,e=0,i=0){b=t,q=e,y=i;let n=!0,r=null,s=!1,a=!1;if(t){const i=et.get(t);void 0!==i.__useDefaultFramebuffer?(Q.bindFramebuffer(yt.FRAMEBUFFER,null),n=!1):void 0===i.__webglFramebuffer?it.setupRenderTarget(t):i.__hasExternalTextures&&it.rebindTextures(t,et.get(t.texture).__webglTexture,et.get(t.depthTexture).__webglTexture);const o=t.texture;(o.isData3DTexture||o.isDataArrayTexture||o.isCompressedArrayTexture)&&(a=!0);const l=et.get(t).__webglFramebuffer;t.isWebGLCubeRenderTarget?(r=l[e],s=!0):r=$.isWebGL2&&t.samples>0&&!1===it.useMultisampledRTT(t)?et.get(t).__webglMultisampledFramebuffer:l,S.copy(t.viewport),A.copy(t.scissor),P=t.scissorTest}else S.copy(O).multiplyScalar(D).floor(),A.copy(F).multiplyScalar(D).floor(),P=B;if(Q.bindFramebuffer(yt.FRAMEBUFFER,r)&&$.drawBuffers&&n&&Q.drawBuffers(t,r),Q.viewport(S),Q.scissor(A),Q.setScissorTest(P),s){const n=et.get(t.texture);yt.framebufferTexture2D(yt.FRAMEBUFFER,yt.COLOR_ATTACHMENT0,yt.TEXTURE_CUBE_MAP_POSITIVE_X+e,n.__webglTexture,i)}else if(a){const n=et.get(t.texture),r=e||0;yt.framebufferTextureLayer(yt.FRAMEBUFFER,yt.COLOR_ATTACHMENT0,n.__webglTexture,i||0,r)}w=-1},this.readRenderTargetPixels=function(t,e,i,n,r,s,a){if(!t||!t.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let o=et.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==a&&(o=o[a]),o){Q.bindFramebuffer(yt.FRAMEBUFFER,o);try{const a=t.texture,o=a.format,l=a.type;if(o!==z&&xt.convert(o)!==yt.getParameter(yt.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const h=l===R&&(J.has("EXT_color_buffer_half_float")||$.isWebGL2&&J.has("EXT_color_buffer_float"));if(!(l===T||xt.convert(l)===yt.getParameter(yt.IMPLEMENTATION_COLOR_READ_TYPE)||l===C&&($.isWebGL2||J.has("OES_texture_float")||J.has("WEBGL_color_buffer_float"))||h))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");e>=0&&e<=t.width-n&&i>=0&&i<=t.height-r&&yt.readPixels(e,i,n,r,xt.convert(o),xt.convert(l),s)}finally{const t=null!==b?et.get(b).__webglFramebuffer:null;Q.bindFramebuffer(yt.FRAMEBUFFER,t)}}},this.copyFramebufferToTexture=function(t,e,i=0){const n=Math.pow(2,-i),r=Math.floor(e.image.width*n),s=Math.floor(e.image.height*n);it.setTexture2D(e,0),yt.copyTexSubImage2D(yt.TEXTURE_2D,i,0,0,t.x,t.y,r,s),Q.unbindTexture()},this.copyTextureToTexture=function(t,e,i,n=0){const r=e.image.width,s=e.image.height,a=xt.convert(i.format),o=xt.convert(i.type);it.setTexture2D(i,0),yt.pixelStorei(yt.UNPACK_FLIP_Y_WEBGL,i.flipY),yt.pixelStorei(yt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),yt.pixelStorei(yt.UNPACK_ALIGNMENT,i.unpackAlignment),e.isDataTexture?yt.texSubImage2D(yt.TEXTURE_2D,n,t.x,t.y,r,s,a,o,e.image.data):e.isCompressedTexture?yt.compressedTexSubImage2D(yt.TEXTURE_2D,n,t.x,t.y,e.mipmaps[0].width,e.mipmaps[0].height,a,e.mipmaps[0].data):yt.texSubImage2D(yt.TEXTURE_2D,n,t.x,t.y,a,o,e.image),0===n&&i.generateMipmaps&&yt.generateMipmap(yt.TEXTURE_2D),Q.unbindTexture()},this.copyTextureToTexture3D=function(t,e,i,n,r=0){if(x.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const s=t.max.x-t.min.x+1,a=t.max.y-t.min.y+1,o=t.max.z-t.min.z+1,l=xt.convert(n.format),h=xt.convert(n.type);let c;if(n.isData3DTexture)it.setTexture3D(n,0),c=yt.TEXTURE_3D;else{if(!n.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");it.setTexture2DArray(n,0),c=yt.TEXTURE_2D_ARRAY}yt.pixelStorei(yt.UNPACK_FLIP_Y_WEBGL,n.flipY),yt.pixelStorei(yt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha),yt.pixelStorei(yt.UNPACK_ALIGNMENT,n.unpackAlignment);const u=yt.getParameter(yt.UNPACK_ROW_LENGTH),d=yt.getParameter(yt.UNPACK_IMAGE_HEIGHT),p=yt.getParameter(yt.UNPACK_SKIP_PIXELS),m=yt.getParameter(yt.UNPACK_SKIP_ROWS),f=yt.getParameter(yt.UNPACK_SKIP_IMAGES),g=i.isCompressedTexture?i.mipmaps[0]:i.image;yt.pixelStorei(yt.UNPACK_ROW_LENGTH,g.width),yt.pixelStorei(yt.UNPACK_IMAGE_HEIGHT,g.height),yt.pixelStorei(yt.UNPACK_SKIP_PIXELS,t.min.x),yt.pixelStorei(yt.UNPACK_SKIP_ROWS,t.min.y),yt.pixelStorei(yt.UNPACK_SKIP_IMAGES,t.min.z),i.isDataTexture||i.isData3DTexture?yt.texSubImage3D(c,r,e.x,e.y,e.z,s,a,o,l,h,g.data):i.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),yt.compressedTexSubImage3D(c,r,e.x,e.y,e.z,s,a,o,l,g.data)):yt.texSubImage3D(c,r,e.x,e.y,e.z,s,a,o,l,h,g),yt.pixelStorei(yt.UNPACK_ROW_LENGTH,u),yt.pixelStorei(yt.UNPACK_IMAGE_HEIGHT,d),yt.pixelStorei(yt.UNPACK_SKIP_PIXELS,p),yt.pixelStorei(yt.UNPACK_SKIP_ROWS,m),yt.pixelStorei(yt.UNPACK_SKIP_IMAGES,f),0===r&&n.generateMipmaps&&yt.generateMipmap(c),Q.unbindTexture()},this.initTexture=function(t){t.isCubeTexture?it.setTextureCube(t,0):t.isData3DTexture?it.setTexture3D(t,0):t.isDataArrayTexture||t.isCompressedArrayTexture?it.setTexture2DArray(t,0):it.setTexture2D(t,0),Q.unbindTexture()},this.resetState=function(){q=0,y=0,b=null,Q.reset(),_t.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(t){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!t}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===W?G:H}set outputEncoding(t){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=t===G?W:j}}(class extends Ls{}).prototype.isWebGL1Renderer=!0;class Us{constructor(t,e=1,i=1e3){this.isFog=!0,this.name="",this.color=new ti(t),this.near=e,this.far=i}clone(){return new Us(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class Ds extends De{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return null!==this.fog&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(e.object.backgroundIntensity=this.backgroundIntensity),e}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(t){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=t}}class Is extends Tt{constructor(t=null,e=1,i=1,n,r,s,a,o,l=1003,h=1003,c,u){super(null,s,a,o,l,h,n,r,c,u),this.isDataTexture=!0,this.image={data:t,width:e,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Ns extends Tt{constructor(t,e,i,n,r,s,a,o,l){super(t,e,i,n,r,s,a,o,l),this.isVideoTexture=!0,this.minFilter=void 0!==s?s:S,this.magFilter=void 0!==r?r:S,this.generateMipmaps=!1;const h=this;"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback((function e(){h.needsUpdate=!0,t.requestVideoFrameCallback(e)}))}clone(){return new this.constructor(this.image).copy(this)}update(){const t=this.image;!1=="requestVideoFrameCallback"in t&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class Os extends Tt{constructor(t,e,i){super({width:t,height:e}),this.isFramebufferTexture=!0,this.format=i,this.magFilter=w,this.minFilter=w,this.generateMipmaps=!1,this.needsUpdate=!0}}class Fs{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(t,e){const i=this.getUtoTmapping(t);return this.getPoint(i,e)}getPoints(t=5){const e=[];for(let i=0;i<=t;i++)e.push(this.getPoint(i/t));return e}getSpacedPoints(t=5){const e=[];for(let i=0;i<=t;i++)e.push(this.getPointAt(i/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let i,n=this.getPoint(0),r=0;e.push(0);for(let s=1;s<=t;s++)i=this.getPoint(s/t),r+=i.distanceTo(n),e.push(r),n=i;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e){const i=this.getLengths();let n=0;const r=i.length;let s;s=e||t*i[r-1];let a,o=0,l=r-1;for(;o<=l;)if(n=Math.floor(o+(l-o)/2),a=i[n]-s,a<0)o=n+1;else{if(!(a>0)){l=n;break}l=n-1}if(n=l,i[n]===s)return n/(r-1);const h=i[n];return(n+(s-h)/(i[n+1]-h))/(r-1)}getTangent(t,e){const i=1e-4;let n=t-i,r=t+i;n<0&&(n=0),r>1&&(r=1);const s=this.getPoint(n),a=this.getPoint(r),o=e||(s.isVector2?new lt:new Ut);return o.copy(a).sub(s).normalize(),o}getTangentAt(t,e){const i=this.getUtoTmapping(t);return this.getTangent(i,e)}computeFrenetFrames(t,e){const i=new Ut,n=[],r=[],s=[],a=new Ut,o=new ce;for(let e=0;e<=t;e++){const i=e/t;n[e]=this.getTangentAt(i,new Ut)}r[0]=new Ut,s[0]=new Ut;let l=Number.MAX_VALUE;const h=Math.abs(n[0].x),c=Math.abs(n[0].y),u=Math.abs(n[0].z);h<=l&&(l=h,i.set(1,0,0)),c<=l&&(l=c,i.set(0,1,0)),u<=l&&i.set(0,0,1),a.crossVectors(n[0],i).normalize(),r[0].crossVectors(n[0],a),s[0].crossVectors(n[0],r[0]);for(let e=1;e<=t;e++){if(r[e]=r[e-1].clone(),s[e]=s[e-1].clone(),a.crossVectors(n[e-1],n[e]),a.length()>Number.EPSILON){a.normalize();const t=Math.acos(it(n[e-1].dot(n[e]),-1,1));r[e].applyMatrix4(o.makeRotationAxis(a,t))}s[e].crossVectors(n[e],r[e])}if(!0===e){let e=Math.acos(it(r[0].dot(r[t]),-1,1));e/=t,n[0].dot(a.crossVectors(r[0],r[t]))>0&&(e=-e);for(let i=1;i<=t;i++)r[i].applyMatrix4(o.makeRotationAxis(n[i],e*i)),s[i].crossVectors(n[i],r[i])}return{tangents:n,normals:r,binormals:s}}clone(){return(new this.constructor).copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class Bs extends Fs{constructor(t=0,e=0,i=1,n=1,r=0,s=2*Math.PI,a=!1,o=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=i,this.yRadius=n,this.aStartAngle=r,this.aEndAngle=s,this.aClockwise=a,this.aRotation=o}getPoint(t,e){const i=e||new lt,n=2*Math.PI;let r=this.aEndAngle-this.aStartAngle;const s=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=n;for(;r>n;)r-=n;r<Number.EPSILON&&(r=s?0:n),!0!==this.aClockwise||s||(r===n?r=-n:r-=n);const a=this.aStartAngle+t*r;let o=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const t=Math.cos(this.aRotation),e=Math.sin(this.aRotation),i=o-this.aX,n=l-this.aY;o=i*t-n*e+this.aX,l=i*e+n*t+this.aY}return i.set(o,l)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}function ks(){let t=0,e=0,i=0,n=0;function r(r,s,a,o){t=r,e=a,i=-3*r+3*s-2*a-o,n=2*r-2*s+a+o}return{initCatmullRom:function(t,e,i,n,s){r(e,i,s*(i-t),s*(n-e))},initNonuniformCatmullRom:function(t,e,i,n,s,a,o){let l=(e-t)/s-(i-t)/(s+a)+(i-e)/a,h=(i-e)/a-(n-e)/(a+o)+(n-i)/o;l*=a,h*=a,r(e,i,l,h)},calc:function(r){const s=r*r;return t+e*r+i*s+n*(s*r)}}}const Vs=new Ut,Hs=new ks,Gs=new ks,Ws=new ks;function js(t,e,i,n,r){const s=.5*(n-e),a=.5*(r-i),o=t*t;return(2*i-2*n+s+a)*(t*o)+(-3*i+3*n-2*s-a)*o+s*t+i}function Xs(t,e,i,n){return function(t,e){const i=1-t;return i*i*e}(t,e)+function(t,e){return 2*(1-t)*t*e}(t,i)+function(t,e){return t*t*e}(t,n)}function Ys(t,e,i,n,r){return function(t,e){const i=1-t;return i*i*i*e}(t,e)+function(t,e){const i=1-t;return 3*i*i*t*e}(t,i)+function(t,e){return 3*(1-t)*t*t*e}(t,n)+function(t,e){return t*t*t*e}(t,r)}class Ks extends Fs{constructor(t=new lt,e=new lt,i=new lt,n=new lt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=i,this.v3=n}getPoint(t,e=new lt){const i=e,n=this.v0,r=this.v1,s=this.v2,a=this.v3;return i.set(Ys(t,n.x,r.x,s.x,a.x),Ys(t,n.y,r.y,s.y,a.y)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class Zs extends Fs{constructor(t=new lt,e=new lt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new lt){const i=e;return 1===t?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(t).add(this.v1)),i}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new lt){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Js extends Fs{constructor(t=new lt,e=new lt,i=new lt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=i}getPoint(t,e=new lt){const i=e,n=this.v0,r=this.v1,s=this.v2;return i.set(Xs(t,n.x,r.x,s.x),Xs(t,n.y,r.y,s.y)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class $s extends Fs{constructor(t=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=t}getPoint(t,e=new lt){const i=e,n=this.points,r=(n.length-1)*t,s=Math.floor(r),a=r-s,o=n[0===s?s:s-1],l=n[s],h=n[s>n.length-2?n.length-1:s+1],c=n[s>n.length-3?n.length-1:s+2];return i.set(js(a,o.x,l.x,h.x,c.x),js(a,o.y,l.y,h.y,c.y)),i}copy(t){super.copy(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){const i=t.points[e];this.points.push(i.clone())}return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,i=this.points.length;e<i;e++){const i=this.points[e];t.points.push(i.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){const i=t.points[e];this.points.push((new lt).fromArray(i))}return this}}var Qs=Object.freeze({__proto__:null,ArcCurve:class extends Bs{constructor(t,e,i,n,r,s){super(t,e,i,i,n,r,s),this.isArcCurve=!0,this.type="ArcCurve"}},CatmullRomCurve3:class extends Fs{constructor(t=[],e=!1,i="centripetal",n=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=i,this.tension=n}getPoint(t,e=new Ut){const i=e,n=this.points,r=n.length,s=(r-(this.closed?0:1))*t;let a,o,l=Math.floor(s),h=s-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/r)+1)*r:0===h&&l===r-1&&(l=r-2,h=1),this.closed||l>0?a=n[(l-1)%r]:(Vs.subVectors(n[0],n[1]).add(n[0]),a=Vs);const c=n[l%r],u=n[(l+1)%r];if(this.closed||l+2<r?o=n[(l+2)%r]:(Vs.subVectors(n[r-1],n[r-2]).add(n[r-1]),o=Vs),"centripetal"===this.curveType||"chordal"===this.curveType){const t="chordal"===this.curveType?.5:.25;let e=Math.pow(a.distanceToSquared(c),t),i=Math.pow(c.distanceToSquared(u),t),n=Math.pow(u.distanceToSquared(o),t);i<1e-4&&(i=1),e<1e-4&&(e=i),n<1e-4&&(n=i),Hs.initNonuniformCatmullRom(a.x,c.x,u.x,o.x,e,i,n),Gs.initNonuniformCatmullRom(a.y,c.y,u.y,o.y,e,i,n),Ws.initNonuniformCatmullRom(a.z,c.z,u.z,o.z,e,i,n)}else"catmullrom"===this.curveType&&(Hs.initCatmullRom(a.x,c.x,u.x,o.x,this.tension),Gs.initCatmullRom(a.y,c.y,u.y,o.y,this.tension),Ws.initCatmullRom(a.z,c.z,u.z,o.z,this.tension));return i.set(Hs.calc(h),Gs.calc(h),Ws.calc(h)),i}copy(t){super.copy(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){const i=t.points[e];this.points.push(i.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,i=this.points.length;e<i;e++){const i=this.points[e];t.points.push(i.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){const i=t.points[e];this.points.push((new Ut).fromArray(i))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}},CubicBezierCurve:Ks,CubicBezierCurve3:class extends Fs{constructor(t=new Ut,e=new Ut,i=new Ut,n=new Ut){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=i,this.v3=n}getPoint(t,e=new Ut){const i=e,n=this.v0,r=this.v1,s=this.v2,a=this.v3;return i.set(Ys(t,n.x,r.x,s.x,a.x),Ys(t,n.y,r.y,s.y,a.y),Ys(t,n.z,r.z,s.z,a.z)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}},EllipseCurve:Bs,LineCurve:Zs,LineCurve3:class extends Fs{constructor(t=new Ut,e=new Ut){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=t,this.v2=e}getPoint(t,e=new Ut){const i=e;return 1===t?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(t).add(this.v1)),i}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new Ut){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},QuadraticBezierCurve:Js,QuadraticBezierCurve3:class extends Fs{constructor(t=new Ut,e=new Ut,i=new Ut){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=i}getPoint(t,e=new Ut){const i=e,n=this.v0,r=this.v1,s=this.v2;return i.set(Xs(t,n.x,r.x,s.x),Xs(t,n.y,r.y,s.y),Xs(t,n.z,r.z,s.z)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},SplineCurve:$s});class ta extends Fs{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new Zs(e,t))}getPoint(t,e){const i=t*this.getLength(),n=this.getCurveLengths();let r=0;for(;r<n.length;){if(n[r]>=i){const t=n[r]-i,s=this.curves[r],a=s.getLength(),o=0===a?0:1-t/a;return s.getPointAt(o,e)}r++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let i=0,n=this.curves.length;i<n;i++)e+=this.curves[i].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(t=40){const e=[];for(let i=0;i<=t;i++)e.push(this.getPoint(i/t));return this.autoClose&&e.push(e[0]),e}getPoints(t=12){const e=[];let i;for(let n=0,r=this.curves;n<r.length;n++){const s=r[n],a=s.isEllipseCurve?2*t:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?t*s.points.length:t,o=s.getPoints(a);for(let t=0;t<o.length;t++){const n=o[t];i&&i.equals(n)||(e.push(n),i=n)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,i=t.curves.length;e<i;e++){const i=t.curves[e];this.curves.push(i.clone())}return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,i=this.curves.length;e<i;e++){const i=this.curves[e];t.curves.push(i.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,i=t.curves.length;e<i;e++){const i=t.curves[e];this.curves.push((new Qs[i.type]).fromJSON(i))}return this}}class ea extends ta{constructor(t){super(),this.type="Path",this.currentPoint=new lt,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,i=t.length;e<i;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){const i=new Zs(this.currentPoint.clone(),new lt(t,e));return this.curves.push(i),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,i,n){const r=new Js(this.currentPoint.clone(),new lt(t,e),new lt(i,n));return this.curves.push(r),this.currentPoint.set(i,n),this}bezierCurveTo(t,e,i,n,r,s){const a=new Ks(this.currentPoint.clone(),new lt(t,e),new lt(i,n),new lt(r,s));return this.curves.push(a),this.currentPoint.set(r,s),this}splineThru(t){const e=[this.currentPoint.clone()].concat(t),i=new $s(e);return this.curves.push(i),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,i,n,r,s){const a=this.currentPoint.x,o=this.currentPoint.y;return this.absarc(t+a,e+o,i,n,r,s),this}absarc(t,e,i,n,r,s){return this.absellipse(t,e,i,i,n,r,s),this}ellipse(t,e,i,n,r,s,a,o){const l=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(t+l,e+h,i,n,r,s,a,o),this}absellipse(t,e,i,n,r,s,a,o){const l=new Bs(t,e,i,n,r,s,a,o);if(this.curves.length>0){const t=l.getPoint(0);t.equals(this.currentPoint)||this.lineTo(t.x,t.y)}this.curves.push(l);const h=l.getPoint(1);return this.currentPoint.copy(h),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}class ia extends ea{constructor(t){super(t),this.uuid=et(),this.type="Shape",this.holes=[]}getPointsHoles(t){const e=[];for(let i=0,n=this.holes.length;i<n;i++)e[i]=this.holes[i].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,i=t.holes.length;e<i;e++){const i=t.holes[e];this.holes.push(i.clone())}return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,i=this.holes.length;e<i;e++){const i=this.holes[e];t.holes.push(i.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,i=t.holes.length;e<i;e++){const i=t.holes[e];this.holes.push((new ea).fromJSON(i))}return this}}function na(t,e,i,n,r){let s,a;if(r===function(t,e,i,n){let r=0;for(let s=e,a=i-n;s<i;s+=n)r+=(t[a]-t[s])*(t[s+1]+t[a+1]),a=s;return r}(t,e,i,n)>0)for(s=e;s<i;s+=n)a=Ma(s,t[s],t[s+1],a);else for(s=i-n;s>=e;s-=n)a=Ma(s,t[s],t[s+1],a);return a&&xa(a,a.next)&&(Sa(a),a=a.next),a}function ra(t,e){if(!t)return t;e||(e=t);let i,n=t;do{if(i=!1,n.steiner||!xa(n,n.next)&&0!==va(n.prev,n,n.next))n=n.next;else{if(Sa(n),n=e=n.prev,n===n.next)break;i=!0}}while(i||n!==e);return e}function sa(t,e,i,n,r,s,a){if(!t)return;!a&&s&&function(t,e,i,n){let r=t;do{0===r.z&&(r.z=pa(r.x,r.y,e,i,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){let e,i,n,r,s,a,o,l,h=1;do{for(i=t,t=null,s=null,a=0;i;){for(a++,n=i,o=0,e=0;e<h&&(o++,n=n.nextZ,n);e++);for(l=h;o>0||l>0&&n;)0!==o&&(0===l||!n||i.z<=n.z)?(r=i,i=i.nextZ,o--):(r=n,n=n.nextZ,l--),s?s.nextZ=r:t=r,r.prevZ=s,s=r;i=n}s.nextZ=null,h*=2}while(a>1)}(r)}(t,n,r,s);let o,l,h=t;for(;t.prev!==t.next;)if(o=t.prev,l=t.next,s?oa(t,n,r,s):aa(t))e.push(o.i/i|0),e.push(t.i/i|0),e.push(l.i/i|0),Sa(t),t=l.next,h=l.next;else if((t=l)===h){a?1===a?sa(t=la(ra(t),e,i),e,i,n,r,s,2):2===a&&ha(t,e,i,n,r,s):sa(ra(t),e,i,n,r,s,1);break}}function aa(t){const e=t.prev,i=t,n=t.next;if(va(e,i,n)>=0)return!1;const r=e.x,s=i.x,a=n.x,o=e.y,l=i.y,h=n.y,c=r<s?r<a?r:a:s<a?s:a,u=o<l?o<h?o:h:l<h?l:h,d=r>s?r>a?r:a:s>a?s:a,p=o>l?o>h?o:h:l>h?l:h;let m=n.next;for(;m!==e;){if(m.x>=c&&m.x<=d&&m.y>=u&&m.y<=p&&fa(r,o,s,l,a,h,m.x,m.y)&&va(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function oa(t,e,i,n){const r=t.prev,s=t,a=t.next;if(va(r,s,a)>=0)return!1;const o=r.x,l=s.x,h=a.x,c=r.y,u=s.y,d=a.y,p=o<l?o<h?o:h:l<h?l:h,m=c<u?c<d?c:d:u<d?u:d,f=o>l?o>h?o:h:l>h?l:h,g=c>u?c>d?c:d:u>d?u:d,v=pa(p,m,e,i,n),x=pa(f,g,e,i,n);let _=t.prevZ,q=t.nextZ;for(;_&&_.z>=v&&q&&q.z<=x;){if(_.x>=p&&_.x<=f&&_.y>=m&&_.y<=g&&_!==r&&_!==a&&fa(o,c,l,u,h,d,_.x,_.y)&&va(_.prev,_,_.next)>=0)return!1;if(_=_.prevZ,q.x>=p&&q.x<=f&&q.y>=m&&q.y<=g&&q!==r&&q!==a&&fa(o,c,l,u,h,d,q.x,q.y)&&va(q.prev,q,q.next)>=0)return!1;q=q.nextZ}for(;_&&_.z>=v;){if(_.x>=p&&_.x<=f&&_.y>=m&&_.y<=g&&_!==r&&_!==a&&fa(o,c,l,u,h,d,_.x,_.y)&&va(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;q&&q.z<=x;){if(q.x>=p&&q.x<=f&&q.y>=m&&q.y<=g&&q!==r&&q!==a&&fa(o,c,l,u,h,d,q.x,q.y)&&va(q.prev,q,q.next)>=0)return!1;q=q.nextZ}return!0}function la(t,e,i){let n=t;do{const r=n.prev,s=n.next.next;!xa(r,s)&&_a(r,n,n.next,s)&&ba(r,s)&&ba(s,r)&&(e.push(r.i/i|0),e.push(n.i/i|0),e.push(s.i/i|0),Sa(n),Sa(n.next),n=t=s),n=n.next}while(n!==t);return ra(n)}function ha(t,e,i,n,r,s){let a=t;do{let t=a.next.next;for(;t!==a.prev;){if(a.i!==t.i&&ga(a,t)){let o=wa(a,t);return a=ra(a,a.next),o=ra(o,o.next),sa(a,e,i,n,r,s,0),void sa(o,e,i,n,r,s,0)}t=t.next}a=a.next}while(a!==t)}function ca(t,e){return t.x-e.x}function ua(t,e){const i=function(t,e){let i,n=e,r=-1/0;const s=t.x,a=t.y;do{if(a<=n.y&&a>=n.next.y&&n.next.y!==n.y){const t=n.x+(a-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(t<=s&&t>r&&(r=t,i=n.x<n.next.x?n:n.next,t===s))return i}n=n.next}while(n!==e);if(!i)return null;const o=i,l=i.x,h=i.y;let c,u=1/0;n=i;do{s>=n.x&&n.x>=l&&s!==n.x&&fa(a<h?s:r,a,l,h,a<h?r:s,a,n.x,n.y)&&(c=Math.abs(a-n.y)/(s-n.x),ba(n,t)&&(c<u||c===u&&(n.x>i.x||n.x===i.x&&da(i,n)))&&(i=n,u=c)),n=n.next}while(n!==o);return i}(t,e);if(!i)return e;const n=wa(i,t);return ra(n,n.next),ra(i,i.next)}function da(t,e){return va(t.prev,t,e.prev)<0&&va(e.next,t,t.next)<0}function pa(t,e,i,n,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-i)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function ma(t){let e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function fa(t,e,i,n,r,s,a,o){return(r-a)*(e-o)>=(t-a)*(s-o)&&(t-a)*(n-o)>=(i-a)*(e-o)&&(i-a)*(s-o)>=(r-a)*(n-o)}function ga(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){let i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&_a(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&(ba(t,e)&&ba(e,t)&&function(t,e){let i=t,n=!1;const r=(t.x+e.x)/2,s=(t.y+e.y)/2;do{i.y>s!=i.next.y>s&&i.next.y!==i.y&&r<(i.next.x-i.x)*(s-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next}while(i!==t);return n}(t,e)&&(va(t.prev,t,e.prev)||va(t,e.prev,e))||xa(t,e)&&va(t.prev,t,t.next)>0&&va(e.prev,e,e.next)>0)}function va(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function xa(t,e){return t.x===e.x&&t.y===e.y}function _a(t,e,i,n){const r=ya(va(t,e,i)),s=ya(va(t,e,n)),a=ya(va(i,n,t)),o=ya(va(i,n,e));return r!==s&&a!==o||!(0!==r||!qa(t,i,e))||!(0!==s||!qa(t,n,e))||!(0!==a||!qa(i,t,n))||!(0!==o||!qa(i,e,n))}function qa(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function ya(t){return t>0?1:t<0?-1:0}function ba(t,e){return va(t.prev,t,t.next)<0?va(t,e,t.next)>=0&&va(t,t.prev,e)>=0:va(t,e,t.prev)<0||va(t,t.next,e)<0}function wa(t,e){const i=new Ea(t.i,t.x,t.y),n=new Ea(e.i,e.x,e.y),r=t.next,s=e.prev;return t.next=e,e.prev=t,i.next=r,r.prev=i,n.next=i,i.prev=n,s.next=n,n.prev=s,n}function Ma(t,e,i,n){const r=new Ea(t,e,i);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function Sa(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Ea(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}class Ta{static area(t){const e=t.length;let i=0;for(let n=e-1,r=0;r<e;n=r++)i+=t[n].x*t[r].y-t[r].x*t[n].y;return.5*i}static isClockWise(t){return Ta.area(t)<0}static triangulateShape(t,e){const i=[],n=[],r=[];Aa(t),Ca(i,t);let s=t.length;e.forEach(Aa);for(let t=0;t<e.length;t++)n.push(s),s+=e[t].length,Ca(i,e[t]);const a=function(t,e,i=2){const n=e&&e.length,r=n?e[0]*i:t.length;let s=na(t,0,r,i,!0);const a=[];if(!s||s.next===s.prev)return a;let o,l,h,c,u,d,p;if(n&&(s=function(t,e,i,n){const r=[];let s,a,o,l,h;for(s=0,a=e.length;s<a;s++)o=e[s]*n,l=s<a-1?e[s+1]*n:t.length,h=na(t,o,l,n,!1),h===h.next&&(h.steiner=!0),r.push(ma(h));for(r.sort(ca),s=0;s<r.length;s++)i=ua(r[s],i);return i}(t,e,s,i)),t.length>80*i){o=h=t[0],l=c=t[1];for(let e=i;e<r;e+=i)u=t[e],d=t[e+1],u<o&&(o=u),d<l&&(l=d),u>h&&(h=u),d>c&&(c=d);p=Math.max(h-o,c-l),p=0!==p?32767/p:0}return sa(s,a,i,o,l,p,0),a}(i,n);for(let t=0;t<a.length;t+=3)r.push(a.slice(t,t+3));return r}}function Aa(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function Ca(t,e){for(let i=0;i<e.length;i++)t.push(e[i].x),t.push(e[i].y)}class Ra extends gi{constructor(t=new ia([new lt(.5,.5),new lt(-.5,.5),new lt(-.5,-.5),new lt(.5,-.5)]),e={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];const i=this,n=[],r=[];for(let e=0,i=t.length;e<i;e++)s(t[e]);function s(t){const s=[],a=void 0!==e.curveSegments?e.curveSegments:12,o=void 0!==e.steps?e.steps:1,l=void 0!==e.depth?e.depth:1;let h=void 0===e.bevelEnabled||e.bevelEnabled,c=void 0!==e.bevelThickness?e.bevelThickness:.2,u=void 0!==e.bevelSize?e.bevelSize:c-.1,d=void 0!==e.bevelOffset?e.bevelOffset:0,p=void 0!==e.bevelSegments?e.bevelSegments:3;const m=e.extrudePath,f=void 0!==e.UVGenerator?e.UVGenerator:Pa;let g,v,x,_,q,y=!1;m&&(g=m.getSpacedPoints(o),y=!0,h=!1,v=m.computeFrenetFrames(o,!1),x=new Ut,_=new Ut,q=new Ut),h||(p=0,c=0,u=0,d=0);const b=t.extractPoints(a);let w=b.shape;const M=b.holes;if(!Ta.isClockWise(w)){w=w.reverse();for(let t=0,e=M.length;t<e;t++){const e=M[t];Ta.isClockWise(e)&&(M[t]=e.reverse())}}const S=Ta.triangulateShape(w,M),E=w;for(let t=0,e=M.length;t<e;t++){const e=M[t];w=w.concat(e)}function T(t,e,i){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().addScaledVector(e,i)}const A=w.length,C=S.length;function R(t,e,i){let n,r,s;const a=t.x-e.x,o=t.y-e.y,l=i.x-t.x,h=i.y-t.y,c=a*a+o*o,u=a*h-o*l;if(Math.abs(u)>Number.EPSILON){const u=Math.sqrt(c),d=Math.sqrt(l*l+h*h),p=e.x-o/u,m=e.y+a/u,f=((i.x-h/d-p)*h-(i.y+l/d-m)*l)/(a*h-o*l);n=p+a*f-t.x,r=m+o*f-t.y;const g=n*n+r*r;if(g<=2)return new lt(n,r);s=Math.sqrt(g/2)}else{let t=!1;a>Number.EPSILON?l>Number.EPSILON&&(t=!0):a<-Number.EPSILON?l<-Number.EPSILON&&(t=!0):Math.sign(o)===Math.sign(h)&&(t=!0),t?(n=-o,r=a,s=Math.sqrt(c)):(n=a,r=o,s=Math.sqrt(c/2))}return new lt(n/s,r/s)}const P=[];for(let t=0,e=E.length,i=e-1,n=t+1;t<e;t++,i++,n++)i===e&&(i=0),n===e&&(n=0),P[t]=R(E[t],E[i],E[n]);const z=[];let L,U=P.concat();for(let t=0,e=M.length;t<e;t++){const e=M[t];L=[];for(let t=0,i=e.length,n=i-1,r=t+1;t<i;t++,n++,r++)n===i&&(n=0),r===i&&(r=0),L[t]=R(e[t],e[n],e[r]);z.push(L),U=U.concat(L)}for(let t=0;t<p;t++){const e=t/p,i=c*Math.cos(e*Math.PI/2),n=u*Math.sin(e*Math.PI/2)+d;for(let t=0,e=E.length;t<e;t++){const e=T(E[t],P[t],n);N(e.x,e.y,-i)}for(let t=0,e=M.length;t<e;t++){const e=M[t];L=z[t];for(let t=0,r=e.length;t<r;t++){const r=T(e[t],L[t],n);N(r.x,r.y,-i)}}}const D=u+d;for(let t=0;t<A;t++){const e=h?T(w[t],U[t],D):w[t];y?(_.copy(v.normals[0]).multiplyScalar(e.x),x.copy(v.binormals[0]).multiplyScalar(e.y),q.copy(g[0]).add(_).add(x),N(q.x,q.y,q.z)):N(e.x,e.y,0)}for(let t=1;t<=o;t++)for(let e=0;e<A;e++){const i=h?T(w[e],U[e],D):w[e];y?(_.copy(v.normals[t]).multiplyScalar(i.x),x.copy(v.binormals[t]).multiplyScalar(i.y),q.copy(g[t]).add(_).add(x),N(q.x,q.y,q.z)):N(i.x,i.y,l/o*t)}for(let t=p-1;t>=0;t--){const e=t/p,i=c*Math.cos(e*Math.PI/2),n=u*Math.sin(e*Math.PI/2)+d;for(let t=0,e=E.length;t<e;t++){const e=T(E[t],P[t],n);N(e.x,e.y,l+i)}for(let t=0,e=M.length;t<e;t++){const e=M[t];L=z[t];for(let t=0,r=e.length;t<r;t++){const r=T(e[t],L[t],n);y?N(r.x,r.y+g[o-1].y,g[o-1].x+i):N(r.x,r.y,l+i)}}}function I(t,e){let i=t.length;for(;--i>=0;){const n=i;let r=i-1;r<0&&(r=t.length-1);for(let t=0,i=o+2*p;t<i;t++){const i=A*t,s=A*(t+1);F(e+n+i,e+r+i,e+r+s,e+n+s)}}}function N(t,e,i){s.push(t),s.push(e),s.push(i)}function O(t,e,r){B(t),B(e),B(r);const s=n.length/3,a=f.generateTopUV(i,n,s-3,s-2,s-1);k(a[0]),k(a[1]),k(a[2])}function F(t,e,r,s){B(t),B(e),B(s),B(e),B(r),B(s);const a=n.length/3,o=f.generateSideWallUV(i,n,a-6,a-3,a-2,a-1);k(o[0]),k(o[1]),k(o[3]),k(o[1]),k(o[2]),k(o[3])}function B(t){n.push(s[3*t+0]),n.push(s[3*t+1]),n.push(s[3*t+2])}function k(t){r.push(t.x),r.push(t.y)}!function(){const t=n.length/3;if(h){let t=0,e=A*t;for(let t=0;t<C;t++){const i=S[t];O(i[2]+e,i[1]+e,i[0]+e)}t=o+2*p,e=A*t;for(let t=0;t<C;t++){const i=S[t];O(i[0]+e,i[1]+e,i[2]+e)}}else{for(let t=0;t<C;t++){const e=S[t];O(e[2],e[1],e[0])}for(let t=0;t<C;t++){const e=S[t];O(e[0]+A*o,e[1]+A*o,e[2]+A*o)}}i.addGroup(t,n.length/3-t,0)}(),function(){const t=n.length/3;let e=0;I(E,e),e+=E.length;for(let t=0,i=M.length;t<i;t++){const i=M[t];I(i,e),e+=i.length}i.addGroup(t,n.length/3-t,1)}()}this.setAttribute("position",new li(n,3)),this.setAttribute("uv",new li(r,2)),this.computeVertexNormals()}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON();return function(t,e,i){if(i.shapes=[],Array.isArray(t))for(let e=0,n=t.length;e<n;e++){const n=t[e];i.shapes.push(n.uuid)}else i.shapes.push(t.uuid);return i.options=Object.assign({},e),void 0!==e.extrudePath&&(i.options.extrudePath=e.extrudePath.toJSON()),i}(this.parameters.shapes,this.parameters.options,t)}static fromJSON(t,e){const i=[];for(let n=0,r=t.shapes.length;n<r;n++){const r=e[t.shapes[n]];i.push(r)}const n=t.options.extrudePath;return void 0!==n&&(t.options.extrudePath=(new Qs[n.type]).fromJSON(n)),new Ra(i,t.options)}}const Pa={generateTopUV:function(t,e,i,n,r){const s=e[3*i],a=e[3*i+1],o=e[3*n],l=e[3*n+1],h=e[3*r],c=e[3*r+1];return[new lt(s,a),new lt(o,l),new lt(h,c)]},generateSideWallUV:function(t,e,i,n,r,s){const a=e[3*i],o=e[3*i+1],l=e[3*i+2],h=e[3*n],c=e[3*n+1],u=e[3*n+2],d=e[3*r],p=e[3*r+1],m=e[3*r+2],f=e[3*s],g=e[3*s+1],v=e[3*s+2];return Math.abs(o-c)<Math.abs(a-h)?[new lt(a,1-l),new lt(h,1-u),new lt(d,1-m),new lt(f,1-v)]:[new lt(o,1-l),new lt(c,1-u),new lt(p,1-m),new lt(g,1-v)]}};class za extends Ke{constructor(t){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new ti(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ti(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}function La(t,e,i){return Da(t)?new t.constructor(t.subarray(e,void 0!==i?i:t.length)):t.slice(e,i)}function Ua(t,e,i){return!t||!i&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)}function Da(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}class Ia{constructor(t,e,i,n){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==n?n:new e.constructor(i),this.sampleValues=e,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let i=this._cachedIndex,n=e[i],r=e[i-1];t:{e:{let s;i:{n:if(!(t<n)){for(let s=i+2;;){if(void 0===n){if(t<r)break n;return i=e.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===s)break;if(r=n,n=e[++i],t<n)break e}s=e.length;break i}if(t>=r)break t;{const a=e[1];t<a&&(i=2,r=a);for(let s=i-2;;){if(void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(i===s)break;if(n=r,r=e[--i-1],t>=r)break e}s=i,i=0}}for(;i<s;){const n=i+s>>>1;t<e[n]?s=n:i=n+1}if(n=e[i],r=e[i-1],void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===n)return i=e.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,r,n)}return this.interpolate_(i,r,t,n)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,i=this.sampleValues,n=this.valueSize,r=t*n;for(let t=0;t!==n;++t)e[t]=i[r+t];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Na extends Ia{constructor(t,e,i,n){super(t,e,i,n),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(t,e,i){const n=this.parameterPositions;let r=t-2,s=t+1,a=n[r],o=n[s];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:r=t,a=2*e-i;break;case 2402:r=n.length-2,a=e+n[r]-n[r+1];break;default:r=t,a=i}if(void 0===o)switch(this.getSettings_().endingEnd){case 2401:s=t,o=2*i-e;break;case 2402:s=1,o=i+n[1]-n[0];break;default:s=t-1,o=e}const l=.5*(i-e),h=this.valueSize;this._weightPrev=l/(e-a),this._weightNext=l/(o-i),this._offsetPrev=r*h,this._offsetNext=s*h}interpolate_(t,e,i,n){const r=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=t*a,l=o-a,h=this._offsetPrev,c=this._offsetNext,u=this._weightPrev,d=this._weightNext,p=(i-e)/(n-e),m=p*p,f=m*p,g=-u*f+2*u*m-u*p,v=(1+u)*f+(-1.5-2*u)*m+(-.5+u)*p+1,x=(-1-d)*f+(1.5+d)*m+.5*p,_=d*f-d*m;for(let t=0;t!==a;++t)r[t]=g*s[h+t]+v*s[l+t]+x*s[o+t]+_*s[c+t];return r}}class Oa extends Ia{constructor(t,e,i,n){super(t,e,i,n)}interpolate_(t,e,i,n){const r=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=t*a,l=o-a,h=(i-e)/(n-e),c=1-h;for(let t=0;t!==a;++t)r[t]=s[l+t]*c+s[o+t]*h;return r}}class Fa extends Ia{constructor(t,e,i,n){super(t,e,i,n)}interpolate_(t){return this.copySampleValue_(t-1)}}class Ba{constructor(t,e,i,n){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Ua(e,this.TimeBufferType),this.values=Ua(i,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let i;if(e.toJSON!==this.toJSON)i=e.toJSON(t);else{i={name:t.name,times:Ua(t.times,Array),values:Ua(t.values,Array)};const e=t.getInterpolation();e!==t.DefaultInterpolation&&(i.interpolation=e)}return i.type=t.ValueTypeName,i}InterpolantFactoryMethodDiscrete(t){return new Fa(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new Oa(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new Na(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case B:e=this.InterpolantFactoryMethodDiscrete;break;case k:e=this.InterpolantFactoryMethodLinear;break;case V:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){const e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(e);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",e),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return B;case this.InterpolantFactoryMethodLinear:return k;case this.InterpolantFactoryMethodSmooth:return V}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){const e=this.times;for(let i=0,n=e.length;i!==n;++i)e[i]+=t}return this}scale(t){if(1!==t){const e=this.times;for(let i=0,n=e.length;i!==n;++i)e[i]*=t}return this}trim(t,e){const i=this.times,n=i.length;let r=0,s=n-1;for(;r!==n&&i[r]<t;)++r;for(;-1!==s&&i[s]>e;)--s;if(++s,0!==r||s!==n){r>=s&&(s=Math.max(s,1),r=s-1);const t=this.getValueSize();this.times=La(i,r,s),this.values=La(this.values,r*t,s*t)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const i=this.times,n=this.values,r=i.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let s=null;for(let e=0;e!==r;e++){const n=i[e];if("number"==typeof n&&isNaN(n)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,e,n),t=!1;break}if(null!==s&&s>n){console.error("THREE.KeyframeTrack: Out of order keys.",this,e,n,s),t=!1;break}s=n}if(void 0!==n&&Da(n))for(let e=0,i=n.length;e!==i;++e){const i=n[e];if(isNaN(i)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,e,i),t=!1;break}}return t}optimize(){const t=La(this.times),e=La(this.values),i=this.getValueSize(),n=this.getInterpolation()===V,r=t.length-1;let s=1;for(let a=1;a<r;++a){let r=!1;const o=t[a];if(o!==t[a+1]&&(1!==a||o!==t[0]))if(n)r=!0;else{const t=a*i,n=t-i,s=t+i;for(let a=0;a!==i;++a){const i=e[t+a];if(i!==e[n+a]||i!==e[s+a]){r=!0;break}}}if(r){if(a!==s){t[s]=t[a];const n=a*i,r=s*i;for(let t=0;t!==i;++t)e[r+t]=e[n+t]}++s}}if(r>0){t[s]=t[r];for(let t=r*i,n=s*i,a=0;a!==i;++a)e[n+a]=e[t+a];++s}return s!==t.length?(this.times=La(t,0,s),this.values=La(e,0,s*i)):(this.times=t,this.values=e),this}clone(){const t=La(this.times,0),e=La(this.values,0),i=new(0,this.constructor)(this.name,t,e);return i.createInterpolant=this.createInterpolant,i}}Ba.prototype.TimeBufferType=Float32Array,Ba.prototype.ValueBufferType=Float32Array,Ba.prototype.DefaultInterpolation=k;class ka extends Ba{}ka.prototype.ValueTypeName="bool",ka.prototype.ValueBufferType=Array,ka.prototype.DefaultInterpolation=B,ka.prototype.InterpolantFactoryMethodLinear=void 0,ka.prototype.InterpolantFactoryMethodSmooth=void 0;(class extends Ba{}).prototype.ValueTypeName="color";(class extends Ba{}).prototype.ValueTypeName="number";class Va extends Ia{constructor(t,e,i,n){super(t,e,i,n)}interpolate_(t,e,i,n){const r=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=(i-e)/(n-e);let l=t*a;for(let t=l+a;l!==t;l+=4)Lt.slerpFlat(r,0,s,l-a,s,l,o);return r}}class Ha extends Ba{InterpolantFactoryMethodLinear(t){return new Va(this.times,this.values,this.getValueSize(),t)}}Ha.prototype.ValueTypeName="quaternion",Ha.prototype.DefaultInterpolation=k,Ha.prototype.InterpolantFactoryMethodSmooth=void 0;class Ga extends Ba{}Ga.prototype.ValueTypeName="string",Ga.prototype.ValueBufferType=Array,Ga.prototype.DefaultInterpolation=B,Ga.prototype.InterpolantFactoryMethodLinear=void 0,Ga.prototype.InterpolantFactoryMethodSmooth=void 0;(class extends Ba{}).prototype.ValueTypeName="vector";const Wa={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class ja{constructor(t,e,i){const n=this;let r,s=!1,a=0,o=0;const l=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=i,this.itemStart=function(t){o++,!1===s&&void 0!==n.onStart&&n.onStart(t,a,o),s=!0},this.itemEnd=function(t){a++,void 0!==n.onProgress&&n.onProgress(t,a,o),a===o&&(s=!1,void 0!==n.onLoad&&n.onLoad())},this.itemError=function(t){void 0!==n.onError&&n.onError(t)},this.resolveURL=function(t){return r?r(t):t},this.setURLModifier=function(t){return r=t,this},this.addHandler=function(t,e){return l.push(t,e),this},this.removeHandler=function(t){const e=l.indexOf(t);return-1!==e&&l.splice(e,2),this},this.getHandler=function(t){for(let e=0,i=l.length;e<i;e+=2){const i=l[e],n=l[e+1];if(i.global&&(i.lastIndex=0),i.test(t))return n}return null}}}const Xa=new ja;class Ya{constructor(t){this.manager=void 0!==t?t:Xa,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const i=this;return new Promise((function(n,r){i.load(t,n,e,r)}))}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}const Ka={};class Za extends Error{constructor(t,e){super(t),this.response=e}}class Ja extends Ya{constructor(t){super(t)}load(t,e,i,n){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const r=Wa.get(t);if(void 0!==r)return this.manager.itemStart(t),setTimeout((()=>{e&&e(r),this.manager.itemEnd(t)}),0),r;if(void 0!==Ka[t])return void Ka[t].push({onLoad:e,onProgress:i,onError:n});Ka[t]=[],Ka[t].push({onLoad:e,onProgress:i,onError:n});const s=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,o=this.responseType;fetch(s).then((e=>{if(200===e.status||0===e.status){if(0===e.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===e.body||void 0===e.body.getReader)return e;const i=Ka[t],n=e.body.getReader(),r=e.headers.get("Content-Length")||e.headers.get("X-File-Size"),s=r?parseInt(r):0,a=0!==s;let o=0;const l=new ReadableStream({start(t){!function e(){n.read().then((({done:n,value:r})=>{if(n)t.close();else{o+=r.byteLength;const n=new ProgressEvent("progress",{lengthComputable:a,loaded:o,total:s});for(let t=0,e=i.length;t<e;t++){const e=i[t];e.onProgress&&e.onProgress(n)}t.enqueue(r),e()}}))}()}});return new Response(l)}throw new Za(`fetch for "${e.url}" responded with ${e.status}: ${e.statusText}`,e)})).then((t=>{switch(o){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"document":return t.text().then((t=>(new DOMParser).parseFromString(t,a)));case"json":return t.json();default:if(void 0===a)return t.text();{const e=/charset="?([^;"\s]*)"?/i.exec(a),i=e&&e[1]?e[1].toLowerCase():void 0,n=new TextDecoder(i);return t.arrayBuffer().then((t=>n.decode(t)))}}})).then((e=>{Wa.add(t,e);const i=Ka[t];delete Ka[t];for(let t=0,n=i.length;t<n;t++){const n=i[t];n.onLoad&&n.onLoad(e)}})).catch((e=>{const i=Ka[t];if(void 0===i)throw this.manager.itemError(t),e;delete Ka[t];for(let t=0,n=i.length;t<n;t++){const n=i[t];n.onError&&n.onError(e)}this.manager.itemError(t)})).finally((()=>{this.manager.itemEnd(t)})),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class $a extends De{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new ti(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}const Qa=new ce,to=new Ut,eo=new Ut;class io{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new lt(512,512),this.map=null,this.mapPass=null,this.matrix=new ce,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new tn,this._frameExtents=new lt(1,1),this._viewportCount=1,this._viewports=[new At(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,i=this.matrix;to.setFromMatrixPosition(t.matrixWorld),e.position.copy(to),eo.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(eo),e.updateMatrixWorld(),Qa.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Qa),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(Qa)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class no extends io{constructor(){super(new fn(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}const ro="\\[\\]\\.:\\/",so=new RegExp("["+ro+"]","g"),ao="[^"+ro+"]",oo="[^"+ro.replace("\\.","")+"]",lo=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",ao)+/(WCOD+)?/.source.replace("WCOD",oo)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",ao)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",ao)+"$"),ho=["material","materials","bones","map"];class co{constructor(t,e,i){this.path=e,this.parsedPath=i||co.parseTrackName(e),this.node=co.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,e,i){return t&&t.isAnimationObjectGroup?new co.Composite(t,e,i):new co(t,e,i)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(so,"")}static parseTrackName(t){const e=lo.exec(t);if(null===e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const i={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},n=i.nodeName&&i.nodeName.lastIndexOf(".");if(void 0!==n&&-1!==n){const t=i.nodeName.substring(n+1);-1!==ho.indexOf(t)&&(i.nodeName=i.nodeName.substring(0,n),i.objectName=t)}if(null===i.propertyName||0===i.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return i}static findNode(t,e){if(void 0===e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){const i=t.skeleton.getBoneByName(e);if(void 0!==i)return i}if(t.children){const i=function(t){for(let n=0;n<t.length;n++){const r=t[n];if(r.name===e||r.uuid===e)return r;const s=i(r.children);if(s)return s}return null},n=i(t.children);if(n)return n}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){const i=this.resolvedProperty;for(let n=0,r=i.length;n!==r;++n)t[e++]=i[n]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){const i=this.resolvedProperty;for(let n=0,r=i.length;n!==r;++n)i[n]=t[e++]}_setValue_array_setNeedsUpdate(t,e){const i=this.resolvedProperty;for(let n=0,r=i.length;n!==r;++n)i[n]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){const i=this.resolvedProperty;for(let n=0,r=i.length;n!==r;++n)i[n]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node;const e=this.parsedPath,i=e.objectName,n=e.propertyName;let r=e.propertyIndex;if(t||(t=co.findNode(this.rootNode,e.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(i){let n=e.objectIndex;switch(i){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let e=0;e<t.length;e++)if(t[e].name===n){n=e;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[i])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[i]}if(void 0!==n){if(void 0===t[n])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[n]}}const s=t[n];if(void 0===s){const i=e.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+i+"."+n+" but it wasn't found.",t)}let a=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?a=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(a=this.Versioning.MatrixWorldNeedsUpdate);let o=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===n){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[r]&&(r=t.morphTargetDictionary[r])}o=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=r}else void 0!==s.fromArray&&void 0!==s.toArray?(o=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(o=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=n;this.getValue=this.GetterByBindingType[o],this.setValue=this.SetterByBindingTypeAndVersioning[o][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}co.Composite=class{constructor(t,e,i){const n=i||co.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,n)}getValue(t,e){this.bind();const i=this._targetGroup.nCachedObjects_,n=this._bindings[i];void 0!==n&&n.getValue(t,e)}setValue(t,e){const i=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=i.length;n!==r;++n)i[n].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].unbind()}},co.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},co.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},co.prototype.GetterByBindingType=[co.prototype._getValue_direct,co.prototype._getValue_array,co.prototype._getValue_arrayElement,co.prototype._getValue_toArray],co.prototype.SetterByBindingTypeAndVersioning=[[co.prototype._setValue_direct,co.prototype._setValue_direct_setNeedsUpdate,co.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[co.prototype._setValue_array,co.prototype._setValue_array_setNeedsUpdate,co.prototype._setValue_array_setMatrixWorldNeedsUpdate],[co.prototype._setValue_arrayElement,co.prototype._setValue_arrayElement_setNeedsUpdate,co.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[co.prototype._setValue_fromArray,co.prototype._setValue_fromArray_setNeedsUpdate,co.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1);class uo{constructor(t){this.value=t}clone(){return new uo(void 0===this.value.clone?this.value:this.value.clone())}}class po{constructor(){this.type="ShapePath",this.color=new ti,this.subPaths=[],this.currentPath=null}moveTo(t,e){return this.currentPath=new ea,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this}lineTo(t,e){return this.currentPath.lineTo(t,e),this}quadraticCurveTo(t,e,i,n){return this.currentPath.quadraticCurveTo(t,e,i,n),this}bezierCurveTo(t,e,i,n,r,s){return this.currentPath.bezierCurveTo(t,e,i,n,r,s),this}splineThru(t){return this.currentPath.splineThru(t),this}toShapes(t){function e(t,e){const i=e.length;let n=!1;for(let r=i-1,s=0;s<i;r=s++){let i=e[r],a=e[s],o=a.x-i.x,l=a.y-i.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(i=e[s],o=-o,a=e[r],l=-l),t.y<i.y||t.y>a.y)continue;if(t.y===i.y){if(t.x===i.x)return!0}else{const e=l*(t.x-i.x)-o*(t.y-i.y);if(0===e)return!0;if(e<0)continue;n=!n}}else{if(t.y!==i.y)continue;if(a.x<=t.x&&t.x<=i.x||i.x<=t.x&&t.x<=a.x)return!0}}return n}const i=Ta.isClockWise,n=this.subPaths;if(0===n.length)return[];let r,s,a;const o=[];if(1===n.length)return s=n[0],a=new ia,a.curves=s.curves,o.push(a),o;let l=!i(n[0].getPoints());l=t?!l:l;const h=[],c=[];let u,d,p=[],m=0;c[m]=void 0,p[m]=[];for(let e=0,a=n.length;e<a;e++)s=n[e],u=s.getPoints(),r=i(u),r=t?!r:r,r?(!l&&c[m]&&m++,c[m]={s:new ia,p:u},c[m].s.curves=s.curves,l&&m++,p[m]=[]):p[m].push({h:s,p:u[0]});if(!c[0])return function(t){const e=[];for(let i=0,n=t.length;i<n;i++){const n=t[i],r=new ia;r.curves=n.curves,e.push(r)}return e}(n);if(c.length>1){let t=!1,i=0;for(let t=0,e=c.length;t<e;t++)h[t]=[];for(let n=0,r=c.length;n<r;n++){const r=p[n];for(let s=0;s<r.length;s++){const a=r[s];let o=!0;for(let r=0;r<c.length;r++)e(a.p,c[r].p)&&(n!==r&&i++,o?(o=!1,h[r].push(a)):t=!0);o&&h[n].push(a)}}i>0&&!1===t&&(p=h)}for(let t=0,e=c.length;t<e;t++){a=c[t].s,o.push(a),d=p[t];for(let t=0,e=d.length;t<e;t++)a.holes.push(d[t].h)}return o}}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:i}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=i);class mo{constructor(t){this.isFont=!0,this.type="Font",this.data=t}generateShapes(t,e=100){const i=[],n=function(t,e,i){const n=Array.from(t),r=e/i.resolution,s=(i.boundingBox.yMax-i.boundingBox.yMin+i.underlineThickness)*r,a=[];let o=0,l=0;for(let t=0;t<n.length;t++){const e=n[t];if("\n"===e)o=0,l-=s;else{const t=fo(e,r,o,l,i);o+=t.offsetX,a.push(t.path)}}return a}(t,e,this.data);for(let t=0,e=n.length;t<e;t++)i.push(...n[t].toShapes());return i}}function fo(t,e,i,n,r){const s=r.glyphs[t]||r.glyphs["?"];if(!s)return void console.error('THREE.Font: character "'+t+'" does not exists in font family '+r.familyName+".");const a=new po;let o,l,h,c,u,d,p,m;if(s.o){const t=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let r=0,s=t.length;r<s;)switch(t[r++]){case"m":o=t[r++]*e+i,l=t[r++]*e+n,a.moveTo(o,l);break;case"l":o=t[r++]*e+i,l=t[r++]*e+n,a.lineTo(o,l);break;case"q":h=t[r++]*e+i,c=t[r++]*e+n,u=t[r++]*e+i,d=t[r++]*e+n,a.quadraticCurveTo(u,d,h,c);break;case"b":h=t[r++]*e+i,c=t[r++]*e+n,u=t[r++]*e+i,d=t[r++]*e+n,p=t[r++]*e+i,m=t[r++]*e+n,a.bezierCurveTo(u,d,p,m,h,c)}}return{offsetX:s.ha*e,path:a}}class go extends Ra{constructor(t,e={}){const i=e.font;if(void 0===i)super();else{const n=i.generateShapes(t,e.size);e.depth=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),super(n,e)}this.type="TextGeometry"}}const vo=1006,xo=3001,_o="srgb",qo="srgb-linear",yo="display-p3",bo=7680,wo=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],Mo=Math.PI/180,So=180/Math.PI;function Eo(){const t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,i=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(wo[255&t]+wo[t>>8&255]+wo[t>>16&255]+wo[t>>24&255]+"-"+wo[255&e]+wo[e>>8&255]+"-"+wo[e>>16&15|64]+wo[e>>24&255]+"-"+wo[63&i|128]+wo[i>>8&255]+"-"+wo[i>>16&255]+wo[i>>24&255]+wo[255&n]+wo[n>>8&255]+wo[n>>16&255]+wo[n>>24&255]).toLowerCase()}function To(t,e,i){return Math.max(e,Math.min(i,t))}function Ao(t,e,i){return(1-i)*t+i*e}function Co(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function Ro(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return Math.round(65535*t);case Uint8Array:return Math.round(255*t);case Int16Array:return Math.round(32767*t);case Int8Array:return Math.round(127*t);default:throw new Error("Invalid component type.")}}class Po{constructor(t=0,e=0,i=0,n=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=i,this._w=n}static slerpFlat(t,e,i,n,r,s,a){let o=i[n+0],l=i[n+1],h=i[n+2],c=i[n+3];const u=r[s+0],d=r[s+1],p=r[s+2],m=r[s+3];if(0===a)return t[e+0]=o,t[e+1]=l,t[e+2]=h,void(t[e+3]=c);if(1===a)return t[e+0]=u,t[e+1]=d,t[e+2]=p,void(t[e+3]=m);if(c!==m||o!==u||l!==d||h!==p){let t=1-a;const e=o*u+l*d+h*p+c*m,i=e>=0?1:-1,n=1-e*e;if(n>Number.EPSILON){const r=Math.sqrt(n),s=Math.atan2(r,e*i);t=Math.sin(t*s)/r,a=Math.sin(a*s)/r}const r=a*i;if(o=o*t+u*r,l=l*t+d*r,h=h*t+p*r,c=c*t+m*r,t===1-a){const t=1/Math.sqrt(o*o+l*l+h*h+c*c);o*=t,l*=t,h*=t,c*=t}}t[e]=o,t[e+1]=l,t[e+2]=h,t[e+3]=c}static multiplyQuaternionsFlat(t,e,i,n,r,s){const a=i[n],o=i[n+1],l=i[n+2],h=i[n+3],c=r[s],u=r[s+1],d=r[s+2],p=r[s+3];return t[e]=a*p+h*c+o*d-l*u,t[e+1]=o*p+h*u+l*c-a*d,t[e+2]=l*p+h*d+a*u-o*c,t[e+3]=h*p-a*c-o*u-l*d,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,i,n){return this._x=t,this._y=e,this._z=i,this._w=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){const i=t._x,n=t._y,r=t._z,s=t._order,a=Math.cos,o=Math.sin,l=a(i/2),h=a(n/2),c=a(r/2),u=o(i/2),d=o(n/2),p=o(r/2);switch(s){case"XYZ":this._x=u*h*c+l*d*p,this._y=l*d*c-u*h*p,this._z=l*h*p+u*d*c,this._w=l*h*c-u*d*p;break;case"YXZ":this._x=u*h*c+l*d*p,this._y=l*d*c-u*h*p,this._z=l*h*p-u*d*c,this._w=l*h*c+u*d*p;break;case"ZXY":this._x=u*h*c-l*d*p,this._y=l*d*c+u*h*p,this._z=l*h*p+u*d*c,this._w=l*h*c-u*d*p;break;case"ZYX":this._x=u*h*c-l*d*p,this._y=l*d*c+u*h*p,this._z=l*h*p-u*d*c,this._w=l*h*c+u*d*p;break;case"YZX":this._x=u*h*c+l*d*p,this._y=l*d*c+u*h*p,this._z=l*h*p-u*d*c,this._w=l*h*c-u*d*p;break;case"XZY":this._x=u*h*c-l*d*p,this._y=l*d*c-u*h*p,this._z=l*h*p+u*d*c,this._w=l*h*c+u*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return!1!==e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const i=e/2,n=Math.sin(i);return this._x=t.x*n,this._y=t.y*n,this._z=t.z*n,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,i=e[0],n=e[4],r=e[8],s=e[1],a=e[5],o=e[9],l=e[2],h=e[6],c=e[10],u=i+a+c;if(u>0){const t=.5/Math.sqrt(u+1);this._w=.25/t,this._x=(h-o)*t,this._y=(r-l)*t,this._z=(s-n)*t}else if(i>a&&i>c){const t=2*Math.sqrt(1+i-a-c);this._w=(h-o)/t,this._x=.25*t,this._y=(n+s)/t,this._z=(r+l)/t}else if(a>c){const t=2*Math.sqrt(1+a-i-c);this._w=(r-l)/t,this._x=(n+s)/t,this._y=.25*t,this._z=(o+h)/t}else{const t=2*Math.sqrt(1+c-i-a);this._w=(s-n)/t,this._x=(r+l)/t,this._y=(o+h)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let i=t.dot(e)+1;return i<Number.EPSILON?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=i):(this._x=0,this._y=-t.z,this._z=t.y,this._w=i)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=i),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(To(this.dot(t),-1,1)))}rotateTowards(t,e){const i=this.angleTo(t);if(0===i)return this;const n=Math.min(1,e/i);return this.slerp(t,n),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const i=t._x,n=t._y,r=t._z,s=t._w,a=e._x,o=e._y,l=e._z,h=e._w;return this._x=i*h+s*a+n*l-r*o,this._y=n*h+s*o+r*a-i*l,this._z=r*h+s*l+i*o-n*a,this._w=s*h-i*a-n*o-r*l,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const i=this._x,n=this._y,r=this._z,s=this._w;let a=s*t._w+i*t._x+n*t._y+r*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=s,this._x=i,this._y=n,this._z=r,this;const o=1-a*a;if(o<=Number.EPSILON){const t=1-e;return this._w=t*s+e*this._w,this._x=t*i+e*this._x,this._y=t*n+e*this._y,this._z=t*r+e*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(o),h=Math.atan2(l,a),c=Math.sin((1-e)*h)/l,u=Math.sin(e*h)/l;return this._w=s*c+this._w*u,this._x=i*c+this._x*u,this._y=n*c+this._y*u,this._z=r*c+this._z*u,this._onChangeCallback(),this}slerpQuaternions(t,e,i){return this.copy(t).slerp(e,i)}random(){const t=Math.random(),e=Math.sqrt(1-t),i=Math.sqrt(t),n=2*Math.PI*Math.random(),r=2*Math.PI*Math.random();return this.set(e*Math.cos(n),i*Math.sin(r),i*Math.cos(r),e*Math.sin(n))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class zo{constructor(t=0,e=0,i=0){zo.prototype.isVector3=!0,this.x=t,this.y=e,this.z=i}set(t,e,i){return void 0===i&&(i=this.z),this.x=t,this.y=e,this.z=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(Uo.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(Uo.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,i=this.y,n=this.z,r=t.elements;return this.x=r[0]*e+r[3]*i+r[6]*n,this.y=r[1]*e+r[4]*i+r[7]*n,this.z=r[2]*e+r[5]*i+r[8]*n,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,i=this.y,n=this.z,r=t.elements,s=1/(r[3]*e+r[7]*i+r[11]*n+r[15]);return this.x=(r[0]*e+r[4]*i+r[8]*n+r[12])*s,this.y=(r[1]*e+r[5]*i+r[9]*n+r[13])*s,this.z=(r[2]*e+r[6]*i+r[10]*n+r[14])*s,this}applyQuaternion(t){const e=this.x,i=this.y,n=this.z,r=t.x,s=t.y,a=t.z,o=t.w,l=o*e+s*n-a*i,h=o*i+a*e-r*n,c=o*n+r*i-s*e,u=-r*e-s*i-a*n;return this.x=l*o+u*-r+h*-a-c*-s,this.y=h*o+u*-s+c*-r-l*-a,this.z=c*o+u*-a+l*-s-h*-r,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,i=this.y,n=this.z,r=t.elements;return this.x=r[0]*e+r[4]*i+r[8]*n,this.y=r[1]*e+r[5]*i+r[9]*n,this.z=r[2]*e+r[6]*i+r[10]*n,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const i=t.x,n=t.y,r=t.z,s=e.x,a=e.y,o=e.z;return this.x=n*o-r*a,this.y=r*s-i*o,this.z=i*a-n*s,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const i=t.dot(this)/e;return this.copy(t).multiplyScalar(i)}projectOnPlane(t){return Lo.copy(this).projectOnVector(t),this.sub(Lo)}reflect(t){return this.sub(Lo.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const i=this.dot(t)/e;return Math.acos(To(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,i=this.y-t.y,n=this.z-t.z;return e*e+i*i+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,i){const n=Math.sin(e)*t;return this.x=n*Math.sin(i),this.y=Math.cos(e)*t,this.z=n*Math.cos(i),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,i){return this.x=t*Math.sin(e),this.y=i,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),n=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=i,this.z=n,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=2*(Math.random()-.5),e=Math.random()*Math.PI*2,i=Math.sqrt(1-t**2);return this.x=i*Math.cos(e),this.y=i*Math.sin(e),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Lo=new zo,Uo=new Po;class Do{constructor(t=0,e=0){Do.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,i=this.y,n=t.elements;return this.x=n[0]*e+n[3]*i+n[6],this.y=n[1]*e+n[4]*i+n[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const i=this.dot(t)/e;return Math.acos(To(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,i=this.y-t.y;return e*e+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const i=Math.cos(e),n=Math.sin(e),r=this.x-t.x,s=this.y-t.y;return this.x=r*i-s*n+t.x,this.y=r*n+s*i+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}const Io=new zo,No=new Do;class Oo{constructor(t,e,i=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=i,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}copyAt(t,e,i){t*=this.itemSize,i*=e.itemSize;for(let n=0,r=this.itemSize;n<r;n++)this.array[t+n]=e.array[i+n];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(2===this.itemSize)for(let e=0,i=this.count;e<i;e++)No.fromBufferAttribute(this,e),No.applyMatrix3(t),this.setXY(e,No.x,No.y);else if(3===this.itemSize)for(let e=0,i=this.count;e<i;e++)Io.fromBufferAttribute(this,e),Io.applyMatrix3(t),this.setXYZ(e,Io.x,Io.y,Io.z);return this}applyMatrix4(t){for(let e=0,i=this.count;e<i;e++)Io.fromBufferAttribute(this,e),Io.applyMatrix4(t),this.setXYZ(e,Io.x,Io.y,Io.z);return this}applyNormalMatrix(t){for(let e=0,i=this.count;e<i;e++)Io.fromBufferAttribute(this,e),Io.applyNormalMatrix(t),this.setXYZ(e,Io.x,Io.y,Io.z);return this}transformDirection(t){for(let e=0,i=this.count;e<i;e++)Io.fromBufferAttribute(this,e),Io.transformDirection(t),this.setXYZ(e,Io.x,Io.y,Io.z);return this}set(t,e=0){return this.array.set(t,e),this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=Co(e,this.array)),e}setX(t,e){return this.normalized&&(e=Ro(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=Co(e,this.array)),e}setY(t,e){return this.normalized&&(e=Ro(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=Co(e,this.array)),e}setZ(t,e){return this.normalized&&(e=Ro(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=Co(e,this.array)),e}setW(t,e){return this.normalized&&(e=Ro(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,i){return t*=this.itemSize,this.normalized&&(e=Ro(e,this.array),i=Ro(i,this.array)),this.array[t+0]=e,this.array[t+1]=i,this}setXYZ(t,e,i,n){return t*=this.itemSize,this.normalized&&(e=Ro(e,this.array),i=Ro(i,this.array),n=Ro(n,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=n,this}setXYZW(t,e,i,n,r){return t*=this.itemSize,this.normalized&&(e=Ro(e,this.array),i=Ro(i,this.array),n=Ro(n,this.array),r=Ro(r,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=n,this.array[t+3]=r,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),35044!==this.usage&&(t.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(t.updateRange=this.updateRange),t}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class Fo extends Oo{constructor(t,e,i){super(new Uint16Array(t),e,i)}}class Bo extends Oo{constructor(t,e,i){super(new Uint32Array(t),e,i)}}class ko extends Oo{constructor(t,e,i){super(new Float32Array(t),e,i)}}class Vo{constructor(t=new zo(1/0,1/0,1/0),e=new zo(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e+=3)this.expandByPoint(Go.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,i=t.count;e<i;e++)this.expandByPoint(Go.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const i=Go.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){if(t.updateWorldMatrix(!1,!1),void 0!==t.boundingBox)null===t.boundingBox&&t.computeBoundingBox(),Wo.copy(t.boundingBox),Wo.applyMatrix4(t.matrixWorld),this.union(Wo);else{const i=t.geometry;if(void 0!==i)if(e&&void 0!==i.attributes&&void 0!==i.attributes.position){const e=i.attributes.position;for(let i=0,n=e.count;i<n;i++)Go.fromBufferAttribute(e,i).applyMatrix4(t.matrixWorld),this.expandByPoint(Go)}else null===i.boundingBox&&i.computeBoundingBox(),Wo.copy(i.boundingBox),Wo.applyMatrix4(t.matrixWorld),this.union(Wo)}const i=t.children;for(let t=0,n=i.length;t<n;t++)this.expandByObject(i[t],e);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,Go),Go.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,i;return t.normal.x>0?(e=t.normal.x*this.min.x,i=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,i=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e<=-t.constant&&i>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter($o),Qo.subVectors(this.max,$o),jo.subVectors(t.a,$o),Xo.subVectors(t.b,$o),Yo.subVectors(t.c,$o),Ko.subVectors(Xo,jo),Zo.subVectors(Yo,Xo),Jo.subVectors(jo,Yo);let e=[0,-Ko.z,Ko.y,0,-Zo.z,Zo.y,0,-Jo.z,Jo.y,Ko.z,0,-Ko.x,Zo.z,0,-Zo.x,Jo.z,0,-Jo.x,-Ko.y,Ko.x,0,-Zo.y,Zo.x,0,-Jo.y,Jo.x,0];return!!il(e,jo,Xo,Yo,Qo)&&(e=[1,0,0,0,1,0,0,0,1],!!il(e,jo,Xo,Yo,Qo)&&(tl.crossVectors(Ko,Zo),e=[tl.x,tl.y,tl.z],il(e,jo,Xo,Yo,Qo)))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,Go).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=.5*this.getSize(Go).length()),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(Ho[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Ho[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Ho[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Ho[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Ho[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Ho[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Ho[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Ho[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Ho)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const Ho=[new zo,new zo,new zo,new zo,new zo,new zo,new zo,new zo],Go=new zo,Wo=new Vo,jo=new zo,Xo=new zo,Yo=new zo,Ko=new zo,Zo=new zo,Jo=new zo,$o=new zo,Qo=new zo,tl=new zo,el=new zo;function il(t,e,i,n,r){for(let s=0,a=t.length-3;s<=a;s+=3){el.fromArray(t,s);const a=r.x*Math.abs(el.x)+r.y*Math.abs(el.y)+r.z*Math.abs(el.z),o=e.dot(el),l=i.dot(el),h=n.dot(el);if(Math.max(-Math.max(o,l,h),Math.min(o,l,h))>a)return!1}return!0}class nl{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const i=this._listeners;void 0===i[t]&&(i[t]=[]),-1===i[t].indexOf(e)&&i[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;const i=this._listeners;return void 0!==i[t]&&-1!==i[t].indexOf(e)}removeEventListener(t,e){if(void 0===this._listeners)return;const i=this._listeners[t];if(void 0!==i){const t=i.indexOf(e);-1!==t&&i.splice(t,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const e=this._listeners[t.type];if(void 0!==e){t.target=this;const i=e.slice(0);for(let e=0,n=i.length;e<n;e++)i[e].call(this,t);t.target=null}}}const rl=new Vo,sl=new zo,al=new zo;class ol{constructor(t=new zo,e=-1){this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const i=this.center;void 0!==e?i.copy(e):rl.setFromPoints(t).getCenter(i);let n=0;for(let e=0,r=t.length;e<r;e++)n=Math.max(n,i.distanceToSquared(t[e]));return this.radius=Math.sqrt(n),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const i=this.center.distanceToSquared(t);return e.copy(t),i>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;sl.subVectors(t,this.center);const e=sl.lengthSq();if(e>this.radius*this.radius){const t=Math.sqrt(e),i=.5*(t-this.radius);this.center.addScaledVector(sl,i/t),this.radius+=i}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(!0===this.center.equals(t.center)?this.radius=Math.max(this.radius,t.radius):(al.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(sl.copy(t.center).add(al)),this.expandByPoint(sl.copy(t.center).sub(al))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}class ll{constructor(){ll.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(t,e,i,n,r,s,a,o,l,h,c,u,d,p,m,f){const g=this.elements;return g[0]=t,g[4]=e,g[8]=i,g[12]=n,g[1]=r,g[5]=s,g[9]=a,g[13]=o,g[2]=l,g[6]=h,g[10]=c,g[14]=u,g[3]=d,g[7]=p,g[11]=m,g[15]=f,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new ll).fromArray(this.elements)}copy(t){const e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],this}copyPosition(t){const e=this.elements,i=t.elements;return e[12]=i[12],e[13]=i[13],e[14]=i[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,i=t.elements,n=1/hl.setFromMatrixColumn(t,0).length(),r=1/hl.setFromMatrixColumn(t,1).length(),s=1/hl.setFromMatrixColumn(t,2).length();return e[0]=i[0]*n,e[1]=i[1]*n,e[2]=i[2]*n,e[3]=0,e[4]=i[4]*r,e[5]=i[5]*r,e[6]=i[6]*r,e[7]=0,e[8]=i[8]*s,e[9]=i[9]*s,e[10]=i[10]*s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,i=t.x,n=t.y,r=t.z,s=Math.cos(i),a=Math.sin(i),o=Math.cos(n),l=Math.sin(n),h=Math.cos(r),c=Math.sin(r);if("XYZ"===t.order){const t=s*h,i=s*c,n=a*h,r=a*c;e[0]=o*h,e[4]=-o*c,e[8]=l,e[1]=i+n*l,e[5]=t-r*l,e[9]=-a*o,e[2]=r-t*l,e[6]=n+i*l,e[10]=s*o}else if("YXZ"===t.order){const t=o*h,i=o*c,n=l*h,r=l*c;e[0]=t+r*a,e[4]=n*a-i,e[8]=s*l,e[1]=s*c,e[5]=s*h,e[9]=-a,e[2]=i*a-n,e[6]=r+t*a,e[10]=s*o}else if("ZXY"===t.order){const t=o*h,i=o*c,n=l*h,r=l*c;e[0]=t-r*a,e[4]=-s*c,e[8]=n+i*a,e[1]=i+n*a,e[5]=s*h,e[9]=r-t*a,e[2]=-s*l,e[6]=a,e[10]=s*o}else if("ZYX"===t.order){const t=s*h,i=s*c,n=a*h,r=a*c;e[0]=o*h,e[4]=n*l-i,e[8]=t*l+r,e[1]=o*c,e[5]=r*l+t,e[9]=i*l-n,e[2]=-l,e[6]=a*o,e[10]=s*o}else if("YZX"===t.order){const t=s*o,i=s*l,n=a*o,r=a*l;e[0]=o*h,e[4]=r-t*c,e[8]=n*c+i,e[1]=c,e[5]=s*h,e[9]=-a*h,e[2]=-l*h,e[6]=i*c+n,e[10]=t-r*c}else if("XZY"===t.order){const t=s*o,i=s*l,n=a*o,r=a*l;e[0]=o*h,e[4]=-c,e[8]=l*h,e[1]=t*c+r,e[5]=s*h,e[9]=i*c-n,e[2]=n*c-i,e[6]=a*h,e[10]=r*c+t}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(ul,t,dl)}lookAt(t,e,i){const n=this.elements;return fl.subVectors(t,e),0===fl.lengthSq()&&(fl.z=1),fl.normalize(),pl.crossVectors(i,fl),0===pl.lengthSq()&&(1===Math.abs(i.z)?fl.x+=1e-4:fl.z+=1e-4,fl.normalize(),pl.crossVectors(i,fl)),pl.normalize(),ml.crossVectors(fl,pl),n[0]=pl.x,n[4]=ml.x,n[8]=fl.x,n[1]=pl.y,n[5]=ml.y,n[9]=fl.y,n[2]=pl.z,n[6]=ml.z,n[10]=fl.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const i=t.elements,n=e.elements,r=this.elements,s=i[0],a=i[4],o=i[8],l=i[12],h=i[1],c=i[5],u=i[9],d=i[13],p=i[2],m=i[6],f=i[10],g=i[14],v=i[3],x=i[7],_=i[11],q=i[15],y=n[0],b=n[4],w=n[8],M=n[12],S=n[1],E=n[5],T=n[9],A=n[13],C=n[2],R=n[6],P=n[10],z=n[14],L=n[3],U=n[7],D=n[11],I=n[15];return r[0]=s*y+a*S+o*C+l*L,r[4]=s*b+a*E+o*R+l*U,r[8]=s*w+a*T+o*P+l*D,r[12]=s*M+a*A+o*z+l*I,r[1]=h*y+c*S+u*C+d*L,r[5]=h*b+c*E+u*R+d*U,r[9]=h*w+c*T+u*P+d*D,r[13]=h*M+c*A+u*z+d*I,r[2]=p*y+m*S+f*C+g*L,r[6]=p*b+m*E+f*R+g*U,r[10]=p*w+m*T+f*P+g*D,r[14]=p*M+m*A+f*z+g*I,r[3]=v*y+x*S+_*C+q*L,r[7]=v*b+x*E+_*R+q*U,r[11]=v*w+x*T+_*P+q*D,r[15]=v*M+x*A+_*z+q*I,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],i=t[4],n=t[8],r=t[12],s=t[1],a=t[5],o=t[9],l=t[13],h=t[2],c=t[6],u=t[10],d=t[14];return t[3]*(+r*o*c-n*l*c-r*a*u+i*l*u+n*a*d-i*o*d)+t[7]*(+e*o*d-e*l*u+r*s*u-n*s*d+n*l*h-r*o*h)+t[11]*(+e*l*c-e*a*d-r*s*c+i*s*d+r*a*h-i*l*h)+t[15]*(-n*a*h-e*o*c+e*a*u+n*s*c-i*s*u+i*o*h)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,i){const n=this.elements;return t.isVector3?(n[12]=t.x,n[13]=t.y,n[14]=t.z):(n[12]=t,n[13]=e,n[14]=i),this}invert(){const t=this.elements,e=t[0],i=t[1],n=t[2],r=t[3],s=t[4],a=t[5],o=t[6],l=t[7],h=t[8],c=t[9],u=t[10],d=t[11],p=t[12],m=t[13],f=t[14],g=t[15],v=c*f*l-m*u*l+m*o*d-a*f*d-c*o*g+a*u*g,x=p*u*l-h*f*l-p*o*d+s*f*d+h*o*g-s*u*g,_=h*m*l-p*c*l+p*a*d-s*m*d-h*a*g+s*c*g,q=p*c*o-h*m*o-p*a*u+s*m*u+h*a*f-s*c*f,y=e*v+i*x+n*_+r*q;if(0===y)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const b=1/y;return t[0]=v*b,t[1]=(m*u*r-c*f*r-m*n*d+i*f*d+c*n*g-i*u*g)*b,t[2]=(a*f*r-m*o*r+m*n*l-i*f*l-a*n*g+i*o*g)*b,t[3]=(c*o*r-a*u*r-c*n*l+i*u*l+a*n*d-i*o*d)*b,t[4]=x*b,t[5]=(h*f*r-p*u*r+p*n*d-e*f*d-h*n*g+e*u*g)*b,t[6]=(p*o*r-s*f*r-p*n*l+e*f*l+s*n*g-e*o*g)*b,t[7]=(s*u*r-h*o*r+h*n*l-e*u*l-s*n*d+e*o*d)*b,t[8]=_*b,t[9]=(p*c*r-h*m*r-p*i*d+e*m*d+h*i*g-e*c*g)*b,t[10]=(s*m*r-p*a*r+p*i*l-e*m*l-s*i*g+e*a*g)*b,t[11]=(h*a*r-s*c*r-h*i*l+e*c*l+s*i*d-e*a*d)*b,t[12]=q*b,t[13]=(h*m*n-p*c*n+p*i*u-e*m*u-h*i*f+e*c*f)*b,t[14]=(p*a*n-s*m*n-p*i*o+e*m*o+s*i*f-e*a*f)*b,t[15]=(s*c*n-h*a*n+h*i*o-e*c*o-s*i*u+e*a*u)*b,this}scale(t){const e=this.elements,i=t.x,n=t.y,r=t.z;return e[0]*=i,e[4]*=n,e[8]*=r,e[1]*=i,e[5]*=n,e[9]*=r,e[2]*=i,e[6]*=n,e[10]*=r,e[3]*=i,e[7]*=n,e[11]*=r,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],n=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,i,n))}makeTranslation(t,e,i){return this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const i=Math.cos(e),n=Math.sin(e),r=1-i,s=t.x,a=t.y,o=t.z,l=r*s,h=r*a;return this.set(l*s+i,l*a-n*o,l*o+n*a,0,l*a+n*o,h*a+i,h*o-n*s,0,l*o-n*a,h*o+n*s,r*o*o+i,0,0,0,0,1),this}makeScale(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this}makeShear(t,e,i,n,r,s){return this.set(1,i,r,0,t,1,s,0,e,n,1,0,0,0,0,1),this}compose(t,e,i){const n=this.elements,r=e._x,s=e._y,a=e._z,o=e._w,l=r+r,h=s+s,c=a+a,u=r*l,d=r*h,p=r*c,m=s*h,f=s*c,g=a*c,v=o*l,x=o*h,_=o*c,q=i.x,y=i.y,b=i.z;return n[0]=(1-(m+g))*q,n[1]=(d+_)*q,n[2]=(p-x)*q,n[3]=0,n[4]=(d-_)*y,n[5]=(1-(u+g))*y,n[6]=(f+v)*y,n[7]=0,n[8]=(p+x)*b,n[9]=(f-v)*b,n[10]=(1-(u+m))*b,n[11]=0,n[12]=t.x,n[13]=t.y,n[14]=t.z,n[15]=1,this}decompose(t,e,i){const n=this.elements;let r=hl.set(n[0],n[1],n[2]).length();const s=hl.set(n[4],n[5],n[6]).length(),a=hl.set(n[8],n[9],n[10]).length();this.determinant()<0&&(r=-r),t.x=n[12],t.y=n[13],t.z=n[14],cl.copy(this);const o=1/r,l=1/s,h=1/a;return cl.elements[0]*=o,cl.elements[1]*=o,cl.elements[2]*=o,cl.elements[4]*=l,cl.elements[5]*=l,cl.elements[6]*=l,cl.elements[8]*=h,cl.elements[9]*=h,cl.elements[10]*=h,e.setFromRotationMatrix(cl),i.x=r,i.y=s,i.z=a,this}makePerspective(t,e,i,n,r,s){const a=this.elements,o=2*r/(e-t),l=2*r/(i-n),h=(e+t)/(e-t),c=(i+n)/(i-n),u=-(s+r)/(s-r),d=-2*s*r/(s-r);return a[0]=o,a[4]=0,a[8]=h,a[12]=0,a[1]=0,a[5]=l,a[9]=c,a[13]=0,a[2]=0,a[6]=0,a[10]=u,a[14]=d,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(t,e,i,n,r,s){const a=this.elements,o=1/(e-t),l=1/(i-n),h=1/(s-r),c=(e+t)*o,u=(i+n)*l,d=(s+r)*h;return a[0]=2*o,a[4]=0,a[8]=0,a[12]=-c,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-u,a[2]=0,a[6]=0,a[10]=-2*h,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(t){const e=this.elements,i=t.elements;for(let t=0;t<16;t++)if(e[t]!==i[t])return!1;return!0}fromArray(t,e=0){for(let i=0;i<16;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){const i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}}const hl=new zo,cl=new ll,ul=new zo(0,0,0),dl=new zo(1,1,1),pl=new zo,ml=new zo,fl=new zo,gl=new ll,vl=new Po;class xl{constructor(t=0,e=0,i=0,n=xl.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=e,this._z=i,this._order=n}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,i,n=this._order){return this._x=t,this._y=e,this._z=i,this._order=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,i=!0){const n=t.elements,r=n[0],s=n[4],a=n[8],o=n[1],l=n[5],h=n[9],c=n[2],u=n[6],d=n[10];switch(e){case"XYZ":this._y=Math.asin(To(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-h,d),this._z=Math.atan2(-s,r)):(this._x=Math.atan2(u,l),this._z=0);break;case"YXZ":this._x=Math.asin(-To(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(a,d),this._z=Math.atan2(o,l)):(this._y=Math.atan2(-c,r),this._z=0);break;case"ZXY":this._x=Math.asin(To(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(-c,d),this._z=Math.atan2(-s,l)):(this._y=0,this._z=Math.atan2(o,r));break;case"ZYX":this._y=Math.asin(-To(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(u,d),this._z=Math.atan2(o,r)):(this._x=0,this._z=Math.atan2(-s,l));break;case"YZX":this._z=Math.asin(To(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-h,l),this._y=Math.atan2(-c,r)):(this._x=0,this._y=Math.atan2(a,d));break;case"XZY":this._z=Math.asin(-To(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(u,l),this._y=Math.atan2(a,r)):(this._x=Math.atan2(-h,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!0===i&&this._onChangeCallback(),this}setFromQuaternion(t,e,i){return gl.makeRotationFromQuaternion(t),this.setFromRotationMatrix(gl,e,i)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return vl.setFromEuler(this),this.setFromQuaternion(vl,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}xl.DEFAULT_ORDER="XYZ";class _l{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!=(this.mask&t.mask)}isEnabled(t){return 0!=(this.mask&(1<<t|0))}}class ql{constructor(){ql.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(t,e,i,n,r,s,a,o,l){const h=this.elements;return h[0]=t,h[1]=n,h[2]=a,h[3]=e,h[4]=r,h[5]=o,h[6]=i,h[7]=s,h[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],this}extractBasis(t,e,i){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const i=t.elements,n=e.elements,r=this.elements,s=i[0],a=i[3],o=i[6],l=i[1],h=i[4],c=i[7],u=i[2],d=i[5],p=i[8],m=n[0],f=n[3],g=n[6],v=n[1],x=n[4],_=n[7],q=n[2],y=n[5],b=n[8];return r[0]=s*m+a*v+o*q,r[3]=s*f+a*x+o*y,r[6]=s*g+a*_+o*b,r[1]=l*m+h*v+c*q,r[4]=l*f+h*x+c*y,r[7]=l*g+h*_+c*b,r[2]=u*m+d*v+p*q,r[5]=u*f+d*x+p*y,r[8]=u*g+d*_+p*b,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],i=t[1],n=t[2],r=t[3],s=t[4],a=t[5],o=t[6],l=t[7],h=t[8];return e*s*h-e*a*l-i*r*h+i*a*o+n*r*l-n*s*o}invert(){const t=this.elements,e=t[0],i=t[1],n=t[2],r=t[3],s=t[4],a=t[5],o=t[6],l=t[7],h=t[8],c=h*s-a*l,u=a*o-h*r,d=l*r-s*o,p=e*c+i*u+n*d;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const m=1/p;return t[0]=c*m,t[1]=(n*l-h*i)*m,t[2]=(a*i-n*s)*m,t[3]=u*m,t[4]=(h*e-n*o)*m,t[5]=(n*r-a*e)*m,t[6]=d*m,t[7]=(i*o-l*e)*m,t[8]=(s*e-i*r)*m,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,i,n,r,s,a){const o=Math.cos(r),l=Math.sin(r);return this.set(i*o,i*l,-i*(o*s+l*a)+s+t,-n*l,n*o,-n*(-l*s+o*a)+a+e,0,0,1),this}scale(t,e){return this.premultiply(yl.makeScale(t,e)),this}rotate(t){return this.premultiply(yl.makeRotation(-t)),this}translate(t,e){return this.premultiply(yl.makeTranslation(t,e)),this}makeTranslation(t,e){return this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,i,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){const e=this.elements,i=t.elements;for(let t=0;t<9;t++)if(e[t]!==i[t])return!1;return!0}fromArray(t,e=0){for(let i=0;i<9;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){const i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}const yl=new ql;let bl=0;const wl=new zo,Ml=new Po,Sl=new ll,El=new zo,Tl=new zo,Al=new zo,Cl=new Po,Rl=new zo(1,0,0),Pl=new zo(0,1,0),zl=new zo(0,0,1),Ll={type:"added"},Ul={type:"removed"};class Dl extends nl{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:bl++}),this.uuid=Eo(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Dl.DEFAULT_UP.clone();const t=new zo,e=new xl,i=new Po,n=new zo(1,1,1);e._onChange((function(){i.setFromEuler(e,!1)})),i._onChange((function(){e.setFromQuaternion(i,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:n},modelViewMatrix:{value:new ll},normalMatrix:{value:new ql}}),this.matrix=new ll,this.matrixWorld=new ll,this.matrixAutoUpdate=Dl.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Dl.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new _l,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return Ml.setFromAxisAngle(t,e),this.quaternion.multiply(Ml),this}rotateOnWorldAxis(t,e){return Ml.setFromAxisAngle(t,e),this.quaternion.premultiply(Ml),this}rotateX(t){return this.rotateOnAxis(Rl,t)}rotateY(t){return this.rotateOnAxis(Pl,t)}rotateZ(t){return this.rotateOnAxis(zl,t)}translateOnAxis(t,e){return wl.copy(t).applyQuaternion(this.quaternion),this.position.add(wl.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(Rl,t)}translateY(t){return this.translateOnAxis(Pl,t)}translateZ(t){return this.translateOnAxis(zl,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Sl.copy(this.matrixWorld).invert())}lookAt(t,e,i){t.isVector3?El.copy(t):El.set(t,e,i);const n=this.parent;this.updateWorldMatrix(!0,!1),Tl.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Sl.lookAt(Tl,El,this.up):Sl.lookAt(El,Tl,this.up),this.quaternion.setFromRotationMatrix(Sl),n&&(Sl.extractRotation(n.matrixWorld),Ml.setFromRotationMatrix(Sl),this.quaternion.premultiply(Ml.invert()))}add(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(Ll)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const e=this.children.indexOf(t);return-1!==e&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(Ul)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const e=this.children[t];e.parent=null,e.dispatchEvent(Ul)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),Sl.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Sl.multiply(t.parent.matrixWorld)),t.applyMatrix4(Sl),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let i=0,n=this.children.length;i<n;i++){const n=this.children[i].getObjectByProperty(t,e);if(void 0!==n)return n}}getObjectsByProperty(t,e){let i=[];this[t]===e&&i.push(this);for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n].getObjectsByProperty(t,e);r.length>0&&(i=i.concat(r))}return i}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Tl,t,Al),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Tl,Cl,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let i=0,n=e.length;i<n;i++)e[i].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const e=this.children;for(let i=0,n=e.length;i<n;i++)e[i].traverseVisible(t)}traverseAncestors(t){const e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let i=0,n=e.length;i<n;i++){const n=e[i];!0!==n.matrixWorldAutoUpdate&&!0!==t||n.updateMatrixWorld(t)}}updateWorldMatrix(t,e){const i=this.parent;if(!0===t&&null!==i&&!0===i.matrixWorldAutoUpdate&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e){const t=this.children;for(let e=0,i=t.length;e<i;e++){const i=t[e];!0===i.matrixWorldAutoUpdate&&i.updateWorldMatrix(!1,!0)}}}toJSON(t){const e=void 0===t||"string"==typeof t,i={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const n={};function r(e,i){return void 0===e[i.uuid]&&(e[i.uuid]=i.toJSON(t)),i.uuid}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),!0===this.castShadow&&(n.castShadow=!0),!0===this.receiveShadow&&(n.receiveShadow=!0),!1===this.visible&&(n.visible=!1),!1===this.frustumCulled&&(n.frustumCulled=!1),0!==this.renderOrder&&(n.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(n.userData=this.userData),n.layers=this.layers.mask,n.matrix=this.matrix.toArray(),n.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(n.matrixAutoUpdate=!1),this.isInstancedMesh&&(n.type="InstancedMesh",n.count=this.count,n.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(n.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?n.background=this.background.toJSON():this.background.isTexture&&(n.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(n.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){n.geometry=r(t.geometries,this.geometry);const e=this.geometry.parameters;if(void 0!==e&&void 0!==e.shapes){const i=e.shapes;if(Array.isArray(i))for(let e=0,n=i.length;e<n;e++){const n=i[e];r(t.shapes,n)}else r(t.shapes,i)}}if(this.isSkinnedMesh&&(n.bindMode=this.bindMode,n.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(r(t.skeletons,this.skeleton),n.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const e=[];for(let i=0,n=this.material.length;i<n;i++)e.push(r(t.materials,this.material[i]));n.material=e}else n.material=r(t.materials,this.material);if(this.children.length>0){n.children=[];for(let e=0;e<this.children.length;e++)n.children.push(this.children[e].toJSON(t).object)}if(this.animations.length>0){n.animations=[];for(let e=0;e<this.animations.length;e++){const i=this.animations[e];n.animations.push(r(t.animations,i))}}if(e){const e=s(t.geometries),n=s(t.materials),r=s(t.textures),a=s(t.images),o=s(t.shapes),l=s(t.skeletons),h=s(t.animations),c=s(t.nodes);e.length>0&&(i.geometries=e),n.length>0&&(i.materials=n),r.length>0&&(i.textures=r),a.length>0&&(i.images=a),o.length>0&&(i.shapes=o),l.length>0&&(i.skeletons=l),h.length>0&&(i.animations=h),c.length>0&&(i.nodes=c)}return i.object=n,i;function s(t){const e=[];for(const i in t){const n=t[i];delete n.metadata,e.push(n)}return e}}clone(t){return(new this.constructor).copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(let e=0;e<t.children.length;e++){const i=t.children[e];this.add(i.clone())}return this}}function Il(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}Dl.DEFAULT_UP=new zo(0,1,0),Dl.DEFAULT_MATRIX_AUTO_UPDATE=!0,Dl.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const Nl={};function Ol(t){t in Nl||(Nl[t]=!0,console.warn(t))}let Fl=0;const Bl=new ll,kl=new Dl,Vl=new zo,Hl=new Vo,Gl=new Vo,Wl=new zo;class jl extends nl{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Fl++}),this.uuid=Eo(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(function(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}(t)?Bo:Fo)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e,i=0){this.groups.push({start:t,count:e,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const i=this.attributes.normal;if(void 0!==i){const e=(new ql).getNormalMatrix(t);i.applyNormalMatrix(e),i.needsUpdate=!0}const n=this.attributes.tangent;return void 0!==n&&(n.transformDirection(t),n.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return Bl.makeRotationFromQuaternion(t),this.applyMatrix4(Bl),this}rotateX(t){return Bl.makeRotationX(t),this.applyMatrix4(Bl),this}rotateY(t){return Bl.makeRotationY(t),this.applyMatrix4(Bl),this}rotateZ(t){return Bl.makeRotationZ(t),this.applyMatrix4(Bl),this}translate(t,e,i){return Bl.makeTranslation(t,e,i),this.applyMatrix4(Bl),this}scale(t,e,i){return Bl.makeScale(t,e,i),this.applyMatrix4(Bl),this}lookAt(t){return kl.lookAt(t),kl.updateMatrix(),this.applyMatrix4(kl.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Vl).negate(),this.translate(Vl.x,Vl.y,Vl.z),this}setFromPoints(t){const e=[];for(let i=0,n=t.length;i<n;i++){const n=t[i];e.push(n.x,n.y,n.z||0)}return this.setAttribute("position",new ko(e,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Vo);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new zo(-1/0,-1/0,-1/0),new zo(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let t=0,i=e.length;t<i;t++){const i=e[t];Hl.setFromBufferAttribute(i),this.morphTargetsRelative?(Wl.addVectors(this.boundingBox.min,Hl.min),this.boundingBox.expandByPoint(Wl),Wl.addVectors(this.boundingBox.max,Hl.max),this.boundingBox.expandByPoint(Wl)):(this.boundingBox.expandByPoint(Hl.min),this.boundingBox.expandByPoint(Hl.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new ol);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new zo,1/0);if(t){const i=this.boundingSphere.center;if(Hl.setFromBufferAttribute(t),e)for(let t=0,i=e.length;t<i;t++){const i=e[t];Gl.setFromBufferAttribute(i),this.morphTargetsRelative?(Wl.addVectors(Hl.min,Gl.min),Hl.expandByPoint(Wl),Wl.addVectors(Hl.max,Gl.max),Hl.expandByPoint(Wl)):(Hl.expandByPoint(Gl.min),Hl.expandByPoint(Gl.max))}Hl.getCenter(i);let n=0;for(let e=0,r=t.count;e<r;e++)Wl.fromBufferAttribute(t,e),n=Math.max(n,i.distanceToSquared(Wl));if(e)for(let r=0,s=e.length;r<s;r++){const s=e[r],a=this.morphTargetsRelative;for(let e=0,r=s.count;e<r;e++)Wl.fromBufferAttribute(s,e),a&&(Vl.fromBufferAttribute(t,e),Wl.add(Vl)),n=Math.max(n,i.distanceToSquared(Wl))}this.boundingSphere.radius=Math.sqrt(n),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const i=t.array,n=e.position.array,r=e.normal.array,s=e.uv.array,a=n.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Oo(new Float32Array(4*a),4));const o=this.getAttribute("tangent").array,l=[],h=[];for(let t=0;t<a;t++)l[t]=new zo,h[t]=new zo;const c=new zo,u=new zo,d=new zo,p=new Do,m=new Do,f=new Do,g=new zo,v=new zo;function x(t,e,i){c.fromArray(n,3*t),u.fromArray(n,3*e),d.fromArray(n,3*i),p.fromArray(s,2*t),m.fromArray(s,2*e),f.fromArray(s,2*i),u.sub(c),d.sub(c),m.sub(p),f.sub(p);const r=1/(m.x*f.y-f.x*m.y);isFinite(r)&&(g.copy(u).multiplyScalar(f.y).addScaledVector(d,-m.y).multiplyScalar(r),v.copy(d).multiplyScalar(m.x).addScaledVector(u,-f.x).multiplyScalar(r),l[t].add(g),l[e].add(g),l[i].add(g),h[t].add(v),h[e].add(v),h[i].add(v))}let _=this.groups;0===_.length&&(_=[{start:0,count:i.length}]);for(let t=0,e=_.length;t<e;++t){const e=_[t],n=e.start;for(let t=n,r=n+e.count;t<r;t+=3)x(i[t+0],i[t+1],i[t+2])}const q=new zo,y=new zo,b=new zo,w=new zo;function M(t){b.fromArray(r,3*t),w.copy(b);const e=l[t];q.copy(e),q.sub(b.multiplyScalar(b.dot(e))).normalize(),y.crossVectors(w,e);const i=y.dot(h[t])<0?-1:1;o[4*t]=q.x,o[4*t+1]=q.y,o[4*t+2]=q.z,o[4*t+3]=i}for(let t=0,e=_.length;t<e;++t){const e=_[t],n=e.start;for(let t=n,r=n+e.count;t<r;t+=3)M(i[t+0]),M(i[t+1]),M(i[t+2])}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let i=this.getAttribute("normal");if(void 0===i)i=new Oo(new Float32Array(3*e.count),3),this.setAttribute("normal",i);else for(let t=0,e=i.count;t<e;t++)i.setXYZ(t,0,0,0);const n=new zo,r=new zo,s=new zo,a=new zo,o=new zo,l=new zo,h=new zo,c=new zo;if(t)for(let u=0,d=t.count;u<d;u+=3){const d=t.getX(u+0),p=t.getX(u+1),m=t.getX(u+2);n.fromBufferAttribute(e,d),r.fromBufferAttribute(e,p),s.fromBufferAttribute(e,m),h.subVectors(s,r),c.subVectors(n,r),h.cross(c),a.fromBufferAttribute(i,d),o.fromBufferAttribute(i,p),l.fromBufferAttribute(i,m),a.add(h),o.add(h),l.add(h),i.setXYZ(d,a.x,a.y,a.z),i.setXYZ(p,o.x,o.y,o.z),i.setXYZ(m,l.x,l.y,l.z)}else for(let t=0,a=e.count;t<a;t+=3)n.fromBufferAttribute(e,t+0),r.fromBufferAttribute(e,t+1),s.fromBufferAttribute(e,t+2),h.subVectors(s,r),c.subVectors(n,r),h.cross(c),i.setXYZ(t+0,h.x,h.y,h.z),i.setXYZ(t+1,h.x,h.y,h.z),i.setXYZ(t+2,h.x,h.y,h.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeGeometries() instead."),this}normalizeNormals(){const t=this.attributes.normal;for(let e=0,i=t.count;e<i;e++)Wl.fromBufferAttribute(t,e),Wl.normalize(),t.setXYZ(e,Wl.x,Wl.y,Wl.z)}toNonIndexed(){function t(t,e){const i=t.array,n=t.itemSize,r=t.normalized,s=new i.constructor(e.length*n);let a=0,o=0;for(let r=0,l=e.length;r<l;r++){a=t.isInterleavedBufferAttribute?e[r]*t.data.stride+t.offset:e[r]*n;for(let t=0;t<n;t++)s[o++]=i[a++]}return new Oo(s,n,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new jl,i=this.index.array,n=this.attributes;for(const r in n){const s=t(n[r],i);e.setAttribute(r,s)}const r=this.morphAttributes;for(const n in r){const s=[],a=r[n];for(let e=0,n=a.length;e<n;e++){const n=t(a[e],i);s.push(n)}e.morphAttributes[n]=s}e.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let t=0,i=s.length;t<i;t++){const i=s[t];e.addGroup(i.start,i.count,i.materialIndex)}return e}toJSON(){const t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const e=this.parameters;for(const i in e)void 0!==e[i]&&(t[i]=e[i]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const i=this.attributes;for(const e in i){const n=i[e];t.data.attributes[e]=n.toJSON(t.data)}const n={};let r=!1;for(const e in this.morphAttributes){const i=this.morphAttributes[e],s=[];for(let e=0,n=i.length;e<n;e++){const n=i[e];s.push(n.toJSON(t.data))}s.length>0&&(n[e]=s,r=!0)}r&&(t.data.morphAttributes=n,t.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(t.data.groups=JSON.parse(JSON.stringify(s)));const a=this.boundingSphere;return null!==a&&(t.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const i=t.index;null!==i&&this.setIndex(i.clone(e));const n=t.attributes;for(const t in n){const i=n[t];this.setAttribute(t,i.clone(e))}const r=t.morphAttributes;for(const t in r){const i=[],n=r[t];for(let t=0,r=n.length;t<r;t++)i.push(n[t].clone(e));this.morphAttributes[t]=i}this.morphTargetsRelative=t.morphTargetsRelative;const s=t.groups;for(let t=0,e=s.length;t<e;t++){const e=s[t];this.addGroup(e.start,e.count,e.materialIndex)}const a=t.boundingBox;null!==a&&(this.boundingBox=a.clone());const o=t.boundingSphere;return null!==o&&(this.boundingSphere=o.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Xl=new zo,Yl=new zo,Kl=new zo,Zl=new zo,Jl=new zo,$l=new zo,Ql=new zo;class th{constructor(t=new zo,e=new zo(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,Xl)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const i=e.dot(this.direction);return i<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=Xl.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(Xl.copy(this.origin).addScaledVector(this.direction,e),Xl.distanceToSquared(t))}distanceSqToSegment(t,e,i,n){Yl.copy(t).add(e).multiplyScalar(.5),Kl.copy(e).sub(t).normalize(),Zl.copy(this.origin).sub(Yl);const r=.5*t.distanceTo(e),s=-this.direction.dot(Kl),a=Zl.dot(this.direction),o=-Zl.dot(Kl),l=Zl.lengthSq(),h=Math.abs(1-s*s);let c,u,d,p;if(h>0)if(c=s*o-a,u=s*a-o,p=r*h,c>=0)if(u>=-p)if(u<=p){const t=1/h;c*=t,u*=t,d=c*(c+s*u+2*a)+u*(s*c+u+2*o)+l}else u=r,c=Math.max(0,-(s*u+a)),d=-c*c+u*(u+2*o)+l;else u=-r,c=Math.max(0,-(s*u+a)),d=-c*c+u*(u+2*o)+l;else u<=-p?(c=Math.max(0,-(-s*r+a)),u=c>0?-r:Math.min(Math.max(-r,-o),r),d=-c*c+u*(u+2*o)+l):u<=p?(c=0,u=Math.min(Math.max(-r,-o),r),d=u*(u+2*o)+l):(c=Math.max(0,-(s*r+a)),u=c>0?r:Math.min(Math.max(-r,-o),r),d=-c*c+u*(u+2*o)+l);else u=s>0?-r:r,c=Math.max(0,-(s*u+a)),d=-c*c+u*(u+2*o)+l;return i&&i.copy(this.origin).addScaledVector(this.direction,c),n&&n.copy(Yl).addScaledVector(Kl,u),d}intersectSphere(t,e){Xl.subVectors(t.center,this.origin);const i=Xl.dot(this.direction),n=Xl.dot(Xl)-i*i,r=t.radius*t.radius;if(n>r)return null;const s=Math.sqrt(r-n),a=i-s,o=i+s;return o<0?null:a<0?this.at(o,e):this.at(a,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const i=-(this.origin.dot(t.normal)+t.constant)/e;return i>=0?i:null}intersectPlane(t,e){const i=this.distanceToPlane(t);return null===i?null:this.at(i,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let i,n,r,s,a,o;const l=1/this.direction.x,h=1/this.direction.y,c=1/this.direction.z,u=this.origin;return l>=0?(i=(t.min.x-u.x)*l,n=(t.max.x-u.x)*l):(i=(t.max.x-u.x)*l,n=(t.min.x-u.x)*l),h>=0?(r=(t.min.y-u.y)*h,s=(t.max.y-u.y)*h):(r=(t.max.y-u.y)*h,s=(t.min.y-u.y)*h),i>s||r>n?null:((r>i||isNaN(i))&&(i=r),(s<n||isNaN(n))&&(n=s),c>=0?(a=(t.min.z-u.z)*c,o=(t.max.z-u.z)*c):(a=(t.max.z-u.z)*c,o=(t.min.z-u.z)*c),i>o||a>n?null:((a>i||i!=i)&&(i=a),(o<n||n!=n)&&(n=o),n<0?null:this.at(i>=0?i:n,e)))}intersectsBox(t){return null!==this.intersectBox(t,Xl)}intersectTriangle(t,e,i,n,r){Jl.subVectors(e,t),$l.subVectors(i,t),Ql.crossVectors(Jl,$l);let s,a=this.direction.dot(Ql);if(a>0){if(n)return null;s=1}else{if(!(a<0))return null;s=-1,a=-a}Zl.subVectors(this.origin,t);const o=s*this.direction.dot($l.crossVectors(Zl,$l));if(o<0)return null;const l=s*this.direction.dot(Jl.cross(Zl));if(l<0)return null;if(o+l>a)return null;const h=-s*Zl.dot(Ql);return h<0?null:this.at(h/a,r)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}const eh=new zo,ih=new zo,nh=new zo,rh=new zo,sh=new zo,ah=new zo,oh=new zo,lh=new zo,hh=new zo,ch=new zo;let uh=!1;class dh{constructor(t=new zo,e=new zo,i=new zo){this.a=t,this.b=e,this.c=i}static getNormal(t,e,i,n){n.subVectors(i,e),eh.subVectors(t,e),n.cross(eh);const r=n.lengthSq();return r>0?n.multiplyScalar(1/Math.sqrt(r)):n.set(0,0,0)}static getBarycoord(t,e,i,n,r){eh.subVectors(n,e),ih.subVectors(i,e),nh.subVectors(t,e);const s=eh.dot(eh),a=eh.dot(ih),o=eh.dot(nh),l=ih.dot(ih),h=ih.dot(nh),c=s*l-a*a;if(0===c)return r.set(-2,-1,-1);const u=1/c,d=(l*o-a*h)*u,p=(s*h-a*o)*u;return r.set(1-d-p,p,d)}static containsPoint(t,e,i,n){return this.getBarycoord(t,e,i,n,rh),rh.x>=0&&rh.y>=0&&rh.x+rh.y<=1}static getUV(t,e,i,n,r,s,a,o){return!1===uh&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),uh=!0),this.getInterpolation(t,e,i,n,r,s,a,o)}static getInterpolation(t,e,i,n,r,s,a,o){return this.getBarycoord(t,e,i,n,rh),o.setScalar(0),o.addScaledVector(r,rh.x),o.addScaledVector(s,rh.y),o.addScaledVector(a,rh.z),o}static isFrontFacing(t,e,i,n){return eh.subVectors(i,e),ih.subVectors(t,e),eh.cross(ih).dot(n)<0}set(t,e,i){return this.a.copy(t),this.b.copy(e),this.c.copy(i),this}setFromPointsAndIndices(t,e,i,n){return this.a.copy(t[e]),this.b.copy(t[i]),this.c.copy(t[n]),this}setFromAttributeAndIndices(t,e,i,n){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,i),this.c.fromBufferAttribute(t,n),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return eh.subVectors(this.c,this.b),ih.subVectors(this.a,this.b),.5*eh.cross(ih).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return dh.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return dh.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,i,n,r){return!1===uh&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),uh=!0),dh.getInterpolation(t,this.a,this.b,this.c,e,i,n,r)}getInterpolation(t,e,i,n,r){return dh.getInterpolation(t,this.a,this.b,this.c,e,i,n,r)}containsPoint(t){return dh.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return dh.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const i=this.a,n=this.b,r=this.c;let s,a;sh.subVectors(n,i),ah.subVectors(r,i),lh.subVectors(t,i);const o=sh.dot(lh),l=ah.dot(lh);if(o<=0&&l<=0)return e.copy(i);hh.subVectors(t,n);const h=sh.dot(hh),c=ah.dot(hh);if(h>=0&&c<=h)return e.copy(n);const u=o*c-h*l;if(u<=0&&o>=0&&h<=0)return s=o/(o-h),e.copy(i).addScaledVector(sh,s);ch.subVectors(t,r);const d=sh.dot(ch),p=ah.dot(ch);if(p>=0&&d<=p)return e.copy(r);const m=d*l-o*p;if(m<=0&&l>=0&&p<=0)return a=l/(l-p),e.copy(i).addScaledVector(ah,a);const f=h*p-d*c;if(f<=0&&c-h>=0&&d-p>=0)return oh.subVectors(r,n),a=(c-h)/(c-h+(d-p)),e.copy(n).addScaledVector(oh,a);const g=1/(f+m+u);return s=m*g,a=u*g,e.copy(i).addScaledVector(sh,s).addScaledVector(ah,a)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}let ph=0;class mh extends nl{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:ph++}),this.uuid=Eo(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=bo,this.stencilZFail=bo,this.stencilZPass=bo,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const e in t){const i=t[e];if(void 0===i){console.warn(`THREE.Material: parameter '${e}' has value of undefined.`);continue}const n=this[e];void 0!==n?n&&n.isColor?n.set(i):n&&n.isVector3&&i&&i.isVector3?n.copy(i):this[e]=i:console.warn(`THREE.Material: '${e}' is not a property of THREE.${this.type}.`)}}toJSON(t){const e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function n(t){const e=[];for(const i in t){const n=t[i];delete n.metadata,e.push(n)}return e}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),void 0!==this.sheen&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(i.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(i.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(t).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(t).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(t).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(t).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(t).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(i.combine=this.combine)),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(i.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(i.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(i.size=this.size),null!==this.shadowSide&&(i.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(i.blending=this.blending),0!==this.side&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(i.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=this.premultipliedAlpha),!0===this.forceSinglePass&&(i.forceSinglePass=this.forceSinglePass),!0===this.wireframe&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(i.flatShading=this.flatShading),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),!1===this.fog&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData),e){const e=n(t.textures),r=n(t.images);e.length>0&&(i.textures=e),r.length>0&&(i.images=r)}return i}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let i=null;if(null!==e){const t=e.length;i=new Array(t);for(let n=0;n!==t;++n)i[n]=e[n].clone()}return this.clippingPlanes=i,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}}function fh(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function gh(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}const vh=(new ql).fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),xh=(new ql).fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]),_h={[qo]:t=>t,[_o]:t=>t.convertSRGBToLinear(),[yo]:function(t){return t.convertSRGBToLinear().applyMatrix3(xh)}},qh={[qo]:t=>t,[_o]:t=>t.convertLinearToSRGB(),[yo]:function(t){return t.applyMatrix3(vh).convertLinearToSRGB()}},yh={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(t){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!t},get workingColorSpace(){return qo},set workingColorSpace(t){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(t,e,i){if(!1===this.enabled||e===i||!e||!i)return t;const n=_h[e],r=qh[i];if(void 0===n||void 0===r)throw new Error(`Unsupported color space conversion, "${e}" to "${i}".`);return r(n(t))},fromWorkingColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this.workingColorSpace)}},bh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},wh={h:0,s:0,l:0},Mh={h:0,s:0,l:0};function Sh(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+6*(e-t)*(2/3-i):t}class Eh{constructor(t,e,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===e&&void 0===i?this.set(t):this.setRGB(t,e,i)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=_o){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,yh.toWorkingColorSpace(this,e),this}setRGB(t,e,i,n=yh.workingColorSpace){return this.r=t,this.g=e,this.b=i,yh.toWorkingColorSpace(this,n),this}setHSL(t,e,i,n=yh.workingColorSpace){if(t=(t%(r=1)+r)%r,e=To(e,0,1),i=To(i,0,1),0===e)this.r=this.g=this.b=i;else{const n=i<=.5?i*(1+e):i+e-i*e,r=2*i-n;this.r=Sh(r,n,t+1/3),this.g=Sh(r,n,t),this.b=Sh(r,n,t-1/3)}var r;return yh.toWorkingColorSpace(this,n),this}setStyle(t,e=_o){function i(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let n;if(n=/^(\w+)\(([^\)]*)\)/.exec(t)){let r;const s=n[1],a=n[2];switch(s){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,e);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,e);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,e);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(t)){const i=n[1],r=i.length;if(3===r)return this.setRGB(parseInt(i.charAt(0),16)/15,parseInt(i.charAt(1),16)/15,parseInt(i.charAt(2),16)/15,e);if(6===r)return this.setHex(parseInt(i,16),e);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,e);return this}setColorName(t,e=_o){const i=bh[t.toLowerCase()];return void 0!==i?this.setHex(i,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=fh(t.r),this.g=fh(t.g),this.b=fh(t.b),this}copyLinearToSRGB(t){return this.r=gh(t.r),this.g=gh(t.g),this.b=gh(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=_o){return yh.fromWorkingColorSpace(Th.copy(this),t),65536*Math.round(To(255*Th.r,0,255))+256*Math.round(To(255*Th.g,0,255))+Math.round(To(255*Th.b,0,255))}getHexString(t=_o){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=yh.workingColorSpace){yh.fromWorkingColorSpace(Th.copy(this),e);const i=Th.r,n=Th.g,r=Th.b,s=Math.max(i,n,r),a=Math.min(i,n,r);let o,l;const h=(a+s)/2;if(a===s)o=0,l=0;else{const t=s-a;switch(l=h<=.5?t/(s+a):t/(2-s-a),s){case i:o=(n-r)/t+(n<r?6:0);break;case n:o=(r-i)/t+2;break;case r:o=(i-n)/t+4}o/=6}return t.h=o,t.s=l,t.l=h,t}getRGB(t,e=yh.workingColorSpace){return yh.fromWorkingColorSpace(Th.copy(this),e),t.r=Th.r,t.g=Th.g,t.b=Th.b,t}getStyle(t=_o){yh.fromWorkingColorSpace(Th.copy(this),t);const e=Th.r,i=Th.g,n=Th.b;return t!==_o?`color(${t} ${e.toFixed(3)} ${i.toFixed(3)} ${n.toFixed(3)})`:`rgb(${Math.round(255*e)},${Math.round(255*i)},${Math.round(255*n)})`}offsetHSL(t,e,i){return this.getHSL(wh),wh.h+=t,wh.s+=e,wh.l+=i,this.setHSL(wh.h,wh.s,wh.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,i){return this.r=t.r+(e.r-t.r)*i,this.g=t.g+(e.g-t.g)*i,this.b=t.b+(e.b-t.b)*i,this}lerpHSL(t,e){this.getHSL(wh),t.getHSL(Mh);const i=Ao(wh.h,Mh.h,e),n=Ao(wh.s,Mh.s,e),r=Ao(wh.l,Mh.l,e);return this.setHSL(i,n,r),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const e=this.r,i=this.g,n=this.b,r=t.elements;return this.r=r[0]*e+r[3]*i+r[6]*n,this.g=r[1]*e+r[4]*i+r[7]*n,this.b=r[2]*e+r[5]*i+r[8]*n,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Th=new Eh;Eh.NAMES=bh;class Ah extends mh{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Eh(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const Ch=new ll,Rh=new th,Ph=new ol,zh=new zo,Lh=new zo,Uh=new zo,Dh=new zo,Ih=new zo,Nh=new zo,Oh=new Do,Fh=new Do,Bh=new Do,kh=new zo,Vh=new zo,Hh=new zo,Gh=new zo,Wh=new zo;class jh extends Dl{constructor(t=new jl,e=new Ah){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){const i=t[e[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=i.length;t<e;t++){const e=i[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}getVertexPosition(t,e){const i=this.geometry,n=i.attributes.position,r=i.morphAttributes.position,s=i.morphTargetsRelative;e.fromBufferAttribute(n,t);const a=this.morphTargetInfluences;if(r&&a){Nh.set(0,0,0);for(let i=0,n=r.length;i<n;i++){const n=a[i],o=r[i];0!==n&&(Ih.fromBufferAttribute(o,t),s?Nh.addScaledVector(Ih,n):Nh.addScaledVector(Ih.sub(e),n))}e.add(Nh)}return e}raycast(t,e){const i=this.geometry,n=this.material,r=this.matrixWorld;if(void 0!==n){if(null===i.boundingSphere&&i.computeBoundingSphere(),Ph.copy(i.boundingSphere),Ph.applyMatrix4(r),Rh.copy(t.ray).recast(t.near),!1===Ph.containsPoint(Rh.origin)){if(null===Rh.intersectSphere(Ph,zh))return;if(Rh.origin.distanceToSquared(zh)>(t.far-t.near)**2)return}Ch.copy(r).invert(),Rh.copy(t.ray).applyMatrix4(Ch),null!==i.boundingBox&&!1===Rh.intersectsBox(i.boundingBox)||this._computeIntersections(t,e)}}_computeIntersections(t,e){let i;const n=this.geometry,r=this.material,s=n.index,a=n.attributes.position,o=n.attributes.uv,l=n.attributes.uv1,h=n.attributes.normal,c=n.groups,u=n.drawRange;if(null!==s)if(Array.isArray(r))for(let n=0,a=c.length;n<a;n++){const a=c[n],d=r[a.materialIndex];for(let n=Math.max(a.start,u.start),r=Math.min(s.count,Math.min(a.start+a.count,u.start+u.count));n<r;n+=3){const r=s.getX(n),c=s.getX(n+1),u=s.getX(n+2);i=Xh(this,d,t,Rh,o,l,h,r,c,u),i&&(i.faceIndex=Math.floor(n/3),i.face.materialIndex=a.materialIndex,e.push(i))}}else for(let n=Math.max(0,u.start),a=Math.min(s.count,u.start+u.count);n<a;n+=3){const a=s.getX(n),c=s.getX(n+1),u=s.getX(n+2);i=Xh(this,r,t,Rh,o,l,h,a,c,u),i&&(i.faceIndex=Math.floor(n/3),e.push(i))}else if(void 0!==a)if(Array.isArray(r))for(let n=0,s=c.length;n<s;n++){const s=c[n],d=r[s.materialIndex];for(let n=Math.max(s.start,u.start),r=Math.min(a.count,Math.min(s.start+s.count,u.start+u.count));n<r;n+=3)i=Xh(this,d,t,Rh,o,l,h,n,n+1,n+2),i&&(i.faceIndex=Math.floor(n/3),i.face.materialIndex=s.materialIndex,e.push(i))}else for(let n=Math.max(0,u.start),s=Math.min(a.count,u.start+u.count);n<s;n+=3)i=Xh(this,r,t,Rh,o,l,h,n,n+1,n+2),i&&(i.faceIndex=Math.floor(n/3),e.push(i))}}function Xh(t,e,i,n,r,s,a,o,l,h){t.getVertexPosition(o,Lh),t.getVertexPosition(l,Uh),t.getVertexPosition(h,Dh);const c=function(t,e,i,n,r,s,a,o){let l;if(l=1===e.side?n.intersectTriangle(a,s,r,!0,o):n.intersectTriangle(r,s,a,0===e.side,o),null===l)return null;Wh.copy(o),Wh.applyMatrix4(t.matrixWorld);const h=i.ray.origin.distanceTo(Wh);return h<i.near||h>i.far?null:{distance:h,point:Wh.clone(),object:t}}(t,e,i,n,Lh,Uh,Dh,Gh);if(c){r&&(Oh.fromBufferAttribute(r,o),Fh.fromBufferAttribute(r,l),Bh.fromBufferAttribute(r,h),c.uv=dh.getInterpolation(Gh,Lh,Uh,Dh,Oh,Fh,Bh,new Do)),s&&(Oh.fromBufferAttribute(s,o),Fh.fromBufferAttribute(s,l),Bh.fromBufferAttribute(s,h),c.uv1=dh.getInterpolation(Gh,Lh,Uh,Dh,Oh,Fh,Bh,new Do),c.uv2=c.uv1),a&&(kh.fromBufferAttribute(a,o),Vh.fromBufferAttribute(a,l),Hh.fromBufferAttribute(a,h),c.normal=dh.getInterpolation(Gh,Lh,Uh,Dh,kh,Vh,Hh,new zo),c.normal.dot(n.direction)>0&&c.normal.multiplyScalar(-1));const t={a:o,b:l,c:h,normal:new zo,materialIndex:0};dh.getNormal(Lh,Uh,Dh,t.normal),c.face=t}return c}class Yh extends Dl{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new ll,this.projectionMatrix=new ll,this.projectionMatrixInverse=new ll}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class Kh extends Yh{constructor(t=-1,e=1,i=1,n=-1,r=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=i,this.bottom=n,this.near=r,this.far=s,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,e,i,n,r,s){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=n,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,n=(this.top+this.bottom)/2;let r=i-t,s=i+t,a=n+e,o=n-e;if(null!==this.view&&this.view.enabled){const t=(this.right-this.left)/this.view.fullWidth/this.zoom,e=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=t*this.view.offsetX,s=r+t*this.view.width,a-=e*this.view.offsetY,o=a-e*this.view.height}this.projectionMatrix.makeOrthographic(r,s,a,o,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}class Zh extends Yh{constructor(t=50,e=1,i=.1,n=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=i,this.far=n,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=2*So*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*Mo*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*So*Math.atan(Math.tan(.5*Mo*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,e,i,n,r,s){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=n,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(.5*Mo*this.fov)/this.zoom,i=2*e,n=this.aspect*i,r=-.5*n;const s=this.view;if(null!==this.view&&this.view.enabled){const t=s.fullWidth,a=s.fullHeight;r+=s.offsetX*n/t,e-=s.offsetY*i/a,n*=s.width/t,i*=s.height/a}const a=this.filmOffset;0!==a&&(r+=t*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+n,e,e-i,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}class Jh extends mh{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="\nvoid main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n",this.fragmentShader="\nvoid main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}\n",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=function(t){const e={};for(const i in t){e[i]={};for(const n in t[i]){const r=t[i][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[i][n]=null):e[i][n]=r.clone():Array.isArray(r)?e[i][n]=r.slice():e[i][n]=r}}return e}(t.uniforms),this.uniformsGroups=function(t){const e=[];for(let i=0;i<t.length;i++)e.push(t[i].clone());return e}(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const i in this.uniforms){const n=this.uniforms[i].value;n&&n.isTexture?e.uniforms[i]={type:"t",value:n.toJSON(t).uuid}:n&&n.isColor?e.uniforms[i]={type:"c",value:n.getHex()}:n&&n.isVector2?e.uniforms[i]={type:"v2",value:n.toArray()}:n&&n.isVector3?e.uniforms[i]={type:"v3",value:n.toArray()}:n&&n.isVector4?e.uniforms[i]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?e.uniforms[i]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?e.uniforms[i]={type:"m4",value:n.toArray()}:e.uniforms[i]={value:n}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.lights=this.lights,e.clipping=this.clipping;const i={};for(const t in this.extensions)!0===this.extensions[t]&&(i[t]=!0);return Object.keys(i).length>0&&(e.extensions=i),e}}let $h;class Qh{static getDataURL(t){if(/^data:/i.test(t.src))return t.src;if("undefined"==typeof HTMLCanvasElement)return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===$h&&($h=Il("canvas")),$h.width=t.width,$h.height=t.height;const i=$h.getContext("2d");t instanceof ImageData?i.putImageData(t,0,0):i.drawImage(t,0,0,t.width,t.height),e=$h}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){const e=Il("canvas");e.width=t.width,e.height=t.height;const i=e.getContext("2d");i.drawImage(t,0,0,t.width,t.height);const n=i.getImageData(0,0,t.width,t.height),r=n.data;for(let t=0;t<r.length;t++)r[t]=255*fh(r[t]/255);return i.putImageData(n,0,0),e}if(t.data){const e=t.data.slice(0);for(let t=0;t<e.length;t++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[t]=Math.floor(255*fh(e[t]/255)):e[t]=fh(e[t]);return{data:e,width:t.width,height:t.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}class tc{constructor(t=null){this.isSource=!0,this.uuid=Eo(),this.data=t,this.version=0}set needsUpdate(t){!0===t&&this.version++}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.images[this.uuid])return t.images[this.uuid];const i={uuid:this.uuid,url:""},n=this.data;if(null!==n){let t;if(Array.isArray(n)){t=[];for(let e=0,i=n.length;e<i;e++)n[e].isDataTexture?t.push(ec(n[e].image)):t.push(ec(n[e]))}else t=ec(n);i.url=t}return e||(t.images[this.uuid]=i),i}}function ec(t){return"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?Qh.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let ic=0;class nc extends nl{constructor(t=nc.DEFAULT_IMAGE,e=nc.DEFAULT_MAPPING,i=1001,n=1001,r=1006,s=1008,a=1023,o=1009,l=nc.DEFAULT_ANISOTROPY,h=""){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:ic++}),this.uuid=Eo(),this.name="",this.source=new tc(t),this.mipmaps=[],this.mapping=e,this.channel=0,this.wrapS=i,this.wrapT=n,this.magFilter=r,this.minFilter=s,this.anisotropy=l,this.format=a,this.internalFormat=null,this.type=o,this.offset=new Do(0,0),this.repeat=new Do(1,1),this.center=new Do(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new ql,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,"string"==typeof h?this.colorSpace=h:(Ol("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=h===xo?_o:""),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),e||(t.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case 1e3:t.x=t.x-Math.floor(t.x);break;case 1001:t.x=t.x<0?0:1;break;case 1002:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case 1e3:t.y=t.y-Math.floor(t.y);break;case 1001:t.y=t.y<0?0:1;break;case 1002:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return Ol("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===_o?xo:3e3}set encoding(t){Ol("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=t===xo?_o:""}}nc.DEFAULT_IMAGE=null,nc.DEFAULT_MAPPING=300,nc.DEFAULT_ANISOTROPY=1;class rc{constructor(t=0,e=0,i=0,n=1){rc.prototype.isVector4=!0,this.x=t,this.y=e,this.z=i,this.w=n}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,i,n){return this.x=t,this.y=e,this.z=i,this.w=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,i=this.y,n=this.z,r=this.w,s=t.elements;return this.x=s[0]*e+s[4]*i+s[8]*n+s[12]*r,this.y=s[1]*e+s[5]*i+s[9]*n+s[13]*r,this.z=s[2]*e+s[6]*i+s[10]*n+s[14]*r,this.w=s[3]*e+s[7]*i+s[11]*n+s[15]*r,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,i,n,r;const s=.01,a=.1,o=t.elements,l=o[0],h=o[4],c=o[8],u=o[1],d=o[5],p=o[9],m=o[2],f=o[6],g=o[10];if(Math.abs(h-u)<s&&Math.abs(c-m)<s&&Math.abs(p-f)<s){if(Math.abs(h+u)<a&&Math.abs(c+m)<a&&Math.abs(p+f)<a&&Math.abs(l+d+g-3)<a)return this.set(1,0,0,0),this;e=Math.PI;const t=(l+1)/2,o=(d+1)/2,v=(g+1)/2,x=(h+u)/4,_=(c+m)/4,q=(p+f)/4;return t>o&&t>v?t<s?(i=0,n=.707106781,r=.707106781):(i=Math.sqrt(t),n=x/i,r=_/i):o>v?o<s?(i=.707106781,n=0,r=.707106781):(n=Math.sqrt(o),i=x/n,r=q/n):v<s?(i=.707106781,n=.707106781,r=0):(r=Math.sqrt(v),i=_/r,n=q/r),this.set(i,n,r,e),this}let v=Math.sqrt((f-p)*(f-p)+(c-m)*(c-m)+(u-h)*(u-h));return Math.abs(v)<.001&&(v=1),this.x=(f-p)/v,this.y=(c-m)/v,this.z=(u-h)/v,this.w=Math.acos((l+d+g-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this.w=t.w+(e.w-t.w)*i,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class sc extends nl{constructor(t=1,e=1,i={}){super(),this.isWebGLRenderTarget=!0,this.width=t,this.height=e,this.depth=1,this.scissor=new rc(0,0,t,e),this.scissorTest=!1,this.viewport=new rc(0,0,t,e);const n={width:t,height:e,depth:1};void 0!==i.encoding&&(Ol("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),i.colorSpace=i.encoding===xo?_o:""),this.texture=new nc(n,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,this.texture.internalFormat=void 0!==i.internalFormat?i.internalFormat:null,this.texture.minFilter=void 0!==i.minFilter?i.minFilter:vo,this.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,this.stencilBuffer=void 0!==i.stencilBuffer&&i.stencilBuffer,this.depthTexture=void 0!==i.depthTexture?i.depthTexture:null,this.samples=void 0!==i.samples?i.samples:0}setSize(t,e,i=1){this.width===t&&this.height===e&&this.depth===i||(this.width=t,this.height=e,this.depth=i,this.texture.image.width=t,this.texture.image.height=e,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return(new this.constructor).copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.isRenderTargetTexture=!0;const e=Object.assign({},t.texture.image);return this.texture.source=new tc(e),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class ac extends jl{constructor(t=1,e=1,i=1,n=1,r=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:n,heightSegments:r,depthSegments:s};const a=this;n=Math.floor(n),r=Math.floor(r),s=Math.floor(s);const o=[],l=[],h=[],c=[];let u=0,d=0;function p(t,e,i,n,r,s,p,m,f,g,v){const x=s/f,_=p/g,q=s/2,y=p/2,b=m/2,w=f+1,M=g+1;let S=0,E=0;const T=new zo;for(let s=0;s<M;s++){const a=s*_-y;for(let o=0;o<w;o++){const u=o*x-q;T[t]=u*n,T[e]=a*r,T[i]=b,l.push(T.x,T.y,T.z),T[t]=0,T[e]=0,T[i]=m>0?1:-1,h.push(T.x,T.y,T.z),c.push(o/f),c.push(1-s/g),S+=1}}for(let t=0;t<g;t++)for(let e=0;e<f;e++){const i=u+e+w*t,n=u+e+w*(t+1),r=u+(e+1)+w*(t+1),s=u+(e+1)+w*t;o.push(i,n,s),o.push(n,r,s),E+=6}a.addGroup(d,E,v),d+=E,u+=S}p("z","y","x",-1,-1,i,e,t,s,r,0),p("z","y","x",1,-1,i,e,-t,s,r,1),p("x","z","y",1,1,t,i,e,n,s,2),p("x","z","y",1,-1,t,i,-e,n,s,3),p("x","y","z",1,-1,t,e,i,n,r,4),p("x","y","z",-1,-1,t,e,-i,n,r,5),this.setIndex(o),this.setAttribute("position",new ko(l,3)),this.setAttribute("normal",new ko(h,3)),this.setAttribute("uv",new ko(c,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new ac(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}const oc=[.125,.215,.35,.446,.526,.582],lc=new Kh,hc=new Eh;let cc=null;const uc=(1+Math.sqrt(5))/2,dc=1/uc,pc=[new zo(1,1,1),new zo(-1,1,1),new zo(1,1,-1),new zo(-1,1,-1),new zo(0,uc,dc),new zo(0,uc,-dc),new zo(dc,0,uc),new zo(-dc,0,uc),new zo(uc,dc,0),new zo(-uc,dc,0)];class mc{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,i=.1,n=100){cc=this._renderer.getRenderTarget(),this._setSize(256);const r=this._allocateTargets();return r.depthBuffer=!0,this._sceneToCubeUV(t,i,n,r),e>0&&this._blur(r,0,0,e),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=xc(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=vc(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(cc),t.scissorTest=!1,gc(t,0,0,t.width,t.height)}_fromTexture(t,e){301===t.mapping||302===t.mapping?this._setSize(0===t.image.length?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),cc=this._renderer.getRenderTarget();const i=e||this._allocateTargets();return this._textureToCubeUV(t,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,i={magFilter:vo,minFilter:vo,generateMipmaps:!1,type:1016,format:1023,colorSpace:qo,depthBuffer:!1},n=fc(t,e,i);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=fc(t,e,i);const{_lodMax:n}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(t){const e=[],i=[],n=[];let r=t;const s=t-4+1+oc.length;for(let a=0;a<s;a++){const s=Math.pow(2,r);i.push(s);let o=1/s;a>t-4?o=oc[a-t+4-1]:0===a&&(o=0),n.push(o);const l=1/(s-2),h=-l,c=1+l,u=[h,h,c,h,c,c,h,h,c,c,h,c],d=6,p=6,m=3,f=2,g=1,v=new Float32Array(m*p*d),x=new Float32Array(f*p*d),_=new Float32Array(g*p*d);for(let t=0;t<d;t++){const e=t%3*2/3-1,i=t>2?0:-1,n=[e,i,0,e+2/3,i,0,e+2/3,i+1,0,e,i,0,e+2/3,i+1,0,e,i+1,0];v.set(n,m*p*t),x.set(u,f*p*t);const r=[t,t,t,t,t,t];_.set(r,g*p*t)}const q=new jl;q.setAttribute("position",new Oo(v,m)),q.setAttribute("uv",new Oo(x,f)),q.setAttribute("faceIndex",new Oo(_,g)),e.push(q),r>4&&r--}return{lodPlanes:e,sizeLods:i,sigmas:n}}(n)),this._blurMaterial=function(t,e,i){const n=new Float32Array(20),r=new zo(0,1,0);return new Jh({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/i,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(n,t,e)}return n}_compileMaterial(t){const e=new jh(this._lodPlanes[0],t);this._renderer.compile(e,lc)}_sceneToCubeUV(t,e,i,n){const r=new Zh(90,1,e,i),s=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],o=this._renderer,l=o.autoClear,h=o.toneMapping;o.getClearColor(hc),o.toneMapping=0,o.autoClear=!1;const c=new Ah({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),u=new jh(new ac,c);let d=!1;const p=t.background;p?p.isColor&&(c.color.copy(p),t.background=null,d=!0):(c.color.copy(hc),d=!0);for(let e=0;e<6;e++){const i=e%3;0===i?(r.up.set(0,s[e],0),r.lookAt(a[e],0,0)):1===i?(r.up.set(0,0,s[e]),r.lookAt(0,a[e],0)):(r.up.set(0,s[e],0),r.lookAt(0,0,a[e]));const l=this._cubeSize;gc(n,i*l,e>2?l:0,l,l),o.setRenderTarget(n),d&&o.render(u,r),o.render(t,r)}u.geometry.dispose(),u.material.dispose(),o.toneMapping=h,o.autoClear=l,t.background=p}_textureToCubeUV(t,e){const i=this._renderer,n=301===t.mapping||302===t.mapping;n?(null===this._cubemapMaterial&&(this._cubemapMaterial=xc()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===t.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=vc());const r=n?this._cubemapMaterial:this._equirectMaterial,s=new jh(this._lodPlanes[0],r);r.uniforms.envMap.value=t;const a=this._cubeSize;gc(e,0,0,3*a,2*a),i.setRenderTarget(e),i.render(s,lc)}_applyPMREM(t){const e=this._renderer,i=e.autoClear;e.autoClear=!1;for(let e=1;e<this._lodPlanes.length;e++){const i=Math.sqrt(this._sigmas[e]*this._sigmas[e]-this._sigmas[e-1]*this._sigmas[e-1]),n=pc[(e-1)%pc.length];this._blur(t,e-1,e,i,n)}e.autoClear=i}_blur(t,e,i,n,r){const s=this._pingPongRenderTarget;this._halfBlur(t,s,e,i,n,"latitudinal",r),this._halfBlur(s,t,i,i,n,"longitudinal",r)}_halfBlur(t,e,i,n,r,s,a){const o=this._renderer,l=this._blurMaterial;"latitudinal"!==s&&"longitudinal"!==s&&console.error("blur direction must be either latitudinal or longitudinal!");const h=new jh(this._lodPlanes[n],l),c=l.uniforms,u=this._sizeLods[i]-1,d=isFinite(r)?Math.PI/(2*u):2*Math.PI/39,p=r/d,m=isFinite(r)?1+Math.floor(3*p):20;m>20&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${m} samples when the maximum is set to 20`);const f=[];let g=0;for(let t=0;t<20;++t){const e=t/p,i=Math.exp(-e*e/2);f.push(i),0===t?g+=i:t<m&&(g+=2*i)}for(let t=0;t<f.length;t++)f[t]=f[t]/g;c.envMap.value=t.texture,c.samples.value=m,c.weights.value=f,c.latitudinal.value="latitudinal"===s,a&&(c.poleAxis.value=a);const{_lodMax:v}=this;c.dTheta.value=d,c.mipInt.value=v-i;const x=this._sizeLods[n];gc(e,3*x*(n>v-4?n-v+4:0),4*(this._cubeSize-x),3*x,2*x),o.setRenderTarget(e),o.render(h,lc)}}function fc(t,e,i){const n=new sc(t,e,i);return n.texture.mapping=306,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function gc(t,e,i,n,r){t.viewport.set(e,i,n,r),t.scissor.set(e,i,n,r)}function vc(){return new Jh({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function xc(){return new Jh({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}var _c="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",qc="srgb",yc="srgb-linear",bc=Number(i.replace(/\D+/g,""))>=152,wc=new Map([[H,yc],[G,qc]]),Mc=new Map([[yc,H],[qc,G]]);function Sc(t){return null===t?null:bc?t.outputColorSpace:wc.get(t.outputEncoding)}function Ec(t,e){null!==t&&(bc?t.colorSpace=e:t.encoding=Mc.get(e))}var Tc={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},Ac=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],Cc=class extends ki{constructor(t=new At){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new uo(null),texelSize:new uo(new At),scale:new uo(1),kernel:new uo(0)},blending:0,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nvarying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;\n#include <encodings_fragment>\n}",vertexShader:"uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}"}),this.setTexelSize(t.x,t.y),this.kernelSize=2}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.inputBuffer=t}get kernelSequence(){return Ac[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(t){this.uniforms.scale.value=t}getScale(){return this.uniforms.scale.value}setScale(t){this.uniforms.scale.value=t}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(t){this.uniforms.kernel.value=t}setKernel(t){this.kernel=t}setTexelSize(t,e){this.uniforms.texelSize.value.set(t,e,.5*t,.5*e)}setSize(t,e){const i=1/t,n=1/e;this.uniforms.texelSize.value.set(i,n,.5*i,.5*n)}},Rc=class extends ki{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new uo(null),opacity:new uo(1)},blending:0,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#include <common>\n#include <dithering_pars_fragment>\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nuniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;\n#include <encodings_fragment>\n#include <dithering_fragment>\n}",vertexShader:_c})}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}getOpacity(t){return this.uniforms.opacity.value}setOpacity(t){this.uniforms.opacity.value=t}},Pc=class extends ki{constructor(){super({name:"DownsamplingMaterial",uniforms:{inputBuffer:new uo(null),texelSize:new uo(new lt)},blending:0,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#define WEIGHT_INNER 0.125\n#define WEIGHT_OUTER 0.0555555\nvarying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;\n#include <encodings_fragment>\n}",vertexShader:"uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}"})}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setSize(t,e){this.uniforms.texelSize.value.set(1/t,1/e)}},zc=class extends ki{constructor(t,e,n,r,s=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:i.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new uo(null),depthBuffer:new uo(null),resolution:new uo(new lt),texelSize:new uo(new lt),cameraNear:new uo(.3),cameraFar:new uo(1e3),aspect:new uo(1),time:new uo(0)},blending:0,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:s}),t&&this.setShaderParts(t),e&&this.setDefines(e),n&&this.setUniforms(n),this.copyCameraSettings(r)}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(t){this.uniforms.depthBuffer.value=t}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(t){this.defines.DEPTH_PACKING=t.toFixed(0),this.needsUpdate=!0}setDepthBuffer(t,e=3200){this.depthBuffer=t,this.depthPacking=e}setShaderData(t){this.setShaderParts(t.shaderParts),this.setDefines(t.defines),this.setUniforms(t.uniforms),this.setExtensions(t.extensions)}setShaderParts(t){return this.fragmentShader="#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#define packFloatToRGBA(v) packDepthToRGBA(v)\n#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#if DEPTH_PACKING == 3201\nuniform lowp sampler2D depthBuffer;\n#elif defined(GL_FRAGMENT_PRECISION_HIGH)\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nuniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;\n#if THREE_REVISION < 143\n#define luminance(v) linearToRelativeLuminance(v)\n#endif\n#if THREE_REVISION >= 137\nvec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}\n#endif\nfloat readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}float getViewZ(const in float depth){\n#ifdef PERSPECTIVE_CAMERA\nreturn perspectiveDepthToViewZ(depth,cameraNear,cameraFar);\n#else\nreturn orthographicDepthToViewZ(depth,cameraNear,cameraFar);\n#endif\n}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE gl_FragColor=color0;\n#ifdef ENCODE_OUTPUT\n#include <encodings_fragment>\n#endif\n#include <dithering_fragment>\n}".replace(Tc.FRAGMENT_HEAD,t.get(Tc.FRAGMENT_HEAD)||"").replace(Tc.FRAGMENT_MAIN_UV,t.get(Tc.FRAGMENT_MAIN_UV)||"").replace(Tc.FRAGMENT_MAIN_IMAGE,t.get(Tc.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}".replace(Tc.VERTEX_HEAD,t.get(Tc.VERTEX_HEAD)||"").replace(Tc.VERTEX_MAIN_SUPPORT,t.get(Tc.VERTEX_MAIN_SUPPORT)||""),this.needsUpdate=!0,this}setDefines(t){for(const e of t.entries())this.defines[e[0]]=e[1];return this.needsUpdate=!0,this}setUniforms(t){for(const e of t.entries())this.uniforms[e[0]]=e[1];return this}setExtensions(t){this.extensions={};for(const e of t)this.extensions[e]=!0;return this}get encodeOutput(){return void 0!==this.defines.ENCODE_OUTPUT}set encodeOutput(t){this.encodeOutput!==t&&(t?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(t){return this.encodeOutput}setOutputEncodingEnabled(t){this.encodeOutput=t}get time(){return this.uniforms.time.value}set time(t){this.uniforms.time.value=t}setDeltaTime(t){this.uniforms.time.value+=t}adoptCameraSettings(t){this.copyCameraSettings(t)}copyCameraSettings(t){t&&(this.uniforms.cameraNear.value=t.near,this.uniforms.cameraFar.value=t.far,t instanceof Hi?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(t,e){const i=this.uniforms;i.resolution.value.set(t,e),i.texelSize.value.set(1/t,1/e),i.aspect.value=t/e}static get Section(){return Tc}},Lc=class extends ki{constructor(t=!1,e=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:i.replace(/\D+/g,"")},uniforms:{inputBuffer:new uo(null),threshold:new uo(0),smoothing:new uo(1),range:new uo(null)},blending:0,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#include <common>\n#if THREE_REVISION < 143\n#define luminance(v) linearToRelativeLuminance(v)\n#endif\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#ifdef RANGE\nuniform vec2 range;\n#elif defined(THRESHOLD)\nuniform float threshold;uniform float smoothing;\n#endif\nvarying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);\n#ifdef RANGE\nfloat low=step(range.x,l);float high=step(l,range.y);l*=low*high;\n#elif defined(THRESHOLD)\nl=smoothstep(threshold,threshold+smoothing,l);\n#endif\n#ifdef COLOR\ngl_FragColor=vec4(texel.rgb*l,l);\n#else\ngl_FragColor=vec4(l);\n#endif\n}",vertexShader:_c}),this.colorOutput=t,this.luminanceRange=e}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}get threshold(){return this.uniforms.threshold.value}set threshold(t){this.smoothing>0||t>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=t}getThreshold(){return this.threshold}setThreshold(t){this.threshold=t}get smoothing(){return this.uniforms.smoothing.value}set smoothing(t){this.threshold>0||t>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=t}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(t){this.smoothing=t}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(t){}get colorOutput(){return void 0!==this.defines.COLOR}set colorOutput(t){t?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(t){return this.colorOutput}setColorOutputEnabled(t){this.colorOutput=t}get useRange(){return null!==this.luminanceRange}set useRange(t){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(t){null!==t?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=t,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(t){this.luminanceRange=t}},Uc=class extends ki{constructor(){super({name:"UpsamplingMaterial",uniforms:{inputBuffer:new uo(null),supportBuffer:new uo(null),texelSize:new uo(new lt),radius:new uo(.85)},blending:0,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;\n#else\nuniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;\n#endif\nuniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);\n#include <encodings_fragment>\n}",vertexShader:"uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}"})}set inputBuffer(t){this.uniforms.inputBuffer.value=t}set supportBuffer(t){this.uniforms.supportBuffer.value=t}get radius(){return this.uniforms.radius.value}set radius(t){this.uniforms.radius.value=t}setSize(t,e){this.uniforms.texelSize.value.set(1/t,1/e)}},Dc=new Vi,Ic=null,Nc=class{constructor(t="Pass",e=new Ds,i=Dc){this.name=t,this.renderer=null,this.scene=e,this.camera=i,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(t){if(this.rtt===t){const e=this.fullscreenMaterial;null!==e&&(e.needsUpdate=!0),this.rtt=!t}}set mainScene(t){}set mainCamera(t){}setRenderer(t){this.renderer=t}isEnabled(){return this.enabled}setEnabled(t){this.enabled=t}get fullscreenMaterial(){return null!==this.screen?this.screen.material:null}set fullscreenMaterial(t){let e=this.screen;null!==e?e.material=t:(e=new Ui(function(){if(null===Ic){const t=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),e=new Float32Array([0,0,2,0,0,2]);void 0!==(Ic=new gi).setAttribute?(Ic.setAttribute("position",new si(t,3)),Ic.setAttribute("uv",new si(e,2))):(Ic.addAttribute("position",new si(t,3)),Ic.addAttribute("uv",new si(e,2)))}return Ic}(),t),e.frustumCulled=!1,null===this.scene&&(this.scene=new Ds),this.scene.add(e),this.screen=e)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(t){this.fullscreenMaterial=t}getDepthTexture(){return null}setDepthTexture(t,e=3200){}render(t,e,i,n,r){throw new Error("Render method not implemented!")}setSize(t,e){}initialize(t,e,i){}dispose(){for(const t of Object.keys(this)){const e=this[t];(e instanceof Ct||e instanceof Ke||e instanceof Tt||e instanceof Nc)&&this[t].dispose()}}},Oc=class extends Nc{constructor(t,e=!0){super("CopyPass"),this.fullscreenMaterial=new Rc,this.needsSwap=!1,this.renderTarget=t,void 0===t&&(this.renderTarget=new Ct(1,1,{minFilter:S,magFilter:S,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=e}get resize(){return this.autoResize}set resize(t){this.autoResize=t}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(t){this.autoResize=t}render(t,e,i,n,r){this.fullscreenMaterial.inputBuffer=e.texture,t.setRenderTarget(this.renderToScreen?null:this.renderTarget),t.render(this.scene,this.camera)}setSize(t,e){this.autoResize&&this.renderTarget.setSize(t,e)}initialize(t,e,i){void 0!==i&&(this.renderTarget.texture.type=i,i!==T?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":Sc(t)===qc&&Ec(this.renderTarget.texture,qc))}},Fc=class extends Nc{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(t,e,i,n,r){const s=t.state.buffers.stencil;s.setLocked(!1),s.setTest(!1)}},Bc=new ti,kc=class extends Nc{constructor(t=!0,e=!0,i=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=t,this.depth=e,this.stencil=i,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(t,e,i){this.color=t,this.depth=e,this.stencil=i}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(t){this.overrideClearColor=t}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(t){this.overrideClearAlpha=t}render(t,e,i,n,r){const s=this.overrideClearColor,a=this.overrideClearAlpha,o=t.getClearAlpha(),l=null!==s,h=a>=0;l?(t.getClearColor(Bc),t.setClearColor(s,h?a:o)):h&&t.setClearAlpha(a),t.setRenderTarget(this.renderToScreen?null:e),t.clear(this.color,this.depth,this.stencil),l?t.setClearColor(Bc,o):h&&t.setClearAlpha(o)}},Vc=-1,Hc=class extends J{constructor(t,e=-1,i=-1,n=1){super(),this.resizable=t,this.baseSize=new lt(1,1),this.preferredSize=new lt(e,i),this.target=this.preferredSize,this.s=n,this.effectiveSize=new lt,this.addEventListener("change",(()=>this.updateEffectiveSize())),this.updateEffectiveSize()}updateEffectiveSize(){const t=this.baseSize,e=this.preferredSize,i=this.effectiveSize,n=this.scale;e.width!==Vc?i.width=e.width:e.height!==Vc?i.width=Math.round(e.height*(t.width/Math.max(t.height,1))):i.width=Math.round(t.width*n),e.height!==Vc?i.height=e.height:e.width!==Vc?i.height=Math.round(e.width/Math.max(t.width/Math.max(t.height,1),1)):i.height=Math.round(t.height*n)}get width(){return this.effectiveSize.width}set width(t){this.preferredWidth=t}get height(){return this.effectiveSize.height}set height(t){this.preferredHeight=t}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(t){this.s!==t&&(this.s=t,this.preferredSize.setScalar(Vc),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(t){this.scale=t}get baseWidth(){return this.baseSize.width}set baseWidth(t){this.baseSize.width!==t&&(this.baseSize.width=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(t){this.baseWidth=t}get baseHeight(){return this.baseSize.height}set baseHeight(t){this.baseSize.height!==t&&(this.baseSize.height=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(t){this.baseHeight=t}setBaseSize(t,e){this.baseSize.width===t&&this.baseSize.height===e||(this.baseSize.set(t,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(t){this.preferredSize.width!==t&&(this.preferredSize.width=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(t){this.preferredWidth=t}get preferredHeight(){return this.preferredSize.height}set preferredHeight(t){this.preferredSize.height!==t&&(this.preferredSize.height=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(t){this.preferredHeight=t}setPreferredSize(t,e){this.preferredSize.width===t&&this.preferredSize.height===e||(this.preferredSize.set(t,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(t){this.s=t.scale,this.baseSize.set(t.baseWidth,t.baseHeight),this.preferredSize.set(t.preferredWidth,t.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return Vc}},Gc=!1,Wc=class{constructor(t=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(t),this.meshCount=0,this.replaceMaterial=t=>{if(t.isMesh){let e;if(t.material.flatShading)switch(t.material.side){case 2:e=this.materialsFlatShadedDoubleSide;break;case 1:e=this.materialsFlatShadedBackSide;break;default:e=this.materialsFlatShaded}else switch(t.material.side){case 2:e=this.materialsDoubleSide;break;case 1:e=this.materialsBackSide;break;default:e=this.materials}this.originalMaterials.set(t,t.material),t.isSkinnedMesh?t.material=e[2]:t.isInstancedMesh?t.material=e[1]:t.material=e[0],++this.meshCount}}}cloneMaterial(t){if(!(t instanceof ki))return t.clone();const e=t.uniforms,i=new Map;for(const t in e){const n=e[t].value;n.isRenderTargetTexture&&(e[t].value=null,i.set(t,n))}const n=t.clone();for(const t of i)e[t[0]].value=t[1],n.uniforms[t[0]].value=t[1];return n}setMaterial(t){if(this.disposeMaterials(),this.material=t,null!==t){const e=this.materials=[this.cloneMaterial(t),this.cloneMaterial(t),this.cloneMaterial(t)];for(const i of e)i.uniforms=Object.assign({},t.uniforms),i.side=0;e[2].skinning=!0,this.materialsBackSide=e.map((e=>{const i=this.cloneMaterial(e);return i.uniforms=Object.assign({},t.uniforms),i.side=1,i})),this.materialsDoubleSide=e.map((e=>{const i=this.cloneMaterial(e);return i.uniforms=Object.assign({},t.uniforms),i.side=2,i})),this.materialsFlatShaded=e.map((e=>{const i=this.cloneMaterial(e);return i.uniforms=Object.assign({},t.uniforms),i.flatShading=!0,i})),this.materialsFlatShadedBackSide=e.map((e=>{const i=this.cloneMaterial(e);return i.uniforms=Object.assign({},t.uniforms),i.flatShading=!0,i.side=1,i})),this.materialsFlatShadedDoubleSide=e.map((e=>{const i=this.cloneMaterial(e);return i.uniforms=Object.assign({},t.uniforms),i.flatShading=!0,i.side=2,i}))}}render(t,e,i){const n=t.shadowMap.enabled;if(t.shadowMap.enabled=!1,Gc){const n=this.originalMaterials;this.meshCount=0,e.traverse(this.replaceMaterial),t.render(e,i);for(const t of n)t[0].material=t[1];this.meshCount!==n.size&&n.clear()}else{const n=e.overrideMaterial;e.overrideMaterial=this.material,t.render(e,i),e.overrideMaterial=n}t.shadowMap.enabled=n}disposeMaterials(){if(null!==this.material){const t=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const e of t)e.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return Gc}static set workaroundEnabled(t){Gc=t}},jc=class extends Nc{constructor(t,e,i=null){super("RenderPass",t,e),this.needsSwap=!1,this.clearPass=new kc,this.overrideMaterialManager=null===i?null:new Wc(i),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(t){this.scene=t}set mainCamera(t){this.camera=t}get renderToScreen(){return super.renderToScreen}set renderToScreen(t){super.renderToScreen=t,this.clearPass.renderToScreen=t}get overrideMaterial(){const t=this.overrideMaterialManager;return null!==t?t.material:null}set overrideMaterial(t){const e=this.overrideMaterialManager;null!==t?null!==e?e.setMaterial(t):this.overrideMaterialManager=new Wc(t):null!==e&&(e.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(t){this.overrideMaterial=t}get clear(){return this.clearPass.enabled}set clear(t){this.clearPass.enabled=t}getSelection(){return this.selection}setSelection(t){this.selection=t}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(t){this.ignoreBackground=t}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(t){this.skipShadowMapUpdate=t}getClearPass(){return this.clearPass}render(t,e,i,n,r){const s=this.scene,a=this.camera,o=this.selection,l=a.layers.mask,h=s.background,c=t.shadowMap.autoUpdate,u=this.renderToScreen?null:e;null!==o&&a.layers.set(o.getLayer()),this.skipShadowMapUpdate&&(t.shadowMap.autoUpdate=!1),(this.ignoreBackground||null!==this.clearPass.overrideClearColor)&&(s.background=null),this.clearPass.enabled&&this.clearPass.render(t,e),t.setRenderTarget(u),null!==this.overrideMaterialManager?this.overrideMaterialManager.render(t,s,a):t.render(s,a),a.layers.mask=l,s.background=h,t.shadowMap.autoUpdate=c}},Xc=class extends Nc{constructor(t,e,{renderTarget:i,resolutionScale:n=1,width:r=Hc.AUTO_SIZE,height:s=Hc.AUTO_SIZE,resolutionX:a=r,resolutionY:o=s}={}){super("DepthPass"),this.needsSwap=!1,this.renderPass=new jc(t,e,new xs({depthPacking:3201}));const l=this.renderPass;l.skipShadowMapUpdate=!0,l.ignoreBackground=!0;const h=l.getClearPass();h.overrideClearColor=new ti(16777215),h.overrideClearAlpha=1,this.renderTarget=i,void 0===this.renderTarget&&(this.renderTarget=new Ct(1,1,{minFilter:w,magFilter:w}),this.renderTarget.texture.name="DepthPass.Target");const c=this.resolution=new Hc(this,a,o,n);c.addEventListener("change",(t=>this.setSize(c.baseWidth,c.baseHeight)))}set mainScene(t){this.renderPass.mainScene=t}set mainCamera(t){this.renderPass.mainCamera=t}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(t){this.resolution.scale=t}render(t,e,i,n,r){const s=this.renderToScreen?null:this.renderTarget;this.renderPass.render(t,s)}setSize(t,e){const i=this.resolution;i.setBaseSize(t,e),this.renderTarget.setSize(i.width,i.height)}};function Yc(t,e,i){for(const n of e){const e="$1"+t+n.charAt(0).toUpperCase()+n.slice(1),r=new RegExp("([^\\.])(\\b"+n+"\\b)","g");for(const t of i.entries())null!==t[1]&&i.set(t[0],t[1].replace(r,e))}}function Kc(t,e,i){let n=e.getFragmentShader(),r=e.getVertexShader();const s=void 0!==n&&/mainImage/.test(n),a=void 0!==n&&/mainUv/.test(n);if(i.attributes|=e.getAttributes(),void 0===n)throw new Error(`Missing fragment shader (${e.name})`);if(a&&0!=(2&i.attributes))throw new Error(`Effects that transform UVs are incompatible with convolution effects (${e.name})`);if(!s&&!a)throw new Error(`Could not find mainImage or mainUv function (${e.name})`);{const o=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,l=i.shaderParts;let h=l.get(Tc.FRAGMENT_HEAD)||"",c=l.get(Tc.FRAGMENT_MAIN_UV)||"",u=l.get(Tc.FRAGMENT_MAIN_IMAGE)||"",d=l.get(Tc.VERTEX_HEAD)||"",p=l.get(Tc.VERTEX_MAIN_SUPPORT)||"";const m=new Set,f=new Set;if(a&&(c+=`\t${t}MainUv(UV);\n`,i.uvTransformation=!0),null!==r&&/mainSupport/.test(r)){const e=/mainSupport *\([\w\s]*?uv\s*?\)/.test(r);p+=`\t${t}MainSupport(`,p+=e?"vUv);\n":");\n";for(const t of r.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const e of t[1].split(/\s*,\s*/))i.varyings.add(e),m.add(e),f.add(e);for(const t of r.matchAll(o))f.add(t[1])}for(const t of n.matchAll(o))f.add(t[1]);for(const t of e.defines.keys())f.add(t.replace(/\([\w\s,]*\)/g,""));for(const t of e.uniforms.keys())f.add(t);f.delete("while"),f.delete("for"),f.delete("if"),e.uniforms.forEach(((e,n)=>i.uniforms.set(t+n.charAt(0).toUpperCase()+n.slice(1),e))),e.defines.forEach(((e,n)=>i.defines.set(t+n.charAt(0).toUpperCase()+n.slice(1),e)));const g=new Map([["fragment",n],["vertex",r]]);Yc(t,f,i.defines),Yc(t,f,g),n=g.get("fragment"),r=g.get("vertex");const v=e.blendMode;if(i.blendModes.set(v.blendFunction,v),s){null!==e.inputColorSpace&&e.inputColorSpace!==i.colorSpace&&(u+=e.inputColorSpace===qc?"color0 = LinearTosRGB(color0);\n\t":"color0 = sRGBToLinear(color0);\n\t"),""!==e.outputColorSpace?i.colorSpace=e.outputColorSpace:null!==e.inputColorSpace&&(i.colorSpace=e.inputColorSpace);const r=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;u+=`${t}MainImage(color0, UV, `,0!=(1&i.attributes)&&r.test(n)&&(u+="depth, ",i.readDepth=!0),u+="color1);\n\t";const s=t+"BlendOpacity";i.uniforms.set(s,v.opacity),u+=`color0 = blend${v.blendFunction}(color0, color1, ${s});\n\n\t`,h+=`uniform float ${s};\n\n`}if(h+=n+"\n",null!==r&&(d+=r+"\n"),l.set(Tc.FRAGMENT_HEAD,h),l.set(Tc.FRAGMENT_MAIN_UV,c),l.set(Tc.FRAGMENT_MAIN_IMAGE,u),l.set(Tc.VERTEX_HEAD,d),l.set(Tc.VERTEX_MAIN_SUPPORT,p),null!==e.extensions)for(const t of e.extensions)i.extensions.add(t)}}new Float32Array([255/256/256**3,255/256/65536,255/256/256,255/256]);var Zc=class extends Nc{constructor({kernelSize:t=2,resolutionScale:e=.5,width:i=Hc.AUTO_SIZE,height:n=Hc.AUTO_SIZE,resolutionX:r=i,resolutionY:s=n}={}){super("KawaseBlurPass"),this.renderTargetA=new Ct(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const a=this.resolution=new Hc(this,r,s,e);a.addEventListener("change",(t=>this.setSize(a.baseWidth,a.baseHeight))),this._blurMaterial=new Cc,this._blurMaterial.kernelSize=t,this.copyMaterial=new Rc}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(t){this._blurMaterial=t}get dithering(){return this.copyMaterial.dithering}set dithering(t){this.copyMaterial.dithering=t}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(t){this.blurMaterial.kernelSize=t}get width(){return this.resolution.width}set width(t){this.resolution.preferredWidth=t}get height(){return this.resolution.height}set height(t){this.resolution.preferredHeight=t}get scale(){return this.blurMaterial.scale}set scale(t){this.blurMaterial.scale=t}getScale(){return this.blurMaterial.scale}setScale(t){this.blurMaterial.scale=t}getKernelSize(){return this.kernelSize}setKernelSize(t){this.kernelSize=t}getResolutionScale(){return this.resolution.scale}setResolutionScale(t){this.resolution.scale=t}render(t,e,i,n,r){const s=this.scene,a=this.camera,o=this.renderTargetA,l=this.renderTargetB,h=this.blurMaterial,c=h.kernelSequence;let u=e;this.fullscreenMaterial=h;for(let e=0,i=c.length;e<i;++e){const i=0==(1&e)?o:l;h.kernel=c[e],h.inputBuffer=u.texture,t.setRenderTarget(i),t.render(s,a),u=i}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=u.texture,t.setRenderTarget(this.renderToScreen?null:i),t.render(s,a)}setSize(t,e){const i=this.resolution;i.setBaseSize(t,e);const n=i.width,r=i.height;this.renderTargetA.setSize(n,r),this.renderTargetB.setSize(n,r),this.blurMaterial.setSize(t,e)}initialize(t,e,i){void 0!==i&&(this.renderTargetA.texture.type=i,this.renderTargetB.texture.type=i,i!==T?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):Sc(t)===qc&&(Ec(this.renderTargetA.texture,qc),Ec(this.renderTargetB.texture,qc)))}static get AUTO_SIZE(){return Hc.AUTO_SIZE}},Jc=class extends Nc{constructor({renderTarget:t,luminanceRange:e,colorOutput:i,resolutionScale:n=1,width:r=Hc.AUTO_SIZE,height:s=Hc.AUTO_SIZE,resolutionX:a=r,resolutionY:o=s}={}){super("LuminancePass"),this.fullscreenMaterial=new Lc(i,e),this.needsSwap=!1,this.renderTarget=t,void 0===this.renderTarget&&(this.renderTarget=new Ct(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target");const l=this.resolution=new Hc(this,a,o,n);l.addEventListener("change",(t=>this.setSize(l.baseWidth,l.baseHeight)))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(t,e,i,n,r){this.fullscreenMaterial.inputBuffer=e.texture,t.setRenderTarget(this.renderToScreen?null:this.renderTarget),t.render(this.scene,this.camera)}setSize(t,e){const i=this.resolution;i.setBaseSize(t,e),this.renderTarget.setSize(i.width,i.height)}initialize(t,e,i){void 0!==i&&i!==T&&(this.renderTarget.texture.type=i,this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},$c=class extends Nc{constructor(t,e){super("MaskPass",t,e),this.needsSwap=!1,this.clearPass=new kc(!1,!1,!0),this.inverse=!1}set mainScene(t){this.scene=t}set mainCamera(t){this.camera=t}get inverted(){return this.inverse}set inverted(t){this.inverse=t}get clear(){return this.clearPass.enabled}set clear(t){this.clearPass.enabled=t}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(t){this.inverted=t}render(t,e,i,n,r){const s=t.getContext(),a=t.state.buffers,o=this.scene,l=this.camera,h=this.clearPass,c=this.inverted?0:1,u=1-c;a.color.setMask(!1),a.depth.setMask(!1),a.color.setLocked(!0),a.depth.setLocked(!0),a.stencil.setTest(!0),a.stencil.setOp(s.REPLACE,s.REPLACE,s.REPLACE),a.stencil.setFunc(s.ALWAYS,c,4294967295),a.stencil.setClear(u),a.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?h.render(t,null):(h.render(t,e),h.render(t,i))),this.renderToScreen?(t.setRenderTarget(null),t.render(o,l)):(t.setRenderTarget(e),t.render(o,l),t.setRenderTarget(i),t.render(o,l)),a.color.setLocked(!1),a.depth.setLocked(!1),a.stencil.setLocked(!1),a.stencil.setFunc(s.EQUAL,1,4294967295),a.stencil.setOp(s.KEEP,s.KEEP,s.KEEP),a.stencil.setLocked(!0)}},Qc=class extends Nc{constructor(){super("MipmapBlurPass"),this.needsSwap=!1,this.renderTarget=new Ct(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Upsampling.Mipmap0",this.downsamplingMipmaps=[],this.upsamplingMipmaps=[],this.downsamplingMaterial=new Pc,this.upsamplingMaterial=new Uc,this.resolution=new lt}get texture(){return this.renderTarget.texture}get levels(){return this.downsamplingMipmaps.length}set levels(t){if(this.levels!==t){const e=this.renderTarget;this.dispose(),this.downsamplingMipmaps=[],this.upsamplingMipmaps=[];for(let i=0;i<t;++i){const t=e.clone();t.texture.name="Downsampling.Mipmap"+i,this.downsamplingMipmaps.push(t)}this.upsamplingMipmaps.push(e);for(let i=1,n=t-1;i<n;++i){const t=e.clone();t.texture.name="Upsampling.Mipmap"+i,this.upsamplingMipmaps.push(t)}this.setSize(this.resolution.x,this.resolution.y)}}get radius(){return this.upsamplingMaterial.radius}set radius(t){this.upsamplingMaterial.radius=t}render(t,e,i,n,r){const{scene:s,camera:a}=this,{downsamplingMaterial:o,upsamplingMaterial:l}=this,{downsamplingMipmaps:h,upsamplingMipmaps:c}=this;let u=e;this.fullscreenMaterial=o;for(let e=0,i=h.length;e<i;++e){const i=h[e];o.setSize(u.width,u.height),o.inputBuffer=u.texture,t.setRenderTarget(i),t.render(s,a),u=i}this.fullscreenMaterial=l;for(let e=c.length-1;e>=0;--e){const i=c[e];l.setSize(u.width,u.height),l.inputBuffer=u.texture,l.supportBuffer=h[e].texture,t.setRenderTarget(i),t.render(s,a),u=i}}setSize(t,e){const i=this.resolution;i.set(t,e);let n=i.width,r=i.height;for(let t=0,e=this.downsamplingMipmaps.length;t<e;++t)n=Math.round(.5*n),r=Math.round(.5*r),this.downsamplingMipmaps[t].setSize(n,r),t<this.upsamplingMipmaps.length&&this.upsamplingMipmaps[t].setSize(n,r)}initialize(t,e,i){if(void 0!==i){const e=this.downsamplingMipmaps.concat(this.upsamplingMipmaps);for(const t of e)t.texture.type=i;if(i!==T)this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1";else if(Sc(t)===qc)for(const t of e)Ec(t.texture,qc)}}dispose(){super.dispose();for(const t of this.downsamplingMipmaps.concat(this.upsamplingMipmaps))t.dispose()}},tu=.001,eu=class extends Set{constructor(t,e=10){super(),this.l=e,this.exclusive=!1,void 0!==t&&this.set(t)}get layer(){return this.l}set layer(t){const e=this.l;for(const i of this)i.layers.disable(e),i.layers.enable(t);this.l=t}getLayer(){return this.layer}setLayer(t){this.layer=t}isExclusive(){return this.exclusive}setExclusive(t){this.exclusive=t}clear(){const t=this.layer;for(const e of this)e.layers.disable(t);return super.clear()}set(t){this.clear();for(const e of t)this.add(e);return this}indexOf(t){return this.has(t)?0:-1}add(t){return this.exclusive?t.layers.set(this.layer):t.layers.enable(this.layer),super.add(t)}delete(t){return this.has(t)&&t.layers.disable(this.layer),super.delete(t)}toggle(t){let e;return this.has(t)?(this.delete(t),e=!1):(this.add(t),e=!0),e}setVisible(t){for(const e of this)t?e.layers.enable(0):e.layers.disable(0);return this}},iu=new Map([[0,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y,opacity);}"],[1,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,min(y.a,opacity));}"],[2,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y)*0.5,opacity);}"],[3,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.rg,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}"],[4,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(step(0.0,y)*(1.0-min(vec4(1.0),(1.0-x)/y)),vec4(1.0),step(1.0,x));return mix(x,z,opacity);}"],[5,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=step(0.0,x)*mix(min(vec4(1.0),x/max(1.0-y,1e-9)),vec4(1.0),step(1.0,y));return mix(x,z,opacity);}"],[6,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x,y),opacity);}"],[7,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,abs(x-y),opacity);}"],[8,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x/max(y,1e-12),opacity);}"],[9,null],[10,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y-2.0*x*y),opacity);}"],[11,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 a=min(x,1.0),b=min(y,1.0);vec4 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,y));return mix(x,z,opacity);}"],[12,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,step(1.0,x+y),opacity);}"],[13,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.r,xHSL.gb));return vec4(mix(x.rgb,z,opacity),y.a);}"],[14,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-y,opacity);}"],[15,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y*(1.0-x),opacity);}"],[16,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x,y),opacity);}"],[17,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(y+x-1.0,0.0,1.0),opacity);}"],[18,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x+y,1.0),opacity);}"],[19,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(2.0*y+x-1.0,0.0,1.0),opacity);}"],[20,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.rg,yHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}"],[21,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x*y,opacity);}"],[22,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-abs(1.0-x-y),opacity);}"],[23,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}"],[24,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(2.0*y*x,1.0-2.0*(1.0-y)*(1.0-x),step(0.5,x));return mix(x,z,opacity);}"],[25,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 z=mix(mix(y2,x,step(0.5*x,y)),max(vec4(0.0),y2-1.0),step(x,(y2-1.0)));return mix(x,z,opacity);}"],[26,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(min(x*x/max(1.0-y,1e-12),1.0),y,step(1.0,y));return mix(x,z,opacity);}"],[27,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.r,yHSL.g,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}"],[28,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y-min(x*y,1.0),opacity);}"],[29,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 w=step(0.5,y);vec4 z=mix(x-(1.0-y2)*x*(1.0-x),mix(x+(y2-1.0)*(sqrt(x)-x),x+(y2-1.0)*x*((16.0*x-12.0)*x+3.0),w*(1.0-step(0.25,x))),w);return mix(x,z,opacity);}"],[30,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}"],[31,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x+y-1.0,0.0),opacity);}"],[32,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(max(1.0-min((1.0-x)/(2.0*y),1.0),0.0),min(x/(2.0*(1.0-y)),1.0),step(0.5,y));return mix(x,z,opacity);}"]]),nu=class extends J{constructor(t,e=1){super(),this._blendFunction=t,this.opacity=new uo(e)}getOpacity(){return this.opacity.value}setOpacity(t){this.opacity.value=t}get blendFunction(){return this._blendFunction}set blendFunction(t){this._blendFunction=t,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(t){this.blendFunction=t}getShaderCode(){return iu.get(this.blendFunction)}},ru=class extends J{constructor(t,e,{attributes:i=0,blendFunction:n=23,defines:r=new Map,uniforms:s=new Map,extensions:a=null,vertexShader:o=null}={}){super(),this.name=t,this.renderer=null,this.attributes=i,this.fragmentShader=e,this.vertexShader=o,this.defines=r,this.uniforms=s,this.extensions=a,this.blendMode=new nu(n),this.blendMode.addEventListener("change",(t=>this.setChanged())),this._inputColorSpace=yc,this._outputColorSpace=""}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(t){this._inputColorSpace=t,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t,this.setChanged()}set mainScene(t){}set mainCamera(t){}getName(){return this.name}setRenderer(t){this.renderer=t}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(t){this.attributes=t,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(t){this.fragmentShader=t,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(t){this.vertexShader=t,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(t,e=3200){}update(t,e,i){}setSize(t,e){}initialize(t,e,i){}dispose(){for(const t of Object.keys(this)){const e=this[t];(e instanceof Ct||e instanceof Ke||e instanceof Tt||e instanceof Nc)&&this[t].dispose()}}};function su(t,e,i){return t+(e-t)*i}function au(t,e,i,n){const r=su(t,e,.75),s=su(i,n,.75);return su(r,s,.875)}function ou(){return ou=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},ou.apply(this,arguments)}new Ut,new ce,new ti,new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,0,1]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([1,0,1]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([0,1,1]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([0,1,1]),new Float32Array([1,1,1]),new Float32Array(2),new Float32Array(2),new Float32Array([0,-.25,.25,-.125,.125,-.375,.375]),new Float32Array([0,0]),new Float32Array([.25,-.25]),new Float32Array([-.25,.25]),new Float32Array([.125,-.125]),new Float32Array([-.125,.125]),new Uint8Array([0,0]),new Uint8Array([3,0]),new Uint8Array([0,3]),new Uint8Array([3,3]),new Uint8Array([1,0]),new Uint8Array([4,0]),new Uint8Array([1,3]),new Uint8Array([4,3]),new Uint8Array([0,1]),new Uint8Array([3,1]),new Uint8Array([0,4]),new Uint8Array([3,4]),new Uint8Array([1,1]),new Uint8Array([4,1]),new Uint8Array([1,4]),new Uint8Array([4,4]),new Uint8Array([0,0]),new Uint8Array([1,0]),new Uint8Array([0,2]),new Uint8Array([1,2]),new Uint8Array([2,0]),new Uint8Array([3,0]),new Uint8Array([2,2]),new Uint8Array([3,2]),new Uint8Array([0,1]),new Uint8Array([1,1]),new Uint8Array([0,3]),new Uint8Array([1,3]),new Uint8Array([2,1]),new Uint8Array([3,1]),new Uint8Array([2,3]),new Uint8Array([3,3]),au(0,0,0,0),new Float32Array([0,0,0,0]),au(0,0,0,1),new Float32Array([0,0,0,1]),au(0,0,1,0),new Float32Array([0,0,1,0]),au(0,0,1,1),new Float32Array([0,0,1,1]),au(0,1,0,0),new Float32Array([0,1,0,0]),au(0,1,0,1),new Float32Array([0,1,0,1]),au(0,1,1,0),new Float32Array([0,1,1,0]),au(0,1,1,1),new Float32Array([0,1,1,1]),au(1,0,0,0),new Float32Array([1,0,0,0]),au(1,0,0,1),new Float32Array([1,0,0,1]),au(1,0,1,0),new Float32Array([1,0,1,0]),au(1,0,1,1),new Float32Array([1,0,1,1]),au(1,1,0,0),new Float32Array([1,1,0,0]),au(1,1,0,1),new Float32Array([1,1,0,1]),au(1,1,1,0),new Float32Array([1,1,1,0]),au(1,1,1,1),new Float32Array([1,1,1,1]),Math.PI,new Ut,new Ut;var lu="#define GLSLIFY 1\nvec3 getViewPosition(const float depth){float clipW=_projectionMatrix[2][3]*depth+_projectionMatrix[3][3];vec4 clipPosition=vec4((vec3(vUv,depth)-0.5)*2.0,1.0);clipPosition*=clipW;return(_inverseProjectionMatrix*clipPosition).xyz;}float getViewZ(const in float depth){\n#ifdef PERSPECTIVE_CAMERA\nreturn perspectiveDepthToViewZ(depth,cameraNear,cameraFar);\n#else\nreturn orthographicDepthToViewZ(depth,cameraNear,cameraFar);\n#endif\n}vec3 screenSpaceToWorldSpace(const vec2 uv,const float depth){vec4 ndc=vec4((uv.x-0.5)*2.0,(uv.y-0.5)*2.0,(depth-0.5)*2.0,1.0);vec4 clip=_inverseProjectionMatrix*ndc;vec4 view=cameraMatrixWorld*(clip/clip.w);return view.xyz;}\n#define Scale (vec3(0.8, 0.8, 0.8))\n#define K (19.19)\nvec3 hash(vec3 a){a=fract(a*Scale);a+=dot(a,a.yxz+K);return fract((a.xxy+a.yxx)*a.zyx);}float fresnel_dielectric_cos(float cosi,float eta){float c=abs(cosi);float g=eta*eta-1.0+c*c;float result;if(g>0.0){g=sqrt(g);float A=(g-c)/(g+c);float B=(c*(g+c)-1.0)/(c*(g-c)+1.0);result=0.5*A*A*(1.0+B*B);}else{result=1.0;}return result;}float fresnel_dielectric(vec3 Incoming,vec3 Normal,float eta){float cosine=dot(Incoming,Normal);return min(1.0,5.0*fresnel_dielectric_cos(cosine,eta));}";class hu extends ki{constructor(){super({type:"MRTMaterial",defines:{USE_UV:"",TEMPORAL_RESOLVE:""},uniforms:{opacity:new uo(1),normalMap:new uo(null),normalScale:new uo(new lt(1,1)),uvTransform:new uo(new ht),roughness:new uo(1),roughnessMap:new uo(null)},vertexShader:"\n                #ifdef USE_MRT\n                 varying vec2 vHighPrecisionZW;\n                #endif\n                #define NORMAL\n                #if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n                    varying vec3 vViewPosition;\n                #endif\n                #include <common>\n                #include <uv_pars_vertex>\n                #include <displacementmap_pars_vertex>\n                #include <normal_pars_vertex>\n                #include <morphtarget_pars_vertex>\n                #include <skinning_pars_vertex>\n                #include <logdepthbuf_pars_vertex>\n                #include <clipping_planes_pars_vertex>\n                void main() {\n                    #include <uv_vertex>\n                    #include <beginnormal_vertex>\n                    #include <morphnormal_vertex>\n                    #include <skinbase_vertex>\n                    #include <skinnormal_vertex>\n                    #include <defaultnormal_vertex>\n                    #include <normal_vertex>\n                    #include <begin_vertex>\n                    #include <morphtarget_vertex>\n                    #include <skinning_vertex>\n                    #include <displacementmap_vertex>\n                    #include <project_vertex>\n                    #include <logdepthbuf_vertex>\n                    #include <clipping_planes_vertex>\n                    #if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n                        vViewPosition = - mvPosition.xyz;\n                    #endif\n                    #ifdef USE_MRT\n                        vHighPrecisionZW = gl_Position.zw;\n                    #endif \n                    #ifdef USE_UV\n                        //vUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n                    #endif\n                }\n            ",fragmentShader:"\n                 #define NORMAL\n                #if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n                    varying vec3 vViewPosition;\n                #endif\n                #include <packing>\n                #include <uv_pars_fragment>\n                #include <normal_pars_fragment>\n                #include <bumpmap_pars_fragment>\n                #include <normalmap_pars_fragment>\n                #include <logdepthbuf_pars_fragment>\n                #include <clipping_planes_pars_fragment>\n                #include <roughnessmap_pars_fragment>\n                \n                #ifdef USE_MRT\n                layout(location = 0) out vec4 gNormal;\n                layout(location = 1) out vec4 gDepth;\n                \n                varying vec2 vHighPrecisionZW;\n                #endif\n                uniform float roughness;\n                void main() {\n                    #include <clipping_planes_fragment>\n                    #include <logdepthbuf_fragment>\n                    #include <normal_fragment_begin>\n                    #include <normal_fragment_maps>\n\n                    float roughnessFactor = roughness;\n                    \n                    if(roughness > 10.0e9){\n                        roughnessFactor = 1.;\n                    }else{\n                        #ifdef useRoughnessMap\n                            vec4 texelRoughness = texture2D( roughnessMap, vUv );\n                            // reads channel G, compatible with a combined OcclusionRoughnessMetallic (RGB) texture\n                            roughnessFactor *= texelRoughness.g;\n                        #endif\n                    }\n\n                    vec3 normalColor = packNormalToRGB( normal );\n                    #ifdef USE_MRT\n                        float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n                        vec4 depthColor = packDepthToRGBA( fragCoordZ );\n                        gNormal = vec4( normalColor, roughnessFactor );\n                        gDepth = depthColor;\n                    #else\n                        gl_FragColor = vec4(normalColor, roughnessFactor);\n                    #endif\n                }\n            ",toneMapped:!1}),this.normalMapType=0,this.normalScale=new lt(1,1),Object.defineProperty(this,"glslVersion",{get(){return"USE_MRT"in this.defines?K:null},set(t){}})}}class cu extends ki{constructor(){super({type:"ReflectionsMaterial",uniforms:{inputTexture:new uo(null),accumulatedTexture:new uo(null),normalTexture:new uo(null),depthTexture:new uo(null),_projectionMatrix:new uo(new ce),_inverseProjectionMatrix:new uo(new ce),cameraMatrixWorld:new uo(new ce),cameraNear:new uo(0),cameraFar:new uo(0),rayDistance:new uo(0),intensity:new uo(0),roughnessFade:new uo(0),fade:new uo(0),thickness:new uo(0),ior:new uo(0),maxDepthDifference:new uo(0),jitter:new uo(0),jitterRoughness:new uo(0),maxRoughness:new uo(0),samples:new uo(0),envMap:new uo(null),envMapPosition:new uo(new Ut),envMapSize:new uo(new Ut),viewMatrix:new uo(new ce)},defines:{steps:20,refineSteps:5,CUBEUV_TEXEL_WIDTH:0,CUBEUV_TEXEL_HEIGHT:0,CUBEUV_MAX_MIP:0,vWorldPosition:"worldPos"},fragmentShader:"#define GLSLIFY 1\nvarying vec2 vUv;uniform sampler2D inputTexture;uniform sampler2D accumulatedTexture;uniform sampler2D normalTexture;uniform sampler2D depthTexture;uniform sampler2D envMap;uniform mat4 _projectionMatrix;uniform mat4 _inverseProjectionMatrix;uniform mat4 cameraMatrixWorld;uniform float cameraNear;uniform float cameraFar;uniform float rayDistance;uniform float intensity;uniform float maxDepthDifference;uniform float roughnessFade;uniform float maxRoughness;uniform float fade;uniform float thickness;uniform float ior;uniform float samples;uniform float jitter;uniform float jitterRoughness;\n#define INVALID_RAY_COORDS vec2(-1.0);\n#define EARLY_OUT_COLOR vec4(0.0, 0.0, 0.0, 1.0)\n#define FLOAT_EPSILON 0.00001\nfloat nearMinusFar;float nearMulFar;float farMinusNear;\n#include <packing>\n#include <helperFunctions>\nvec2 RayMarch(vec3 dir,inout vec3 hitPos,inout float rayHitDepthDifference);vec2 BinarySearch(in vec3 dir,inout vec3 hitPos,inout float rayHitDepthDifference);float fastGetViewZ(const in float depth);vec3 getIBLRadiance(const in vec3 viewDir,const in vec3 normal,const in float roughness);void main(){vec4 depthTexel=textureLod(depthTexture,vUv,0.0);if(dot(depthTexel.rgb,depthTexel.rgb)<FLOAT_EPSILON){gl_FragColor=EARLY_OUT_COLOR;return;}float unpackedDepth=unpackRGBAToDepth(depthTexel);vec4 normalTexel=textureLod(normalTexture,vUv,0.0);float roughness=normalTexel.a;float specular=1.0-roughness;nearMinusFar=cameraNear-cameraFar;nearMulFar=cameraNear*cameraFar;farMinusNear=cameraFar-cameraNear;normalTexel.rgb=unpackRGBToNormal(normalTexel.rgb);float depth=fastGetViewZ(unpackedDepth);vec3 viewPos=getViewPosition(depth);vec3 viewDir=normalize(viewPos);vec3 viewNormal=normalTexel.xyz;vec3 worldPos=screenSpaceToWorldSpace(vUv,unpackedDepth);vec3 jitt=vec3(0.0);if(jitterRoughness!=0.0||jitter!=0.0){vec3 randomJitter=hash(50.0*samples*worldPos)-0.5;float spread=((2.0-specular)+roughness*jitterRoughness);float jitterMix=jitter*0.25+jitterRoughness*roughness;if(jitterMix>1.0)jitterMix=1.0;jitt=mix(vec3(0.0),randomJitter*spread,jitterMix);}viewNormal+=jitt;float fresnelFactor=fresnel_dielectric(viewDir,viewNormal,ior);vec3 iblRadiance=getIBLRadiance(-viewDir,viewNormal,0.)*fresnelFactor;float lastFrameAlpha=textureLod(accumulatedTexture,vUv,0.0).a;if(roughness>maxRoughness||(roughness>1.0-FLOAT_EPSILON&&roughnessFade>1.0-FLOAT_EPSILON)){gl_FragColor=vec4(iblRadiance,lastFrameAlpha);return;}vec3 reflected=reflect(viewDir,viewNormal);vec3 rayDir=reflected*-viewPos.z;vec3 hitPos=viewPos;float rayHitDepthDifference;vec2 coords=RayMarch(rayDir,hitPos,rayHitDepthDifference);if(coords.x==-1.0){gl_FragColor=vec4(iblRadiance,lastFrameAlpha);return;}vec4 SSRTexel=textureLod(inputTexture,coords.xy,0.0);vec4 SSRTexelReflected=textureLod(accumulatedTexture,coords.xy,0.0);vec3 SSR=SSRTexel.rgb+SSRTexelReflected.rgb;float roughnessFactor=mix(specular,1.0,max(0.0,1.0-roughnessFade));vec2 coordsNDC=(coords.xy*2.0-1.0);float screenFade=0.1;float maxDimension=min(1.0,max(abs(coordsNDC.x),abs(coordsNDC.y)));float reflectionIntensity=1.0-(max(0.0,maxDimension-screenFade)/(1.0-screenFade));reflectionIntensity=max(0.,reflectionIntensity);vec3 finalSSR=mix(iblRadiance,SSR,reflectionIntensity)*roughnessFactor;if(fade!=0.0){vec3 hitWorldPos=screenSpaceToWorldSpace(coords,rayHitDepthDifference);float reflectionDistance=distance(hitWorldPos,worldPos)+1.0;float opacity=1.0/(reflectionDistance*fade*0.1);if(opacity>1.0)opacity=1.0;finalSSR*=opacity;}finalSSR*=fresnelFactor*intensity;finalSSR=min(vec3(1.0),finalSSR);float alpha=hitPos.z==1.0 ? 1.0 : SSRTexelReflected.a;alpha=min(lastFrameAlpha,alpha);gl_FragColor=vec4(finalSSR,alpha);}vec2 RayMarch(vec3 dir,inout vec3 hitPos,inout float rayHitDepthDifference){dir=normalize(dir);dir*=rayDistance/float(steps);float depth;vec4 projectedCoord;vec4 lastProjectedCoord;float unpackedDepth;vec4 depthTexel;for(int i=0;i<steps;i++){hitPos+=dir;projectedCoord=_projectionMatrix*vec4(hitPos,1.0);projectedCoord.xy/=projectedCoord.w;projectedCoord.xy=projectedCoord.xy*0.5+0.5;\n#ifndef missedRays\nif(projectedCoord.x<0.0||projectedCoord.x>1.0||projectedCoord.y<0.0||projectedCoord.y>1.0){return INVALID_RAY_COORDS;}\n#endif\ndepthTexel=textureLod(depthTexture,projectedCoord.xy,0.0);unpackedDepth=unpackRGBAToDepth(depthTexel);depth=fastGetViewZ(unpackedDepth);rayHitDepthDifference=depth-hitPos.z;if(rayHitDepthDifference>=0.0&&rayHitDepthDifference<thickness){\n#if refineSteps == 0\nif(dot(depthTexel.rgb,depthTexel.rgb)<FLOAT_EPSILON)return INVALID_RAY_COORDS;\n#else\nreturn BinarySearch(dir,hitPos,rayHitDepthDifference);\n#endif\n}\n#ifndef missedRays\nif(hitPos.z>0.0){return INVALID_RAY_COORDS;}\n#endif\nlastProjectedCoord=projectedCoord;}hitPos.z=1.0;\n#ifndef missedRays\nreturn INVALID_RAY_COORDS;\n#endif\nrayHitDepthDifference=unpackedDepth;return projectedCoord.xy;}vec2 BinarySearch(in vec3 dir,inout vec3 hitPos,inout float rayHitDepthDifference){float depth;vec4 projectedCoord;vec2 lastMinProjectedCoordXY;float unpackedDepth;vec4 depthTexel;for(int i=0;i<refineSteps;i++){projectedCoord=_projectionMatrix*vec4(hitPos,1.0);projectedCoord.xy/=projectedCoord.w;projectedCoord.xy=projectedCoord.xy*0.5+0.5;depthTexel=textureLod(depthTexture,projectedCoord.xy,0.0);unpackedDepth=unpackRGBAToDepth(depthTexel);depth=fastGetViewZ(unpackedDepth);rayHitDepthDifference=depth-hitPos.z;dir*=0.5;if(rayHitDepthDifference>0.0){hitPos-=dir;}else{hitPos+=dir;}}if(dot(depthTexel.rgb,depthTexel.rgb)<FLOAT_EPSILON)return INVALID_RAY_COORDS;if(abs(rayHitDepthDifference)>maxDepthDifference)return INVALID_RAY_COORDS;projectedCoord=_projectionMatrix*vec4(hitPos,1.0);projectedCoord.xy/=projectedCoord.w;projectedCoord.xy=projectedCoord.xy*0.5+0.5;rayHitDepthDifference=unpackedDepth;return projectedCoord.xy;}float fastGetViewZ(const in float depth){\n#ifdef PERSPECTIVE_CAMERA\nreturn nearMulFar/(farMinusNear*depth-cameraFar);\n#else\nreturn depth*nearMinusFar-cameraNear;\n#endif\n}\n#include <common>\n#include <cube_uv_reflection_fragment>\nvec3 getIBLRadiance(const in vec3 viewDir,const in vec3 normal,const in float roughness){\n#if defined(ENVMAP_TYPE_CUBE_UV)\nvec3 reflectVec=reflect(-viewDir,normal);reflectVec=normalize(mix(reflectVec,normal,roughness*roughness));reflectVec=inverseTransformDirection(reflectVec,viewMatrix);vec4 envMapColor=textureCubeUV(envMap,reflectVec,roughness);return envMapColor.rgb*intensity;\n#else\nreturn vec3(0.0);\n#endif\n}".replace("#include <helperFunctions>",lu),vertexShader:"#define GLSLIFY 1\nvarying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",toneMapped:!1,depthWrite:!1,depthTest:!1})}}const uu=t=>{const e=[t],i=[];for(;0!==e.length;){const t=e.shift();t.material&&i.push(t);for(const i of t.children)i.visible&&e.push(i)}return i},du=(t,e,i)=>{t.uniforms.envMap.value=e;const n=(t=>{const e=t.envMapCubeUVHeight;if(null===e)return null;const i=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,i),112)),texelHeight:n,maxMip:i}})({envMapCubeUVHeight:i});t.defines.ENVMAP_TYPE_CUBE_UV="",t.defines.CUBEUV_TEXEL_WIDTH=n.texelWidth,t.defines.CUBEUV_TEXEL_HEIGHT=n.texelHeight,t.defines.CUBEUV_MAX_MIP=n.maxMip+".0",t.needsUpdate=!0};class pu extends Nc{constructor(t,e={}){super("ReflectionsPass"),this.ssrEffect=void 0,this.cachedMaterials=new WeakMap,this.USE_MRT=!1,this.webgl1DepthPass=null,this.visibleMeshes=[],this.ssrEffect=t,this._scene=t._scene,this._camera=t._camera,this.fullscreenMaterial=new cu,t._camera.isPerspectiveCamera&&(this.fullscreenMaterial.defines.PERSPECTIVE_CAMERA="");const i=e.width||"undefined"!=typeof window?window.innerWidth:2e3,n=e.height||"undefined"!=typeof window?window.innerHeight:1e3;this.renderTarget=new Ct(i,n,{minFilter:S,magFilter:S,type:R,depthBuffer:!1}),this.renderPass=new jc(this._scene,this._camera),this.USE_MRT=(()=>{try{const t=document.createElement("canvas");return!(!window.WebGL2RenderingContext||!t.getContext("webgl2"))}catch(t){return!1}})(),this.USE_MRT?(this.gBuffersRenderTarget=new zt(i,n,2,{minFilter:S,magFilter:S}),this.normalTexture=this.gBuffersRenderTarget.texture[0],this.depthTexture=this.gBuffersRenderTarget.texture[1]):(this.webgl1DepthPass=new Xc(this._scene,this._camera),this.webgl1DepthPass.renderTarget.minFilter=S,this.webgl1DepthPass.renderTarget.magFilter=S,this.webgl1DepthPass.renderTarget.texture.minFilter=S,this.webgl1DepthPass.renderTarget.texture.magFilter=S,this.webgl1DepthPass.setSize("undefined"!=typeof window?window.innerWidth:2e3,"undefined"!=typeof window?window.innerHeight:1e3),this.gBuffersRenderTarget=new Ct(i,n,{minFilter:S,magFilter:S}),this.normalTexture=this.gBuffersRenderTarget.texture,this.depthTexture=this.webgl1DepthPass.texture),this.fullscreenMaterial.uniforms.normalTexture.value=this.normalTexture,this.fullscreenMaterial.uniforms.depthTexture.value=this.depthTexture,this.fullscreenMaterial.uniforms.accumulatedTexture.value=this.ssrEffect.temporalResolvePass.accumulatedTexture,this.fullscreenMaterial.uniforms.cameraMatrixWorld.value=this._camera.matrixWorld,this.fullscreenMaterial.uniforms._projectionMatrix.value=this._camera.projectionMatrix,this.fullscreenMaterial.uniforms._inverseProjectionMatrix.value=this._camera.projectionMatrixInverse}setSize(t,e){this.renderTarget.setSize(t*this.ssrEffect.resolutionScale,e*this.ssrEffect.resolutionScale),this.gBuffersRenderTarget.setSize(t*this.ssrEffect.resolutionScale,e*this.ssrEffect.resolutionScale),this.fullscreenMaterial.uniforms.accumulatedTexture.value=this.ssrEffect.temporalResolvePass.accumulatedTexture,this.fullscreenMaterial.needsUpdate=!0}dispose(){this.renderTarget.dispose(),this.gBuffersRenderTarget.dispose(),this.renderPass.dispose(),this.USE_MRT||this.webgl1DepthPass.dispose(),this.fullscreenMaterial.dispose(),this.normalTexture=null,this.depthTexture=null,this.velocityTexture=null}keepMaterialMapUpdated(t,e,i,n){this.ssrEffect[n]?e[i]!==t[i]&&(t[i]=e[i],t.uniforms[i].value=e[i],e[i]?t.defines[n]="":delete t.defines[n],t.needsUpdate=!0):void 0!==t[i]&&(t[i]=void 0,t.uniforms[i].value=void 0,delete t.defines[n],t.needsUpdate=!0)}setMRTMaterialInScene(){this.visibleMeshes=uu(this._scene);for(const t of this.visibleMeshes)if(t.material){const e=t.material;let[i,n]=this.cachedMaterials.get(t)||[];if(e!==i){n&&n.dispose(),n=new hu,this.USE_MRT&&(n.defines.USE_MRT=""),n.normalScale=e.normalScale,n.uniforms.normalScale.value=e.normalScale;const i=e.map||e.normalMap||e.roughnessMap||e.metalnessMap;i&&(n.uniforms.uvTransform.value=i.matrix),this.cachedMaterials.set(t,[e,n])}this.keepMaterialMapUpdated(n,e,"normalMap","useNormalMap"),this.keepMaterialMapUpdated(n,e,"roughnessMap","useRoughnessMap"),n.uniforms.roughness.value=0===this.ssrEffect.selection.size||this.ssrEffect.selection.has(t)?e.roughness||0:1e11,t.material=n}}unsetMRTMaterialInScene(){for(const e of this.visibleMeshes){var t;if("MRTMaterial"===(null==(t=e.material)?void 0:t.type)){e.visible=!0;const[t]=this.cachedMaterials.get(e);e.material=t}}}render(t,e){this.setMRTMaterialInScene(),t.setRenderTarget(this.gBuffersRenderTarget),this.renderPass.render(t,this.gBuffersRenderTarget),this.unsetMRTMaterialInScene(),this.USE_MRT||this.webgl1DepthPass.renderPass.render(t,this.webgl1DepthPass.renderTarget),this.fullscreenMaterial.uniforms.inputTexture.value=e.texture,this.fullscreenMaterial.uniforms.samples.value=this.ssrEffect.temporalResolvePass.samples,this.fullscreenMaterial.uniforms.cameraNear.value=this._camera.near,this.fullscreenMaterial.uniforms.cameraFar.value=this._camera.far,this.fullscreenMaterial.uniforms.viewMatrix.value.copy(this._camera.matrixWorldInverse),t.setRenderTarget(this.renderTarget),t.render(this.scene,this.camera)}}const mu={intensity:1,exponent:1,distance:10,fade:0,roughnessFade:1,thickness:10,ior:1.45,maxRoughness:1,maxDepthDifference:10,blend:.9,correction:1,correctionRadius:1,blur:.5,blurKernel:1,blurSharpness:10,jitter:0,jitterRoughness:0,steps:20,refineSteps:5,missedRays:!0,useNormalMap:!0,useRoughnessMap:!0,resolutionScale:1,velocityResolutionScale:1};class fu extends ki{constructor(t){const e="#define GLSLIFY 1\nuniform sampler2D inputTexture;uniform sampler2D accumulatedTexture;uniform sampler2D velocityTexture;uniform sampler2D lastVelocityTexture;uniform float blend;uniform float correction;uniform float exponent;uniform float samples;uniform vec2 invTexSize;uniform mat4 curInverseProjectionMatrix;uniform mat4 curCameraMatrixWorld;uniform mat4 prevInverseProjectionMatrix;uniform mat4 prevCameraMatrixWorld;varying vec2 vUv;\n#define MAX_NEIGHBOR_DEPTH_DIFFERENCE 0.001\n#define FLOAT_EPSILON 0.00001\n#define FLOAT_ONE_MINUS_EPSILON 0.99999\nvec3 transformexponent;vec3 undoColorTransformExponent;vec3 transformColor(vec3 color){if(exponent==1.0)return color;return pow(abs(color),transformexponent);}vec3 undoColorTransform(vec3 color){if(exponent==1.0)return color;return max(pow(abs(color),undoColorTransformExponent),vec3(0.0));}void main(){if(exponent!=1.0){transformexponent=vec3(1.0/exponent);undoColorTransformExponent=vec3(exponent);}vec4 inputTexel=textureLod(inputTexture,vUv,0.0);vec4 accumulatedTexel;vec3 inputColor=transformColor(inputTexel.rgb);vec3 accumulatedColor;float alpha=inputTexel.a;float velocityDisocclusion;bool didReproject=false;\n#ifdef boxBlur\nvec3 boxBlurredColor=inputTexel.rgb;\n#endif\nvec4 velocity=textureLod(velocityTexture,vUv,0.0);bool isMoving=alpha<1.0||dot(velocity.xy,velocity.xy)>0.0;if(isMoving){vec3 minNeighborColor=inputColor;vec3 maxNeighborColor=inputColor;vec3 col;vec2 neighborUv;vec2 reprojectedUv=vUv-velocity.xy;vec4 lastVelocity=textureLod(lastVelocityTexture,reprojectedUv,0.0);float depth=velocity.b;float closestDepth=depth;float lastClosestDepth=lastVelocity.b;float neighborDepth;float lastNeighborDepth;for(int x=-correctionRadius;x<=correctionRadius;x++){for(int y=-correctionRadius;y<=correctionRadius;y++){if(x!=0||y!=0){neighborUv=vUv+vec2(x,y)*invTexSize;vec4 neigborVelocity=textureLod(velocityTexture,neighborUv,0.0);neighborDepth=neigborVelocity.b;col=textureLod(inputTexture,neighborUv,0.0).xyz;int absX=abs(x);int absY=abs(y);\n#ifdef dilation\nif(absX==1&&absY==1){if(neighborDepth>closestDepth){velocity=neigborVelocity;closestDepth=neighborDepth;}vec4 lastNeighborVelocity=textureLod(velocityTexture,vUv+vec2(x,y)*invTexSize,0.0);lastNeighborDepth=lastNeighborVelocity.b;if(neighborDepth>closestDepth){lastVelocity=lastNeighborVelocity;lastClosestDepth=lastNeighborDepth;}}\n#endif\nif(abs(depth-neighborDepth)<MAX_NEIGHBOR_DEPTH_DIFFERENCE){\n#ifdef boxBlur\nif(absX<=2&&absY<=2)boxBlurredColor+=col;\n#endif\ncol=transformColor(col);minNeighborColor=min(col,minNeighborColor);maxNeighborColor=max(col,maxNeighborColor);}}}}float velocityLength=length(lastVelocity.xy-velocity.xy);velocityDisocclusion=(velocityLength-0.000005)*10.0;velocityDisocclusion*=velocityDisocclusion;reprojectedUv=vUv-velocity.xy;\n#ifdef boxBlur\nfloat pxRadius=correctionRadius>5 ? 121.0 : pow(float(correctionRadius*2+1),2.0);boxBlurredColor/=pxRadius;boxBlurredColor=transformColor(boxBlurredColor);\n#endif\nif(reprojectedUv.x>=0.0&&reprojectedUv.x<=1.0&&reprojectedUv.y>=0.0&&reprojectedUv.y<=1.0){accumulatedTexel=textureLod(accumulatedTexture,reprojectedUv,0.0);accumulatedColor=transformColor(accumulatedTexel.rgb);vec3 clampedColor=clamp(accumulatedColor,minNeighborColor,maxNeighborColor);accumulatedColor=mix(accumulatedColor,clampedColor,correction);didReproject=true;}else{\n#ifdef boxBlur\naccumulatedColor=boxBlurredColor;\n#else\naccumulatedColor=inputColor;\n#endif\n}if(velocity.r>FLOAT_ONE_MINUS_EPSILON&&velocity.g>FLOAT_ONE_MINUS_EPSILON){alpha=0.0;velocityDisocclusion=1.0;}}else{accumulatedColor=transformColor(textureLod(accumulatedTexture,vUv,0.0).rgb);}vec3 outputColor=inputColor;\n#include <custom_compose_shader>\ngl_FragColor=vec4(undoColorTransform(outputColor),alpha);}".replace("#include <custom_compose_shader>",t);super({type:"TemporalResolveMaterial",uniforms:{inputTexture:new uo(null),accumulatedTexture:new uo(null),velocityTexture:new uo(null),lastVelocityTexture:new uo(null),samples:new uo(1),blend:new uo(.5),correction:new uo(1),exponent:new uo(1),invTexSize:new uo(new lt)},defines:{correctionRadius:1},vertexShader:"#define GLSLIFY 1\nvarying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",fragmentShader:e})}}const gu=`\n\t\tvec3 transformed;\n\n\t\t// Get the normal\n\t\t${sn.skinbase_vertex}\n\t\t${sn.beginnormal_vertex}\n\t\t${sn.skinnormal_vertex}\n\t\t${sn.defaultnormal_vertex}\n\n\t\t// Get the current vertex position\n\t\ttransformed = vec3( position );\n\t\t${sn.skinning_vertex}\n\t\tnewPosition = velocityMatrix * vec4( transformed, 1.0 );\n\n\t\t// Get the previous vertex position\n\t\ttransformed = vec3( position );\n\t\t${sn.skinbase_vertex.replace(/mat4 /g,"").replace(/getBoneMatrix/g,"getPrevBoneMatrix")}\n\t\t${sn.skinning_vertex.replace(/vec4 /g,"")}\n\t\tprevPosition = prevVelocityMatrix * vec4( transformed, 1.0 );\n\n\t\tgl_Position = newPosition;\n`;class vu extends ki{constructor(){super({uniforms:{prevVelocityMatrix:{value:new ce},velocityMatrix:{value:new ce},prevBoneTexture:{value:null},interpolateGeometry:{value:0},intensity:{value:1},boneTexture:{value:null},alphaTest:{value:0},map:{value:null},alphaMap:{value:null},opacity:{value:1}},vertexShader:`\n                    #define MAX_BONES 1024\n                    \n                    ${sn.skinning_pars_vertex}\n                    \n\t\t#ifdef USE_SKINNING\n\t\t#ifdef BONE_TEXTURE\n\t\t\tuniform sampler2D prevBoneTexture;\n\t\t\tmat4 getPrevBoneMatrix( const in float i ) {\n\t\t\t\tfloat j = i * 4.0;\n\t\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\t\ty = dy * ( y + 0.5 );\n\t\t\t\tvec4 v1 = texture2D( prevBoneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\t\tvec4 v2 = texture2D( prevBoneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\t\tvec4 v3 = texture2D( prevBoneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\t\tvec4 v4 = texture2D( prevBoneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\t\treturn bone;\n\t\t\t}\n\t\t#else\n\t\t\tuniform mat4 prevBoneMatrices[ MAX_BONES ];\n\t\t\tmat4 getPrevBoneMatrix( const in float i ) {\n\t\t\t\tmat4 bone = prevBoneMatrices[ int(i) ];\n\t\t\t\treturn bone;\n\t\t\t}\n\t\t#endif\n\t\t#endif\n\n        \n                    uniform mat4 velocityMatrix;\n                    uniform mat4 prevVelocityMatrix;\n                    uniform float interpolateGeometry;\n                    varying vec4 prevPosition;\n                    varying vec4 newPosition;\n\t\t\t\t\tvarying vec2 vHighPrecisionZW;\n        \n                    void main() {\n        \n                        ${gu}\n\n\t\t\t\t\t\tvHighPrecisionZW = gl_Position.zw;\n        \n                    }`,fragmentShader:"\n                    uniform float intensity;\n                    varying vec4 prevPosition;\n                    varying vec4 newPosition;\n\t\t\t\t\tvarying vec2 vHighPrecisionZW;\n        \n                    void main() {\n\t\t\t\t\t\t#ifdef FULL_MOVEMENT\n\t\t\t\t\t\tgl_FragColor = vec4( 1., 1., 1. - gl_FragCoord.z, 0. );\n\t\t\t\t\t\treturn;\n\t\t\t\t\t\t#endif\n\n                        vec2 pos0 = (prevPosition.xy / prevPosition.w) * 0.5 + 0.5;\n                        vec2 pos1 = (newPosition.xy / newPosition.w) * 0.5 + 0.5;\n        \n                        vec2 vel = pos1 - pos0;\n\n\t\t\t\t\t\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n                        \n                        gl_FragColor = vec4( vel, 1. - fragCoordZ, 0. );\n        \n                    }"}),this.isVelocityMaterial=!0}}const xu=new ti(0),_u=["visible","wireframe","side"];class qu extends Nc{constructor(t,e){var i,n;super("VelocityPass"),this.cachedMaterials=new WeakMap,this.lastCameraTransform={position:new Ut,quaternion:new Lt},this.visibleMeshes=[],this.renderedMeshesThisFrame=0,this.renderedMeshesLastFrame=0,this._scene=t,this._camera=e,this.renderTarget=new Ct((null==(i=window)?void 0:i.innerWidth)||1e3,(null==(n=window)?void 0:n.innerHeight)||1e3,{type:R})}setVelocityMaterialInScene(){this.renderedMeshesThisFrame=0,this.visibleMeshes=uu(this._scene);for(const i of this.visibleMeshes){var t;const n=i.material;let[r,s]=this.cachedMaterials.get(i)||[];var e;if(n!==r&&(s=new vu,s.lastMatrixWorld=new ce,i.material=s,null!=(e=i.skeleton)&&e.boneTexture&&this.saveBoneTexture(i),this.cachedMaterials.set(i,[n,s])),s.uniforms.velocityMatrix.value.multiplyMatrices(this._camera.projectionMatrix,i.modelViewMatrix),i.userData.needsUpdatedReflections||n.map instanceof Ns?("FULL_MOVEMENT"in s.defines||(s.needsUpdate=!0),s.defines.FULL_MOVEMENT=""):"FULL_MOVEMENT"in s.defines&&(delete s.defines.FULL_MOVEMENT,s.needsUpdate=!0),i.visible=this.cameraMovedThisFrame||!i.matrixWorld.equals(s.lastMatrixWorld)||i.skeleton||"FULL_MOVEMENT"in s.defines,i.material=s,i.visible){this.renderedMeshesThisFrame++;for(const t of _u)s[t]=n[t];null!=(t=i.skeleton)&&t.boneTexture&&(s.defines.USE_SKINNING="",s.defines.BONE_TEXTURE="",s.uniforms.boneTexture.value=i.skeleton.boneTexture)}}}saveBoneTexture(t){let e=t.material.uniforms.prevBoneTexture.value;if(e&&e.image.width===t.skeleton.boneTexture.width)e=t.material.uniforms.prevBoneTexture.value,e.image.data.set(t.skeleton.boneTexture.image.data);else{var i;null==(i=e)||i.dispose();const n=t.skeleton.boneTexture.image.data.slice(),r=t.skeleton.boneTexture.image.width;e=new Is(n,r,r,z,C),t.material.uniforms.prevBoneTexture.value=e,e.needsUpdate=!0}}unsetVelocityMaterialInScene(){for(const e of this.visibleMeshes){var t;e.material.isVelocityMaterial&&(e.visible=!0,e.material.lastMatrixWorld.copy(e.matrixWorld),e.material.uniforms.prevVelocityMatrix.value.multiplyMatrices(this._camera.projectionMatrix,e.modelViewMatrix),null!=(t=e.skeleton)&&t.boneTexture&&this.saveBoneTexture(e),e.material=this.cachedMaterials.get(e)[0])}}setSize(t,e){this.renderTarget.setSize(t,e)}renderVelocity(t){if(t.setRenderTarget(this.renderTarget),this.renderedMeshesThisFrame>0){const{background:e}=this._scene;this._scene.background=xu,t.render(this._scene,this._camera),this._scene.background=e}else t.clearColor()}checkCameraMoved(){const t=this.lastCameraTransform.position.distanceToSquared(this._camera.position),e=8*(1-this.lastCameraTransform.quaternion.dot(this._camera.quaternion));return(t>1e-6||e>1e-6)&&(this.lastCameraTransform.position.copy(this._camera.position),this.lastCameraTransform.quaternion.copy(this._camera.quaternion),!0)}render(t){this.cameraMovedThisFrame=this.checkCameraMoved(),this.setVelocityMaterialInScene(),(this.renderedMeshesThisFrame>0||this.renderedMeshesLastFrame>0)&&this.renderVelocity(t),this.unsetVelocityMaterialInScene(),this.renderedMeshesLastFrame=this.renderedMeshesThisFrame}}const yu=new lt;class bu extends Nc{constructor(t,e,i,n={}){super("TemporalResolvePass"),this.velocityPass=null,this.velocityResolutionScale=1,this.samples=1,this.lastCameraTransform={position:new Ut,quaternion:new Lt},this._scene=t,this._camera=e,this.renderTarget=new Ct(1,1,{minFilter:S,magFilter:S,type:R,depthBuffer:!1}),this.velocityPass=new qu(t,e),this.fullscreenMaterial=new fu(i),this.fullscreenMaterial.defines.correctionRadius=n.correctionRadius||1,n.dilation&&(this.fullscreenMaterial.defines.dilation=""),n.boxBlur&&(this.fullscreenMaterial.defines.boxBlur=""),this.setupFramebuffers(1,1),this.checkCanUseSharedVelocityTexture()}dispose(){this._scene.userData.velocityTexture===this.velocityPass.renderTarget.texture&&(delete this._scene.userData.velocityTexture,delete this._scene.userData.lastVelocityTexture),this.renderTarget.dispose(),this.accumulatedTexture.dispose(),this.fullscreenMaterial.dispose(),this.velocityPass.dispose()}setSize(t,e){this.renderTarget.setSize(t,e),this.velocityPass.setSize(t*this.velocityResolutionScale,e*this.velocityResolutionScale),this.velocityPass.renderTarget.texture.minFilter=1===this.velocityResolutionScale?w:S,this.velocityPass.renderTarget.texture.magFilter=1===this.velocityResolutionScale?w:S,this.velocityPass.renderTarget.texture.needsUpdate=!0,this.fullscreenMaterial.uniforms.invTexSize.value.set(1/t,1/e),this.setupFramebuffers(t,e)}setupFramebuffers(t,e){this.accumulatedTexture&&this.accumulatedTexture.dispose(),this.lastVelocityTexture&&this.lastVelocityTexture.dispose(),this.accumulatedTexture=new Os(t,e,z),this.accumulatedTexture.minFilter=S,this.accumulatedTexture.magFilter=S,this.accumulatedTexture.type=R,this.lastVelocityTexture=new Os(t*this.velocityResolutionScale,e*this.velocityResolutionScale,z),this.lastVelocityTexture.minFilter=1===this.velocityResolutionScale?w:S,this.lastVelocityTexture.magFilter=1===this.velocityResolutionScale?w:S,this.lastVelocityTexture.type=R,this.fullscreenMaterial.uniforms.accumulatedTexture.value=this.accumulatedTexture,this.fullscreenMaterial.uniforms.lastVelocityTexture.value=this.lastVelocityTexture,this.fullscreenMaterial.needsUpdate=!0}checkCanUseSharedVelocityTexture(){return this._scene.userData.velocityTexture&&this.velocityPass.renderTarget.texture!==this._scene.userData.velocityTexture?this.velocityPass.renderTarget.texture===this.fullscreenMaterial.uniforms.velocityTexture.value&&(this.fullscreenMaterial.uniforms.lastVelocityTexture.value=this._scene.userData.lastVelocityTexture,this.fullscreenMaterial.uniforms.velocityTexture.value=this._scene.userData.velocityTexture,this.fullscreenMaterial.needsUpdate=!0):this.velocityPass.renderTarget.texture!==this.fullscreenMaterial.uniforms.velocityTexture.value&&(this.fullscreenMaterial.uniforms.velocityTexture.value=this.velocityPass.renderTarget.texture,this.fullscreenMaterial.uniforms.lastVelocityTexture.value=this.lastVelocityTexture,this.fullscreenMaterial.needsUpdate=!0,this._scene.userData.velocityTexture||(this._scene.userData.velocityTexture=this.velocityPass.renderTarget.texture,this._scene.userData.lastVelocityTexture=this.lastVelocityTexture)),this.velocityPass.renderTarget.texture!==this.fullscreenMaterial.uniforms.velocityTexture.value}checkNeedsResample(){const t=this.lastCameraTransform.position.distanceToSquared(this._camera.position),e=8*(1-this.lastCameraTransform.quaternion.dot(this._camera.quaternion));(t>1e-6||e>1e-6)&&(this.samples=1,this.lastCameraTransform.position.copy(this._camera.position),this.lastCameraTransform.quaternion.copy(this._camera.quaternion))}render(t){this.samples++,this.checkNeedsResample(),this.fullscreenMaterial.uniforms.samples.value=this.samples,t.setRenderTarget(this.renderTarget),t.render(this.scene,this.camera),t.copyFramebufferToTexture(yu,this.accumulatedTexture),t.setRenderTarget(this.velocityPass.renderTarget),t.copyFramebufferToTexture(yu,this.lastVelocityTexture)}}const wu=function(t,e){let i=1,n=0;for(;t>0;)i/=e,n+=i*(t%e),t=~~(t/e);return n};function Mu(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}const Su="#define GLSLIFY 1\n#define MODE_DEFAULT 0\n#define MODE_REFLECTIONS 1\n#define MODE_RAW_REFLECTION 2\n#define MODE_BLURRED_REFLECTIONS 3\n#define MODE_INPUT 4\n#define MODE_BLUR_MIX 5\n#define FLOAT_EPSILON 0.00001\nuniform sampler2D inputTexture;uniform sampler2D reflectionsTexture;uniform float samples;\n#include <boxBlur>\nvoid mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 reflectionsTexel=texture2D(reflectionsTexture,vUv);ivec2 size=textureSize(reflectionsTexture,0);vec2 invTexSize=1./vec2(size.x,size.y);vec3 reflectionClr=reflectionsTexel.xyz;if(blur>FLOAT_EPSILON){vec3 blurredReflectionsColor=denoise(reflectionsTexel.rgb,reflectionsTexture,vUv,invTexSize,blur,blurSharpness,blurKernel);reflectionClr=mix(reflectionClr,blurredReflectionsColor.rgb,blur);}\n#if RENDER_MODE == MODE_DEFAULT\noutputColor=vec4(inputColor.rgb+reflectionClr,1.0);\n#endif\n#if RENDER_MODE == MODE_REFLECTIONS\noutputColor=vec4(reflectionClr,1.0);\n#endif\n#if RENDER_MODE == MODE_RAW_REFLECTION\noutputColor=vec4(reflectionsTexel.xyz,1.0);\n#endif\n#if RENDER_MODE == MODE_BLURRED_REFLECTIONS\noutputColor=vec4(blurredReflectionsTexel.xyz,1.0);\n#endif\n#if RENDER_MODE == MODE_INPUT\noutputColor=vec4(inputColor.xyz,1.0);\n#endif\n#if RENDER_MODE == MODE_BLUR_MIX\noutputColor=vec4(vec3(blur),1.0);\n#endif\n}".replace("#include <helperFunctions>",lu).replace("#include <boxBlur>","#define GLSLIFY 1\nuniform float blur;uniform float blurSharpness;uniform int blurKernel;vec3 denoise(vec3 center,sampler2D tex,vec2 uv,vec2 invTexSize,float blur,float blurSharpness,int blurKernel){vec3 color;float total;vec3 col;float weight;for(int x=-blurKernel;x<=blurKernel;x++){for(int y=-blurKernel;y<=blurKernel;y++){col=textureLod(tex,uv+vec2(x,y)*invTexSize,0.).rgb;weight=1.0-abs(dot(col-center,vec3(0.25)));weight=pow(weight,blurSharpness);color+=col*weight;total+=weight;}}return color/total;}"),Eu=["blur","blurSharpness","blurKernel"],Tu=new Xi(1);let Au;var Cu,Ru=r(907);function Pu(t){return Pu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pu(t)}function zu(t,e,i){return(e=function(t){var e=function(t,e){if("object"!==Pu(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!==Pu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Pu(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var Lu={text:"THREE.JS|SEX",textColour:"#eeeeff",floorColour:"#E6973D",xPos:-.9,xLook:-.4,yPos:-.8,yLook:-.3,zAngle:-.05,fov:120},Uu=new Ds;Uu.fog=new Us(0,1,5),Uu.add(new class extends $a{constructor(t,e){super(t,e),this.isAmbientLight=!0,this.type="AmbientLight"}});var Du=new Hi(75,window.innerWidth/window.innerHeight,.01,1e3);Du.fov=Lu.fov,Du.position.x=Lu.xPos,Du.position.y=Lu.yPos,Du.position.z=.9,Du.lookAt(new Ut(Lu.xLook,Lu.yLook,0)),Du.rotateZ(Lu.zAngle);var Iu=new Ls({powerPreference:"high-performance",antialias:!1,stencil:!1,depth:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1});Iu.shadowMap.enabled=!0,Iu.outputColorSpace=W,Iu.toneMapping=f,Iu.toneMappingExposure=2.4,Iu.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(Iu.domElement);var Nu=new class{constructor(t=null,{depthBuffer:e=!0,stencilBuffer:i=!1,multisampling:n=0,frameBufferType:r}={}){this.renderer=null,this.inputBuffer=this.createBuffer(e,i,r,n),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new Oc,this.depthTexture=null,this.passes=[],this.timer=new class{constructor(){this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(t){"undefined"!=typeof document&&void 0!==document.hidden&&(t?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=t)}get delta(){return this._delta*tu}get fixedDelta(){return this._fixedDelta*tu}set fixedDelta(t){this._fixedDelta=1e3*t}get elapsed(){return this._elapsed*tu}update(t){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(void 0!==t?t:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}handleEvent(t){document.hidden||(this.currentTime=performance.now()-this.startTime)}dispose(){this.autoReset=!1}},this.autoRenderToScreen=!0,this.setRenderer(t)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(t){const e=this.inputBuffer,i=this.multisampling;i>0&&t>0?(this.inputBuffer.samples=t,this.outputBuffer.samples=t,this.inputBuffer.dispose(),this.outputBuffer.dispose()):i!==t&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(e.depthBuffer,e.stencilBuffer,e.texture.type,t),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(t){if(this.renderer=t,null!==t){const e=t.getSize(new lt),i=t.getContext().getContextAttributes().alpha,n=this.inputBuffer.texture.type;n===T&&Sc(t)===qc&&(Ec(this.inputBuffer.texture,qc),Ec(this.outputBuffer.texture,qc),this.inputBuffer.dispose(),this.outputBuffer.dispose()),t.autoClear=!1,this.setSize(e.width,e.height);for(const e of this.passes)e.initialize(t,i,n)}}replaceRenderer(t,e=!0){const i=this.renderer,n=i.domElement.parentNode;return this.setRenderer(t),e&&null!==n&&(n.removeChild(i.domElement),n.appendChild(t.domElement)),i}createDepthTexture(){const t=this.depthTexture=new As;return this.inputBuffer.depthTexture=t,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(t.format=U,t.type=P):t.type=A,t}deleteDepthTexture(){if(null!==this.depthTexture){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const t of this.passes)t.setDepthTexture(null)}}createBuffer(t,e,i,n){const r=this.renderer,s=null===r?new lt:r.getDrawingBufferSize(new lt),a={minFilter:S,magFilter:S,stencilBuffer:e,depthBuffer:t,type:i},o=new Ct(s.width,s.height,a);return n>0&&(o.ignoreDepthForMultisampleCopy=!1,o.samples=n),i===T&&Sc(r)===qc&&Ec(o.texture,qc),o.texture.name="EffectComposer.Buffer",o.texture.generateMipmaps=!1,o}setMainScene(t){for(const e of this.passes)e.mainScene=t}setMainCamera(t){for(const e of this.passes)e.mainCamera=t}addPass(t,e){const i=this.passes,n=this.renderer,r=n.getDrawingBufferSize(new lt),s=n.getContext().getContextAttributes().alpha,a=this.inputBuffer.texture.type;if(t.setRenderer(n),t.setSize(r.width,r.height),t.initialize(n,s,a),this.autoRenderToScreen&&(i.length>0&&(i[i.length-1].renderToScreen=!1),t.renderToScreen&&(this.autoRenderToScreen=!1)),void 0!==e?i.splice(e,0,t):i.push(t),this.autoRenderToScreen&&(i[i.length-1].renderToScreen=!0),t.needsDepthTexture||null!==this.depthTexture)if(null===this.depthTexture){const e=this.createDepthTexture();for(t of i)t.setDepthTexture(e)}else t.setDepthTexture(this.depthTexture)}removePass(t){const e=this.passes,i=e.indexOf(t);if(-1!==i&&e.splice(i,1).length>0){if(null!==this.depthTexture){const i=(t,e)=>t||e.needsDepthTexture;e.reduce(i,!1)||(t.getDepthTexture()===this.depthTexture&&t.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&i===e.length&&(t.renderToScreen=!1,e.length>0&&(e[e.length-1].renderToScreen=!0))}}removeAllPasses(){const t=this.passes;this.deleteDepthTexture(),t.length>0&&(this.autoRenderToScreen&&(t[t.length-1].renderToScreen=!1),this.passes=[])}render(t){const e=this.renderer,i=this.copyPass;let n,r,s,a=this.inputBuffer,o=this.outputBuffer,l=!1;void 0===t&&(this.timer.update(),t=this.timer.delta);for(const h of this.passes)h.enabled&&(h.render(e,a,o,t,l),h.needsSwap&&(l&&(i.renderToScreen=h.renderToScreen,n=e.getContext(),r=e.state.buffers.stencil,r.setFunc(n.NOTEQUAL,1,4294967295),i.render(e,a,o,t,l),r.setFunc(n.EQUAL,1,4294967295)),s=a,a=o,o=s),h instanceof $c?l=!0:h instanceof Fc&&(l=!1))}setSize(t,e,i){const n=this.renderer,r=n.getSize(new lt);void 0!==t&&void 0!==e||(t=r.width,e=r.height),r.width===t&&r.height===e||n.setSize(t,e,i);const s=n.getDrawingBufferSize(new lt);this.inputBuffer.setSize(s.width,s.height),this.outputBuffer.setSize(s.width,s.height);for(const t of this.passes)t.setSize(s.width,s.height)}reset(){const t=this.timer.autoReset;this.dispose(),this.autoRenderToScreen=!0,this.timer.autoReset=t}dispose(){for(const t of this.passes)t.dispose();this.passes=[],null!==this.inputBuffer&&this.inputBuffer.dispose(),null!==this.outputBuffer&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}}(Iu),Ou=new class extends ru{constructor(t,e,i=mu){super("SSREffect",Su,{type:"FinalSSRMaterial",uniforms:new Map([["reflectionsTexture",new uo(null)],["blur",new uo(0)],["blurSharpness",new uo(0)],["blurKernel",new uo(0)]]),defines:new Map([["RENDER_MODE","0"]])}),this.haltonSequence=(t=>{const e=[];let i=1;const n=i+1024;for(;i<n;i++)e.push([wu(i,2)-.5,wu(i,3)-.5]);return e})(),this.haltonIndex=0,this.selection=new eu,this.lastSize=void 0,this.cubeCamera=new Wi(.001,1e3,Tu),this.usingBoxProjectedEnvMap=!1,this._scene=t,this._camera=e,i=ou({},mu,i,{boxBlur:!0,dilation:!0}),this.temporalResolvePass=new bu(t,e,"#define GLSLIFY 1\n#define INV_EULER 0.36787944117144233\nalpha=velocityDisocclusion<FLOAT_EPSILON ?(alpha+0.0075): 0.0;alpha=clamp(alpha,0.0,1.0);bool needsBlur=!didReproject||velocityDisocclusion>0.5;\n#ifdef boxBlur\nif(needsBlur)inputColor=boxBlurredColor;\n#endif\nif(alpha==1.0){outputColor=accumulatedColor;}else{float m=mix(alpha,1.0,blend);if(needsBlur)m=0.0;outputColor=accumulatedColor*m+inputColor*(1.0-m);}",i),this.uniforms.get("reflectionsTexture").value=this.temporalResolvePass.renderTarget.texture,this.reflectionsPass=new pu(this,i),this.temporalResolvePass.fullscreenMaterial.uniforms.inputTexture.value=this.reflectionsPass.renderTarget.texture,this.lastSize={width:i.width,height:i.height,resolutionScale:i.resolutionScale,velocityResolutionScale:i.velocityResolutionScale},this.setSize(i.width,i.height),this.makeOptionsReactive(i)}makeOptionsReactive(t){let e=!1;const i=this.reflectionsPass.fullscreenMaterial.uniforms,n=Object.keys(i);for(const r of Object.keys(t))Object.defineProperty(this,r,{get:()=>t[r],set(s){if(t[r]!==s||!e)switch(t[r]=s,Eu.includes(r)||this.setSize(this.lastSize.width,this.lastSize.height,!0),r){case"resolutionScale":this.setSize(this.lastSize.width,this.lastSize.height);break;case"velocityResolutionScale":this.temporalResolvePass.velocityResolutionScale=s,this.setSize(this.lastSize.width,this.lastSize.height,!0);break;case"blur":this.uniforms.get("blur").value=s;break;case"blurSharpness":this.uniforms.get("blurSharpness").value=s;break;case"blurKernel":this.uniforms.get("blurKernel").value=s;break;case"steps":this.reflectionsPass.fullscreenMaterial.defines.steps=parseInt(s),this.reflectionsPass.fullscreenMaterial.needsUpdate=e;break;case"refineSteps":this.reflectionsPass.fullscreenMaterial.defines.refineSteps=parseInt(s),this.reflectionsPass.fullscreenMaterial.needsUpdate=e;break;case"missedRays":s?this.reflectionsPass.fullscreenMaterial.defines.missedRays="":delete this.reflectionsPass.fullscreenMaterial.defines.missedRays,this.reflectionsPass.fullscreenMaterial.needsUpdate=e;break;case"correctionRadius":this.temporalResolvePass.fullscreenMaterial.defines.correctionRadius=Math.round(s),this.temporalResolvePass.fullscreenMaterial.needsUpdate=e;break;case"blend":this.temporalResolvePass.fullscreenMaterial.uniforms.blend.value=s;break;case"correction":this.temporalResolvePass.fullscreenMaterial.uniforms.correction.value=s;break;case"exponent":this.temporalResolvePass.fullscreenMaterial.uniforms.exponent.value=s;break;case"distance":i.rayDistance.value=s;default:n.includes(r)&&(i[r].value=s)}}}),this[r]=t[r];e=!0}setSize(t,e,i=!1){(i||t!==this.lastSize.width||e!==this.lastSize.height||this.resolutionScale!==this.lastSize.resolutionScale||this.velocityResolutionScale!==this.lastSize.velocityResolutionScale)&&(this.temporalResolvePass.setSize(t,e),this.reflectionsPass.setSize(t,e),this.lastSize={width:t,height:e,resolutionScale:this.resolutionScale,velocityResolutionScale:this.velocityResolutionScale})}generateBoxProjectedEnvMapFallback(t,e=new Ut,i=new Ut,n=512){this.cubeCamera.renderTarget.dispose(),this.cubeCamera.renderTarget=new Xi(n),this.cubeCamera.position.copy(e),this.cubeCamera.updateMatrixWorld(),this.cubeCamera.update(t,this._scene),Au||(Au=new wn(t),Au.compileCubemapShader());const r=Au.fromCubemap(this.cubeCamera.renderTarget.texture).texture;r.minFilter=S,r.magFilter=S;const s=this.reflectionsPass.fullscreenMaterial;return function(t,e,i){t.defines.BOX_PROJECTED_ENV_MAP="",t.uniforms.envMapPosition={value:e},t.uniforms.envMapSize={value:i};const n=new RegExp(Mu("vec3 worldNormal = inverseTransformDirection ( normal , viewMatrix ) ;").replaceAll(" ","\\s*"),"g"),r=new RegExp(Mu("reflectVec = inverseTransformDirection ( reflectVec , viewMatrix ) ;").replaceAll(" ","\\s*"),"g");t.vertexShader="varying vec3 vWorldPosition;\n"+t.vertexShader.replace("#include <worldpos_vertex>","\n#if defined( USE_ENVMAP ) || defined(  ) || defined ( USE_SHADOWMAP )\n    vec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n\n    #ifdef BOX_PROJECTED_ENV_MAP\n        vWorldPosition = worldPosition.xyz;\n    #endif\n#endif\n"),t.fragmentShader="\n#ifdef BOX_PROJECTED_ENV_MAP\n    uniform vec3 envMapSize;\n    uniform vec3 envMapPosition;\n    varying vec3 vWorldPosition;\n    \n    vec3 parallaxCorrectNormal( vec3 v, vec3 cubeSize, vec3 cubePos ) {\n        vec3 nDir = normalize( v );\n\n        vec3 rbmax = ( .5 * cubeSize + cubePos - vWorldPosition ) / nDir;\n        vec3 rbmin = ( -.5 * cubeSize + cubePos - vWorldPosition ) / nDir;\n\n        vec3 rbminmax;\n\n        rbminmax.x = ( nDir.x > 0. ) ? rbmax.x : rbmin.x;\n        rbminmax.y = ( nDir.y > 0. ) ? rbmax.y : rbmin.y;\n        rbminmax.z = ( nDir.z > 0. ) ? rbmax.z : rbmin.z;\n\n        float correction = min( min( rbminmax.x, rbminmax.y ), rbminmax.z );\n        vec3 boxIntersection = vWorldPosition + nDir * correction;\n        \n        return boxIntersection - cubePos;\n    }\n#endif\n\n"+t.fragmentShader.replace("#include <envmap_physical_pars_fragment>",sn.envmap_physical_pars_fragment).replace(n,"vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n                \n#ifdef BOX_PROJECTED_ENV_MAP\n    worldNormal = parallaxCorrectNormal( worldNormal, envMapSize, envMapPosition );\n#endif\n").replace(r,"reflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n                \n#ifdef BOX_PROJECTED_ENV_MAP\n    reflectVec = parallaxCorrectNormal( reflectVec, envMapSize, envMapPosition );\n#endif\n")}(s,e,i),s.fragmentShader=s.fragmentShader.replace("vec3 worldPos","worldPos").replace("varying vec3 vWorldPosition;","vec3 worldPos;"),s.uniforms.envMapPosition.value.copy(e),s.uniforms.envMapSize.value.copy(i),du(s,r,n),this.usingBoxProjectedEnvMap=!0,r}setIBLRadiance(t,e){this._scene.traverse((i=>{if(i.material){var n;const r=null==(n=e.properties.get(i.material))?void 0:n.uniforms;r&&"disableIBLRadiance"in r&&(r.disableIBLRadiance.value=t)}}))}deleteBoxProjectedEnvMapFallback(){const t=this.reflectionsPass.fullscreenMaterial;t.uniforms.envMap.value=null,t.fragmentShader=t.fragmentShader.replace("worldPos = ","vec3 worldPos = "),delete t.defines.BOX_PROJECTED_ENV_MAP,t.needsUpdate=!0,this.usingBoxProjectedEnvMap=!1}dispose(){super.dispose(),this.reflectionsPass.dispose(),this.temporalResolvePass.dispose()}update(t,e){if(!this.usingBoxProjectedEnvMap&&this._scene.environment){const e=this.reflectionsPass.fullscreenMaterial;let i=null;if(this._scene.traverse((e=>{if(!i&&e.material&&!e.material.envMap){const n=t.properties.get(e.material);"envMap"in n&&n.envMap instanceof Tt&&(i=n.envMap)}})),i){const t=this._scene.environment.image.height;du(e,i,t)}}this.haltonIndex=(this.haltonIndex+1)%this.haltonSequence.length;const[i,n]=this.haltonSequence[this.haltonIndex],{width:r,height:s}=this.lastSize;this.temporalResolvePass.velocityPass.render(t),this._camera.setViewOffset&&this._camera.setViewOffset(r,s,i,n,r,s),this.reflectionsPass.render(t,e),this.temporalResolvePass.render(t),this._camera.clearViewOffset()}static patchDirectEnvIntensity(t=0){sn.envmap_physical_pars_fragment=0===t?sn.envmap_physical_pars_fragment.replace("vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {","vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) { return vec3(0.0);"):sn.envmap_physical_pars_fragment.replace("vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );","vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness ) * "+t.toFixed(5)+";")}}(Uu,Du,(zu(Cu={enabled:!0,correctionRadius:4,blend:.95,correction:.2,blur:0,blurSharpness:0,blurKernel:.001,distance:20,intensity:1,exponent:1.75,maxRoughness:.99,jitter:.5,jitterRoughness:.1,roughnessFade:1,fade:5,thickness:10,ior:1.75},"fade",20),zu(Cu,"steps",60),zu(Cu,"refineSteps",6),zu(Cu,"maxDepthDifference",50),zu(Cu,"missedRays",!1),Cu)),Fu=new class extends ru{constructor({blendFunction:t=28,luminanceThreshold:e=.9,luminanceSmoothing:i=.025,mipmapBlur:n=!1,intensity:r=1,radius:s=.85,levels:a=8,kernelSize:o=3,resolutionScale:l=.5,width:h=Hc.AUTO_SIZE,height:c=Hc.AUTO_SIZE,resolutionX:u=h,resolutionY:d=c}={}){super("BloomEffect","#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D map;\n#else\nuniform lowp sampler2D map;\n#endif\nuniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=texture2D(map,uv)*intensity;}",{blendFunction:t,uniforms:new Map([["map",new uo(null)],["intensity",new uo(r)]])}),this.renderTarget=new Ct(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.blurPass=new Zc({kernelSize:o}),this.luminancePass=new Jc({colorOutput:!0}),this.luminanceMaterial.threshold=e,this.luminanceMaterial.smoothing=i,this.mipmapBlurPass=new Qc,this.mipmapBlurPass.enabled=n,this.mipmapBlurPass.radius=s,this.mipmapBlurPass.levels=a,this.uniforms.get("map").value=n?this.mipmapBlurPass.texture:this.renderTarget.texture;const p=this.resolution=new Hc(this,u,d,l);p.addEventListener("change",(t=>this.setSize(p.baseWidth,p.baseHeight)))}get texture(){return this.mipmapBlurPass.enabled?this.mipmapBlurPass.texture:this.renderTarget.texture}getTexture(){return this.texture}getResolution(){return this.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(t){this.resolution.preferredWidth=t}get height(){return this.resolution.height}set height(t){this.resolution.preferredHeight=t}get dithering(){return this.blurPass.dithering}set dithering(t){this.blurPass.dithering=t}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(t){this.blurPass.kernelSize=t}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(t){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(t){this.uniforms.get("intensity").value=t}getIntensity(){return this.intensity}setIntensity(t){this.intensity=t}getResolutionScale(){return this.resolution.scale}setResolutionScale(t){this.resolution.scale=t}update(t,e,i){const n=this.renderTarget,r=this.luminancePass;r.enabled?(r.render(t,e),this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(t,r.renderTarget):this.blurPass.render(t,r.renderTarget,n)):this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(t,e):this.blurPass.render(t,e,n)}setSize(t,e){const i=this.resolution;i.setBaseSize(t,e),this.renderTarget.setSize(i.width,i.height),this.blurPass.resolution.copy(i),this.luminancePass.setSize(t,e),this.mipmapBlurPass.setSize(t,e)}initialize(t,e,i){this.blurPass.initialize(t,e,i),this.luminancePass.initialize(t,e,i),this.mipmapBlurPass.initialize(t,e,i),void 0!==i&&(this.renderTarget.texture.type=i,Sc(t)===qc&&Ec(this.renderTarget.texture,qc))}}({intensity:.5,luminanceThreshold:.4,luminanceSmoothing:.7,kernelSize:5,mipmapBlur:!0}),Bu=new class extends ru{constructor({blendFunction:t,technique:e=0,eskil:i=!1,offset:n=.5,darkness:r=.5}={}){super("VignetteEffect","uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;\n#if VIGNETTE_TECHNIQUE == 0\nfloat d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));\n#else\nvec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));\n#endif\noutputColor=vec4(color,inputColor.a);}",{blendFunction:t,defines:new Map([["VIGNETTE_TECHNIQUE",e.toFixed(0)]]),uniforms:new Map([["offset",new uo(n)],["darkness",new uo(r)]])})}get technique(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))}set technique(t){this.technique!==t&&(this.defines.set("VIGNETTE_TECHNIQUE",t.toFixed(0)),this.setChanged())}get eskil(){return 1===this.technique}set eskil(t){this.technique=t?1:0}getTechnique(){return this.technique}setTechnique(t){this.technique=t}get offset(){return this.uniforms.get("offset").value}set offset(t){this.uniforms.get("offset").value=t}getOffset(){return this.offset}setOffset(t){this.offset=t}get darkness(){return this.uniforms.get("darkness").value}set darkness(t){this.uniforms.get("darkness").value=t}getDarkness(){return this.darkness}setDarkness(t){this.darkness=t}}({darkness:.5675}),ku=new class extends ru{constructor({blendFunction:t=30}={}){super("FXAAEffect","#if THREE_REVISION < 143\n#define luminance(v) linearToRelativeLuminance(v)\n#endif\n#define QUALITY(q) ((q) < 5 ? 1.0 : ((q) > 5 ? ((q) < 10 ? 2.0 : ((q) < 11 ? 4.0 : 8.0)) : 1.5))\n#define ONE_OVER_TWELVE 0.08333333333333333\nvarying vec2 vUvDown;varying vec2 vUvUp;varying vec2 vUvLeft;varying vec2 vUvRight;varying vec2 vUvDownLeft;varying vec2 vUvUpRight;varying vec2 vUvUpLeft;varying vec2 vUvDownRight;vec4 fxaa(const in vec4 inputColor,const in vec2 uv){float lumaCenter=luminance(inputColor.rgb);float lumaDown=luminance(texture2D(inputBuffer,vUvDown).rgb);float lumaUp=luminance(texture2D(inputBuffer,vUvUp).rgb);float lumaLeft=luminance(texture2D(inputBuffer,vUvLeft).rgb);float lumaRight=luminance(texture2D(inputBuffer,vUvRight).rgb);float lumaMin=min(lumaCenter,min(min(lumaDown,lumaUp),min(lumaLeft,lumaRight)));float lumaMax=max(lumaCenter,max(max(lumaDown,lumaUp),max(lumaLeft,lumaRight)));float lumaRange=lumaMax-lumaMin;if(lumaRange<max(EDGE_THRESHOLD_MIN,lumaMax*EDGE_THRESHOLD_MAX)){return inputColor;}float lumaDownLeft=luminance(texture2D(inputBuffer,vUvDownLeft).rgb);float lumaUpRight=luminance(texture2D(inputBuffer,vUvUpRight).rgb);float lumaUpLeft=luminance(texture2D(inputBuffer,vUvUpLeft).rgb);float lumaDownRight=luminance(texture2D(inputBuffer,vUvDownRight).rgb);float lumaDownUp=lumaDown+lumaUp;float lumaLeftRight=lumaLeft+lumaRight;float lumaLeftCorners=lumaDownLeft+lumaUpLeft;float lumaDownCorners=lumaDownLeft+lumaDownRight;float lumaRightCorners=lumaDownRight+lumaUpRight;float lumaUpCorners=lumaUpRight+lumaUpLeft;float edgeHorizontal=(abs(-2.0*lumaLeft+lumaLeftCorners)+abs(-2.0*lumaCenter+lumaDownUp)*2.0+abs(-2.0*lumaRight+lumaRightCorners));float edgeVertical=(abs(-2.0*lumaUp+lumaUpCorners)+abs(-2.0*lumaCenter+lumaLeftRight)*2.0+abs(-2.0*lumaDown+lumaDownCorners));bool isHorizontal=(edgeHorizontal>=edgeVertical);float stepLength=isHorizontal?texelSize.y:texelSize.x;float luma1=isHorizontal?lumaDown:lumaLeft;float luma2=isHorizontal?lumaUp:lumaRight;float gradient1=abs(luma1-lumaCenter);float gradient2=abs(luma2-lumaCenter);bool is1Steepest=gradient1>=gradient2;float gradientScaled=0.25*max(gradient1,gradient2);float lumaLocalAverage=0.0;if(is1Steepest){stepLength=-stepLength;lumaLocalAverage=0.5*(luma1+lumaCenter);}else{lumaLocalAverage=0.5*(luma2+lumaCenter);}vec2 currentUv=uv;if(isHorizontal){currentUv.y+=stepLength*0.5;}else{currentUv.x+=stepLength*0.5;}vec2 offset=isHorizontal?vec2(texelSize.x,0.0):vec2(0.0,texelSize.y);vec2 uv1=currentUv-offset*QUALITY(0);vec2 uv2=currentUv+offset*QUALITY(0);float lumaEnd1=luminance(texture2D(inputBuffer,uv1).rgb);float lumaEnd2=luminance(texture2D(inputBuffer,uv2).rgb);lumaEnd1-=lumaLocalAverage;lumaEnd2-=lumaLocalAverage;bool reached1=abs(lumaEnd1)>=gradientScaled;bool reached2=abs(lumaEnd2)>=gradientScaled;bool reachedBoth=reached1&&reached2;if(!reached1){uv1-=offset*QUALITY(1);}if(!reached2){uv2+=offset*QUALITY(1);}if(!reachedBoth){for(int i=2;i<SAMPLES;++i){if(!reached1){lumaEnd1=luminance(texture2D(inputBuffer,uv1).rgb);lumaEnd1=lumaEnd1-lumaLocalAverage;}if(!reached2){lumaEnd2=luminance(texture2D(inputBuffer,uv2).rgb);lumaEnd2=lumaEnd2-lumaLocalAverage;}reached1=abs(lumaEnd1)>=gradientScaled;reached2=abs(lumaEnd2)>=gradientScaled;reachedBoth=reached1&&reached2;if(!reached1){uv1-=offset*QUALITY(i);}if(!reached2){uv2+=offset*QUALITY(i);}if(reachedBoth){break;}}}float distance1=isHorizontal?(uv.x-uv1.x):(uv.y-uv1.y);float distance2=isHorizontal?(uv2.x-uv.x):(uv2.y-uv.y);bool isDirection1=distance1<distance2;float distanceFinal=min(distance1,distance2);float edgeThickness=(distance1+distance2);bool isLumaCenterSmaller=lumaCenter<lumaLocalAverage;bool correctVariation1=(lumaEnd1<0.0)!=isLumaCenterSmaller;bool correctVariation2=(lumaEnd2<0.0)!=isLumaCenterSmaller;bool correctVariation=isDirection1?correctVariation1:correctVariation2;float pixelOffset=-distanceFinal/edgeThickness+0.5;float finalOffset=correctVariation?pixelOffset:0.0;float lumaAverage=ONE_OVER_TWELVE*(2.0*(lumaDownUp+lumaLeftRight)+lumaLeftCorners+lumaRightCorners);float subPixelOffset1=clamp(abs(lumaAverage-lumaCenter)/lumaRange,0.0,1.0);float subPixelOffset2=(-2.0*subPixelOffset1+3.0)*subPixelOffset1*subPixelOffset1;float subPixelOffsetFinal=subPixelOffset2*subPixelOffset2*SUBPIXEL_QUALITY;finalOffset=max(finalOffset,subPixelOffsetFinal);vec2 finalUv=uv;if(isHorizontal){finalUv.y+=finalOffset*stepLength;}else{finalUv.x+=finalOffset*stepLength;}return texture2D(inputBuffer,finalUv);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=fxaa(inputColor,uv);}",{vertexShader:"varying vec2 vUvDown;varying vec2 vUvUp;varying vec2 vUvLeft;varying vec2 vUvRight;varying vec2 vUvDownLeft;varying vec2 vUvUpRight;varying vec2 vUvUpLeft;varying vec2 vUvDownRight;void mainSupport(const in vec2 uv){vUvDown=uv+vec2(0.0,-1.0)*texelSize;vUvUp=uv+vec2(0.0,1.0)*texelSize;vUvRight=uv+vec2(1.0,0.0)*texelSize;vUvLeft=uv+vec2(-1.0,0.0)*texelSize;vUvDownLeft=uv+vec2(-1.0,-1.0)*texelSize;vUvUpRight=uv+vec2(1.0,1.0)*texelSize;vUvUpLeft=uv+vec2(-1.0,1.0)*texelSize;vUvDownRight=uv+vec2(1.0,-1.0)*texelSize;}",blendFunction:t,defines:new Map([["EDGE_THRESHOLD_MIN","0.0312"],["EDGE_THRESHOLD_MAX","0.125"],["SUBPIXEL_QUALITY","0.75"],["SAMPLES","12"]])})}get minEdgeThreshold(){return Number(this.defines.get("EDGE_THRESHOLD_MIN"))}set minEdgeThreshold(t){this.defines.set("EDGE_THRESHOLD_MIN",t.toFixed(12)),this.setChanged()}get maxEdgeThreshold(){return Number(this.defines.get("EDGE_THRESHOLD_MAX"))}set maxEdgeThreshold(t){this.defines.set("EDGE_THRESHOLD_MAX",t.toFixed(12)),this.setChanged()}get subpixelQuality(){return Number(this.defines.get("SUBPIXEL_QUALITY"))}set subpixelQuality(t){this.defines.set("SUBPIXEL_QUALITY",t.toFixed(12)),this.setChanged()}get samples(){return Number(this.defines.get("SAMPLES"))}set samples(t){this.defines.set("SAMPLES",t.toFixed(0)),this.setChanged()}};Nu.addPass(new jc(Uu,Du)),Nu.addPass(new class extends Nc{constructor(t,...e){super("EffectPass"),this.fullscreenMaterial=new zc(null,null,null,t),this.listener=t=>this.handleEvent(t),this.effects=[],this.setEffects(e),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(t){for(const e of this.effects)e.mainScene=t}set mainCamera(t){this.fullscreenMaterial.copyCameraSettings(t);for(const e of this.effects)e.mainCamera=t}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(t){this.fullscreenMaterial.encodeOutput=t}get dithering(){return this.fullscreenMaterial.dithering}set dithering(t){const e=this.fullscreenMaterial;e.dithering=t,e.needsUpdate=!0}setEffects(t){for(const t of this.effects)t.removeEventListener("change",this.listener);this.effects=t.sort(((t,e)=>e.attributes-t.attributes));for(const t of this.effects)t.addEventListener("change",this.listener)}updateMaterial(){const t=new class{constructor(){this.shaderParts=new Map([[Tc.FRAGMENT_HEAD,null],[Tc.FRAGMENT_MAIN_UV,null],[Tc.FRAGMENT_MAIN_IMAGE,null],[Tc.VERTEX_HEAD,null],[Tc.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=0,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=yc}};let e=0;for(const i of this.effects)if(9===i.blendMode.blendFunction)t.attributes|=1&i.getAttributes();else{if(0!=(t.attributes&i.getAttributes()&2))throw new Error(`Convolution effects cannot be merged (${i.name})`);Kc("e"+e++,i,t)}let i=t.shaderParts.get(Tc.FRAGMENT_HEAD),n=t.shaderParts.get(Tc.FRAGMENT_MAIN_IMAGE),r=t.shaderParts.get(Tc.FRAGMENT_MAIN_UV);const s=/\bblend\b/g;for(const e of t.blendModes.values())i+=e.getShaderCode().replace(s,`blend${e.blendFunction}`)+"\n";0!=(1&t.attributes)?(t.readDepth&&(n="float depth = readDepth(UV);\n\n\t"+n),this.needsDepthTexture=null===this.getDepthTexture()):this.needsDepthTexture=!1,t.colorSpace===qc&&(n+="color0 = sRGBToLinear(color0);\n\t"),t.uvTransformation?(r="vec2 transformedUv = vUv;\n"+r,t.defines.set("UV","transformedUv")):t.defines.set("UV","vUv"),t.shaderParts.set(Tc.FRAGMENT_HEAD,i),t.shaderParts.set(Tc.FRAGMENT_MAIN_IMAGE,n),t.shaderParts.set(Tc.FRAGMENT_MAIN_UV,r);for(const[e,i]of t.shaderParts)null!==i&&t.shaderParts.set(e,i.trim().replace(/^#/,"\n#"));this.skipRendering=0===e,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(t)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(t,e=3200){this.fullscreenMaterial.depthBuffer=t,this.fullscreenMaterial.depthPacking=e;for(const i of this.effects)i.setDepthTexture(t,e)}render(t,e,i,n,r){for(const i of this.effects)i.update(t,e,n);if(!this.skipRendering||this.renderToScreen){const r=this.fullscreenMaterial;r.inputBuffer=e.texture,r.time+=n*this.timeScale,t.setRenderTarget(this.renderToScreen?null:i),t.render(this.scene,this.camera)}}setSize(t,e){this.fullscreenMaterial.setSize(t,e);for(const i of this.effects)i.setSize(t,e)}initialize(t,e,i){this.renderer=t;for(const n of this.effects)n.initialize(t,e,i);this.updateMaterial(),void 0!==i&&i!==T&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const t of this.effects)t.removeEventListener("change",this.listener),t.dispose()}handleEvent(t){"change"===t.type&&this.recompile()}}(Du,ku,Ou,Bu,Fu));var Vu=new rn(20,20),Hu=new za({roughness:.3,metalness:1,color:parseInt(Lu.floorColour.slice(1),16)}),Gu=new Ui(Vu,Hu);Gu.rotateX(-Math.PI/2),Gu.position.y=-1,Uu.add(Gu),Gu.receiveShadow=!0;var Wu=new class extends $a{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(De.DEFAULT_UP),this.updateMatrix(),this.target=new De,this.shadow=new no}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}(16777215,1);Wu.castShadow=!0,Uu.add(Wu),Wu.position.y=15,Wu.position.z=10,Wu.position.x=2.5,Uu.environment=new mc(Iu).fromScene(Uu).texture;var ju=new class extends Ya{constructor(t){super(t)}load(t,e,i,n){const r=this,s=new Ja(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(t,(function(t){const i=r.parse(JSON.parse(t));e&&e(i)}),i,n)}parse(t){return new mo(t)}},Xu=ju.parse(e),Yu=new go("THREE.JS\nSEX",{font:Xu,size:1,height:1,curveSegments:12});Yu.center(new Ut(.5,.5,.5));var Ku=new za({roughness:.3,metalness:1,envMapIntensity:.4,flatShading:!1,color:15658751}),Zu=new Ui(Yu,Ku);Uu.add(Zu),Zu.castShadow=!0;var Ju=new Ut;Yu.boundingBox.getSize(Ju),Zu.position.x=.5*Ju.x-1,Zu.position.y=.5*Ju.y-1,Zu.position.z=.5*Ju.z-1+.1;var $u=new Ru.Pane;function Qu(){Ou.correction=0,setTimeout((function(){Ou.correction=.2}),100)}$u.addInput(Lu,"text",{label:"text (lines separated with |)"}).on("change",(function(){var t=new go(Lu.text.replace(/\|/g,"\n"),{font:Xu,size:1,height:1,curveSegments:12});t.center(new Ut(.5,.5,.5));var e=new Ut;t.boundingBox.getSize(e),Zu.position.x=.5*e.x-1,Zu.position.y=.5*e.y-1,Zu.position.z=.5*e.z-1+.1,Zu.geometry=t,Qu()})),$u.addInput(Lu,"textColour",{label:"text colour"}).on("change",(function(){Zu.material.color.setHex(parseInt(Lu.textColour.slice(1),16)),Uu.environment=new mc(Iu).fromScene(Uu).texture,Qu()})),$u.addInput(Lu,"floorColour",{label:"floor colour"}).on("change",(function(){Gu.material.color.setHex(parseInt(Lu.floorColour.slice(1),16)),Uu.environment=new mc(Iu).fromScene(Uu).texture,Qu()})),$u.addInput(Lu,"fov",{label:"field of view",min:20,max:170,step:1}).on("change",(function(){Du.fov=Lu.fov,Qu()})),$u.addInput(Lu,"xPos",{label:"camera x position",min:-2,max:5,step:.1}).on("change",(function(){Du.position.x=Lu.xPos,Du.lookAt(new Ut(Lu.xLook,Lu.yLook,0)),Du.rotateZ(Lu.zAngle*(Math.PI/180)),Qu()})),$u.addInput(Lu,"xLook",{label:"camera look at x position",min:-2,max:5,step:.1}).on("change",(function(){Du.lookAt(new Ut(Lu.xLook,Lu.yLook,0)),Du.rotateZ(Lu.zAngle*(Math.PI/180)),Qu()})),$u.addInput(Lu,"yPos",{label:"camera y position",min:-.9,max:5,step:.1}).on("change",(function(){Du.position.y=Lu.yPos,Du.lookAt(new Ut(Lu.xLook,Lu.yLook,0)),Du.rotateZ(Lu.zAngle*(Math.PI/180)),Qu()})),$u.addInput(Lu,"yLook",{label:"camera look at y position",min:-.9,max:5,step:.1}).on("change",(function(){Du.lookAt(new Ut(Lu.xLook,Lu.yLook,0)),Du.rotateZ(Lu.zAngle*(Math.PI/180)),Qu()})),$u.addInput(Lu,"zAngle",{label:"camera roll angle",min:-180,max:180,step:.05}).on("change",(function(){Du.lookAt(new Ut(Lu.xLook,Lu.yLook,0)),Du.rotateZ(Lu.zAngle*(Math.PI/180)),Qu()})),$u.addSeparator(),$u.addButton({title:"View on GitHub"}).on("click",(function(){location.href="https://github.com/SneezingCactus/threejs-intercourse-generator"})),function t(){Nu.render(),requestAnimationFrame(t)}()})()})();